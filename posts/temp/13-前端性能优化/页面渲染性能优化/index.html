<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>页面渲染性能优化 | Bablvsj's Blog</title><meta name=keywords content="前端性能优化"><meta name=description content="浏览器渲染过程 浏览器解析 HTML，生成 DOM Tree（Parse HTML）。 浏览器解析 CSS，生成 CSSOM（CSS Object Model）Tree。 JavaScript 会"><meta name=author content="Lvsj"><link rel=canonical href=https://bablvsj.github.io/posts/temp/13-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/><link crossorigin=anonymous href=/assets/css/stylesheet.4042000fa2684f3af41ed8c08949567fce091421c6b1ca8041acafa54d196a62.css integrity="sha256-QEIAD6JoTzr0HtjAiUlWf84JFCHGscqAQayvpU0ZamI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="页面渲染性能优化"><meta property="og:description" content="浏览器渲染过程 浏览器解析 HTML，生成 DOM Tree（Parse HTML）。 浏览器解析 CSS，生成 CSSOM（CSS Object Model）Tree。 JavaScript 会"><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/temp/13-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-03-01T17:11:35+08:00"><meta property="article:modified_time" content="2020-03-01T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="页面渲染性能优化"><meta name=twitter:description content="浏览器渲染过程 浏览器解析 HTML，生成 DOM Tree（Parse HTML）。 浏览器解析 CSS，生成 CSSOM（CSS Object Model）Tree。 JavaScript 会"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"文章","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"页面渲染性能优化","item":"https://bablvsj.github.io/posts/temp/13-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"页面渲染性能优化","name":"页面渲染性能优化","description":"浏览器渲染过程 浏览器解析 HTML，生成 DOM Tree（Parse HTML）。 浏览器解析 CSS，生成 CSSOM（CSS Object Model）Tree。 JavaScript 会","keywords":["前端性能优化"],"articleBody":"浏览器渲染过程 浏览器解析 HTML，生成 DOM Tree（Parse HTML）。\n浏览器解析 CSS，生成 CSSOM（CSS Object Model）Tree。\nJavaScript 会通过 DOM API 和 CSSOM API 来操作 DOM Tree 和 CSS Rule Tree，浏览器将 DOM Tree 和 CSSOM Tree 合成渲染树（Render Tree）。\n布局（Layout）：根据生成的 Render Tree，进行回流，以计算每个节点的几何信息（位置、大小、字体样式等等）。\n绘制（Painting）：根据渲染树和回流得到的几何信息，得到每个节点的绝对像素。\n展示（Display）：将像素发送给图形处理器（GPU），展示在页面上。\n页面渲染技术方案总览 服务端渲染：\n后端同步渲染、同构直出、BigPipe。 客户端渲染：\nJavaScript 渲染：静态化、前后端分离、单页面应用\nWeb App：React、Vue、PWA\nHybrid App：PhoneGap 、AppCan 等\n跨平台开发：RN 、Flutter 、小程序等。\n原生 App：iOS 、Android\n建议：\n依赖业务形式、依赖团队规模、依赖技术水平。 静态化技术方案 静态化是使动态化的网站生成静态 HTML 页面以供用户更好访问的技术，一般分为纯动态化和伪动态化。\n技术优势：\n提高了页面访问速度，降低了服务器的负担，因为访问页面时不需要每次去访问数据库。\n提高网站内容被搜索引擎搜索到的几率，因为搜索引擎更喜欢静态页面。\n网站更稳定，如果后端程序、数据库出现问题，会直接影响网站的正常访问，而静态化页面有缓存，更不容易出现问题。\n技术不足：\n服务器存储占用问题，因为页面量级在增加，要占用大量硬盘空间。\n静态页面中的链接更新问题会有死链或者错误链接问题。\n技术实现：\n跑定时任务，将已有的动态内容进行重定，生成静态的 HTML 页面。\n利用模板技术，将模板引擎中模板字符替换为从数据库字段中取出来的值， 同时生成 HTML 文件。\n协作方式：\n前端统一写好带有交互的完整静态页面。\n后端拆分出静态页面文件，并嵌套在后端模板文件中。\n选型建议：后端研发人员充分，又需要考虑用户体验、服务器负载的业务。\n前后端分离技术与实现 前后端分离是指研发人员分离、业务代码分离、后端实现业务接口，前端渲染页面。\n技术实现：\n后端只负责功能接口实现，提供按照约定的数据格式并封装好的 API 接口。\n前端负责业务具体实现，获取到 API 接口数据后，进行页面模板拼接和渲染，独立上线。\n协作方式：\n前端负责实现页面前端交互，根据后端 API 接口拼装前端模板。\n后端专注于业务功能实现和 API 接口封装。\n技术优势：\n团队更加专注\n提升了开发效率\n增加代码可维护性\n技术架构：\n后端架构：Java、C++、PHP、 + Nginx，使用微服务（比如 Dubbo 等）等实现业务的解耦，所有的服务使用某种协议提供不同的服务（比如 JSF 等） 。\n前端架构：使用 Angular、React、Vue 前端框架并部署页面至 CDN。\n前端架构 2：使用 Angular、React、Vue 前端框架并部署在 Node Server。\n技术不足：\n因为前端需要负责一大部分业务逻辑实现，和服务端同步、静态化，需要前端人力非常多。\n页面数据异步渲染，不利于 SEO，搜索引擎更喜欢纯静态页面。\n选型建议：\n这是大型互联网公司正在采用的开发模式，一句话，如果考虑用户体验，以及前端人力够用，就可以积极采用。 单页面应用技术方案 单页应用（single-page application，缩写 SPA），通过动态重写当前页面，来与用户交互，而非传统的从服务器重新加载整个新页面。这种方法在使用过程中不需要重新加载页面，避免了页面之间切换打断用户体验，使应用程序更像一个桌面应用程序。\n技术优点：\n不错的加载速度：用户往往感觉页面加载非常快，因为一进入页面就能看到页面元素；\n良好的交互体验：进行局部渲染，避免不必要的页面间跳转和重复渲染；\n前后端职责分离：前端进行页面交互逻辑，后端负责业务逻辑；\n减轻服务器负载：服务器只处理数据接口输出，不用考虑页面模板渲染和 HTML 展示。\n技术缺点：\n开发成本相对较高\n首次页面加载时间过多\nSEO 难度比较大\n技术实现：\n使用 React、Vue 框架可以很好的。 BigPipe 简介和工作模式 BigPipe 通过将页面加载到称为 Pagelet 的小部件中，来加快页面渲染速度，并允许浏览器在 PHB 服务器呈现页面的同时，一直请求页面不同区块的结构，类似一个“流”传输管道。\n技术实现：\n浏览器从服务器请求页面。\nServer 迅速呈现一个包含 标记的页面框架，以及一个包含空 div 元素的主体，这些元素充当 Pagelet 的容器。由于该页面尚未完成，因此与浏览器的 HTTP 连接保持打开状态。\n浏览器将开始下载 bigpipe.js 文件，然后它将开始呈现页面。\nPHP 服务器进程仍在执行，并且一次构建每个 Pagelet 。Pagelet 完成后，其结果将在","wordCount":"4128","inLanguage":"en","datePublished":"2020-03-01T17:11:35+08:00","dateModified":"2020-03-01T17:11:35+08:00","author":{"@type":"Person","name":"Lvsj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/temp/13-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=主页><span>主页</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=时间轴><span>时间轴</span></a></li><li><a href=https://bablvsj.github.io/categories title=分类><span>分类</span></a></li><li><a href=https://bablvsj.github.io/tags title=标签><span>标签</span></a></li><li><a href=https://bablvsj.github.io/about title=关于><span>关于</span></a></li><li><a href=https://bablvsj.github.io/search title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>页面渲染性能优化</h1><div class=post-meta><span title='2020-03-01 17:11:35 +0800 +0800'>2020/03/01</span>&nbsp;·&nbsp;9 min&nbsp;·&nbsp;Lvsj<ul class=post-tags-meta><a href=https://bablvsj.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>前端性能优化</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e6%b5%8f%e8%a7%88%e5%99%a8%e6%b8%b2%e6%9f%93%e8%bf%87%e7%a8%8b aria-label=浏览器渲染过程>浏览器渲染过程</a></li><li><a href=#%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%e6%8a%80%e6%9c%af%e6%96%b9%e6%a1%88%e6%80%bb%e8%a7%88 aria-label=页面渲染技术方案总览>页面渲染技术方案总览</a></li><li><a href=#%e9%9d%99%e6%80%81%e5%8c%96%e6%8a%80%e6%9c%af%e6%96%b9%e6%a1%88 aria-label=静态化技术方案>静态化技术方案</a></li><li><a href=#%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e6%8a%80%e6%9c%af%e4%b8%8e%e5%ae%9e%e7%8e%b0 aria-label=前后端分离技术与实现>前后端分离技术与实现</a></li><li><a href=#%e5%8d%95%e9%a1%b5%e9%9d%a2%e5%ba%94%e7%94%a8%e6%8a%80%e6%9c%af%e6%96%b9%e6%a1%88 aria-label=单页面应用技术方案>单页面应用技术方案</a></li><li><a href=#bigpipe-%e7%ae%80%e4%bb%8b%e5%92%8c%e5%b7%a5%e4%bd%9c%e6%a8%a1%e5%bc%8f aria-label="BigPipe 简介和工作模式">BigPipe 简介和工作模式</a></li><li><a href=#%e5%90%8c%e6%9e%84%e7%9b%b4%e5%87%ba%e6%8a%80%e6%9c%af%e6%96%b9%e6%a1%88 aria-label=同构直出技术方案>同构直出技术方案</a></li><li><a href=#pwa-%e6%8a%80%e6%9c%af%e6%96%b9%e6%a1%88%e5%92%8c%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af aria-label="PWA 技术方案和实现思路">PWA 技术方案和实现思路</a></li><li><a href=#%e9%a1%b5%e9%9d%a2%e5%8a%a0%e8%bd%bd%e7%ad%96%e7%95%a5%e4%bc%98%e5%8c%96 aria-label=页面加载策略优化>页面加载策略优化</a><ul><li><a href=#%e6%87%92%e5%8a%a0%e8%bd%bd aria-label=懒加载>懒加载</a></li><li><a href=#%e9%a2%84%e5%8a%a0%e8%bd%bd aria-label=预加载>预加载</a></li><li><a href=#%e9%a2%84%e6%b8%b2%e6%9f%93 aria-label=预渲染>预渲染</a></li><li><a href=#%e6%8c%89%e9%9c%80%e5%8a%a0%e8%bd%bd aria-label=按需加载>按需加载</a></li></ul></li><li><a href=#%e6%8e%a5%e5%8f%a3%e6%9c%8d%e5%8a%a1%e8%b0%83%e7%94%a8%e4%bc%98%e5%8c%96 aria-label=接口服务调用优化>接口服务调用优化</a></li><li><a href=#%e6%8e%a5%e5%8f%a3%e7%bc%93%e5%ad%98%e7%ad%96%e7%95%a5%e4%bc%98%e5%8c%96 aria-label=接口缓存策略优化>接口缓存策略优化</a></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=浏览器渲染过程>浏览器渲染过程<a hidden class=anchor aria-hidden=true href=#浏览器渲染过程>#</a></h2><p><img loading=lazy src=https://img.smyhvae.com/20210114_2115.png alt></p><ol><li><p>浏览器解析 HTML，生成 DOM Tree（Parse HTML）。</p></li><li><p>浏览器解析 CSS，生成 CSSOM（CSS Object Model）Tree。</p></li><li><p>JavaScript 会通过 DOM API 和 CSSOM API 来操作 DOM Tree 和 CSS Rule Tree，浏览器将 DOM Tree 和 CSSOM Tree 合成渲染树（Render Tree）。</p></li><li><p>布局（Layout）：根据生成的 Render Tree，进行回流，以计算每个节点的几何信息（位置、大小、字体样式等等）。</p></li><li><p>绘制（Painting）：根据渲染树和回流得到的几何信息，得到每个节点的绝对像素。</p></li><li><p>展示（Display）：将像素发送给图形处理器（GPU），展示在页面上。</p></li></ol><h2 id=页面渲染技术方案总览>页面渲染技术方案总览<a hidden class=anchor aria-hidden=true href=#页面渲染技术方案总览>#</a></h2><p><strong>服务端渲染</strong>：</p><ul><li>后端同步渲染、同构直出、BigPipe。</li></ul><p><strong>客户端渲染</strong>：</p><ul><li><p>JavaScript 渲染：静态化、前后端分离、单页面应用</p></li><li><p>Web App：React、Vue、PWA</p></li><li><p>Hybrid App：PhoneGap 、AppCan 等</p></li><li><p>跨平台开发：RN 、Flutter 、小程序等。</p></li><li><p>原生 App：iOS 、Android</p></li></ul><p>建议：</p><ul><li>依赖业务形式、依赖团队规模、依赖技术水平。</li></ul><h2 id=静态化技术方案>静态化技术方案<a hidden class=anchor aria-hidden=true href=#静态化技术方案>#</a></h2><p>静态化是使动态化的网站生成静态 HTML 页面以供用户更好访问的技术，一般分为纯动态化和伪动态化。</p><p>技术优势：</p><ul><li><p>提高了页面访问速度，降低了服务器的负担，因为访问页面时不需要每次去访问数据库。</p></li><li><p>提高网站内容被搜索引擎搜索到的几率，因为搜索引擎更喜欢静态页面。</p></li><li><p>网站更稳定，如果后端程序、数据库出现问题，会直接影响网站的正常访问，而静态化页面有缓存，更不容易出现问题。</p></li></ul><p>技术不足：</p><ul><li><p>服务器存储占用问题，因为页面量级在增加，要占用大量硬盘空间。</p></li><li><p>静态页面中的链接更新问题会有死链或者错误链接问题。</p></li></ul><p>技术实现：</p><ul><li><p>跑定时任务，将已有的动态内容进行重定，生成静态的 HTML 页面。</p></li><li><p>利用模板技术，将模板引擎中模板字符替换为从数据库字段中取出来的值， 同时生成 HTML 文件。</p></li></ul><p>协作方式：</p><ul><li><p>前端统一写好带有交互的完整静态页面。</p></li><li><p>后端拆分出静态页面文件，并嵌套在后端模板文件中。</p></li></ul><p>选型建议：后端研发人员充分，又需要考虑用户体验、服务器负载的业务。</p><h2 id=前后端分离技术与实现>前后端分离技术与实现<a hidden class=anchor aria-hidden=true href=#前后端分离技术与实现>#</a></h2><p>前后端分离是指研发人员分离、业务代码分离、后端实现业务接口，前端渲染页面。</p><p>技术实现：</p><ul><li><p>后端只负责功能接口实现，提供按照约定的数据格式并封装好的 API 接口。</p></li><li><p>前端负责业务具体实现，获取到 API 接口数据后，进行页面模板拼接和渲染，独立上线。</p></li></ul><p>协作方式：</p><ul><li><p>前端负责实现页面前端交互，根据后端 API 接口拼装前端模板。</p></li><li><p>后端专注于业务功能实现和 API 接口封装。</p></li></ul><p>技术优势：</p><ul><li><p>团队更加专注</p></li><li><p>提升了开发效率</p></li><li><p>增加代码可维护性</p></li></ul><p>技术架构：</p><ul><li><p>后端架构：Java、C++、PHP、 + Nginx，使用微服务（比如 Dubbo 等）等实现业务的解耦，所有的服务使用某种协议提供不同的服务（比如 JSF 等） 。</p></li><li><p>前端架构：使用 Angular、React、Vue 前端框架并部署页面至 CDN。</p></li><li><p>前端架构 2：使用 Angular、React、Vue 前端框架并部署在 Node Server。</p></li></ul><p>技术不足：</p><ul><li><p>因为前端需要负责一大部分业务逻辑实现，和服务端同步、静态化，需要前端人力非常多。</p></li><li><p>页面数据异步渲染，不利于 SEO，搜索引擎更喜欢纯静态页面。</p></li></ul><p>选型建议：</p><ul><li>这是大型互联网公司正在采用的开发模式，一句话，如果考虑用户体验，以及前端人力够用，就可以积极采用。</li></ul><h2 id=单页面应用技术方案>单页面应用技术方案<a hidden class=anchor aria-hidden=true href=#单页面应用技术方案>#</a></h2><p>单页应用（single-page application，缩写 SPA），通过动态重写当前页面，来与用户交互，而非传统的从服务器重新加载整个新页面。这种方法在使用过程中不需要重新加载页面，避免了页面之间切换打断用户体验，使应用程序更像一个桌面应用程序。</p><p>技术优点：</p><ul><li><p>不错的加载速度：用户往往感觉页面加载非常快，因为一进入页面就能看到页面元素；</p></li><li><p>良好的交互体验：进行局部渲染，避免不必要的页面间跳转和重复渲染；</p></li><li><p>前后端职责分离：前端进行页面交互逻辑，后端负责业务逻辑；</p></li><li><p>减轻服务器负载：服务器只处理数据接口输出，不用考虑页面模板渲染和 HTML 展示。</p></li></ul><p>技术缺点：</p><ul><li><p>开发成本相对较高</p></li><li><p>首次页面加载时间过多</p></li><li><p>SEO 难度比较大</p></li></ul><p>技术实现：</p><ul><li>使用 React、Vue 框架可以很好的。</li></ul><h2 id=bigpipe-简介和工作模式>BigPipe 简介和工作模式<a hidden class=anchor aria-hidden=true href=#bigpipe-简介和工作模式>#</a></h2><p>BigPipe 通过将页面加载到称为 Pagelet 的小部件中，来加快页面渲染速度，并允许浏览器在 PHB 服务器呈现页面的同时，一直请求页面不同区块的结构，类似一个“流”传输管道。</p><p><strong>技术实现</strong>：</p><ol><li><p>浏览器从服务器请求页面。</p></li><li><p>Server 迅速呈现一个包含<head>标记的页面框架，以及一个包含空 div 元素的主体，这些元素充当 Pagelet 的容器。由于该页面尚未完成，因此与浏览器的 HTTP 连接保持打开状态。</p></li><li><p>浏览器将开始下载 bigpipe.js 文件，然后它将开始呈现页面。</p></li><li><p>PHP 服务器进程仍在执行，并且一次构建每个 Pagelet 。Pagelet 完成后，其结果将在<code>&lt;script> BigPipe.onArrive（…）&lt;/ script></code> 标记内发送到浏览器。</p></li><li><p>浏览器将收到的 html 代码注入正确的位置。如果小页面需要任何 CSS 资源，则也将下载这些 CSS 资源。</p></li><li><p>接收完所有的页面集之后，浏览器将开始加载那些页面集所需的所有外部 JavaScript 文件。</p></li><li><p>下载 JavaScript 后，浏览器将执行所有内联 JavaScript。</p></li></ol><h2 id=同构直出技术方案>同构直出技术方案<a hidden class=anchor aria-hidden=true href=#同构直出技术方案>#</a></h2><p>一套代码既可以在服务端运行又可以在客户端运行，这就是同构（Universal）。</p><p>技术优势：</p><ul><li><p>性能: 降低首屏渲染时间</p></li><li><p>SEO: 服务端渲染对搜索引擎的爬取有着天然的优势</p></li><li><p>兼容性: 有效规避客户端兼容性问题，比如白屏</p></li><li><p>代码同构：直接上线两个版本，利于灾备。</p></li></ul><p>技术实现：</p><ul><li><p>next.js：服务器端渲染 React 组件框架（参考查看：https://nextjs.org/）, React 采用 ReactDOMServer 调用 renderToString() 方法。</p></li><li><p>gatsbyjs：服务端 React 渲染框架（参考查看： <a href=https://www.gatsbyjs.org/>https://www.gatsbyjs.org/</a>）。</p></li><li><p>nuxt.js：服务器端渲染 Vue 组件框架（参考查看：https://nuxtjs.org/）, Vue 采用 vue-server-renderer 调用 renderToString() 方法。</p></li></ul><p>协作方式：</p><ul><li><p>后端专注于业务功能实现和 API 接口封装。</p></li><li><p>前端负责实现页面前端交互，根据后端 API 接口拼装前端模板，页面渲染，以及服务器维护。</p></li></ul><p>选型建议：</p><ul><li><p>前端要处理 Node server 的机器环境、代码部署、日志、容灾、监控等以往后端人员需要具备运维知识，前端人员的综合能力要求会比以往要高。</p></li><li><p>前端项目开发周期变长了，需要事先和产品、运营沟通排期问题。</p></li></ul><h2 id=pwa-技术方案和实现思路>PWA 技术方案和实现思路<a hidden class=anchor aria-hidden=true href=#pwa-技术方案和实现思路>#</a></h2><p>Progressive Web App，简称 PWA，PWA 应用是使用特定技术和标准模式来开发的 Web 应用，这将同时赋予它们 Web 应用和原生应用的特性。</p><p>技术优势：</p><ul><li><p>用户可以用手机屏幕启动应用，即使在离线状态或者弱网下，通过事先缓存的资源，也可正常加载运行当前应用，可以完全消除对网络的依赖，从而给用户非常可靠的体验。</p></li><li><p>因为预先缓存了资源，部分资源无须经过网络，即秒开页面。</p></li><li><p>和移动设备上的原生应用一样，具有沉浸式的用户体验。</p></li><li><p>可以给用户发送离线推送消息。</p></li></ul><p>技术实现：</p><ul><li><p>全站改造成 HTTPS，没有 HTTPS 就没有 Service Worker。</p></li><li><p>应用 Service Worker 技术提升性能，离线提供静态资源文件，提升首屏用户体验。</p></li><li><p>使用 App Manifest。</p></li><li><p>最后可以考虑离线消息推送等功能。</p></li></ul><p>浏览器兼容性：</p><ul><li><p>ServiceWorkerGlobalScope API：88%</p></li><li><p>Web App Manifest 83%</p></li></ul><h2 id=页面加载策略优化>页面加载策略优化<a hidden class=anchor aria-hidden=true href=#页面加载策略优化>#</a></h2><ul><li><p>懒加载</p></li><li><p>预加载</p></li><li><p>预渲染</p></li><li><p>按需加载</p></li></ul><p>下面具体展开讲讲。</p><h3 id=懒加载>懒加载<a hidden class=anchor aria-hidden=true href=#懒加载>#</a></h3><p>懒加载也叫延迟加载，指的是长网页中延迟加载特定元素（可以是图片，也可以是 JS/CSS 文件，当然也可以是 JavaScript 的特定函数和方法，以下简称“懒加载元素”）。</p><p>好处：可以减少当前屏无效资源的加载。</p><p>技术实现举例：把页面上“懒加载元素”src 属性设置为空字符，把真实的 src 属性写在 data-lazy 属性中，当页面滚动的时候监听 scroll 事件，如果“懒加载元素”在可视区域内，就把图片的 src 属性或者文件 URL 路径设置成 data-lazy 属性值。</p><h3 id=预加载>预加载<a hidden class=anchor aria-hidden=true href=#预加载>#</a></h3><p>可以使用预加载让浏览器来预先加载某些资源（比如图片、JS/CSS/模板），而这些资源是在将来才会被使用到的。简单来说，就是将所需资源提前加载到浏览器本地，这样后面在需要使用的时候就可以直接从浏览器缓存中取了，而不用再重新开始加载。</p><p>使用场景：如果你希望这个资源能尽快显示给用户，就可以使用预加载。</p><p>好处：减少用户后续加载资源等待的时间。</p><p><strong>技术实现举例</strong>：</p><ol><li>HTML 标签：</li></ol><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=font-weight:700>img</span> <span style=color:#007f7f>src</span>=<span style=color:#0ff;font-weight:700>&#34;https://xxx.jpg&#34;</span> <span style=color:#007f7f>style</span>=<span style=color:#0ff;font-weight:700>&#34;display: none&#34;</span> /&gt;
</span></span></code></pre></td></tr></table></div></div><p>2、使用 Image 对象：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> image = <span style=color:#fff;font-weight:700>new</span> Image();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>image.src = <span style=color:#0ff;font-weight:700>&#39;https://xxx.jpg&#39;</span>;
</span></span></code></pre></td></tr></table></div></div><p>3、使用 preload、prefetch 和 preconnect：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=font-weight:700>link</span> <span style=color:#007f7f>rel</span>=<span style=color:#0ff;font-weight:700>“preload”</span> <span style=color:#007f7f>href</span>=<span style=color:#0ff;font-weight:700>“src/style.css”</span> <span style=color:#007f7f>as</span>=<span style=color:#0ff;font-weight:700>“style”</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=font-weight:700>link</span> <span style=color:#007f7f>rel</span>=<span style=color:#0ff;font-weight:700>&#34;prefetch&#34;</span> <span style=color:#007f7f>href</span>=<span style=color:#0ff;font-weight:700>&#34;scr/image.png&#34;</span> /&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=font-weight:700>link</span> <span style=color:#007f7f>rel</span>=<span style=color:#0ff;font-weight:700>&#34;dns-prefetch&#34;</span> <span style=color:#007f7f>href</span>=<span style=color:#0ff;font-weight:700>&#34;https://my.com&#34;</span> /&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=font-weight:700>link</span> <span style=color:#007f7f>rel</span>=<span style=color:#0ff;font-weight:700>&#34;preconnect&#34;</span> <span style=color:#007f7f>href</span>=<span style=color:#0ff;font-weight:700>&#34;https://my.com&#34;</span> <span style=color:#007f7f>crossorigin</span> /&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=预渲染>预渲染<a hidden class=anchor aria-hidden=true href=#预渲染>#</a></h3><p>有一种预加载组件的方式就是提前渲染它。在页面中渲染组件，但是并不在页面中展示。也就是渲染完成后，先隐藏起来，用的时候再展示。</p><p>实现举例：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=font-weight:700>link</span> <span style=color:#007f7f>rel</span>=<span style=color:#0ff;font-weight:700>&#34;prerender&#34;</span> <span style=color:#007f7f>href</span>=<span style=color:#0ff;font-weight:700>&#34;https://my.com&#34;</span> /&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=按需加载>按需加载<a hidden class=anchor aria-hidden=true href=#按需加载>#</a></h3><ul><li><p>常规按需加载（如 JS 原生、jQuery）</p></li><li><p>不同 App 按需加载（如 JS-SDK 脚本文件）</p></li><li><p>不同设备按需加载（如 PC 端和 HTML5 端样式文件）</p></li><li><p>不同分辨率按需加载（CSS Media Query）</p></li></ul><p>React 异步加载举例：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> componentA = (location, callback) =&gt; {
</span></span><span style=display:flex><span>    require.ensure(
</span></span><span style=display:flex><span>        [],
</span></span><span style=display:flex><span>        (require) =&gt; {
</span></span><span style=display:flex><span>            callback(<span style=color:#fff;font-weight:700>null</span>, require(<span style=color:#0ff;font-weight:700>&#39;modules/componentA&#39;</span>));
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#0ff;font-weight:700>&#39;componentA&#39;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> componentB = (location, callback) =&gt; {
</span></span><span style=display:flex><span>    require.ensure(
</span></span><span style=display:flex><span>        [],
</span></span><span style=display:flex><span>        (require) =&gt; {
</span></span><span style=display:flex><span>            callback(<span style=color:#fff;font-weight:700>null</span>, require(<span style=color:#0ff;font-weight:700>&#39;modules/componentB&#39;</span>));
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#0ff;font-weight:700>&#39;componentB&#39;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>&lt;Router history={history}&gt;
</span></span><span style=display:flex><span>    &lt;Route path=<span style=color:#0ff;font-weight:700>&#34;/&#34;</span> component={App}&gt;
</span></span><span style=display:flex><span>        &lt;Route path=<span style=color:#0ff;font-weight:700>&#34;componentA&#34;</span> getComponent={componentA}&gt;&lt;<span style=color:red>/Route&gt;</span>
</span></span><span style=display:flex><span>        &lt;Route path=<span style=color:#0ff;font-weight:700>&#34;componentB&#34;</span> getComponent={componentB}&gt;&lt;<span style=color:red>/Route&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:red>/Route&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:red>/Router&gt;;</span>
</span></span></code></pre></td></tr></table></div></div><p>Vue 异步加载举例：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> Vue from <span style=color:#0ff;font-weight:700>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> App from <span style=color:#0ff;font-weight:700>&#39;./App.vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> VueRouter from <span style=color:#0ff;font-weight:700>&#39;vue-router&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Vue.use(VueRouter);
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> componentA = resolve =&gt; require([<span style=color:#0ff;font-weight:700>&#39;src/a.vue&#39;</span> ], resolve);
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> componentB = resolve =&gt; require([<span style=color:#0ff;font-weight:700>&#39;src/b.vue&#39;</span> ], resolve);
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> router = <span style=color:#fff;font-weight:700>new</span> VueRouter({
</span></span><span style=display:flex><span>    routes: [{path:<span style=color:#0ff;font-weight:700>&#34;a”,name:&#34;</span>/a<span style=color:red>”</span>,component:componentA},
</span></span><span style=display:flex><span>     {path:<span style=color:#0ff;font-weight:700>&#34;b”,name:&#34;</span>/b<span style=color:red>”</span>,component:componentB}]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>new</span> Vue({
</span></span><span style=display:flex><span>    el: <span style=color:#0ff;font-weight:700>&#39;#app&#39;</span>,
</span></span><span style=display:flex><span>    router: router,
</span></span><span style=display:flex><span>    render: h =&gt; h(App)
</span></span><span style=display:flex><span>})
</span></span></code></pre></td></tr></table></div></div><h2 id=接口服务调用优化>接口服务调用优化<a hidden class=anchor aria-hidden=true href=#接口服务调用优化>#</a></h2><p>1、接口合并：一个页面的众多业务接口和依赖的第三方接口，合并为一个部署在集群的接口统一调用，以减少页面接口请求数。</p><p>2、接口上 CDN：主要基于接口性能考虑，我们可以把<strong>不需要实时更新的接口同步至 CDN</strong>，等此接口内容变更之后自动同步至 CDN 集群上。如果一定时间内未请求到数据，会用源站接口再次请求。</p><p>3、接口域名上 CDN：增强可用性、稳定性。</p><p>4、接口降级：核心接口进行降级用基础接口进行业务实现，比如千人千面的推荐接口，在大促时间点可以直接运营编辑的数据。另外如果接口无访问，建议使用兜底数据。</p><p>5、接口监控：监控接口成功率，不只是常说的 TP99，也包括弱网、超时、网络异常、网络切换等一段情况的监控情况。排查出来问题后，需要联合后端、运维、网络岗位人员一并解决。</p><h2 id=接口缓存策略优化>接口缓存策略优化<a hidden class=anchor aria-hidden=true href=#接口缓存策略优化>#</a></h2><p>1、Ajax/fetch 缓存：前端请求时候带上 cache，依赖浏览器本身缓存机制。</p><p>2、本地缓存：异步接口数据优先使用本地 localStorage 中的缓存数据。</p><p>3、多次请求：接口数据本地无 localStorage 缓存数据，重新再次发出 ajax 请求。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>前端性能优化</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/temp/13-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BC%98%E5%8C%96/><span class=title>« Prev</span><br><span>静态资源优化</span></a>
<a class=next href=https://bablvsj.github.io/posts/temp/01-html/03-%E5%88%9D%E8%AF%86html/><span class=title>Next »</span><br><span>03-初识HTML</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>本站由</span><img width=60 src=/images/upyun.png>提供CDN加速/云存储服务</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>