<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>js 执行机制 宏任务微任务 | Bablvsj's Blog</title><meta name=keywords content="前端疑难杂症"><meta name=description content="js执行机制 说出结果并说出why 这道题考察的是，js的任务执行流程，对宏任务和微任务的理解 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25"><meta name=author content="Lvsj"><link rel=canonical href=https://bablvsj.github.io/posts/tech/frontend/01-%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/js-%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6-%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%BE%AE%E4%BB%BB%E5%8A%A1/><link crossorigin=anonymous href=/assets/css/stylesheet.26af23b8b1c472aadb220beab8420315b9b18975751422bfb4256bd5bcdce878.css integrity="sha256-Jq8juLHEcqrbIgvquEIDFbmxiXV1FCK/tCVr1bzc6Hg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="js 执行机制 宏任务微任务"><meta property="og:description" content="js执行机制 说出结果并说出why 这道题考察的是，js的任务执行流程，对宏任务和微任务的理解 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25"><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/tech/frontend/01-%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/js-%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6-%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%BE%AE%E4%BB%BB%E5%8A%A1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-01T17:11:35+08:00"><meta property="article:modified_time" content="2020-02-01T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="js 执行机制 宏任务微任务"><meta name=twitter:description content="js执行机制 说出结果并说出why 这道题考察的是，js的任务执行流程，对宏任务和微任务的理解 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"文章","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"js 执行机制 宏任务微任务","item":"https://bablvsj.github.io/posts/tech/frontend/01-%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/js-%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6-%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%BE%AE%E4%BB%BB%E5%8A%A1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"js 执行机制 宏任务微任务","name":"js 执行机制 宏任务微任务","description":"js执行机制 说出结果并说出why 这道题考察的是，js的任务执行流程，对宏任务和微任务的理解 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25","keywords":["前端疑难杂症"],"articleBody":"js执行机制 说出结果并说出why 这道题考察的是，js的任务执行流程，对宏任务和微任务的理解\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 console.log(\"start\"); setTimeout(() =\u003e { console.log(\"setTimeout1\"); //入宏任务1 }, 0); (async function foo() { console.log(\"async 1\"); await asyncFunction(); console.log(\"async2\"); // 入微任务2 })().then(console.log(\"foo.then\")); async function asyncFunction() { console.log(\"asyncFunction\"); setTimeout(() =\u003e { console.log(\"setTimeout2\"); // 入宏任务2 }, 0); new Promise((res) =\u003e { console.log(\"promise1\"); res(\"promise2\"); }).then(console.log); //// 入微任务1 } console.log(\"end\"); start =\u003e async 1 =\u003e asyncFunction =\u003e promise1 =\u003e foo.then =\u003e end =\u003e promise2 =\u003e async2 =\u003e setTimeout1 =\u003e setTimeout2 提示：\nscript标签算一个宏任务所以最开始就执行了 async await 在await之后的代码都会被放到微任务队列中去 开始执行：\n最开始碰到 console.log(“start”); 直接执行并打印出 start 往下走，遇到一个 setTimeout1 就放到宏任务队列 碰到立即执行函数 foo， 打印出 async 1 遇到 await 堵塞队列，先 执行await的函数 执行 asyncFunction 函数， 打印出 asyncFunction 遇到第二个 setTimeout2， 放到宏任务队列 new Promise 立即执行，打印出 promise1 执行到 res(“promise2”) 函数调用，就是Promise.then。放到微任务队列 asyncFunction函数就执行完毕， 把后面的打印 async2 会放到微任务队列 然后打印出立即执行函数的then方法 foo.then 最后执行打印 end 开始执行微任务的队列 打印出第一个 promise2 然后打印第二个 async2 微任务执行完毕，执行宏任务 打印第一个 setTimeout1 执行第二个宏任务 打印 setTimeout2、 就此，函数执行完毕 ","wordCount":"496","inLanguage":"en","datePublished":"2020-02-01T17:11:35+08:00","dateModified":"2020-02-01T17:11:35+08:00","author":{"@type":"Person","name":"Lvsj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/tech/frontend/01-%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/js-%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6-%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%BE%AE%E4%BB%BB%E5%8A%A1/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=主页><span>主页</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=时间轴><span>时间轴</span></a></li><li><a href=https://bablvsj.github.io/tags title=标签><span>标签</span></a></li><li><a href=https://bablvsj.github.io/about title=关于><span>关于</span></a></li><li><a href=https://bablvsj.github.io/search title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>js 执行机制 宏任务微任务</h1><div class=post-meta><span title='2020-02-01 17:11:35 +0800 +0800'>2020/02/01</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Lvsj<ul class=post-tags-meta><a href=https://bablvsj.github.io/tags/%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/>前端疑难杂症</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#js%e6%89%a7%e8%a1%8c%e6%9c%ba%e5%88%b6-%e8%af%b4%e5%87%ba%e7%bb%93%e6%9e%9c%e5%b9%b6%e8%af%b4%e5%87%bawhy aria-label="js执行机制 说出结果并说出why">js执行机制 说出结果并说出why</a></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=js执行机制-说出结果并说出why>js执行机制 说出结果并说出why<a hidden class=anchor aria-hidden=true href=#js执行机制-说出结果并说出why>#</a></h2><p>这道题考察的是，js的任务执行流程，对宏任务和微任务的理解</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>console.log(<span style=color:#0ff;font-weight:700>&#34;start&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>setTimeout(() =&gt; {
</span></span><span style=display:flex><span>  console.log(<span style=color:#0ff;font-weight:700>&#34;setTimeout1&#34;</span>); <span style=color:#007f7f>//入宏任务1
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>}, <span style=color:#ff0;font-weight:700>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#fff;font-weight:700>async</span> <span style=color:#fff;font-weight:700>function</span> foo() {
</span></span><span style=display:flex><span>  console.log(<span style=color:#0ff;font-weight:700>&#34;async 1&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>await</span> asyncFunction();        
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  console.log(<span style=color:#0ff;font-weight:700>&#34;async2&#34;</span>);   <span style=color:#007f7f>// 入微任务2
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>
</span></span><span style=display:flex><span>})().then(console.log(<span style=color:#0ff;font-weight:700>&#34;foo.then&#34;</span>)); 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>async</span> <span style=color:#fff;font-weight:700>function</span> asyncFunction() {
</span></span><span style=display:flex><span>  console.log(<span style=color:#0ff;font-weight:700>&#34;asyncFunction&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  setTimeout(() =&gt; {
</span></span><span style=display:flex><span>    console.log(<span style=color:#0ff;font-weight:700>&#34;setTimeout2&#34;</span>);   <span style=color:#007f7f>// 入宏任务2
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>  }, <span style=color:#ff0;font-weight:700>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>new</span> <span style=color:#fff;font-weight:700>Promise</span>((res) =&gt; {
</span></span><span style=display:flex><span>    console.log(<span style=color:#0ff;font-weight:700>&#34;promise1&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    res(<span style=color:#0ff;font-weight:700>&#34;promise2&#34;</span>);
</span></span><span style=display:flex><span>  }).then(console.log); <span style=color:#007f7f>//// 入微任务1
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>console.log(<span style=color:#0ff;font-weight:700>&#34;end&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>start =&gt; <span style=color:#fff;font-weight:700>async</span> <span style=color:#ff0;font-weight:700>1</span> =&gt; asyncFunction =&gt; promise1 =&gt; foo.then =&gt; end =&gt; promise2 =&gt; async2 =&gt; setTimeout1 =&gt; setTimeout2
</span></span></code></pre></td></tr></table></div></div><p>提示：</p><ol><li>script标签算一个宏任务所以最开始就执行了</li><li>async await 在await之后的代码都会被放到微任务队列中去</li></ol><p><strong>开始执行</strong>：</p><ul><li>最开始碰到 console.log(&ldquo;start&rdquo;); 直接执行并打印出 <code>start</code></li><li>往下走，遇到一个 setTimeout1 就放到<code>宏任务队列</code></li><li>碰到立即执行函数 foo， 打印出 <code>async 1</code></li><li>遇到 await 堵塞队列，先 <code>执行await的函数</code></li><li>执行 asyncFunction 函数， 打印出 <code>asyncFunction</code></li><li>遇到第二个 setTimeout2， <code>放到宏任务队列</code></li><li>new Promise 立即执行，打印出 <code>promise1</code></li><li>执行到 res(&ldquo;promise2&rdquo;) 函数调用，就是Promise.then。<code>放到微任务队列</code></li><li>asyncFunction函数就执行完毕， 把后面的打印 async2 会放到<code>微任务队列</code></li><li>然后打印出立即执行函数的then方法 <code>foo.then</code></li><li>最后执行打印 <code>end</code></li><li>开始执行微任务的队列 打印出第一个 <code>promise2</code></li><li>然后打印第二个 <code>async2</code></li><li>微任务执行完毕，执行宏任务 打印第一个 <code>setTimeout1</code></li><li>执行第二个宏任务 打印 <code>setTimeout2</code>、</li><li>就此，函数执行完毕</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/>前端疑难杂症</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/tech/frontend/01-%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/common.js-%E4%B8%8E-es6-module/><span class=title>« Prev</span><br><span>Common.js 与 ES6 Module</span></a>
<a class=next href=https://bablvsj.github.io/posts/tech/frontend/01-%E5%89%8D%E7%AB%AF%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/4-this%E6%8C%87%E5%90%91applycallbind/><span class=title>Next »</span><br><span>this指向、apply、call、bind</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>本站由</span><img width=60 src=/images/upyun.png>提供CDN加速/云存储服务</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>