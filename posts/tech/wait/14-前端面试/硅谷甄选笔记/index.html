<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>浏览器 | Bablvsj&#39;s Blog</title>
<meta name="keywords" content="面试题集">
<meta name="description" content="浏览器 - Bablvsj&#39;s Blog">
<meta name="author" content="">
<link rel="canonical" href="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5525cc669fcb4f094a55bfc3ebfc5a6e73445e090010c66ab49c2cad14735f57.css" integrity="sha256-VSXMZp/LTwlKVb/D6/xabnNEXgkAEMZqtJwsrRRzX1c=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://bablvsj.github.io/img/Q.gif">
<link rel="apple-touch-icon" href="https://bablvsj.github.io/Q.gif">
<link rel="mask-icon" href="https://bablvsj.github.io/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="stylesheet" href="/css/syntax.css">


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="浏览器" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-01T17:11:35+08:00" />
<meta property="article:modified_time" content="2020-01-01T17:11:35+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="浏览器"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "文章",
      "item": "https://bablvsj.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "浏览器",
      "item": "https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "浏览器",
  "name": "浏览器",
  "description": "",
  "keywords": [
    "面试题集"
  ],
  "articleBody": "硅谷甄选 技术栈包含: vue3+TypeScript+vue-router+pinia+element-plus+axios+echarts 等技术栈。\n一、vue3 组件通信方式 通信仓库地址: https://gitee.com/jch1011/vue3_communication.git\n不管是 vue2 还是 vue3,组件通信方式很重要,不管是项目还是面试都是经常用到的知识点。 比如:vue2 组件通信方式\nprops: 可以实现父子组件、子父组件、甚至兄弟组件通信 自定义事件: 可以实现子父组件通信 全局事件总线$bus: 可以实现任意组件通信 pubsub: 发布订阅模式实现任意组件通信 vuex: 集中式状态管理容器，实现任意组件通信 ref: 父组件获取子组件实例 VC,获取子组件的响应式数据以及方法 slot: 插槽(默认插槽、具名插槽、作用域插槽)实现父子组件通信…….. 1.1 props props 可以实现父子组件通信,在 vue3 中我们可以通过 defineProps 获取父组件传递的数据。且在组件内部不需要引入 defineProps 方法可以直接使用！\n父组件给子组件传递数据\n\u003cChild info=\"我爱祖国\" :money=\"money\"\u003e\u003c/Child\u003e 子组件获取父组件传递数据:方式 1\nlet props = defineProps({ info: { type: String, //接受的数据类型 default: '默认参数', //接受默认数据 }, money: { type: Number, default: 0, }, }) 子组件获取父组件传递数据:方式 2\nlet props = defineProps(['info', 'money']) 子组件获取到 props 数据就可以在模板中使用了,但是切记 props 是只读的(只能读取，不能修改)\n1.2 自定义事件 在 vue 框架中事件分为两种:一种是原生的 DOM 事件，另外一种自定义事件。\n原生 DOM 事件可以让用户与网页进行交互，比如 click、dbclick、change、mouseenter、mouseleave….\n自定义事件可以实现子组件给父组件传递数据\n1.2.1 原生 DOM 事件 代码如下:\n\u003cpre @click=\"handler\"\u003e 我是祖国的老花骨朵 \u003c/pre \u003e 当前代码级给 pre 标签绑定原生 DOM 事件点击事件,默认会给事件回调注入 event 事件对象。当然点击事件想注入多个参数可以按照下图操作。但是切记注入的事件对象务必叫做$event.\n\u003cdiv @click=\"handler1(1,2,3,$event)\"\u003e我要传递多个参数\u003c/div\u003e 在 vue3 框架 click、dbclick、change(这类原生 DOM 事件),不管是在标签、自定义标签上(组件标签)都是原生 DOM 事件。\n1.2.2 自定义事件 自定义事件可以实现子组件给父组件传递数据.在项目中是比较常用的。\n比如在父组件内部给子组件(Event2)绑定一个自定义事件\n\u003cEvent2 @xxx=\"handler3\"\u003e\u003c/Event2\u003e 在 Event2 子组件内部触发这个自定义事件\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003e我是子组件2\u003c/h1\u003e \u003cbutton @click=\"handler\"\u003e点击我触发xxx自定义事件\u003c/button\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e let $emit = defineEmits(['xxx']) const handler = () =\u003e { $emit('xxx', '法拉利', '茅台') } \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e 我们会发现在 script 标签内部,使用了 defineEmits 方法，此方法是 vue3 提供的方法,不需要引入直接使用。defineEmits 方法执行，传递一个数组，数组元素即为将来组件需要触发的自定义事件类型，此方执行会返回一个$emit 方法用于触发自定义事件。\n当点击按钮的时候，事件回调内部调用$emit 方法去触发自定义事件,第一个参数为触发事件类型，第二个、三个、N 个参数即为传递给父组件的数据。\n需要注意的是:代码如下\n\u003cEvent2 @xxx=\"handler3\" @click=\"handler\"\u003e\u003c/Event2\u003e 正常说组件标签书写@click 应该为原生 DOM 事件,但是如果子组件内部通过 defineEmits 定义就变为自定义事件了\nlet $emit = defineEmits(['xxx', 'click']) 1.3 全局事件总线 全局事件总线可以实现任意组件通信，在 vue2 中可以根据 VM 与 VC 关系推出全局事件总线。\n但是在 vue3 中没有 Vue 构造函数，也就没有 Vue.prototype.以及组合式 API 写法没有 this，\n那么在 Vue3 想实现全局事件的总线功能就有点不现实啦，如果想在 Vue3 中使用全局事件总线功能\n可以使用插件 mitt 实现。\nmitt:官网地址: https://www.npmjs.com/package/mitt\n1.4 v-model v-model 指令可是收集表单数据(数据双向绑定)，除此之外它也可以实现父子组件数据同步。\n而 v-model 实指利用 props[modelValue]与自定义事件[update:modelValue]实现的。\n下方代码:相当于给组件 Child 传递一个 props(modelValue)与绑定一个自定义事件 update:modelValue\n实现父子组件数据同步\n\u003cChild v-model=\"msg\"\u003e\u003c/Child\u003e 在 vue3 中一个组件可以通过使用多个 v-model,让父子组件多个数据同步,下方代码相当于给组件 Child 传递两个 props 分别是 pageNo 与 pageSize，以及绑定两个自定义事件 update:pageNo 与 update:pageSize 实现父子数据同步\n\u003cChild v-model:pageNo=\"msg\" v-model:pageSize=\"msg1\"\u003e\u003c/Child\u003e 1.5 useAttrs 在 Vue3 中可以利用 useAttrs 方法获取组件的属性与事件(包含:原生 DOM 事件或者自定义事件),次函数功能类似于 Vue2 框架中$attrs属性与$listeners 方法。\n比如:在父组件内部使用一个子组件 my-button\n\u003cmy-button type=\"success\" size=\"small\" title=\"标题\" @click=\"handler\" \u003e\u003c/my-button\u003e 子组件内部可以通过 useAttrs 方法获取组件属性与事件.因此你也发现了，它类似于 props,可以接受父组件传递过来的属性与属性值。需要注意如果 defineProps 接受了某一个属性，useAttrs 方法返回的对象身上就没有相应属性与属性值。\n\u003cscript setup lang=\"ts\"\u003e import {useAttrs} from 'vue'; let $attrs = useAttrs(); \u003c/script\u003e 1.6 ref 与$parent ref,提及到 ref 可能会想到它可以获取元素的 DOM 或者获取子组件实例的 VC。既然可以在父组件内部通过 ref 获取子组件实例 VC，那么子组件内部的方法与响应式数据父组件可以使用的。\n比如:在父组件挂载完毕获取组件实例\n父组件内部代码:\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003eref与$parent\u003c/h1\u003e \u003cSon ref=\"son\"\u003e\u003c/Son\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import Son from './Son.vue' import { onMounted, ref } from 'vue' const son = ref() onMounted(() =\u003e { console.log(son.value) }) \u003c/script\u003e 但是需要注意，如果想让父组件获取子组件的数据或者方法需要通过 defineExpose 对外暴露,因为 vue3 中组件内部的数据对外“关闭的”，外部不能访问\n\u003cscript setup lang=\"ts\"\u003e import { ref } from \"vue\"; //数据 let money = ref(1000); //方法 const handler = ()=\u003e{ } defineExpose({ money, handler }) \u003c/script\u003e $parent 可以获取某一个组件的父组件实例 VC,因此可以使用父组件内部的数据与方法。必须子组件内部拥有一个按钮点击时候获取父组件实例，当然父组件的数据与方法需要通过 defineExpose 方法对外暴露\n\u003cbutton @click=\"handler($parent)\"\u003e点击我获取父组件实例\u003c/button\u003e 1.7 provide 与 inject provide[提供]\ninject[注入]\nvue3 提供两个方法 provide 与 inject,可以实现隔辈组件传递参数\n组件组件提供数据:\nprovide 方法用于提供数据，此方法执需要传递两个参数,分别提供数据的 key 与提供数据 value\n\u003cscript setup lang=\"ts\"\u003e import {provide} from 'vue' provide('token','admin_token'); \u003c/script\u003e 后代组件可以通过 inject 方法获取数据,通过 key 获取存储的数值\n\u003cscript setup lang=\"ts\"\u003e import {inject} from 'vue' let token = inject('token'); \u003c/script\u003e 1.8 pinia pinia 官网: https://pinia.web3doc.top/\npinia 也是集中式管理状态容器,类似于 vuex。但是核心概念没有 mutation、modules,使用方式参照官网\n1.9 slot 插槽：默认插槽、具名插槽、作用域插槽可以实现父子组件通信.\n默认插槽:\n在子组件内部的模板中书写 slot 全局组件标签\n\u003ctemplate\u003e \u003cdiv\u003e \u003cslot\u003e\u003c/slot\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e\u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e 在父组件内部提供结构：Todo 即为子组件,在父组件内部使用的时候，在双标签内部书写结构传递给子组件\n注意开发项目的时候默认插槽一般只有一个\n\u003cTodo\u003e \u003ch1\u003e我是默认插槽填充的结构\u003c/h1\u003e \u003c/Todo\u003e 具名插槽：\n顾名思义，此插槽带有名字在组件内部留多个指定名字的插槽。\n下面是一个子组件内部,模板中留两个插槽\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003etodo\u003c/h1\u003e \u003cslot name=\"a\"\u003e\u003c/slot\u003e \u003cslot name=\"b\"\u003e\u003c/slot\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e\u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e 父组件内部向指定的具名插槽传递结构。需要注意 v-slot：可以替换为#\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003eslot\u003c/h1\u003e \u003cTodo\u003e \u003ctemplate v-slot:a\u003e //可以用#a替换 \u003cdiv\u003e填入组件A部分的结构\u003c/div\u003e \u003c/template\u003e \u003ctemplate v-slot:b\u003e //可以用#b替换 \u003cdiv\u003e填入组件B部分的结构\u003c/div\u003e \u003c/template\u003e \u003c/Todo\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import Todo from './Todo.vue' \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e 作用域插槽\n作用域插槽：可以理解为，子组件数据由父组件提供，但是子组件内部决定不了自身结构与外观(样式)\n子组件 Todo 代码如下:\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003etodo\u003c/h1\u003e \u003cul\u003e \u003cli v-for=\"(item,index) in todos\" :key=\"item.id\"\u003e \u003cslot :$row=\"item\" :$index=\"index\"\u003e\u003c/slot\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e defineProps(['todos']) //接受父组件传递过来的数据 \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e 父组件内部代码如下:\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003eslot\u003c/h1\u003e \u003cTodo :todos=\"todos\"\u003e \u003ctemplate v-slot=\"{$row,$index}\"\u003e \u003cspan :style=\"{color:$row.done?'green':'red'}\"\u003e{{$row.title}}\u003c/span\u003e \u003c/template\u003e \u003c/Todo\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import Todo from './Todo.vue' import { ref } from 'vue' //父组件内部数据 let todos = ref([ { id: 1, title: '吃饭', done: true }, { id: 2, title: '睡觉', done: false }, { id: 3, title: '打豆豆', done: true }, ]) \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e 二、搭建后台管理系统模板 2.1 项目初始化 今天来带大家从 0 开始搭建一个 vue3 版本的后台管理系统。一个项目要有统一的规范，需要使用 eslint+stylelint+prettier 来对我们的代码质量做检测和修复，需要使用 husky 来做 commit 拦截，需要使用 commitlint 来统一提交规范，需要使用 preinstall 来统一包管理工具。\n下面我们就用这一套规范来初始化我们的项目，集成一个规范的模版。\n2.1.1 环境准备 node v16.14.2 pnpm 8.0.0 2.1.2 初始化项目 本项目使用 vite 进行构建，vite 官方中文文档参考：cn.vitejs.dev/guide/\npnpm:performant npm ，意味“高性能的 npm”。pnpm由 npm/yarn 衍生而来，解决了 npm/yarn 内部潜在的 bug，极大的优化了性能，扩展了使用场景。被誉为“最先进的包管理工具”\npnpm 安装指令\nnpm i -g pnpm 项目初始化命令:\npnpm create vite 进入到项目根目录 pnpm install 安装全部依赖.安装完依赖运行程序:pnpm run dev\n运行完毕项目跑在http://127.0.0.1:5173/,可以访问你得项目啦\n2.2 项目配置 一、eslint 配置 eslint 中文官网: http://eslint.cn/\nESLint 最初是由Nicholas C. Zakas 于 2013 年 6 月创建的开源项目。它的目标是提供一个插件化的javascript 代码检测工具\n首先安装 eslint\npnpm i eslint -D 生成配置文件:.eslint.cjs\nnpx eslint --init .eslint.cjs 配置文件\nmodule.exports = { //运行环境 env: { browser: true, //浏览器端 es2021: true, //es2021 }, //规则继承 extends: [ //全部规则默认是关闭的,这个配置项开启推荐规则,推荐规则参照文档 //比如:函数不能重名、对象不能出现重复key 'eslint:recommended', //vue3语法规则 'plugin:vue/vue3-essential', //ts语法规则 'plugin:@typescript-eslint/recommended', ], //要为特定类型的文件指定处理器 overrides: [], //指定解析器:解析器 //Esprima 默认解析器 //Babel-ESLint babel解析器 //@typescript-eslint/parser ts解析器 parser: '@typescript-eslint/parser', //指定解析器选项 parserOptions: { ecmaVersion: 'latest', //校验ECMA最新版本 sourceType: 'module', //设置为\"script\"（默认），或者\"module\"代码在ECMAScript模块中 }, //ESLint支持使用第三方插件。在使用插件之前，您必须使用npm安装它 //该eslint-plugin-前缀可以从插件名称被省略 plugins: ['vue', '@typescript-eslint'], //eslint规则 rules: {}, } 1.1 vue3 环境代码校验插件 # 让所有与prettier规则存在冲突的Eslint rules失效，并使用prettier进行代码检查 \"eslint-config-prettier\": \"^8.6.0\", \"eslint-plugin-import\": \"^2.27.5\", \"eslint-plugin-node\": \"^11.1.0\", # 运行更漂亮的Eslint，使prettier规则优先级更高，Eslint优先级低 \"eslint-plugin-prettier\": \"^4.2.1\", # vue.js的Eslint插件（查找vue语法错误，发现错误指令，查找违规风格指南 \"eslint-plugin-vue\": \"^9.9.0\", # 该解析器允许使用Eslint校验所有babel code \"@babel/eslint-parser\": \"^7.19.1\", 安装指令\npnpm install -D eslint-plugin-import eslint-plugin-vue eslint-plugin-node eslint-plugin-prettier eslint-config-prettier eslint-plugin-node @babel/eslint-parser 1.2 修改.eslintrc.cjs 配置文件 // @see https://eslint.bootcss.com/docs/rules/ module.exports = { env: { browser: true, es2021: true, node: true, jest: true, }, /* 指定如何解析语法 */ parser: 'vue-eslint-parser', /** 优先级低于 parse 的语法解析配置 */ parserOptions: { ecmaVersion: 'latest', sourceType: 'module', parser: '@typescript-eslint/parser', jsxPragma: 'React', ecmaFeatures: { jsx: true, }, }, /* 继承已有的规则 */ extends: [ 'eslint:recommended', 'plugin:vue/vue3-essential', 'plugin:@typescript-eslint/recommended', 'plugin:prettier/recommended', ], plugins: ['vue', '@typescript-eslint'], /* * \"off\" 或 0 ==\u003e 关闭规则 * \"warn\" 或 1 ==\u003e 打开的规则作为警告（不影响代码执行） * \"error\" 或 2 ==\u003e 规则作为一个错误（代码不能执行，界面报错） */ rules: { // eslint（https://eslint.bootcss.com/docs/rules/） 'no-var': 'error', // 要求使用 let 或 const 而不是 var 'no-multiple-empty-lines': ['warn', { max: 1 }], // 不允许多个空行 'no-console': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'no-unexpected-multiline': 'error', // 禁止空余的多行 'no-useless-escape': 'off', // 禁止不必要的转义字符 // typeScript (https://typescript-eslint.io/rules) '@typescript-eslint/no-unused-vars': 'error', // 禁止定义未使用的变量 '@typescript-eslint/prefer-ts-expect-error': 'error', // 禁止使用 @ts-ignore '@typescript-eslint/no-explicit-any': 'off', // 禁止使用 any 类型 '@typescript-eslint/no-non-null-assertion': 'off', '@typescript-eslint/no-namespace': 'off', // 禁止使用自定义 TypeScript 模块和命名空间。 '@typescript-eslint/semi': 'off', // eslint-plugin-vue (https://eslint.vuejs.org/rules/) 'vue/multi-word-component-names': 'off', // 要求组件名称始终为 “-” 链接的单词 'vue/script-setup-uses-vars': 'error', // 防止",
  "wordCount" : "9732",
  "inLanguage": "en",
  "datePublished": "2020-01-01T17:11:35+08:00",
  "dateModified": "2020-01-01T17:11:35+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Bablvsj's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://bablvsj.github.io/img/Q.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://bablvsj.github.io" accesskey="h" title="Bablvsj&#39;s Blog (Alt + H)">Bablvsj&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://bablvsj.github.io/" title="主页">
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/archives/" title="时间轴">
                    <span>时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/tags" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/about" title="关于">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/search" title="🔍 (Alt &#43; /)" accesskey=/>
                    <span>🔍</span>
                </a>
            </li>
        </ul>
    </nav>
</header>


<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      浏览器
    </h1>
    <div class="post-meta">
      
<div class="post-tags-meta">
    <a href="https://bablvsj.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/">面试题集</a>
</div>

20 min&nbsp;·&nbsp;<span title='2020-01-01 17:11:35 +0800 CST'>2020/01/01</span>


      
    </div>
    
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        
        <div class="inner"><ul>
                <li>
                    <a href="#%e7%a1%85%e8%b0%b7%e7%94%84%e9%80%89" aria-label="硅谷甄选">硅谷甄选</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80vue3-%e7%bb%84%e4%bb%b6%e9%80%9a%e4%bf%a1%e6%96%b9%e5%bc%8f" aria-label="一、vue3 组件通信方式">一、vue3 组件通信方式</a><ul>
                        
                <li>
                    <a href="#11-props" aria-label="1.1 props">1.1 props</a></li>
                <li>
                    <a href="#12-%e8%87%aa%e5%ae%9a%e4%b9%89%e4%ba%8b%e4%bb%b6" aria-label="1.2 自定义事件">1.2 自定义事件</a><ul>
                        
                <li>
                    <a href="#121-%e5%8e%9f%e7%94%9f-dom-%e4%ba%8b%e4%bb%b6" aria-label="1.2.1 原生 DOM 事件">1.2.1 原生 DOM 事件</a></li>
                <li>
                    <a href="#122-%e8%87%aa%e5%ae%9a%e4%b9%89%e4%ba%8b%e4%bb%b6" aria-label="1.2.2 自定义事件">1.2.2 自定义事件</a></li></ul>
                </li>
                <li>
                    <a href="#13-%e5%85%a8%e5%b1%80%e4%ba%8b%e4%bb%b6%e6%80%bb%e7%ba%bf" aria-label="1.3 全局事件总线">1.3 全局事件总线</a></li>
                <li>
                    <a href="#14-v-model" aria-label="1.4 v-model">1.4 v-model</a></li>
                <li>
                    <a href="#15-useattrs" aria-label="1.5 useAttrs">1.5 useAttrs</a></li>
                <li>
                    <a href="#16-ref-%e4%b8%8eparent" aria-label="1.6 ref 与$parent">1.6 ref 与$parent</a></li>
                <li>
                    <a href="#17-provide-%e4%b8%8e-inject" aria-label="1.7 provide 与 inject">1.7 provide 与 inject</a></li>
                <li>
                    <a href="#18-pinia" aria-label="1.8 pinia">1.8 pinia</a></li>
                <li>
                    <a href="#19-slot" aria-label="1.9 slot">1.9 slot</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e6%90%ad%e5%bb%ba%e5%90%8e%e5%8f%b0%e7%ae%a1%e7%90%86%e7%b3%bb%e7%bb%9f%e6%a8%a1%e6%9d%bf" aria-label="二、搭建后台管理系统模板">二、搭建后台管理系统模板</a><ul>
                        
                <li>
                    <a href="#21-%e9%a1%b9%e7%9b%ae%e5%88%9d%e5%a7%8b%e5%8c%96" aria-label="2.1 项目初始化">2.1 项目初始化</a><ul>
                        
                <li>
                    <a href="#211-%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87" aria-label="2.1.1 环境准备">2.1.1 环境准备</a></li>
                <li>
                    <a href="#212-%e5%88%9d%e5%a7%8b%e5%8c%96%e9%a1%b9%e7%9b%ae" aria-label="2.1.2 初始化项目">2.1.2 初始化项目</a></li></ul>
                </li>
                <li>
                    <a href="#22-%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae" aria-label="2.2 项目配置">2.2 项目配置</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80eslint-%e9%85%8d%e7%bd%ae" aria-label="一、eslint 配置">一、eslint 配置</a><ul>
                        
                <li>
                    <a href="#11-vue3-%e7%8e%af%e5%a2%83%e4%bb%a3%e7%a0%81%e6%a0%a1%e9%aa%8c%e6%8f%92%e4%bb%b6" aria-label="1.1 vue3 环境代码校验插件">1.1 vue3 环境代码校验插件</a></li>
                <li>
                    <a href="#12-%e4%bf%ae%e6%94%b9eslintrccjs-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="1.2 修改.eslintrc.cjs 配置文件">1.2 修改.eslintrc.cjs 配置文件</a></li>
                <li>
                    <a href="#13-eslintignore-%e5%bf%bd%e7%95%a5%e6%96%87%e4%bb%b6" aria-label="1.3 .eslintignore 忽略文件">1.3 .eslintignore 忽略文件</a></li>
                <li>
                    <a href="#14-%e8%bf%90%e8%a1%8c%e8%84%9a%e6%9c%ac" aria-label="1.4 运行脚本">1.4 运行脚本</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e9%85%8d%e7%bd%aeprettier" aria-label="二、配置prettier">二、配置<strong>prettier</strong></a><ul>
                        
                <li>
                    <a href="#21-%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96%e5%8c%85" aria-label="2.1 安装依赖包">2.1 安装依赖包</a></li>
                <li>
                    <a href="#22-prettierrcjson-%e6%b7%bb%e5%8a%a0%e8%a7%84%e5%88%99" aria-label="2.2 .prettierrc.json 添加规则">2.2 .prettierrc.json 添加规则</a></li>
                <li>
                    <a href="#23-prettierignore-%e5%bf%bd%e7%95%a5%e6%96%87%e4%bb%b6" aria-label="2.3 .prettierignore 忽略文件">2.3 .prettierignore 忽略文件</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e9%85%8d%e7%bd%ae-stylelint" aria-label="三、配置 stylelint">三、配置 stylelint</a><ul>
                        
                <li>
                    <a href="#31-stylelintrccjs-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="3.1 .stylelintrc.cjs 配置文件">3.1 .stylelintrc.cjs 配置文件</a></li>
                <li>
                    <a href="#32-stylelintignore-%e5%bf%bd%e7%95%a5%e6%96%87%e4%bb%b6" aria-label="3.2 .stylelintignore 忽略文件">3.2 .stylelintignore 忽略文件</a></li>
                <li>
                    <a href="#33-%e8%bf%90%e8%a1%8c%e8%84%9a%e6%9c%ac" aria-label="3.3 运行脚本">3.3 运行脚本</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b%e9%85%8d%e7%bd%ae-husky" aria-label="四、配置 husky">四、配置 husky</a></li>
                <li>
                    <a href="#%e4%ba%94%e9%85%8d%e7%bd%ae-commitlint" aria-label="五、配置 commitlint">五、配置 commitlint</a></li>
                <li>
                    <a href="#%e5%85%ad%e5%bc%ba%e5%88%b6%e4%bd%bf%e7%94%a8-pnpm-%e5%8c%85%e7%ae%a1%e7%90%86%e5%99%a8%e5%b7%a5%e5%85%b7" aria-label="六、强制使用 pnpm 包管理器工具">六、强制使用 pnpm 包管理器工具</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e9%a1%b9%e7%9b%ae%e9%9b%86%e6%88%90" aria-label="三、项目集成">三、项目集成</a><ul>
                        
                <li>
                    <a href="#31-%e9%9b%86%e6%88%90-element-plus" aria-label="3.1 集成 element-plus">3.1 集成 element-plus</a></li>
                <li>
                    <a href="#32-src-%e5%88%ab%e5%90%8d%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="3.2 src 别名的配置">3.2 src 别名的配置</a></li>
                <li>
                    <a href="#33-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="3.3 环境变量的配置">3.3 环境变量的配置</a></li>
                <li>
                    <a href="#34-svg-%e5%9b%be%e6%a0%87%e9%85%8d%e7%bd%ae" aria-label="3.4 SVG 图标配置">3.4 SVG 图标配置</a><ul>
                        
                <li>
                    <a href="#341-svg-%e5%b0%81%e8%a3%85%e4%b8%ba%e5%85%a8%e5%b1%80%e7%bb%84%e4%bb%b6" aria-label="3.4.1 svg 封装为全局组件">3.4.1 svg 封装为全局组件</a></li></ul>
                </li>
                <li>
                    <a href="#35-%e9%9b%86%e6%88%90-sass" aria-label="3.5 集成 sass">3.5 集成 sass</a></li>
                <li>
                    <a href="#36-mock-%e6%95%b0%e6%8d%ae" aria-label="3.6 mock 数据">3.6 mock 数据</a></li>
                <li>
                    <a href="#37-axios-%e4%ba%8c%e6%ac%a1%e5%b0%81%e8%a3%85" aria-label="3.7 axios 二次封装">3.7 axios 二次封装</a></li>
                <li>
                    <a href="#38-api-%e6%8e%a5%e5%8f%a3%e7%bb%9f%e4%b8%80%e7%ae%a1%e7%90%86" aria-label="3.8 API 接口统一管理">3.8 API 接口统一管理</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%b5%84%e6%ba%90%e5%9c%b0%e5%9d%80" aria-label="四、项目的资源地址">四、项目的资源地址</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="硅谷甄选">硅谷甄选<a hidden class="anchor" aria-hidden="true" href="#硅谷甄选">#</a></h1>
<p>技术栈包含: vue3+TypeScript+vue-router+pinia+element-plus+axios+echarts 等技术栈。</p>
<h2 id="一vue3-组件通信方式">一、vue3 组件通信方式<a hidden class="anchor" aria-hidden="true" href="#一vue3-组件通信方式">#</a></h2>
<p>通信仓库地址: <a href="https://gitee.com/jch1011/vue3_communication.git">https://gitee.com/jch1011/vue3_communication.git</a></p>
<p>不管是 vue2 还是 vue3,组件通信方式很重要,不管是项目还是面试都是经常用到的知识点。
比如:vue2 组件通信方式</p>
<ul>
<li>props: 可以实现父子组件、子父组件、甚至兄弟组件通信</li>
<li>自定义事件: 可以实现子父组件通信</li>
<li>全局事件总线$bus: 可以实现任意组件通信</li>
<li>pubsub: 发布订阅模式实现任意组件通信</li>
<li>vuex: 集中式状态管理容器，实现任意组件通信</li>
<li>ref: 父组件获取子组件实例 VC,获取子组件的响应式数据以及方法</li>
<li>slot: 插槽(默认插槽、具名插槽、作用域插槽)实现父子组件通信&hellip;&hellip;..</li>
</ul>
<h3 id="11-props">1.1 props<a hidden class="anchor" aria-hidden="true" href="#11-props">#</a></h3>
<p>props 可以实现父子组件通信,在 vue3 中我们可以通过 defineProps 获取父组件传递的数据。且在组件内部不需要引入 defineProps 方法可以直接使用！</p>
<p><strong>父组件给子组件传递数据</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Child</span> <span style="color:#79740e;font-weight:bold">info</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;我爱祖国&#34;</span> <span style="color:#79740e;font-weight:bold">:money</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;money&#34;</span>&gt;&lt;/<span style="color:#9d0006">Child</span>&gt;
</span></span></code></pre></div><p><strong>子组件获取父组件传递数据:方式 1</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">let</span> props <span style="color:#af3a03">=</span> defineProps({
</span></span><span style="display:flex;"><span>  info<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">type</span><span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>, <span style="color:#928374;font-style:italic">//接受的数据类型
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;默认参数&#39;</span>, <span style="color:#928374;font-style:italic">//接受默认数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>  money<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">type</span><span style="color:#af3a03">:</span> <span style="color:#b57614">Number</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#8f3f71">0</span>,
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p><strong>子组件获取父组件传递数据:方式 2</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">let</span> props <span style="color:#af3a03">=</span> defineProps([<span style="color:#79740e">&#39;info&#39;</span>, <span style="color:#79740e">&#39;money&#39;</span>])
</span></span></code></pre></div><p>子组件获取到 props 数据就可以在模板中使用了,但是切记 props 是只读的(只能读取，不能修改)</p>
<h3 id="12-自定义事件">1.2 自定义事件<a hidden class="anchor" aria-hidden="true" href="#12-自定义事件">#</a></h3>
<p>在 vue 框架中事件分为两种:一种是原生的 DOM 事件，另外一种自定义事件。</p>
<p>原生 DOM 事件可以让用户与网页进行交互，比如 click、dbclick、change、mouseenter、mouseleave&hellip;.</p>
<p>自定义事件可以实现子组件给父组件传递数据</p>
<h4 id="121-原生-dom-事件">1.2.1 原生 DOM 事件<a hidden class="anchor" aria-hidden="true" href="#121-原生-dom-事件">#</a></h4>
<p>代码如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">pre</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      我是祖国的老花骨朵
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#9d0006">pre</span>
</span></span><span style="display:flex;"><span>&gt;
</span></span></code></pre></div><p>当前代码级给 pre 标签绑定原生 DOM 事件点击事件,默认会给事件回调注入 event 事件对象。当然点击事件想注入多个参数可以按照下图操作。但是切记注入的事件对象务必叫做$event.</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">div</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler1(1,2,3,$event)&#34;</span>&gt;我要传递多个参数&lt;/<span style="color:#9d0006">div</span>&gt;
</span></span></code></pre></div><p>在 vue3 框架 click、dbclick、change(这类原生 DOM 事件),不管是在标签、自定义标签上(组件标签)都是原生 DOM 事件。</p>
<p><strong><!--vue2中却不是这样的,在vue2中组件标签需要通过native修饰符才能变为原生DOM事件--></strong></p>
<h4 id="122-自定义事件">1.2.2 自定义事件<a hidden class="anchor" aria-hidden="true" href="#122-自定义事件">#</a></h4>
<p>自定义事件可以实现子组件给父组件传递数据.在项目中是比较常用的。</p>
<p>比如在父组件内部给子组件(Event2)绑定一个自定义事件</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Event2</span> @<span style="color:#79740e;font-weight:bold">xxx</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler3&#34;</span>&gt;&lt;/<span style="color:#9d0006">Event2</span>&gt;
</span></span></code></pre></div><p>在 Event2 子组件内部触发这个自定义事件</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;我是子组件2&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">button</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>&gt;点击我触发xxx自定义事件&lt;/<span style="color:#9d0006">button</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">let</span> $emit <span style="color:#af3a03">=</span> defineEmits([<span style="color:#79740e">&#39;xxx&#39;</span>])
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">const</span> handler <span style="color:#af3a03">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>    $emit(<span style="color:#79740e">&#39;xxx&#39;</span>, <span style="color:#79740e">&#39;法拉利&#39;</span>, <span style="color:#79740e">&#39;茅台&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>我们会发现在 script 标签内部,使用了 defineEmits 方法，此方法是 vue3 提供的方法,不需要引入直接使用。defineEmits 方法执行，传递一个数组，数组元素即为将来组件需要触发的自定义事件类型，此方执行会返回一个$emit 方法用于触发自定义事件。</p>
<p>当点击按钮的时候，事件回调内部调用$emit 方法去触发自定义事件,第一个参数为触发事件类型，第二个、三个、N 个参数即为传递给父组件的数据。</p>
<p>需要注意的是:代码如下</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Event2</span> @<span style="color:#79740e;font-weight:bold">xxx</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler3&#34;</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>&gt;&lt;/<span style="color:#9d0006">Event2</span>&gt;
</span></span></code></pre></div><p>正常说组件标签书写@click 应该为原生 DOM 事件,但是如果子组件内部通过 defineEmits 定义就变为自定义事件了</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">let</span> $emit <span style="color:#af3a03">=</span> defineEmits([<span style="color:#79740e">&#39;xxx&#39;</span>, <span style="color:#79740e">&#39;click&#39;</span>])
</span></span></code></pre></div><h3 id="13-全局事件总线">1.3 全局事件总线<a hidden class="anchor" aria-hidden="true" href="#13-全局事件总线">#</a></h3>
<p>全局事件总线可以实现任意组件通信，在 vue2 中可以根据 VM 与 VC 关系推出全局事件总线。</p>
<p>但是在 vue3 中没有 Vue 构造函数，也就没有 Vue.prototype.以及组合式 API 写法没有 this，</p>
<p>那么在 Vue3 想实现全局事件的总线功能就有点不现实啦，如果想在 Vue3 中使用全局事件总线功能</p>
<p>可以使用插件 mitt 实现。</p>
<p>mitt:官网地址: <a href="https://www.npmjs.com/package/mitt">https://www.npmjs.com/package/mitt</a></p>
<h3 id="14-v-model">1.4 v-model<a hidden class="anchor" aria-hidden="true" href="#14-v-model">#</a></h3>
<p>v-model 指令可是收集表单数据(数据双向绑定)，除此之外它也可以实现父子组件数据同步。</p>
<p>而 v-model 实指利用 props[modelValue]与自定义事件[update:modelValue]实现的。</p>
<p>下方代码:相当于给组件 Child 传递一个 props(modelValue)与绑定一个自定义事件 update:modelValue</p>
<p>实现父子组件数据同步</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Child</span> <span style="color:#79740e;font-weight:bold">v-model</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;msg&#34;</span>&gt;&lt;/<span style="color:#9d0006">Child</span>&gt;
</span></span></code></pre></div><p>在 vue3 中一个组件可以通过使用多个 v-model,让父子组件多个数据同步,下方代码相当于给组件 Child 传递两个 props 分别是 pageNo 与 pageSize，以及绑定两个自定义事件 update:pageNo 与 update:pageSize 实现父子数据同步</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Child</span> <span style="color:#79740e;font-weight:bold">v-model:pageNo</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;msg&#34;</span> <span style="color:#79740e;font-weight:bold">v-model:pageSize</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;msg1&#34;</span>&gt;&lt;/<span style="color:#9d0006">Child</span>&gt;
</span></span></code></pre></div><h3 id="15-useattrs">1.5 useAttrs<a hidden class="anchor" aria-hidden="true" href="#15-useattrs">#</a></h3>
<p>在 Vue3 中可以利用 useAttrs 方法获取组件的属性与事件(包含:原生 DOM 事件或者自定义事件),次函数功能类似于 Vue2 框架中$attrs属性与$listeners 方法。</p>
<p>比如:在父组件内部使用一个子组件 my-button</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">my-button</span>
</span></span><span style="display:flex;"><span>  <span style="color:#79740e;font-weight:bold">type</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;success&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#79740e;font-weight:bold">size</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;small&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#79740e;font-weight:bold">title</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;标题&#34;</span>
</span></span><span style="display:flex;"><span>  @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>
</span></span><span style="display:flex;"><span>&gt;&lt;/<span style="color:#9d0006">my-button</span>&gt;
</span></span></code></pre></div><p>子组件内部可以通过 useAttrs 方法获取组件属性与事件.因此你也发现了，它类似于 props,可以接受父组件传递过来的属性与属性值。需要注意如果 defineProps 接受了某一个属性，useAttrs 方法返回的对象身上就没有相应属性与属性值。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> {useAttrs} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span>; <span style="color:#af3a03">let</span> $attrs <span style="color:#af3a03">=</span> useAttrs();
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><h3 id="16-ref-与parent">1.6 ref 与$parent<a hidden class="anchor" aria-hidden="true" href="#16-ref-与parent">#</a></h3>
<p>ref,提及到 ref 可能会想到它可以获取元素的 DOM 或者获取子组件实例的 VC。既然可以在父组件内部通过 ref 获取子组件实例 VC，那么子组件内部的方法与响应式数据父组件可以使用的。</p>
<p>比如:在父组件挂载完毕获取组件实例</p>
<p>父组件内部代码:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;ref与$parent&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">Son</span> <span style="color:#79740e;font-weight:bold">ref</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;son&#34;</span>&gt;&lt;/<span style="color:#9d0006">Son</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> Son from <span style="color:#79740e">&#39;./Son.vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> { onMounted, ref } from <span style="color:#79740e">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">const</span> son <span style="color:#af3a03">=</span> ref()
</span></span><span style="display:flex;"><span>  onMounted(() =&gt; {
</span></span><span style="display:flex;"><span>    console.log(son.value)
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><p>但是需要注意，如果想让父组件获取子组件的数据或者方法需要通过 defineExpose 对外暴露,因为 vue3 中组件内部的数据对外“关闭的”，外部不能访问</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> { ref } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#34;vue&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">let</span> money <span style="color:#af3a03">=</span> ref(<span style="color:#8f3f71">1000</span>);
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//方法
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">const</span> handler <span style="color:#af3a03">=</span> ()<span style="color:#af3a03">=&gt;</span>{
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>defineExpose({
</span></span><span style="display:flex;"><span>  money,
</span></span><span style="display:flex;"><span>   handler
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><p>$parent 可以获取某一个组件的父组件实例 VC,因此可以使用父组件内部的数据与方法。必须子组件内部拥有一个按钮点击时候获取父组件实例，当然父组件的数据与方法需要通过 defineExpose 方法对外暴露</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">button</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler($parent)&#34;</span>&gt;点击我获取父组件实例&lt;/<span style="color:#9d0006">button</span>&gt;
</span></span></code></pre></div><h3 id="17-provide-与-inject">1.7 provide 与 inject<a hidden class="anchor" aria-hidden="true" href="#17-provide-与-inject">#</a></h3>
<p><strong>provide[提供]</strong></p>
<p><strong>inject[注入]</strong></p>
<p>vue3 提供两个方法 provide 与 inject,可以实现隔辈组件传递参数</p>
<p>组件组件提供数据:</p>
<p>provide 方法用于提供数据，此方法执需要传递两个参数,分别提供数据的 key 与提供数据 value</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> {provide} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span> provide(<span style="color:#79740e">&#39;token&#39;</span>,<span style="color:#79740e">&#39;admin_token&#39;</span>);
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><p>后代组件可以通过 inject 方法获取数据,通过 key 获取存储的数值</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> {inject} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span> <span style="color:#af3a03">let</span> token <span style="color:#af3a03">=</span> inject(<span style="color:#79740e">&#39;token&#39;</span>);
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><h3 id="18-pinia">1.8 pinia<a hidden class="anchor" aria-hidden="true" href="#18-pinia">#</a></h3>
<p>pinia 官网: <a href="https://pinia.web3doc.top/">https://pinia.web3doc.top/</a></p>
<p>pinia 也是集中式管理状态容器,类似于 vuex。但是核心概念没有 mutation、modules,使用方式参照官网</p>
<h3 id="19-slot">1.9 slot<a hidden class="anchor" aria-hidden="true" href="#19-slot">#</a></h3>
<p>插槽：默认插槽、具名插槽、作用域插槽可以实现父子组件通信.</p>
<p><strong>默认插槽:</strong></p>
<p>在子组件内部的模板中书写 slot 全局组件标签</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">slot</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>在父组件内部提供结构：Todo 即为子组件,在父组件内部使用的时候，在双标签内部书写结构传递给子组件</p>
<p>注意开发项目的时候默认插槽一般只有一个</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">h1</span>&gt;我是默认插槽填充的结构&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">Todo</span>&gt;
</span></span></code></pre></div><p><strong>具名插槽：</strong></p>
<p>顾名思义，此插槽带有名字在组件内部留多个指定名字的插槽。</p>
<p>下面是一个子组件内部,模板中留两个插槽</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;todo&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">slot</span> <span style="color:#79740e;font-weight:bold">name</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;a&#34;</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">slot</span> <span style="color:#79740e;font-weight:bold">name</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;b&#34;</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>父组件内部向指定的具名插槽传递结构。需要注意 v-slot：可以替换为#</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;slot&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">template</span> <span style="color:#79740e;font-weight:bold">v-slot:a</span>&gt;
</span></span><span style="display:flex;"><span>        //可以用#a替换
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">div</span>&gt;填入组件A部分的结构&lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">template</span> <span style="color:#79740e;font-weight:bold">v-slot:b</span>&gt;
</span></span><span style="display:flex;"><span>        //可以用#b替换
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">div</span>&gt;填入组件B部分的结构&lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> Todo from <span style="color:#79740e">&#39;./Todo.vue&#39;</span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p><strong>作用域插槽</strong></p>
<p>作用域插槽：可以理解为，子组件数据由父组件提供，但是子组件内部决定不了自身结构与外观(样式)</p>
<p>子组件 Todo 代码如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;todo&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">ul</span>&gt;
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">&lt;!--组件内部遍历数组--&gt;</span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">li</span> <span style="color:#79740e;font-weight:bold">v-for</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;(item,index) in todos&#34;</span> <span style="color:#79740e;font-weight:bold">:key</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;item.id&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">&lt;!--作用域插槽将数据回传给父组件--&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">slot</span> <span style="color:#79740e;font-weight:bold">:</span>$<span style="color:#79740e;font-weight:bold">row</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;item&#34;</span> <span style="color:#79740e;font-weight:bold">:</span>$<span style="color:#79740e;font-weight:bold">index</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;index&#34;</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">li</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">ul</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  defineProps([<span style="color:#79740e">&#39;todos&#39;</span>]) <span style="color:#928374;font-style:italic">//接受父组件传递过来的数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>父组件内部代码如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;slot&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">Todo</span> <span style="color:#79740e;font-weight:bold">:todos</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;todos&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">template</span> <span style="color:#79740e;font-weight:bold">v-slot</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;{$row,$index}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">&lt;!--父组件决定子组件的结构与外观--&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">span</span> <span style="color:#79740e;font-weight:bold">:style</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;{color:$row.done?&#39;green&#39;:&#39;red&#39;}&#34;</span>&gt;{{$row.title}}&lt;/<span style="color:#9d0006">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> Todo from <span style="color:#79740e">&#39;./Todo.vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> { ref } from <span style="color:#79740e">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//父组件内部数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">let</span> todos <span style="color:#af3a03">=</span> ref([
</span></span><span style="display:flex;"><span>    { id<span style="color:#af3a03">:</span> <span style="color:#8f3f71">1</span>, title<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;吃饭&#39;</span>, done<span style="color:#af3a03">:</span> <span style="color:#af3a03">true</span> },
</span></span><span style="display:flex;"><span>    { id<span style="color:#af3a03">:</span> <span style="color:#8f3f71">2</span>, title<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;睡觉&#39;</span>, done<span style="color:#af3a03">:</span> <span style="color:#af3a03">false</span> },
</span></span><span style="display:flex;"><span>    { id<span style="color:#af3a03">:</span> <span style="color:#8f3f71">3</span>, title<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;打豆豆&#39;</span>, done<span style="color:#af3a03">:</span> <span style="color:#af3a03">true</span> },
</span></span><span style="display:flex;"><span>  ])
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><h2 id="二搭建后台管理系统模板">二、搭建后台管理系统模板<a hidden class="anchor" aria-hidden="true" href="#二搭建后台管理系统模板">#</a></h2>
<h3 id="21-项目初始化">2.1 项目初始化<a hidden class="anchor" aria-hidden="true" href="#21-项目初始化">#</a></h3>
<p>今天来带大家从 0 开始搭建一个 vue3 版本的后台管理系统。一个项目要有统一的规范，需要使用 eslint+stylelint+prettier 来对我们的代码质量做检测和修复，需要使用 husky 来做 commit 拦截，需要使用 commitlint 来统一提交规范，需要使用 preinstall 来统一包管理工具。</p>
<p>下面我们就用这一套规范来初始化我们的项目，集成一个规范的模版。</p>
<h4 id="211-环境准备">2.1.1 环境准备<a hidden class="anchor" aria-hidden="true" href="#211-环境准备">#</a></h4>
<ul>
<li>node v16.14.2</li>
<li>pnpm 8.0.0</li>
</ul>
<h4 id="212-初始化项目">2.1.2 初始化项目<a hidden class="anchor" aria-hidden="true" href="#212-初始化项目">#</a></h4>
<p>本项目使用 vite 进行构建，vite 官方中文文档参考：<a href="https://cn.vitejs.dev/guide/">cn.vitejs.dev/guide/</a></p>
<p><code>pnpm:performant npm</code> ，意味“高性能的 npm”。<a href="https://so.csdn.net/so/search?q=pnpm&amp;spm=1001.2101.3001.7020">pnpm</a>由 npm/yarn 衍生而来，解决了 npm/yarn 内部潜在的 bug，极大的优化了性能，扩展了使用场景。被誉为“最先进的包管理工具”</p>
<p>pnpm 安装指令</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>npm i -g pnpm
</span></span></code></pre></div><p>项目初始化命令:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm create vite
</span></span></code></pre></div><p>进入到项目根目录 pnpm install 安装全部依赖.安装完依赖运行程序:pnpm run dev</p>
<p>运行完毕项目跑在http://127.0.0.1:5173/,可以访问你得项目啦</p>
<h3 id="22-项目配置">2.2 项目配置<a hidden class="anchor" aria-hidden="true" href="#22-项目配置">#</a></h3>
<h4 id="一eslint-配置">一、eslint 配置<a hidden class="anchor" aria-hidden="true" href="#一eslint-配置">#</a></h4>
<p>eslint 中文官网: <a href="http://eslint.cn/">http://eslint.cn/</a></p>
<p>ESLint 最初是由<a href="http://nczonline.net/">Nicholas C. Zakas</a> 于 2013 年 6 月创建的开源项目。它的目标是提供一个插件化的<strong>javascript 代码检测工具</strong></p>
<p>首先安装 eslint</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm i eslint -D
</span></span></code></pre></div><p>生成配置文件:.eslint.cjs</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>npx eslint --init
</span></span></code></pre></div><p><strong>.eslint.cjs 配置文件</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//运行环境
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  env<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    browser: <span style="color:#b57614">true</span>, <span style="color:#928374;font-style:italic">//浏览器端
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    es2021: <span style="color:#b57614">true</span>, <span style="color:#928374;font-style:italic">//es2021
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//规则继承
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//全部规则默认是关闭的,这个配置项开启推荐规则,推荐规则参照文档
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#928374;font-style:italic">//比如:函数不能重名、对象不能出现重复key
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;eslint:recommended&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//vue3语法规则
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;plugin:vue/vue3-essential&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//ts语法规则
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;plugin:@typescript-eslint/recommended&#39;</span>,
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//要为特定类型的文件指定处理器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  overrides<span style="color:#af3a03">:</span> [],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//指定解析器:解析器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//Esprima 默认解析器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//Babel-ESLint babel解析器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//@typescript-eslint/parser ts解析器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  parser<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;@typescript-eslint/parser&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//指定解析器选项
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  parserOptions<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    ecmaVersion<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;latest&#39;</span>, <span style="color:#928374;font-style:italic">//校验ECMA最新版本
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    sourceType<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;module&#39;</span>, <span style="color:#928374;font-style:italic">//设置为&#34;script&#34;（默认），或者&#34;module&#34;代码在ECMAScript模块中
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//ESLint支持使用第三方插件。在使用插件之前，您必须使用npm安装它
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//该eslint-plugin-前缀可以从插件名称被省略
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  plugins<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;vue&#39;</span>, <span style="color:#79740e">&#39;@typescript-eslint&#39;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//eslint规则
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  rules<span style="color:#af3a03">:</span> {},
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="11-vue3-环境代码校验插件">1.1 vue3 环境代码校验插件<a hidden class="anchor" aria-hidden="true" href="#11-vue3-环境代码校验插件">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># 让所有与prettier规则存在冲突的Eslint rules失效，并使用prettier进行代码检查</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-config-prettier&#34;</span>: <span style="color:#79740e">&#34;^8.6.0&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-import&#34;</span>: <span style="color:#79740e">&#34;^2.27.5&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-node&#34;</span>: <span style="color:#79740e">&#34;^11.1.0&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># 运行更漂亮的Eslint，使prettier规则优先级更高，Eslint优先级低</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-prettier&#34;</span>: <span style="color:#79740e">&#34;^4.2.1&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># vue.js的Eslint插件（查找vue语法错误，发现错误指令，查找违规风格指南</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-vue&#34;</span>: <span style="color:#79740e">&#34;^9.9.0&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># 该解析器允许使用Eslint校验所有babel code</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;@babel/eslint-parser&#34;</span>: <span style="color:#79740e">&#34;^7.19.1&#34;</span>,
</span></span></code></pre></div><p>安装指令</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm install -D eslint-plugin-import eslint-plugin-vue eslint-plugin-node eslint-plugin-prettier eslint-config-prettier eslint-plugin-node @babel/eslint-parser
</span></span></code></pre></div><h5 id="12-修改eslintrccjs-配置文件">1.2 修改.eslintrc.cjs 配置文件<a hidden class="anchor" aria-hidden="true" href="#12-修改eslintrccjs-配置文件">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// @see https://eslint.bootcss.com/docs/rules/
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  env<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    browser: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    es2021: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    node: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    jest: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/* 指定如何解析语法 */</span>
</span></span><span style="display:flex;"><span>  parser<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;vue-eslint-parser&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/** 优先级低于 parse 的语法解析配置 */</span>
</span></span><span style="display:flex;"><span>  parserOptions<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    ecmaVersion<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;latest&#39;</span>,
</span></span><span style="display:flex;"><span>    sourceType<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;module&#39;</span>,
</span></span><span style="display:flex;"><span>    parser<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;@typescript-eslint/parser&#39;</span>,
</span></span><span style="display:flex;"><span>    jsxPragma<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;React&#39;</span>,
</span></span><span style="display:flex;"><span>    ecmaFeatures<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      jsx: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/* 继承已有的规则 */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;eslint:recommended&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;plugin:vue/vue3-essential&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;plugin:@typescript-eslint/recommended&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;plugin:prettier/recommended&#39;</span>,
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  plugins<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;vue&#39;</span>, <span style="color:#79740e">&#39;@typescript-eslint&#39;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * &#34;off&#34; 或 0    ==&gt;  关闭规则
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * &#34;warn&#34; 或 1   ==&gt;  打开的规则作为警告（不影响代码执行）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * &#34;error&#34; 或 2  ==&gt;  规则作为一个错误（代码不能执行，界面报错）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   */</span>
</span></span><span style="display:flex;"><span>  rules<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// eslint（https://eslint.bootcss.com/docs/rules/）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-var&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// 要求使用 let 或 const 而不是 var
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-multiple-empty-lines&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;warn&#39;</span>, { max: <span style="color:#b57614">1</span> }], <span style="color:#928374;font-style:italic">// 不允许多个空行
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-console&#39;</span><span style="color:#af3a03">:</span> process.env.NODE_ENV <span style="color:#af3a03">===</span> <span style="color:#79740e">&#39;production&#39;</span> <span style="color:#af3a03">?</span> <span style="color:#79740e">&#39;error&#39;</span> <span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;no-debugger&#39;</span><span style="color:#af3a03">:</span> process.env.NODE_ENV <span style="color:#af3a03">===</span> <span style="color:#79740e">&#39;production&#39;</span> <span style="color:#af3a03">?</span> <span style="color:#79740e">&#39;error&#39;</span> <span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;no-unexpected-multiline&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// 禁止空余的多行
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-useless-escape&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// 禁止不必要的转义字符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// typeScript (https://typescript-eslint.io/rules)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/no-unused-vars&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// 禁止定义未使用的变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/prefer-ts-expect-error&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// 禁止使用 @ts-ignore
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/no-explicit-any&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// 禁止使用 any 类型
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/no-non-null-assertion&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;@typescript-eslint/no-namespace&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// 禁止使用自定义 TypeScript 模块和命名空间。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/semi&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// eslint-plugin-vue (https://eslint.vuejs.org/rules/)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/multi-word-component-names&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// 要求组件名称始终为 “-” 链接的单词
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/script-setup-uses-vars&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// 防止&lt;script setup&gt;使用的变量&lt;template&gt;被标记为未使用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/no-mutating-props&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// 不允许组件 prop的改变
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/attribute-hyphenation&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// 对模板中的自定义组件强制执行属性命名样式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="13-eslintignore-忽略文件">1.3 .eslintignore 忽略文件<a hidden class="anchor" aria-hidden="true" href="#13-eslintignore-忽略文件">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>dist
</span></span><span style="display:flex;"><span>node_modules
</span></span></code></pre></div><h5 id="14-运行脚本">1.4 运行脚本<a hidden class="anchor" aria-hidden="true" href="#14-运行脚本">#</a></h5>
<p>package.json 新增两个运行脚本</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint&#34;</span>: <span style="color:#79740e">&#34;eslint src&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;fix&#34;</span>: <span style="color:#79740e">&#34;eslint src --fix&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="二配置prettier">二、配置<strong>prettier</strong><a hidden class="anchor" aria-hidden="true" href="#二配置prettier">#</a></h4>
<p>有了 eslint，为什么还要有 prettier？eslint 针对的是 javascript，他是一个检测工具，包含 js 语法以及少部分格式问题，在 eslint 看来，语法对了就能保证代码正常运行，格式问题属于其次；</p>
<p>而 prettier 属于格式化工具，它看不惯格式不统一，所以它就把 eslint 没干好的事接着干，另外，prettier 支持</p>
<p>包含 js 在内的多种语言。</p>
<p>总结起来，<strong>eslint 和 prettier 这俩兄弟一个保证 js 代码质量，一个保证代码美观。</strong></p>
<h5 id="21-安装依赖包">2.1 安装依赖包<a hidden class="anchor" aria-hidden="true" href="#21-安装依赖包">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm install -D eslint-plugin-prettier prettier eslint-config-prettier
</span></span></code></pre></div><h5 id="22-prettierrcjson-添加规则">2.2 .prettierrc.json 添加规则<a hidden class="anchor" aria-hidden="true" href="#22-prettierrcjson-添加规则">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;singleQuote&#34;</span>: <span style="color:#af3a03">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;semi&#34;</span>: <span style="color:#af3a03">false</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;bracketSpacing&#34;</span>: <span style="color:#af3a03">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;htmlWhitespaceSensitivity&#34;</span>: <span style="color:#79740e">&#34;ignore&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;endOfLine&#34;</span>: <span style="color:#79740e">&#34;auto&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;trailingComma&#34;</span>: <span style="color:#79740e">&#34;all&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;tabWidth&#34;</span>: <span style="color:#8f3f71">2</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="23-prettierignore-忽略文件">2.3 .prettierignore 忽略文件<a hidden class="anchor" aria-hidden="true" href="#23-prettierignore-忽略文件">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/dist/*
</span></span><span style="display:flex;"><span>/html/*
</span></span><span style="display:flex;"><span>.local
</span></span><span style="display:flex;"><span>/node_modules/**
</span></span><span style="display:flex;"><span>**/*.svg
</span></span><span style="display:flex;"><span>**/*.sh
</span></span><span style="display:flex;"><span>/public/*
</span></span></code></pre></div><p><strong>通过 pnpm run lint 去检测语法，如果出现不规范格式,通过 pnpm run fix 修改</strong></p>
<h4 id="三配置-stylelint">三、配置 stylelint<a hidden class="anchor" aria-hidden="true" href="#三配置-stylelint">#</a></h4>
<p><a href="https://stylelint.io/">stylelint</a>为 css 的 lint 工具。可格式化 css 代码，检查 css 语法错误与不合理的写法，指定 css 书写顺序等。</p>
<p>我们的项目中使用 scss 作为预处理器，安装以下依赖：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm add sass sass-loader stylelint postcss postcss-scss postcss-html stylelint-config-prettier stylelint-config-recess-order stylelint-config-recommended-scss stylelint-config-standard stylelint-config-standard-vue stylelint-scss stylelint-order stylelint-config-standard-scss -D
</span></span></code></pre></div><h5 id="31-stylelintrccjs-配置文件">3.1 .stylelintrc.cjs 配置文件<a hidden class="anchor" aria-hidden="true" href="#31-stylelintrccjs-配置文件">#</a></h5>
<p><strong>官网:https://stylelint.bootcss.com/</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// @see https://stylelint.bootcss.com/
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;stylelint-config-standard&#39;</span>, <span style="color:#928374;font-style:italic">// 配置stylelint拓展插件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-html/vue&#39;</span>, <span style="color:#928374;font-style:italic">// 配置 vue 中 template 样式格式化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-standard-scss&#39;</span>, <span style="color:#928374;font-style:italic">// 配置stylelint scss插件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-recommended-vue/scss&#39;</span>, <span style="color:#928374;font-style:italic">// 配置 vue 中 scss 样式格式化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-recess-order&#39;</span>, <span style="color:#928374;font-style:italic">// 配置stylelint css属性书写顺序插件,
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-prettier&#39;</span>, <span style="color:#928374;font-style:italic">// 配置stylelint和prettier兼容
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  ],
</span></span><span style="display:flex;"><span>  overrides<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      files<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;**/*.(scss|css|vue|html)&#39;</span>],
</span></span><span style="display:flex;"><span>      customSyntax<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;postcss-scss&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      files<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;**/*.(html|vue)&#39;</span>],
</span></span><span style="display:flex;"><span>      customSyntax<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;postcss-html&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  ignoreFiles<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.js&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.jsx&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.tsx&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.ts&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.json&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.md&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.yaml&#39;</span>,
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * null  =&gt; 关闭该规则
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * always =&gt; 必须
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   */</span>
</span></span><span style="display:flex;"><span>  rules<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;value-keyword-case&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// 在 css 中使用 v-bind，不报错
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-descending-specificity&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// 禁止在具有较高优先级的选择器后出现被其覆盖的较低优先级的选择器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;function-url-quotes&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;always&#39;</span>, <span style="color:#928374;font-style:italic">// 要求或禁止 URL 的引号 &#34;always(必须加上引号)&#34;|&#34;never(没有引号)&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-empty-source&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// 关闭禁止空源码
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;selector-class-pattern&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// 关闭强制选择器类名的格式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;property-no-unknown&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// 禁止未知的属性(true 为不允许)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;block-opening-brace-space-before&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;always&#39;</span>, <span style="color:#928374;font-style:italic">//大括号之前必须有一个空格或不能有空白符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;value-no-vendor-prefix&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// 关闭 属性值前缀 --webkit-box
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;property-no-vendor-prefix&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// 关闭 属性前缀 -webkit-mask
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;selector-pseudo-class-no-unknown&#39;</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">// 不允许未知的选择器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">true</span>,
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        ignorePseudoClasses<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;global&#39;</span>, <span style="color:#79740e">&#39;v-deep&#39;</span>, <span style="color:#79740e">&#39;deep&#39;</span>], <span style="color:#928374;font-style:italic">// 忽略属性，修改element默认样式的时候能使用到
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      },
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="32-stylelintignore-忽略文件">3.2 .stylelintignore 忽略文件<a hidden class="anchor" aria-hidden="true" href="#32-stylelintignore-忽略文件">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>/node_modules/*
</span></span><span style="display:flex;"><span>/dist/*
</span></span><span style="display:flex;"><span>/html/*
</span></span><span style="display:flex;"><span>/public/*
</span></span></code></pre></div><h5 id="33-运行脚本">3.3 运行脚本<a hidden class="anchor" aria-hidden="true" href="#33-运行脚本">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>	<span style="color:#9d0006">&#34;lint:style&#34;</span>: <span style="color:#79740e">&#34;stylelint src/**/*.{css,scss,vue} --cache --fix&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>最后配置统一的 prettier 来格式化我们的 js 和 css，html 代码</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span> <span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;dev&#34;</span>: <span style="color:#79740e">&#34;vite --open&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;build&#34;</span>: <span style="color:#79740e">&#34;vue-tsc &amp;&amp; vite build&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;preview&#34;</span>: <span style="color:#79740e">&#34;vite preview&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint&#34;</span>: <span style="color:#79740e">&#34;eslint src&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;fix&#34;</span>: <span style="color:#79740e">&#34;eslint src --fix&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;format&#34;</span>: <span style="color:#79740e">&#34;prettier --write \&#34;./**/*.{html,vue,ts,js,json,md}\&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint:eslint&#34;</span>: <span style="color:#79740e">&#34;eslint src/**/*.{ts,vue} --cache --fix&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint:style&#34;</span>: <span style="color:#79740e">&#34;stylelint src/**/*.{css,scss,vue} --cache --fix&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span></code></pre></div><p><strong>当我们运行<code>pnpm run format</code>的时候，会把代码直接格式化</strong></p>
<h4 id="四配置-husky">四、配置 husky<a hidden class="anchor" aria-hidden="true" href="#四配置-husky">#</a></h4>
<p>在上面我们已经集成好了我们代码校验工具，但是需要每次手动的去执行命令才会格式化我们的代码。如果有人没有格式化就提交了远程仓库中，那这个规范就没什么用。所以我们需要强制让开发人员按照代码规范来提交。</p>
<p>要做到这件事情，就需要利用 husky 在代码提交之前触发 git hook(git 在客户端的钩子)，然后执行<code>pnpm run format</code>来自动的格式化我们的代码。</p>
<p>安装<code>husky</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install -D husky
</span></span></code></pre></div><p>执行</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>npx husky-init
</span></span></code></pre></div><p>会在根目录下生成个一个.husky 目录，在这个目录下面会有一个 pre-commit 文件，这个文件里面的命令在我们执行 commit 的时候就会执行</p>
<p>在<code>.husky/pre-commit</code>文件添加如下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#427b58">#!/usr/bin/env sh
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>. <span style="color:#79740e">&#34;</span><span style="color:#af3a03">$(</span>dirname -- <span style="color:#79740e">&#34;</span>$0<span style="color:#79740e">&#34;</span><span style="color:#af3a03">)</span><span style="color:#79740e">/_/husky.sh&#34;</span>
</span></span><span style="display:flex;"><span>pnpm run format
</span></span></code></pre></div><p>当我们对代码进行 commit 操作的时候，就会执行命令，对代码进行格式化，然后再提交。</p>
<h4 id="五配置-commitlint">五、配置 commitlint<a hidden class="anchor" aria-hidden="true" href="#五配置-commitlint">#</a></h4>
<p>对于我们的 commit 信息，也是有统一规范的，不能随便写,要让每个人都按照统一的标准来执行，我们可以利用<strong>commitlint</strong>来实现。</p>
<p>安装包</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm add @commitlint/config-conventional @commitlint/cli -D
</span></span></code></pre></div><p>添加配置文件，新建<code>commitlint.config.cjs</code>(注意是 cjs)，然后添加下面的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;@commitlint/config-conventional&#39;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 校验规则
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  rules<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;type-enum&#39;</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      <span style="color:#8f3f71">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#39;always&#39;</span>,
</span></span><span style="display:flex;"><span>      [
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;feat&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;fix&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;docs&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;style&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;refactor&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;perf&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;test&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;chore&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;revert&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;build&#39;</span>,
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;type-case&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;type-empty&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;scope-empty&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;scope-case&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;subject-full-stop&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>, <span style="color:#79740e">&#39;never&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;subject-case&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>, <span style="color:#79740e">&#39;never&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;header-max-length&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>, <span style="color:#79740e">&#39;always&#39;</span>, <span style="color:#8f3f71">72</span>],
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在<code>package.json</code>中配置 scripts 命令</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 在scrips中添加下面的代码
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;commitlint&#34;</span>: <span style="color:#79740e">&#34;commitlint --config commitlint.config.cjs -e -V&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>配置结束，现在当我们填写<code>commit</code>信息的时候，前面就需要带着下面的<code>subject</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&#39;feat&#39;,//新特性、新功能
</span></span><span style="display:flex;"><span>&#39;fix&#39;,//修改bug
</span></span><span style="display:flex;"><span>&#39;docs&#39;,//文档修改
</span></span><span style="display:flex;"><span>&#39;style&#39;,//代码格式修改, 注意不是 css 修改
</span></span><span style="display:flex;"><span>&#39;refactor&#39;,//代码重构
</span></span><span style="display:flex;"><span>&#39;perf&#39;,//优化相关，比如提升性能、体验
</span></span><span style="display:flex;"><span>&#39;test&#39;,//测试用例修改
</span></span><span style="display:flex;"><span>&#39;chore&#39;,//其他修改, 比如改变构建流程、或者增加依赖库、工具等
</span></span><span style="display:flex;"><span>&#39;revert&#39;,//回滚到上一个版本
</span></span><span style="display:flex;"><span>&#39;build&#39;,//编译相关的修改，例如发布版本、对项目构建或者依赖的改动
</span></span></code></pre></div><p>配置 husky</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>npx husky add .husky/commit-msg
</span></span></code></pre></div><p>在生成的 commit-msg 文件中添加下面的命令</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#427b58">#!/usr/bin/env sh
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>. <span style="color:#79740e">&#34;</span><span style="color:#af3a03">$(</span>dirname -- <span style="color:#79740e">&#34;</span>$0<span style="color:#79740e">&#34;</span><span style="color:#af3a03">)</span><span style="color:#79740e">/_/husky.sh&#34;</span>
</span></span><span style="display:flex;"><span>pnpm commitlint
</span></span></code></pre></div><p>当我们 commit 提交信息时，就不能再随意写了，必须是 git commit -m &lsquo;fix: xxx&rsquo; 符合类型的才可以，<strong>需要注意的是类型的后面需要用英文的 :，并且冒号后面是需要空一格的，这个是不能省略的</strong></p>
<h4 id="六强制使用-pnpm-包管理器工具">六、强制使用 pnpm 包管理器工具<a hidden class="anchor" aria-hidden="true" href="#六强制使用-pnpm-包管理器工具">#</a></h4>
<p>团队开发项目的时候，需要统一包管理器工具,因为不同包管理器工具下载同一个依赖,可能版本不一样,</p>
<p>导致项目出现 bug 问题,因此包管理器工具需要统一管理！！！</p>
<p>在根目录创建<code>scritps/preinstall.js</code>文件，添加下面的内容</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span><span style="color:#79740e">/pnpm/</span>.test(process.env.npm_execpath <span style="color:#af3a03">||</span> <span style="color:#79740e">&#39;&#39;</span>)) {
</span></span><span style="display:flex;"><span>  console.warn(
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">`</span>\<span style="color:#79740e">u001b[33mThis repository must using pnpm as the package manager `</span> <span style="color:#af3a03">+</span>
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">` for scripts to work properly.</span>\<span style="color:#79740e">u001b[39m</span>\<span style="color:#79740e">n`</span>,
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>  process.exit(<span style="color:#8f3f71">1</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>配置命令</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>	<span style="color:#9d0006">&#34;preinstall&#34;</span>: <span style="color:#79740e">&#34;node ./scripts/preinstall.js&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>当我们使用 npm 或者 yarn 来安装包的时候，就会报错了。原理就是在 install 的时候会触发 preinstall（npm 提供的生命周期钩子）这个文件里面的代码。</strong></p>
<h2 id="三项目集成">三、项目集成<a hidden class="anchor" aria-hidden="true" href="#三项目集成">#</a></h2>
<h3 id="31-集成-element-plus">3.1 集成 element-plus<a hidden class="anchor" aria-hidden="true" href="#31-集成-element-plus">#</a></h3>
<p>硅谷甄选运营平台,UI 组件库采用的 element-plus，因此需要集成 element-plus 插件！！！</p>
<p>官网地址:https://element-plus.gitee.io/zh-CN/</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install element-plus @element-plus/icons-vue
</span></span></code></pre></div><p><strong>入口文件 main.ts 全局安装 element-plus,element-plus 默认支持语言英语设置为中文</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> ElementPlus <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;element-plus&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#79740e">&#39;element-plus/dist/index.css&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//@ts-ignore忽略当前文件ts类型的检测否则有红色提示(打包会失败)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">import</span> zhCn <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;element-plus/dist/locale/zh-cn.mjs&#39;</span>
</span></span><span style="display:flex;"><span>app.use(ElementPlus, {
</span></span><span style="display:flex;"><span>  locale: <span style="color:#b57614">zhCn</span>,
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p><strong>Element Plus 全局组件类型声明</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// tsconfig.json
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;compilerOptions&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#9d0006">&#34;types&#34;</span>: [<span style="color:#79740e">&#34;element-plus/global&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>配置完毕可以测试 element-plus 组件与图标的使用.</p>
<h3 id="32-src-别名的配置">3.2 src 别名的配置<a hidden class="anchor" aria-hidden="true" href="#32-src-别名的配置">#</a></h3>
<p>在开发项目的时候文件与文件关系可能很复杂，因此我们需要给 src 文件夹配置一个别名！！！</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// vite.config.ts
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">import</span> { defineConfig } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> vue <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;@vitejs/plugin-vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> path <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;path&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> defineConfig({
</span></span><span style="display:flex;"><span>  plugins<span style="color:#af3a03">:</span> [vue()],
</span></span><span style="display:flex;"><span>  resolve<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    alias<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#39;@&#39;</span><span style="color:#af3a03">:</span> path.resolve(<span style="color:#79740e">&#39;./src&#39;</span>), <span style="color:#928374;font-style:italic">// 相对路径别名配置，使用 @ 代替 src
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p><strong>TypeScript 编译配置</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// tsconfig.json
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;compilerOptions&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;baseUrl&#34;</span>: <span style="color:#79740e">&#34;./&#34;</span>, <span style="color:#928374;font-style:italic">// 解析非相对模块的基地址，默认是当前目录
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#9d0006">&#34;paths&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//路径映射，相对于baseUrl
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#9d0006">&#34;@/*&#34;</span>: [<span style="color:#79740e">&#34;src/*&#34;</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="33-环境变量的配置">3.3 环境变量的配置<a hidden class="anchor" aria-hidden="true" href="#33-环境变量的配置">#</a></h3>
<p><strong>项目开发过程中，至少会经历开发环境、测试环境和生产环境(即正式环境)三个阶段。不同阶段请求的状态(如接口地址等)不尽相同，若手动切换接口地址是相当繁琐且易出错的。于是环境变量配置的需求就应运而生，我们只需做简单的配置，把环境状态切换的工作交给代码。</strong></p>
<p>开发环境（development）
顾名思义，开发使用的环境，每位开发人员在自己的 dev 分支上干活，开发到一定程度，同事会合并代码，进行联调。</p>
<p>测试环境（testing）
测试同事干活的环境啦，一般会由测试同事自己来部署，然后在此环境进行测试</p>
<p>生产环境（production）
生产环境是指正式提供对外服务的，一般会关掉错误报告，打开错误日志。(正式提供给客户使用的环境。)</p>
<p>注意:一般情况下，一个环境对应一台服务器,也有的公司开发与测试环境是一台服务器！！！</p>
<p>项目根目录分别添加 开发、生产和测试环境的文件!</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>.env.development
</span></span><span style="display:flex;"><span>.env.production
</span></span><span style="display:flex;"><span>.env.test
</span></span></code></pre></div><p>文件内容</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># 变量必须以 VITE_ 为前缀才能暴露给外部读取</span>
</span></span><span style="display:flex;"><span>NODE_ENV <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;development&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_TITLE <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;硅谷甄选运营平台&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_BASE_API <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/dev-api&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>NODE_ENV <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;production&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_TITLE <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;硅谷甄选运营平台&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_BASE_API <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/prod-api&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># 变量必须以 VITE_ 为前缀才能暴露给外部读取</span>
</span></span><span style="display:flex;"><span>NODE_ENV <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;test&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_TITLE <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;硅谷甄选运营平台&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_BASE_API <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/test-api&#39;</span>
</span></span></code></pre></div><p>配置运行命令：package.json</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span> <span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;dev&#34;</span>: <span style="color:#79740e">&#34;vite --open&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;build:test&#34;</span>: <span style="color:#79740e">&#34;vue-tsc &amp;&amp; vite build --mode test&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;build:pro&#34;</span>: <span style="color:#79740e">&#34;vue-tsc &amp;&amp; vite build --mode production&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;preview&#34;</span>: <span style="color:#79740e">&#34;vite preview&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span></code></pre></div><p>通过 import.meta.env 获取环境变量</p>
<h3 id="34-svg-图标配置">3.4 SVG 图标配置<a hidden class="anchor" aria-hidden="true" href="#34-svg-图标配置">#</a></h3>
<p>在开发项目的时候经常会用到 svg 矢量图,而且我们使用 SVG 以后，页面上加载的不再是图片资源,</p>
<p>这对页面性能来说是个很大的提升，而且我们 SVG 文件比 img 要小的很多，放在项目中几乎不占用资源。</p>
<p><strong>安装 SVG 依赖插件</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install vite-plugin-svg-icons -D
</span></span></code></pre></div><p><strong>在<code>vite.config.ts</code>中配置插件</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> { createSvgIconsPlugin } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite-plugin-svg-icons&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> path <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;path&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> () <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> {
</span></span><span style="display:flex;"><span>    plugins<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      createSvgIconsPlugin({
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">// Specify the icon folder to be cached
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        iconDirs<span style="color:#af3a03">:</span> [path.resolve(process.cwd(), <span style="color:#79740e">&#39;src/assets/icons&#39;</span>)],
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">// Specify symbolId format
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        symbolId<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;icon-[dir]-[name]&#39;</span>,
</span></span><span style="display:flex;"><span>      }),
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>入口文件导入</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#79740e">&#39;virtual:svg-icons-register&#39;</span>
</span></span></code></pre></div><h4 id="341-svg-封装为全局组件">3.4.1 svg 封装为全局组件<a hidden class="anchor" aria-hidden="true" href="#341-svg-封装为全局组件">#</a></h4>
<p>因为项目很多模块需要使用图标,因此把它封装为全局组件！！！</p>
<p><strong>在 src/components 目录下创建一个 SvgIcon 组件:代表如下</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">svg</span> <span style="color:#79740e;font-weight:bold">:style</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;{ width: width, height: height }&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">use</span> <span style="color:#79740e;font-weight:bold">:xlink:href</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;prefix + name&#34;</span> <span style="color:#79740e;font-weight:bold">:fill</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;color&#34;</span>&gt;&lt;/<span style="color:#9d0006">use</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">svg</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  defineProps({
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//xlink:href属性值的前缀
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    prefix<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;#icon-&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svg矢量图的名字
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    name<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svg图标的颜色
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    color<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svg宽度
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    width<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;16px&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svg高度
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    height<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;16px&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>在 src 文件夹目录下创建一个 index.ts 文件：用于注册 components 文件夹内部全部全局组件！！！</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> SvgIcon <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;./SvgIcon/index.vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#af3a03">type</span> { App, Component } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> components<span style="color:#af3a03">:</span> { [name: <span style="color:#b57614">string</span>]<span style="color:#af3a03">:</span> Component } <span style="color:#af3a03">=</span> { SvgIcon }
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> {
</span></span><span style="display:flex;"><span>  install(app: <span style="color:#b57614">App</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">Object</span>.keys(components).forEach((key: <span style="color:#b57614">string</span>) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>      app.component(key, components[key])
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在入口文件引入 src/index.ts 文件,通过 app.use 方法安装自定义插件</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> gloablComponent <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;./components/index&#39;</span>
</span></span><span style="display:flex;"><span>app.use(gloablComponent)
</span></span></code></pre></div><h3 id="35-集成-sass">3.5 集成 sass<a hidden class="anchor" aria-hidden="true" href="#35-集成-sass">#</a></h3>
<p>我们目前在组件内部已经可以使用 scss 样式,因为在配置 styleLint 工具的时候，项目当中已经安装过 sass sass-loader,因此我们再组件内可以使用 scss 语法！！！需要加上 lang=&ldquo;scss&rdquo;</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;scss&#34;</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>接下来我们为项目添加一些全局的样式</p>
<p>在 src/styles 目录下创建一个 index.scss 文件，当然项目中需要用到清除默认样式，因此在 index.scss 引入 reset.scss</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">@import</span> reset.scss
</span></span></code></pre></div><p>在入口文件引入</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>import &#39;@/styles&#39;
</span></span></code></pre></div><p>但是你会发现在 src/styles/index.scss 全局样式文件中没有办法使用$变量.因此需要给项目中引入全局变量$.</p>
<p>在 style/variable.scss 创建一个 variable.scss 文件！</p>
<p>在 vite.config.ts 文件配置如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> defineConfig((config) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>	css<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      preprocessorOptions<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>        scss<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>          javascriptEnabled: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>          additionalData<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;@import &#34;./src/styles/variable.scss&#34;;&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong><code>@import &quot;./src/styles/variable.less&quot;;</code>后面的<code>;</code>不要忘记，不然会报错</strong>!</p>
<p>配置完毕你会发现 scss 提供这些全局变量可以在组件样式中使用了！！！</p>
<h3 id="36-mock-数据">3.6 mock 数据<a hidden class="anchor" aria-hidden="true" href="#36-mock-数据">#</a></h3>
<p>安装依赖:https://www.npmjs.com/package/vite-plugin-mock</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install -D vite-plugin-mock mockjs
</span></span></code></pre></div><p>在 vite.config.js 配置文件启用插件。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> { UserConfigExport, ConfigEnv } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> { viteMockServe } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite-plugin-mock&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> vue <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;@vitejs/plugin-vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> ({ command }) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> {
</span></span><span style="display:flex;"><span>    plugins<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      vue(),
</span></span><span style="display:flex;"><span>      viteMockServe({
</span></span><span style="display:flex;"><span>        localEnabled: <span style="color:#b57614">command</span> <span style="color:#af3a03">===</span> <span style="color:#79740e">&#39;serve&#39;</span>,
</span></span><span style="display:flex;"><span>      }),
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在根目录创建 mock 文件夹:去创建我们需要 mock 数据与接口！！！</p>
<p>在 mock 文件夹内部创建一个 user.ts 文件</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//用户信息数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">function</span> createUserList() {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      userId: <span style="color:#b57614">1</span>,
</span></span><span style="display:flex;"><span>      avatar<span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&#39;</span>,
</span></span><span style="display:flex;"><span>      username<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;admin&#39;</span>,
</span></span><span style="display:flex;"><span>      password<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;111111&#39;</span>,
</span></span><span style="display:flex;"><span>      desc<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;平台管理员&#39;</span>,
</span></span><span style="display:flex;"><span>      roles<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;平台管理员&#39;</span>],
</span></span><span style="display:flex;"><span>      buttons<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;cuser.detail&#39;</span>],
</span></span><span style="display:flex;"><span>      routes<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;home&#39;</span>],
</span></span><span style="display:flex;"><span>      token<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;Admin Token&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      userId: <span style="color:#b57614">2</span>,
</span></span><span style="display:flex;"><span>      avatar<span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&#39;</span>,
</span></span><span style="display:flex;"><span>      username<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;system&#39;</span>,
</span></span><span style="display:flex;"><span>      password<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;111111&#39;</span>,
</span></span><span style="display:flex;"><span>      desc<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;系统管理员&#39;</span>,
</span></span><span style="display:flex;"><span>      roles<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;系统管理员&#39;</span>],
</span></span><span style="display:flex;"><span>      buttons<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;cuser.detail&#39;</span>, <span style="color:#79740e">&#39;cuser.user&#39;</span>],
</span></span><span style="display:flex;"><span>      routes<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;home&#39;</span>],
</span></span><span style="display:flex;"><span>      token<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;System Token&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> [
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 用户登录接口
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    url<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;/api/user/login&#39;</span>, <span style="color:#928374;font-style:italic">//请求地址
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    method<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;post&#39;</span>, <span style="color:#928374;font-style:italic">//请求方式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    response<span style="color:#af3a03">:</span> ({ body }) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//获取请求体携带过来的用户名与密码
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> { username, password } <span style="color:#af3a03">=</span> body
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//调用获取用户信息函数,用于判断是否有此用户
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> checkUser <span style="color:#af3a03">=</span> createUserList().find(
</span></span><span style="display:flex;"><span>        (item) <span style="color:#af3a03">=&gt;</span> item.username <span style="color:#af3a03">===</span> username <span style="color:#af3a03">&amp;&amp;</span> item.password <span style="color:#af3a03">===</span> password,
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//没有用户返回失败信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>checkUser) {
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">201</span>, data<span style="color:#af3a03">:</span> { message<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;账号或者密码不正确&#39;</span> } }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//如果有返回成功信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> { token } <span style="color:#af3a03">=</span> checkUser
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">200</span>, data<span style="color:#af3a03">:</span> { token } }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 获取用户信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    url<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;/api/user/info&#39;</span>,
</span></span><span style="display:flex;"><span>    method<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;get&#39;</span>,
</span></span><span style="display:flex;"><span>    response<span style="color:#af3a03">:</span> (request) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//获取请求头携带token
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> token <span style="color:#af3a03">=</span> request.headers.token
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//查看用户信息是否包含有次token用户
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> checkUser <span style="color:#af3a03">=</span> createUserList().find((item) <span style="color:#af3a03">=&gt;</span> item.token <span style="color:#af3a03">===</span> token)
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//没有返回失败的信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>checkUser) {
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">201</span>, data<span style="color:#af3a03">:</span> { message<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;获取用户信息失败&#39;</span> } }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//如果有返回成功信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">200</span>, data<span style="color:#af3a03">:</span> { checkUser } }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p><strong>安装 axios</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install axios
</span></span></code></pre></div><p>最后通过 axios 测试接口！！！</p>
<h3 id="37-axios-二次封装">3.7 axios 二次封装<a hidden class="anchor" aria-hidden="true" href="#37-axios-二次封装">#</a></h3>
<p>在开发项目的时候避免不了与后端进行交互,因此我们需要使用 axios 插件实现发送网络请求。在开发项目的时候</p>
<p>我们经常会把 axios 进行二次封装。</p>
<p>目的:</p>
<p>1:使用请求拦截器，可以在请求拦截器中处理一些业务(开始进度条、请求头携带公共参数)</p>
<p>2:使用响应拦截器，可以在响应拦截器中处理一些业务(进度条结束、简化服务器返回的数据、处理 http 网络错误)</p>
<p>在根目录下创建 utils/request.ts</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> axios <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;axios&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> { ElMessage } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;element-plus&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//创建axios实例
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">let</span> request <span style="color:#af3a03">=</span> axios.create({
</span></span><span style="display:flex;"><span>  baseURL: <span style="color:#b57614">import.meta.env.VITE_APP_BASE_API</span>,
</span></span><span style="display:flex;"><span>  timeout: <span style="color:#b57614">5000</span>,
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//请求拦截器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>request.interceptors.request.use((config) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> config
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//响应拦截器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>request.interceptors.response.use(
</span></span><span style="display:flex;"><span>  (response) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> response.data
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  (error) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//处理网络错误
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">let</span> msg <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">let</span> status <span style="color:#af3a03">=</span> error.response.status
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">switch</span> (status) {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 401:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;token过期&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 403:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;无权访问&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 404:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;请求地址错误&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 500:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;服务器出现问题&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        msg <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;无网络&#39;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ElMessage({
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">type</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>,
</span></span><span style="display:flex;"><span>      message: <span style="color:#b57614">msg</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> Promise.reject(error)
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> request
</span></span></code></pre></div><h3 id="38-api-接口统一管理">3.8 API 接口统一管理<a hidden class="anchor" aria-hidden="true" href="#38-api-接口统一管理">#</a></h3>
<p>在开发项目的时候,接口可能很多需要统一管理。在 src 目录下去创建 api 文件夹去统一管理项目的接口；</p>
<p>比如:下面方式</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//统一管理咱们项目用户相关的接口
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> request <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;@/utils/request&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#af3a03">type</span> {
</span></span><span style="display:flex;"><span>  loginFormData,
</span></span><span style="display:flex;"><span>  loginResponseData,
</span></span><span style="display:flex;"><span>  userInfoReponseData,
</span></span><span style="display:flex;"><span>} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;./type&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//项目用户相关的请求地址
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">enum</span> API {
</span></span><span style="display:flex;"><span>  LOGIN_URL <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/admin/acl/index/login&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  USERINFO_URL <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/admin/acl/index/info&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  LOGOUT_URL <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/admin/acl/index/logout&#39;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//登录接口
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">export</span> <span style="color:#af3a03">const</span> reqLogin <span style="color:#af3a03">=</span> (data: <span style="color:#b57614">loginFormData</span>) <span style="color:#af3a03">=&gt;</span>
</span></span><span style="display:flex;"><span>  request.post&lt;<span style="color:#9d0006">any</span>, <span style="color:#79740e;font-weight:bold">loginResponseData</span>&gt;(API.LOGIN_URL, data)
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//获取用户信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">const</span> reqUserInfo <span style="color:#af3a03">=</span> () <span style="color:#af3a03">=&gt;</span>
</span></span><span style="display:flex;"><span>  request.<span style="color:#af3a03">get</span>&lt;<span style="color:#9d0006">any</span>, <span style="color:#79740e;font-weight:bold">userInfoReponseData</span>&gt;(API.USERINFO_URL)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//退出登录
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">const</span> reqLogout <span style="color:#af3a03">=</span> () <span style="color:#af3a03">=&gt;</span> request.post&lt;<span style="color:#9d0006">any</span>, <span style="color:#79740e;font-weight:bold">any</span>&gt;(API.LOGOUT_URL)
</span></span></code></pre></div><h2 id="四项目的资源地址">四、项目的资源地址<a hidden class="anchor" aria-hidden="true" href="#四项目的资源地址">#</a></h2>
<p>贾成豪老师代码仓库地址:https://gitee.com/jch1011/vue3_admin_template-bj1.git</p>
<p>项目在线文档:</p>
<p>服务器域名:http://sph-api.atguigu.cn</p>
<p>swagger 文档:</p>
<p>http://139.198.104.58:8209/swagger-ui.html</p>
<p>http://139.198.104.58:8212/swagger-ui.html#/</p>
<p>echarts:国内镜像网站</p>
<p><a href="https://www.isqqw.com/echarts-doc/zh/option.html#title">https://www.isqqw.com/echarts-doc/zh/option.html#title</a></p>
<p><a href="http://datav.aliyun.com/portal/school/atlas/area_selector">http://datav.aliyun.com/portal/school/atlas/area_selector</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://bablvsj.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/">面试题集</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E6%B5%8F%E8%A7%88%E5%99%A8/">
    <span class="title">« Prev</span>
    <br>
    <span>浏览器</span>
  </a>
  <a class="next" href="https://bablvsj.github.io/posts/tech/frontend/00-%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%92%8C%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7whistle/">
    <span class="title">Next »</span>
    <br>
    <span>网络抓包和代理工具：Whistle</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://bablvsj.github.io">Bablvsj&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <div class="flex-c-d">
        <a class="flex-d-c" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"
            target="_blank"> <span>本站由</span><img width="60" src="/images/upyun.png">提供CDN加速/云存储服务</a>
    </div>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
