<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>面试题精简版本 | Bablvsj's Blog</title><meta name=keywords content="面试题集"><meta name=description content="一、CSS相关 1.1 左边定宽，右边自适应方案：float + margin，float + calc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /* 方案1 */ .left { width: 120px; float: left; }"><meta name=author content="Lvsj"><link rel=canonical href=https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E7%AE%80%E7%89%88%E6%9C%AC/><link crossorigin=anonymous href=/assets/css/stylesheet.26af23b8b1c472aadb220beab8420315b9b18975751422bfb4256bd5bcdce878.css integrity="sha256-Jq8juLHEcqrbIgvquEIDFbmxiXV1FCK/tCVr1bzc6Hg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="面试题精简版本"><meta property="og:description" content="一、CSS相关 1.1 左边定宽，右边自适应方案：float + margin，float + calc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /* 方案1 */ .left { width: 120px; float: left; }"><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E7%AE%80%E7%89%88%E6%9C%AC/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-01T17:11:35+08:00"><meta property="article:modified_time" content="2020-01-01T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="面试题精简版本"><meta name=twitter:description content="一、CSS相关 1.1 左边定宽，右边自适应方案：float + margin，float + calc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /* 方案1 */ .left { width: 120px; float: left; }"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"文章","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"面试题精简版本","item":"https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E7%AE%80%E7%89%88%E6%9C%AC/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"面试题精简版本","name":"面试题精简版本","description":"一、CSS相关 1.1 左边定宽，右边自适应方案：float + margin，float + calc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /* 方案1 */ .left { width: 120px; float: left; }","keywords":["面试题集"],"articleBody":"一、CSS相关 1.1 左边定宽，右边自适应方案：float + margin，float + calc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /* 方案1 */ .left { width: 120px; float: left; } .right { margin-left: 120px; } /* 方案2 */ .left { width: 120px; float: left; } .right { width: calc(100% - 120px); float: left; } 1.2 左右两边定宽，中间自适应：float，float + calc, 圣杯布局（设置BFC，margin负值法），flex 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 .wrap { width: 100%; height: 200px; } .wrap \u003e div { height: 100%; } /* 方案1 */ .left { width: 120px; float: left; } .right { float: right; width: 120px; } .center { margin: 0 120px; } /* 方案2 */ .left { width: 120px; float: left; } .right { float: right; width: 120px; } .center { width: calc(100% - 240px); margin-left: 120px; } /* 方案3 */ .wrap { display: flex; } .left { width: 120px; } .right { width: 120px; } .center { flex: 1; } 1.3 左右居中 行内元素: text-align: center 定宽块状元素: 左右 margin 值为 auto 不定宽块状元素: table布局，position + transform 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 /* 方案1 */ .wrap { text-align: center } .center { display: inline; /* or */ /* display: inline-block; */ } /* 方案2 */ .center { width: 100px; margin: 0 auto; } /* 方案2 */ .wrap { position: relative; } .center { position: absulote; left: 50%; transform: translateX(-50%); } 1.4 上下垂直居中 定高：margin，position + margin(负值) 不定高：position + transform，flex，IFC + vertical-align:middle 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 /* 定高方案1 */ .center { height: 100px; margin: 50px 0; } /* 定高方案2 */ .center { height: 100px; position: absolute; top: 50%; margin-top: -25px; } /* 不定高方案1 */ .center { position: absolute; top: 50%; transform: translateY(-50%); } /* 不定高方案2 */ .wrap { display: flex; align-items: center; } .center { width: 100%; } /* 不定高方案3 */ /* 设置 inline-block 则会在外层产生 IFC，高度设为 100% 撑开 wrap 的高度 */ .wrap::before { content: ''; height: 100%; display: inline-block; vertical-align: middle; } .wrap { text-align: center; } .center { display: inline-block; vertical-align: middle; } 1.5 盒模型：content（元素内容） + padding（内边距） + border（边框） + margin（外边距） 延伸： box-sizing\ncontent-box：默认值，总宽度 = margin + border + padding + width border-box：盒子宽度包含 padding 和 border，总宽度 = margin + width inherit：从父元素继承 box-sizing 属性 1.6 BFC、IFC、GFC、FFC：FC（Formatting Contexts），格式化上下文 BFC：块级格式化上下文，容器里面的子元素不会在布局上影响到外面的元素，反之也是如此(按照这个理念来想，只要脱离文档流，肯定就能产生 BFC)。产生 BFC 方式如下\nfloat 的值不为 none。 overflow 的值不为 visible。 position 的值不为 relative 和 static。 display 的值为 table-cell, table-caption, inline-block中的任何一个 用处？常见的多栏布局，结合块级别元素浮动，里面的元素则是在一个相对隔离的环境里运行\nIFC：内联格式化上下文，IFC 的 line box（线框）高度由其包含行内元素中最高的实际高度计算而来（不受到竖直方向的 padding/margin 影响)。\nIFC中的line box一般左右都贴紧整个 IFC，但是会因为 float 元素而扰乱。float 元素会位于 IFC 与 line box 之间，使得 line box 宽度缩短。 同个 ifc 下的多个 line box 高度会不同。 IFC中时不可能有块级元素的，当插入块级元素时（如 p 中插入 div ）会产生两个匿名块与 div 分隔开，即产生两个 IFC ，每个 IFC 对外表现为块级元素，与 div 垂直排列。\n用处？\n水平居中：当一个块要在环境中水平居中时，设置其为 inline-block 则会在外层产生IFC，通过 text-align 则可以使其水平居中。 垂直居中：创建一个 IFC，用其中一个元素撑开父元素的高度，然后设置其 vertical-align: middle，其他行内元素则可以在此父元素下垂直居中 GFC：网格布局格式化上下文（display: grid） FFC：自适应格式化上下文（display: flex） 二、JS 基础（ES5） 2.1 原型 这里可以谈很多，只要围绕 [[ prototype ]] 谈，都没啥问题\n2.2 闭包 牵扯作用域，可以两者联系起来一起谈\n2.3 作用域 词法作用域，动态作用域\n2.4 this 不同情况的调用，this指向分别如何。顺带可以提一下 es6 中箭头函数没有 this, arguments, super 等，这些只依赖包含箭头函数最接近的函数\n2.5 call，apply，bind 三者用法和区别 参数、绑定规则（显示绑定和强绑定），运行效率（最终都会转换成一个一个的参数去运行）、运行情况（call，apply 立即执行，bind 是return 出一个 this “固定”的函数，这也是为什么 bind 是强绑定的一个原因）\n注：“固定”这个词的含义，它指的固定是指只要传进去了 context，则 bind 中 return 出来的函数 this 便一直指向 context，除非 context 是个变量\n2.6 变量声明提升 js 代码在运行前都会进行 AST 解析，函数申明默认会提到当前作用域最前面，变量申明也会进行提升。但赋值不会得到提升。关于 AST 解析，这里也可以说是形成词法作用域的主要原因\n三、JS 基础（ES6） 3.1 let，const let 产生块级作用域（通常配合 for 循环或者 {} 进行使用产生块级作用域），const 申明的变量是常量（内存地址不变）\n3.2 Promise 这里你谈 promise的时候，除了将他解决的痛点以及常用的 API 之外，最好进行拓展把 eventloop 带进来好好讲一下，microtask(微任务)、macrotask(任务) 的执行顺序，如果看过 promise 源码，最好可以谈一谈 原生 Promise 是如何实现的。Promise 的关键点在于callback 的两个参数，一个是 resovle，一个是 reject。还有就是 Promise 的链式调用（Promise.then()，每一个 then 都是一个责任人）\n3.3 Generator 遍历器对象生成函数，最大的特点是可以交出函数的执行权\nfunction 关键字与函数名之间有一个星号； 函数体内部使用 yield表达式，定义不同的内部状态； next 指针移向下一个状态 这里你可以说说 Generator的异步编程，以及它的语法糖 async 和 awiat，传统的异步编程。ES6 之前，异步编程大致如下\n回调函数 事件监听 发布/订阅 传统异步编程方案之一：协程，多个线程互相协作，完成异步任务。\n3.4 async、await Generator 函数的语法糖。有更好的语义、更好的适用性、返回值是 Promise。\nasync =\u003e * await =\u003e yield 1 2 3 4 5 6 7 8 9 10 11 12 // 基本用法 async function timeout (ms) { await new Promise((resolve) =\u003e { setTimeout(resolve, ms) }) } async function asyncConsole (value, ms) { await timeout(ms) console.log(value) } asyncConsole('hello async and await', 1000) 注：最好把2，3，4 连到一起讲\n3.5 AMD，CMD，CommonJs，ES6 Module：解决原始无模块化的痛点 AMD：requirejs 在推广过程中对模块定义的规范化产出，提前执行，推崇依赖前置 CMD：seajs 在推广过程中对模块定义的规范化产出，延迟执行，推崇依赖就近 CommonJs：模块输出的是一个值的 copy，运行时加载，加载的是一个对象（module.exports 属性），该对象只有在脚本运行完才会生成 ES6 Module：模块输出的是一个值的引用，编译时输出接口，ES6模块不是对象，它对外接口只是一种静态定义，在代码静态解析阶段就会生成。 四、框架相关 4.1 数据双向绑定原理：常见数据绑定的方案 Object.defineProperty（vue）：劫持数据的 getter 和 setter 脏值检测（angularjs）：通过特定事件进行轮循 发布/订阅模式：通过消息发布并将消息进行订阅 4.2 VDOM：三个 part 虚拟节点类，将真实 DOM 节点用 js 对象的形式进行展示，并提供 render 方法，将虚拟节点渲染成真实 DOM 节点 diff 比较：对虚拟节点进行 js 层面的计算，并将不同的操作都记录到 patch 对象 re-render：解析 patch 对象，进行 re-render 补充1：VDOM 的必要性？\n创建真实DOM的代价高：真实的 DOM 节点 node 实现的属性很多，而 vnode 仅仅实现一些必要的属性，相比起来，创建一个 vnode 的成本比较低。 触发多次浏览器重绘及回流：使用 vnode ，相当于加了一个缓冲，让一次数据变动所带来的所有 node 变化，先在 vnode 中进行修改，然后 diff 之后对所有产生差异的节点集中一次对 DOM tree 进行修改，以减少浏览器的重绘及回流。 补充2：vue 为什么采用 vdom？\n引入 Virtual DOM 在性能方面的考量仅仅是一方面。\n性能受场景的影响是非常大的，不同的场景可能造成不同实现方案之间成倍的性能差距，所以依赖细粒度绑定及 Virtual DOM 哪个的性能更好还真不是一个容易下定论的问题。 Vue 之所以引入了 Virtual DOM，更重要的原因是为了解耦 HTML依赖，这带来两个非常重要的好处是： 不再依赖 HTML 解析器进行模版解析，可以进行更多的 AOT 工作提高运行时效率：通过模版 AOT 编译，Vue 的运行时体积可以进一步压缩，运行时效率可以进一步提升； 可以渲染到 DOM 以外的平台，实现 SSR、同构渲染这些高级特性，Weex等框架应用的就是这一特性。 综上，Virtual DOM 在性能上的收益并不是最主要的，更重要的是它使得 Vue 具备了现代框架应有的高级特性。\n4.3 vue 和 react 区别 相同点：都支持 ssr，都有 vdom，组件化开发，实现 webComponents 规范，数据驱动等 不同点：vue 是双向数据流（当然为了实现单数据流方便管理组件状态，vuex 便出现了），react 是单向数据流。vue 的 vdom 是追踪每个组件的依赖关系，不会渲染整个组件树，react 每当应该状态被改变时，全部子组件都会 re-render 4.4 为什么用 vue 简洁、轻快、舒服\n五、网络基础类 5.1 跨域 很多种方法，但万变不离其宗，都是为了搞定同源策略。重用的有 jsonp、iframe、cors、img、HTML5 postMessage等等。其中用到 html 标签进行跨域的原理就是 html 不受同源策略影响。但只是接受 Get 的请求方式，这个得清楚。\n延伸1：img iframe script 来发送跨域请求有什么优缺点？\n1. iframe\n优点：跨域完毕之后DOM操作和互相之间的JavaScript调用都是没有问题的 缺点：1.若结果要以URL参数传递，这就意味着在结果数据量很大的时候需要分割传递，巨烦。2.还有一个是iframe本身带来的，母页面和iframe本身的交互本身就有安全性限制。 2. script\n优点：可以直接返回json格式的数据，方便处理 缺点：只接受GET请求方式 3. 图片ping\n优点：可以访问任何url，一般用来进行点击追踪，做页面分析常用的方法 缺点：不能访问响应文本，只能监听是否响应 延伸2：配合 webpack 进行反向代理？\nwebpack 在 devServer 选项里面提供了一个 proxy 的参数供开发人员进行反向代理\n1 2 3 4 5 6 7 '/api': { target: 'http://www.example.com', // your target host changeOrigin: true, // needed for virtual hosted sites pathRewrite: { '^/api': '' // rewrite path } }, 然后再配合 http-proxy-middleware 插件对 api 请求地址进行代理\n1 2 3 4 5 6 7 8 9 const express = require('express'); const proxy = require('http-proxy-middleware'); // proxy api requests const exampleProxy = proxy(options); // 这里的 options 就是 webpack 里面的 proxy 选项对应的每个选项 // mount `exampleProxy` in web server const app = express(); app.use('/api', exampleProxy); app.listen(3000); 然后再用 nginx 把允许跨域的源地址添加到报头里面即可\n说到 nginx ，可以再谈谈 CORS 配置，大致如下\n1 2 3 4 5 6 7 8 9 10 11 12 location / { if ($request_method = 'OPTIONS') { add_header 'Access-Control-Allow-Origin' '*'; add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS'; add_header 'Access-Control-Allow-Credentials' 'true'; add_header 'Access-Control-Allow-Headers' 'DNT, X-Mx-ReqToken, Keep-Alive, User-Agent, X-Requested-With, If-Modified-Since, Cache-Control, Content-Type'; add_header 'Access-Control-Max-Age' 86400; add_header 'Content-Type' 'text/plain charset=UTF-8'; add_header 'Content-Length' 0; return 200; } } 5.2 http 无状态无连接 http 协议对于事务处理没有记忆能力 对同一个url请求没有上下文关系 每次的请求都是独立的，它的执行情况和结果与前面的请求和之后的请求是无直接关系的，它不会受前面的请求应答情况直接影响，也不会直接影响后面的请求应答情况 服务器中没有保存客户端的状态，客户端必须每次带上自己的状态去请求服务器 人生若只如初见，请求过的资源下一次会继续进行请求 http协议无状态中的 状态 到底指的是什么？！\n【状态】的含义就是：客户端和服务器在某次会话中产生的数据 那么对应的【无状态】就意味着：这些数据不会被保留 通过增加cookie和session机制，现在的网络请求其实是有状态的 在没有状态的http协议下，服务器也一定会保留你每次网络请求对数据的修改，但这跟保留每次访问的数据是不一样的，保留的只是会话产生的结果，而没有保留会话 5.3 http-cache：就是 http 缓存 1. 首先得明确 http 缓存的好处\n减少了冗余的数据传输，减少网费 减少服务器端的压力 Web 缓存能够减少延迟与网络阻塞，进而减少显示某个资源所用的时间 加快客户端加载网页的速度 2. 常见 http 缓存的类型\n私有缓存（一般为本地浏览器缓存） 代理缓存 3. 然后谈谈本地缓存\n本地缓存是指浏览器请求资源时命中了浏览器本地的缓存资源，浏览器并不会发送真正的请求给服务器了。它的执行过程是\n第一次浏览器发送请求给服务器时，此时浏览器还没有本地缓存副本，服务器返回资源给浏览器，响应码是200 OK，浏览器收到资源后，把资源和对应的响应头一起缓存下来 第二次浏览器准备发送请求给服务器时候，浏览器会先检查上一次服务端返回的响应头信息中的Cache-Control，它的值是一个相对值，单位为秒，表示资源在客户端缓存的最大有效期，过期时间为第一次请求的时间减去Cache-Control的值，过期时间跟当前的请求时间比较，如果本地缓存资源没过期，那么命中缓存，不再请求服务器 如果没有命中，浏览器就会把请求发送给服务器，进入缓存协商阶段。 与本地缓存相关的头有：Cache-Control、Expires，Cache-Control有多个可选值代表不同的意义，而Expires就是一个日期格式的绝对值。\n3.1 Cache-Control\nCache-Control是HTPP缓存策略中最重要的头，它是HTTP/1.1中出现的，它由如下几个值\nno-cache：不使用本地缓存。需要使用缓存协商，先与服务器确认返回的响应是否被更改，如果之前的响应中存在ETag，那么请求的时候会与服务端验证，如果资源未被更改，则可以避免重新下载 no-store：直接禁止游览器缓存数据，每次用户请求该资源，都会向服务器发送一个请求，每次都会下载完整的资源 public：可以被所有的用户缓存，包括终端用户和CDN等中间代理服务器。 private：只能被终端用户的浏览器缓存，不允许CDN等中继缓存服务器对其缓存。 max-age：从当前请求开始，允许获取的响应被重用的最长时间（秒）。 1 2 3 4 # 例如： Cache-Control: public, max-age=1000 # 表示资源可以被所有用户以及代理服务器缓存，最长时间为1000秒。 3.2 Expires\nExpires是HTTP/1.0出现的头信息，同样是用于决定本地缓存策略的头，它是一个绝对时间，时间格式是如Mon, 10 Jun 2015 21:31:12 GMT，只要发送请求时间是在Expires之前，那么本地缓存始终有效，否则就会去服务器发送请求获取新的资源。如果同时出现Cache-Control：max-age和Expires，那么max-age优先级更高。他们可以这样组合使用\n1 2 Cache-Control: public Expires: Wed, Jan 10 2018 00:27:04 GMT 3.3 所谓的缓存协商\n当第一次请求时服务器返回的响应头中存在以下情况时\n没有 Cache-Control 和 Expires Cache-Control 和 Expires 过期了 Cache-Control 的属性设置为 no-cache 时 那么浏览器第二次请求时就会与服务器进行协商，询问浏览器中的缓存资源是不是旧版本，需不需要更新，此时，服务器就会做出判断，如果缓存和服务端资源的最新版本是一致的，那么就无需再次下载该资源，服务端直接返回304 Not Modified 状态码，如果服务器发现浏览器中的缓存已经是旧版本了，那么服务器就会把最新资源的完整内容返回给浏览器，状态码就是200 Ok，那么服务端是根据什么来判断浏览器的缓存是不是最新的呢？其实是根据HTTP的另外两组头信息，分别是：Last-Modified/If-Modified-Since 与 ETag/If-None-Match。\nLast-Modified 与 If-Modified-Since\n浏览器第一次请求资源时，服务器会把资源的最新修改时间Last-Modified:Thu, 29 Dec 2011 18:23:55 GMT放在响应头中返回给浏览器 第二次请求时，浏览器就会把上一次服务器返回的修改时间放在请求头If-Modified-Since:Thu, 29 Dec 2011 18:23:55发送给服务器，服务器就会拿这个时间跟服务器上的资源的最新修改时间进行对比 如果两者相等或者大于服务器上的最新修改时间，那么表示浏览器的缓存是有效的，此时缓存会命中，服务器就不再返回内容给浏览器了，同时Last-Modified头也不会返回，因为资源没被修改，返回了也没什么意义。如果没命中缓存则最新修改的资源连同Last-Modified头一起返回\n1 2 3 4 # 第一次请求返回的响应头 Cache-Control:max-age=3600 Expires: Fri, Jan 12 2018 00:27:04 GMT Last-Modified: Wed, Jan 10 2018 00:27:04 GMT 1 2 # 第二次请求的请求头信息 If-Modified-Since: Wed, Jan 10 2018 00:27:04 GMT 这组头信息是基于资源的修改时间来判断资源有没有更新，另一种方式就是根据资源的内容来判断，就是接下来要讨论的 ETag 与 If-None-Match\nETag与If-None-Match\nETag/If-None-Match与Last-Modified/If-Modified-Since的流程其实是类似的，唯一的区别是它基于资源的内容的摘要信息（比如MD5 hash）来判断\n浏览器发送第二次请求时，会把第一次的响应头信息ETag的值放在If-None-Match的请求头中发送到服务器，与最新的资源的摘要信息对比，如果相等，取浏览器缓存，否则内容有更新，最新的资源连同最新的摘要信息返回。用ETag的好处是如果因为某种原因到时资源的修改时间没改变，那么用ETag就能区分资源是不是有被更新。\n1 2 3 4 # 第一次请求返回的响应头： Cache-Control: public, max-age=31536000 ETag: \"15f0fff99ed5aae4edffdd6496d7131f\" 1 2 3 # 第二次请求的请求头信息： If-None-Match: \"15f0fff99ed5aae4edffdd6496d7131f\" 5.4 cookie 和 session session： 是一个抽象概念，开发者为了实现中断和继续等操作，将 user agent 和 server 之间一对一的交互，抽象为“会话”，进而衍生出“会话状态”，也就是 session 的概念 cookie：它是一个世纪存在的东西，http 协议中定义在 header 中的字段，可以认为是 session 的一种后端无状态实现 现在我们常说的 session，是为了绕开 cookie 的各种限制，通常借助 cookie本身和后端存储实现的，一种更高级的会话状态实现\nsession 的常见实现要借助cookie来发送 sessionID\n5.5 安全问题，如 XSS 和 CSRF XSS：跨站脚本攻击，是一种网站应用程序的安全漏洞攻击，是代码注入的一种。常见方式是将恶意代码注入合法代码里隐藏起来，再诱发恶意代码，从而进行各种各样的非法活动 防范：记住一点 “所有用户输入都是不可信的”，所以得做输入过滤和转义\nCSRF：跨站请求伪造，也称 XSRF，是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。与 XSS 相比，XSS利用的是用户对指定网站的信任，CSRF利用的是网站对用户网页浏览器的信任。 防范：用户操作验证（验证码），额外验证机制（token使用）等\n","wordCount":"7037","inLanguage":"en","datePublished":"2020-01-01T17:11:35+08:00","dateModified":"2020-01-01T17:11:35+08:00","author":{"@type":"Person","name":"Lvsj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E7%AE%80%E7%89%88%E6%9C%AC/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=主页><span>主页</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=时间轴><span>时间轴</span></a></li><li><a href=https://bablvsj.github.io/tags title=标签><span>标签</span></a></li><li><a href=https://bablvsj.github.io/about title=关于><span>关于</span></a></li><li><a href=https://bablvsj.github.io/search title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>面试题精简版本</h1><div class=post-meta><span title='2020-01-01 17:11:35 +0800 +0800'>2020/01/01</span>&nbsp;·&nbsp;15 min&nbsp;·&nbsp;Lvsj<ul class=post-tags-meta><a href=https://bablvsj.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/>面试题集</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e4%b8%80css%e7%9b%b8%e5%85%b3 aria-label=一、CSS相关>一、CSS相关</a><ul><li><a href=#11-%e5%b7%a6%e8%be%b9%e5%ae%9a%e5%ae%bd%e5%8f%b3%e8%be%b9%e8%87%aa%e9%80%82%e5%ba%94%e6%96%b9%e6%a1%88float--marginfloat--calc aria-label="1.1 左边定宽，右边自适应方案：float + margin，float + calc">1.1 左边定宽，右边自适应方案：float + margin，float + calc</a></li><li><a href=#12-%e5%b7%a6%e5%8f%b3%e4%b8%a4%e8%be%b9%e5%ae%9a%e5%ae%bd%e4%b8%ad%e9%97%b4%e8%87%aa%e9%80%82%e5%ba%94floatfloat--calc-%e5%9c%a3%e6%9d%af%e5%b8%83%e5%b1%80%e8%ae%be%e7%bd%aebfcmargin%e8%b4%9f%e5%80%bc%e6%b3%95flex aria-label="1.2 左右两边定宽，中间自适应：float，float + calc, 圣杯布局（设置BFC，margin负值法），flex">1.2 左右两边定宽，中间自适应：float，float + calc, 圣杯布局（设置BFC，margin负值法），flex</a></li><li><a href=#13-%e5%b7%a6%e5%8f%b3%e5%b1%85%e4%b8%ad aria-label="1.3 左右居中">1.3 左右居中</a></li><li><a href=#14-%e4%b8%8a%e4%b8%8b%e5%9e%82%e7%9b%b4%e5%b1%85%e4%b8%ad aria-label="1.4 上下垂直居中">1.4 上下垂直居中</a></li><li><a href=#15-%e7%9b%92%e6%a8%a1%e5%9e%8bcontent%e5%85%83%e7%b4%a0%e5%86%85%e5%ae%b9--padding%e5%86%85%e8%be%b9%e8%b7%9d--border%e8%be%b9%e6%a1%86--margin%e5%a4%96%e8%be%b9%e8%b7%9d aria-label="1.5 盒模型：content（元素内容） + padding（内边距） + border（边框） + margin（外边距）">1.5 盒模型：content（元素内容） + padding（内边距） + border（边框） + margin（外边距）</a></li><li><a href=#16-bfcifcgfcffcfcformatting-contexts%e6%a0%bc%e5%bc%8f%e5%8c%96%e4%b8%8a%e4%b8%8b%e6%96%87 aria-label="1.6 BFC、IFC、GFC、FFC：FC（Formatting Contexts），格式化上下文">1.6 BFC、IFC、GFC、FFC：FC（Formatting Contexts），格式化上下文</a></li></ul></li><li><a href=#%e4%ba%8cjs-%e5%9f%ba%e7%a1%80es5 aria-label="二、JS 基础（ES5）">二、JS 基础（ES5）</a><ul><li><a href=#21-%e5%8e%9f%e5%9e%8b aria-label="2.1 原型">2.1 原型</a></li><li><a href=#22-%e9%97%ad%e5%8c%85 aria-label="2.2 闭包">2.2 闭包</a></li><li><a href=#23-%e4%bd%9c%e7%94%a8%e5%9f%9f aria-label="2.3 作用域">2.3 作用域</a></li><li><a href=#24-this aria-label="2.4 this">2.4 this</a></li><li><a href=#25-callapplybind-%e4%b8%89%e8%80%85%e7%94%a8%e6%b3%95%e5%92%8c%e5%8c%ba%e5%88%ab aria-label="2.5 call，apply，bind 三者用法和区别">2.5 call，apply，bind 三者用法和区别</a></li><li><a href=#26-%e5%8f%98%e9%87%8f%e5%a3%b0%e6%98%8e%e6%8f%90%e5%8d%87 aria-label="2.6 变量声明提升">2.6 变量声明提升</a></li></ul></li><li><a href=#%e4%b8%89js-%e5%9f%ba%e7%a1%80es6 aria-label="三、JS 基础（ES6）">三、JS 基础（ES6）</a><ul><li><a href=#31-letconst aria-label="3.1 let，const">3.1 let，const</a></li><li><a href=#32-promise aria-label="3.2 Promise">3.2 Promise</a></li><li><a href=#33-generator aria-label="3.3 Generator">3.3 Generator</a></li><li><a href=#34-asyncawait aria-label="3.4 async、await">3.4 async、await</a></li><li><a href=#35-amdcmdcommonjses6-module%e8%a7%a3%e5%86%b3%e5%8e%9f%e5%a7%8b%e6%97%a0%e6%a8%a1%e5%9d%97%e5%8c%96%e7%9a%84%e7%97%9b%e7%82%b9 aria-label="3.5 AMD，CMD，CommonJs，ES6 Module：解决原始无模块化的痛点">3.5 AMD，CMD，CommonJs，ES6 Module：解决原始无模块化的痛点</a></li></ul></li><li><a href=#%e5%9b%9b%e6%a1%86%e6%9e%b6%e7%9b%b8%e5%85%b3 aria-label=四、框架相关>四、框架相关</a><ul><li><a href=#41-%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a%e5%8e%9f%e7%90%86%e5%b8%b8%e8%a7%81%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e7%9a%84%e6%96%b9%e6%a1%88 aria-label="4.1 数据双向绑定原理：常见数据绑定的方案">4.1 数据双向绑定原理：常见数据绑定的方案</a></li><li><a href=#42-vdom%e4%b8%89%e4%b8%aa-part aria-label="4.2 VDOM：三个 part">4.2 VDOM：三个 part</a></li><li><a href=#43-vue-%e5%92%8c-react-%e5%8c%ba%e5%88%ab aria-label="4.3 vue 和 react 区别">4.3 vue 和 react 区别</a></li><li><a href=#44-%e4%b8%ba%e4%bb%80%e4%b9%88%e7%94%a8-vue aria-label="4.4 为什么用 vue">4.4 为什么用 vue</a></li></ul></li><li><a href=#%e4%ba%94%e7%bd%91%e7%bb%9c%e5%9f%ba%e7%a1%80%e7%b1%bb aria-label=五、网络基础类>五、网络基础类</a><ul><li><a href=#51-%e8%b7%a8%e5%9f%9f aria-label="5.1 跨域">5.1 跨域</a></li><li><a href=#52-http-%e6%97%a0%e7%8a%b6%e6%80%81%e6%97%a0%e8%bf%9e%e6%8e%a5 aria-label="5.2 http 无状态无连接">5.2 http 无状态无连接</a></li><li><a href=#53-http-cache%e5%b0%b1%e6%98%af-http-%e7%bc%93%e5%ad%98 aria-label="5.3 http-cache：就是 http 缓存">5.3 http-cache：就是 http 缓存</a></li><li><a href=#54-cookie-%e5%92%8c-session aria-label="5.4 cookie 和 session">5.4 cookie 和 session</a></li><li><a href=#55-%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98%e5%a6%82-xss-%e5%92%8c-csrf aria-label="5.5 安全问题，如 XSS 和 CSRF">5.5 安全问题，如 XSS 和 CSRF</a></li></ul></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=一css相关>一、CSS相关<a hidden class=anchor aria-hidden=true href=#一css相关>#</a></h2><h3 id=11-左边定宽右边自适应方案float--marginfloat--calc>1.1 左边定宽，右边自适应方案：float + margin，float + calc<a hidden class=anchor aria-hidden=true href=#11-左边定宽右边自适应方案float--marginfloat--calc>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#007f7f>/* 方案1 */</span> 
</span></span><span style=display:flex><span>.left {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>float</span>: <span style=color:#fff;font-weight:700>left</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.right {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>margin-left</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 方案2 */</span> 
</span></span><span style=display:flex><span>.left {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>float</span>: <span style=color:#fff;font-weight:700>left</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.right {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#fff;font-weight:700>calc</span>(<span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>%</span> - <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>);
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>float</span>: <span style=color:#fff;font-weight:700>left</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=12-左右两边定宽中间自适应floatfloat--calc-圣杯布局设置bfcmargin负值法flex>1.2 左右两边定宽，中间自适应：float，float + calc, 圣杯布局（设置BFC，margin负值法），flex<a hidden class=anchor aria-hidden=true href=#12-左右两边定宽中间自适应floatfloat--calc-圣杯布局设置bfcmargin负值法flex>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">45
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.wrap {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>height</span>: <span style=color:#ff0;font-weight:700>200</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.wrap &gt; <span style=font-weight:700>div</span> {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>height</span>: <span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>%</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 方案1 */</span>
</span></span><span style=display:flex><span>.left {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>float</span>: <span style=color:#fff;font-weight:700>left</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.right {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>float</span>: <span style=color:#fff;font-weight:700>right</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>margin</span>: <span style=color:#ff0;font-weight:700>0</span> <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>; 
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 方案2 */</span>
</span></span><span style=display:flex><span>.left {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>float</span>: <span style=color:#fff;font-weight:700>left</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.right {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>float</span>: <span style=color:#fff;font-weight:700>right</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#fff;font-weight:700>calc</span>(<span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>%</span> - <span style=color:#ff0;font-weight:700>240</span><span style=color:#fff;font-weight:700>px</span>);
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>margin-left</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 方案3 */</span>
</span></span><span style=display:flex><span>.wrap {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>display</span>: <span style=color:#fff;font-weight:700>flex</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.left {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.right {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>120</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>flex</span>: <span style=color:#ff0;font-weight:700>1</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=13-左右居中>1.3 左右居中<a hidden class=anchor aria-hidden=true href=#13-左右居中>#</a></h3><ul><li>行内元素: <code>text-align: center</code></li><li>定宽块状元素: 左右 <code>margin</code> 值为 <code>auto</code></li><li>不定宽块状元素: <code>table</code>布局，<code>position + transform</code></li></ul><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#007f7f>/* 方案1 */</span>
</span></span><span style=display:flex><span>.wrap {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>text-align</span>: <span style=color:#fff;font-weight:700>center</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>display</span>: <span style=color:#fff;font-weight:700>inline</span>;
</span></span><span style=display:flex><span>  <span style=color:#007f7f>/* or */</span>
</span></span><span style=display:flex><span>  <span style=color:#007f7f>/* display: inline-block; */</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 方案2 */</span>
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>margin</span>: <span style=color:#ff0;font-weight:700>0</span> <span style=color:#fff;font-weight:700>auto</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 方案2 */</span>
</span></span><span style=display:flex><span>.wrap {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>position</span>: <span style=color:#fff;font-weight:700>relative</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>position</span>: absulote;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>left</span>: <span style=color:#ff0;font-weight:700>50</span><span style=color:#fff;font-weight:700>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>transform</span>: <span style=color:#fff;font-weight:700>translateX</span>(<span style=color:#ff0;font-weight:700>-50</span><span style=color:#fff;font-weight:700>%</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=14-上下垂直居中>1.4 上下垂直居中<a hidden class=anchor aria-hidden=true href=#14-上下垂直居中>#</a></h3><ul><li>定高：<code>margin</code>，<code>position + margin</code>(负值)</li><li>不定高：<code>position</code> + <code>transform</code>，<code>flex</code>，<code>IFC + vertical-align:middle</code></li></ul><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">41
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#007f7f>/* 定高方案1 */</span>
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>height</span>: <span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>margin</span>: <span style=color:#ff0;font-weight:700>50</span><span style=color:#fff;font-weight:700>px</span> <span style=color:#ff0;font-weight:700>0</span>;   
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 定高方案2 */</span>
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>height</span>: <span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>position</span>: <span style=color:#fff;font-weight:700>absolute</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>top</span>: <span style=color:#ff0;font-weight:700>50</span><span style=color:#fff;font-weight:700>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>margin-top</span>: <span style=color:#ff0;font-weight:700>-25</span><span style=color:#fff;font-weight:700>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 不定高方案1 */</span>
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>position</span>: <span style=color:#fff;font-weight:700>absolute</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>top</span>: <span style=color:#ff0;font-weight:700>50</span><span style=color:#fff;font-weight:700>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>transform</span>: <span style=color:#fff;font-weight:700>translateY</span>(<span style=color:#ff0;font-weight:700>-50</span><span style=color:#fff;font-weight:700>%</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 不定高方案2 */</span>
</span></span><span style=display:flex><span>.wrap {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>display</span>: <span style=color:#fff;font-weight:700>flex</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>align-items</span>: <span style=color:#fff;font-weight:700>center</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>width</span>: <span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>%</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 不定高方案3 */</span>
</span></span><span style=display:flex><span><span style=color:#007f7f>/* 设置 inline-block 则会在外层产生 IFC，高度设为 100% 撑开 wrap 的高度 */</span>
</span></span><span style=display:flex><span>.wrap::before {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>content</span>: <span style=color:#0ff;font-weight:700>&#39;&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>height</span>: <span style=color:#ff0;font-weight:700>100</span><span style=color:#fff;font-weight:700>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>display</span>: <span style=color:#fff;font-weight:700>inline-block</span>;
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>vertical-align</span>: <span style=color:#fff;font-weight:700>middle</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.wrap {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>text-align</span>: <span style=color:#fff;font-weight:700>center</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.center {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>display</span>: <span style=color:#fff;font-weight:700>inline-block</span>;  
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>vertical-align</span>: <span style=color:#fff;font-weight:700>middle</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=15-盒模型content元素内容--padding内边距--border边框--margin外边距>1.5 盒模型：content（元素内容） + padding（内边距） + border（边框） + margin（外边距）<a hidden class=anchor aria-hidden=true href=#15-盒模型content元素内容--padding内边距--border边框--margin外边距>#</a></h3><blockquote><p>延伸： <code>box-sizing</code></p></blockquote><ul><li><code>content-box</code>：默认值，总宽度 = <code>margin</code> + <code>border</code> + <code>padding</code> + <code>width</code></li><li><code>border-box</code>：盒子宽度包含 <code>padding</code> 和 <code>border</code>，<code>总宽度 = margin + width</code></li><li><code>inherit</code>：从父元素继承 <code>box-sizing</code> 属性</li></ul><h3 id=16-bfcifcgfcffcfcformatting-contexts格式化上下文>1.6 BFC、IFC、GFC、FFC：FC（Formatting Contexts），格式化上下文<a hidden class=anchor aria-hidden=true href=#16-bfcifcgfcffcfcformatting-contexts格式化上下文>#</a></h3><blockquote><p><code>BFC</code>：块级格式化上下文，容器里面的子元素不会在布局上影响到外面的元素，反之也是如此(按照这个理念来想，只要脱离文档流，肯定就能产生 <code>BFC</code>)。产生 <code>BFC</code> 方式如下</p></blockquote><ul><li><code>float</code> 的值不为 <code>none</code>。</li><li><code>overflow</code> 的值不为 <code>visible</code>。</li><li><code>position</code> 的值不为 <code>relative</code> 和 <code>static</code>。</li><li><code>display</code> 的值为 <code>table-cell</code>, <code>table-caption</code>, <code>inline-block</code>中的任何一个</li></ul><blockquote><p>用处？常见的多栏布局，结合块级别元素浮动，里面的元素则是在一个相对隔离的环境里运行</p></blockquote><blockquote><p><code>IFC</code>：内联格式化上下文，<code>IFC</code> 的 <code>line</code> <code>box</code>（线框）高度由其包含行内元素中最高的实际高度计算而来（不受到竖直方向的 <code>padding/margin</code> 影响)。</p></blockquote><blockquote><p><code>IFC</code>中的<code>line box</code>一般左右都贴紧整个 <code>IFC</code>，但是会因为 <code>float</code> 元素而扰乱。<code>float</code> 元素会位于 IFC 与 <code>line box</code> 之间，使得 <code>line box</code> 宽度缩短。 同个 <code>ifc</code> 下的多个 <code>line box</code> 高度会不同。 <code>IFC</code>中时不可能有块级元素的，当插入块级元素时（如 <code>p</code> 中插入 <code>div </code>）会产生两个匿名块与 <code>div</code> 分隔开，即产生两个 <code>IFC</code> ，每个 <code>IFC</code> 对外表现为块级元素，与 <code>div</code> 垂直排列。</p></blockquote><p>用处？</p><ul><li>水平居中：当一个块要在环境中水平居中时，设置其为 <code>inline-block</code> 则会在外层产生<code>IFC</code>，通过 <code>text-align</code> 则可以使其水平居中。</li><li>垂直居中：创建一个 <code>IFC</code>，用其中一个元素撑开父元素的高度，然后设置其 <code>vertical-align</code>: <code>middle</code>，其他行内元素则可以在此父元素下垂直居中</li></ul><blockquote><ul><li><strong>GFC</strong>：网格布局格式化上下文（<code>display: grid</code>）</li><li><strong>FFC</strong>：自适应格式化上下文（<code>display: flex</code>）</li></ul></blockquote><h2 id=二js-基础es5>二、JS 基础（ES5）<a hidden class=anchor aria-hidden=true href=#二js-基础es5>#</a></h2><h3 id=21-原型>2.1 原型<a hidden class=anchor aria-hidden=true href=#21-原型>#</a></h3><blockquote><p>这里可以谈很多，只要围绕 <code>[[ prototype ]]</code> 谈，都没啥问题</p></blockquote><h3 id=22-闭包>2.2 闭包<a hidden class=anchor aria-hidden=true href=#22-闭包>#</a></h3><blockquote><p>牵扯作用域，可以两者联系起来一起谈</p></blockquote><h3 id=23-作用域>2.3 作用域<a hidden class=anchor aria-hidden=true href=#23-作用域>#</a></h3><blockquote><p>词法作用域，动态作用域</p></blockquote><h3 id=24-this>2.4 this<a hidden class=anchor aria-hidden=true href=#24-this>#</a></h3><blockquote><p>不同情况的调用，<code>this</code>指向分别如何。顺带可以提一下 <code>es6</code> 中箭头函数没有 <code>this</code>, <code>arguments</code>, <code>super</code> 等，这些只依赖包含箭头函数最接近的函数</p></blockquote><h3 id=25-callapplybind-三者用法和区别>2.5 call，apply，bind 三者用法和区别<a hidden class=anchor aria-hidden=true href=#25-callapplybind-三者用法和区别>#</a></h3><blockquote><p>参数、绑定规则（显示绑定和强绑定），运行效率（最终都会转换成一个一个的参数去运行）、运行情况（<code>call</code>，<code>apply</code> 立即执行，<code>bind</code> 是<code>return</code> 出一个 <code>this</code> “固定”的函数，这也是为什么 <code>bind</code> 是强绑定的一个原因）</p></blockquote><blockquote><p>注：“固定”这个词的含义，它指的固定是指只要传进去了 <code>context</code>，则 <code>bind</code> 中 <code>return</code> 出来的函数 <code>this</code> 便一直指向 <code>context</code>，除非 <code>context</code> 是个变量</p></blockquote><h3 id=26-变量声明提升>2.6 变量声明提升<a hidden class=anchor aria-hidden=true href=#26-变量声明提升>#</a></h3><blockquote><p><code>js</code> 代码在运行前都会进行 <code>AST</code> 解析，函数申明默认会提到当前作用域最前面，变量申明也会进行提升。但赋值不会得到提升。关于 <code>AST</code> 解析，这里也可以说是形成词法作用域的主要原因</p></blockquote><h2 id=三js-基础es6>三、JS 基础（ES6）<a hidden class=anchor aria-hidden=true href=#三js-基础es6>#</a></h2><h3 id=31-letconst>3.1 let，const<a hidden class=anchor aria-hidden=true href=#31-letconst>#</a></h3><blockquote><p><code>let</code> 产生块级作用域（通常配合 <code>for</code> 循环或者 <code>{}</code> 进行使用产生块级作用域），<code>const</code> 申明的变量是常量（内存地址不变）</p></blockquote><h3 id=32-promise>3.2 Promise<a hidden class=anchor aria-hidden=true href=#32-promise>#</a></h3><blockquote><p>这里你谈 <code>promise</code>的时候，除了将他解决的痛点以及常用的 <code>API</code> 之外，最好进行拓展把 <code>eventloop</code> 带进来好好讲一下，<code>microtask</code>(微任务)、<code>macrotask</code>(任务) 的执行顺序，如果看过 <code>promise</code> 源码，最好可以谈一谈 原生 <code>Promise</code> 是如何实现的。<code>Promise</code> 的关键点在于<code>callback</code> 的两个参数，一个是 <code>resovle</code>，一个是 <code>reject</code>。还有就是 <code>Promise</code> 的链式调用（<code>Promise.then()</code>，每一个 <code>then</code> 都是一个责任人）</p></blockquote><h3 id=33-generator>3.3 Generator<a hidden class=anchor aria-hidden=true href=#33-generator>#</a></h3><blockquote><p>遍历器对象生成函数，最大的特点是可以交出函数的执行权</p></blockquote><ul><li><code>function</code> 关键字与函数名之间有一个星号；</li><li>函数体内部使用 <code>yield</code>表达式，定义不同的内部状态；</li><li><code>next </code>指针移向下一个状态</li></ul><blockquote><p>这里你可以说说 <code>Generator</code>的异步编程，以及它的语法糖 <code>async</code> 和 <code>awiat</code>，传统的异步编程。<code>ES6</code> 之前，异步编程大致如下</p></blockquote><ul><li>回调函数</li><li>事件监听</li><li>发布/订阅</li></ul><blockquote><p>传统异步编程方案之一：协程，多个线程互相协作，完成异步任务。</p></blockquote><h3 id=34-asyncawait>3.4 async、await<a hidden class=anchor aria-hidden=true href=#34-asyncawait>#</a></h3><blockquote><p><code>Generator</code> 函数的语法糖。有更好的语义、更好的适用性、返回值是 <code>Promise</code>。</p></blockquote><ul><li><code>async => *</code></li><li><code>await => yield</code></li></ul><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#007f7f>// 基本用法
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>async</span> <span style=color:#fff;font-weight:700>function</span> timeout (ms) {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>await</span> <span style=color:#fff;font-weight:700>new</span> <span style=color:#fff;font-weight:700>Promise</span>((resolve) =&gt; {
</span></span><span style=display:flex><span>    setTimeout(resolve, ms)    
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>async</span> <span style=color:#fff;font-weight:700>function</span> asyncConsole (value, ms) {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>await</span> timeout(ms)
</span></span><span style=display:flex><span>  console.log(value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>asyncConsole(<span style=color:#0ff;font-weight:700>&#39;hello async and await&#39;</span>, <span style=color:#ff0;font-weight:700>1000</span>)
</span></span></code></pre></td></tr></table></div></div><blockquote><p>注：最好把2，3，4 连到一起讲</p></blockquote><h3 id=35-amdcmdcommonjses6-module解决原始无模块化的痛点>3.5 AMD，CMD，CommonJs，ES6 Module：解决原始无模块化的痛点<a hidden class=anchor aria-hidden=true href=#35-amdcmdcommonjses6-module解决原始无模块化的痛点>#</a></h3><ul><li><strong>AMD</strong>：<code>requirejs</code> 在推广过程中对模块定义的规范化产出，提前执行，推崇依赖前置</li><li><strong>CMD</strong>：<code>seajs</code> 在推广过程中对模块定义的规范化产出，延迟执行，推崇依赖就近</li><li><strong>CommonJs</strong>：模块输出的是一个值的 <code>copy</code>，运行时加载，加载的是一个对象（<code>module.exports</code> 属性），该对象只有在脚本运行完才会生成</li><li><strong>ES6 Module</strong>：模块输出的是一个值的引用，编译时输出接口，<code>ES6</code>模块不是对象，它对外接口只是一种静态定义，在代码静态解析阶段就会生成。</li></ul><h2 id=四框架相关>四、框架相关<a hidden class=anchor aria-hidden=true href=#四框架相关>#</a></h2><h3 id=41-数据双向绑定原理常见数据绑定的方案>4.1 数据双向绑定原理：常见数据绑定的方案<a hidden class=anchor aria-hidden=true href=#41-数据双向绑定原理常见数据绑定的方案>#</a></h3><ul><li><code>Object.defineProperty（vue）</code>：劫持数据的 <code>getter</code> 和 <code>setter</code></li><li>脏值检测（<code>angularjs</code>）：通过特定事件进行轮循
发布/订阅模式：通过消息发布并将消息进行订阅</li></ul><h3 id=42-vdom三个-part>4.2 VDOM：三个 part<a hidden class=anchor aria-hidden=true href=#42-vdom三个-part>#</a></h3><ul><li>虚拟节点类，将真实 <code>DOM </code>节点用 <code>js</code> 对象的形式进行展示，并提供 <code>render</code> 方法，将虚拟节点渲染成真实 <code>DOM</code></li><li>节点 <code>diff</code> 比较：对虚拟节点进行 <code>js</code> 层面的计算，并将不同的操作都记录到 <code>patch</code> 对象</li><li><code>re-render</code>：解析 <code>patch</code> 对象，进行 <code>re-render</code></li></ul><p><strong>补充1：VDOM 的必要性？</strong></p><ul><li><strong>创建真实DOM的代价高</strong>：真实的 <code>DOM</code> 节点 <code>node</code> 实现的属性很多，而 <code>vnode</code> 仅仅实现一些必要的属性，相比起来，创建一个 <code>vnode</code> 的成本比较低。</li><li><strong>触发多次浏览器重绘及回流</strong>：使用 <code>vnode</code> ，相当于加了一个缓冲，让一次数据变动所带来的所有 <code>node</code> 变化，先在 <code>vnode</code> 中进行修改，然后 <code>diff</code> 之后对所有产生差异的节点集中一次对 <code>DOM tree</code> 进行修改，以减少浏览器的重绘及回流。</li></ul><p><strong>补充2：vue 为什么采用 vdom？</strong></p><blockquote><p>引入 <code>Virtual DOM</code> 在性能方面的考量仅仅是一方面。</p></blockquote><ul><li>性能受场景的影响是非常大的，不同的场景可能造成不同实现方案之间成倍的性能差距，所以依赖细粒度绑定及 <code>Virtual DOM</code> 哪个的性能更好还真不是一个容易下定论的问题。</li><li><code>Vue</code> 之所以引入了 <code>Virtual DOM</code>，更重要的原因是为了解耦 <code>HTML</code>依赖，这带来两个非常重要的好处是：</li></ul><blockquote><ul><li>不再依赖 <code>HTML</code> 解析器进行模版解析，可以进行更多的 <code>AOT</code> 工作提高运行时效率：通过模版 <code>AOT</code> 编译，<code>Vue</code> 的运行时体积可以进一步压缩，运行时效率可以进一步提升；</li><li>可以渲染到 <code>DOM</code> 以外的平台，实现 <code>SSR</code>、同构渲染这些高级特性，<code>Weex</code>等框架应用的就是这一特性。</li></ul></blockquote><blockquote><p>综上，<code>Virtual DOM</code> 在性能上的收益并不是最主要的，更重要的是它使得 <code>Vue</code> 具备了现代框架应有的高级特性。</p></blockquote><h3 id=43-vue-和-react-区别>4.3 vue 和 react 区别<a hidden class=anchor aria-hidden=true href=#43-vue-和-react-区别>#</a></h3><ul><li>相同点：都支持 <code>ssr</code>，都有 <code>vdom</code>，组件化开发，实现 <code>webComponents</code> 规范，数据驱动等</li><li>不同点：<code>vue</code> 是双向数据流（当然为了实现单数据流方便管理组件状态，<code>vuex</code> 便出现了），<code>react</code> 是单向数据流。<code>vue </code>的 <code>vdom</code> 是追踪每个组件的依赖关系，不会渲染整个组件树，<code>react</code> 每当应该状态被改变时，全部子组件都会 <code>re-render</code></li></ul><h3 id=44-为什么用-vue>4.4 为什么用 vue<a hidden class=anchor aria-hidden=true href=#44-为什么用-vue>#</a></h3><blockquote><p>简洁、轻快、舒服</p></blockquote><h2 id=五网络基础类>五、网络基础类<a hidden class=anchor aria-hidden=true href=#五网络基础类>#</a></h2><h3 id=51-跨域>5.1 跨域<a hidden class=anchor aria-hidden=true href=#51-跨域>#</a></h3><blockquote><p>很多种方法，但万变不离其宗，都是为了搞定同源策略。重用的有 <code>jsonp</code>、<code>iframe</code>、<code>cors</code>、<code>img</code>、H<code>TML5 postMessage</code>等等。其中用到 <code>html</code> 标签进行跨域的原理就是 <code>html</code> 不受同源策略影响。但只是接受 <code>Get</code> 的请求方式，这个得清楚。</p></blockquote><blockquote><p><strong>延伸1：img iframe script 来发送跨域请求有什么优缺点？</strong></p></blockquote><p><strong>1. <code>iframe</code></strong></p><ul><li>优点：跨域完毕之后<code>DOM</code>操作和互相之间的<code>JavaScript</code>调用都是没有问题的</li><li>缺点：1.若结果要以<code>URL</code>参数传递，这就意味着在结果数据量很大的时候需要分割传递，巨烦。2.还有一个是<code>iframe</code>本身带来的，母页面和<code>iframe</code>本身的交互本身就有安全性限制。</li></ul><p><strong>2. script</strong></p><ul><li>优点：可以直接返回<code>json</code>格式的数据，方便处理</li><li>缺点：只接受<code>GET</code>请求方式</li></ul><p><strong>3. 图片ping</strong></p><ul><li>优点：可以访问任何<code>url</code>，一般用来进行点击追踪，做页面分析常用的方法</li><li>缺点：不能访问响应文本，只能监听是否响应</li></ul><blockquote><p><strong>延伸2：配合 webpack 进行反向代理？</strong></p></blockquote><p><code>webpack</code> 在 <code>devServer</code> 选项里面提供了一个 <code>proxy</code> 的参数供开发人员进行反向代理</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#0ff;font-weight:700>&#39;/api&#39;</span>: {
</span></span><span style=display:flex><span>  target: <span style=color:#0ff;font-weight:700>&#39;http://www.example.com&#39;</span>, <span style=color:#007f7f>// your target host
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>  changeOrigin: <span style=color:#fff;font-weight:700>true</span>, <span style=color:#007f7f>// needed for virtual hosted sites
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>  pathRewrite: {
</span></span><span style=display:flex><span>    <span style=color:#0ff;font-weight:700>&#39;^/api&#39;</span>: <span style=color:#0ff;font-weight:700>&#39;&#39;</span>  <span style=color:#007f7f>// rewrite path
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>  }
</span></span><span style=display:flex><span>},
</span></span></code></pre></td></tr></table></div></div><blockquote><p>然后再配合 <code>http-proxy-middleware</code> 插件对 <code>api</code> 请求地址进行代理</p></blockquote><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> express = require(<span style=color:#0ff;font-weight:700>&#39;express&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>const</span> proxy = require(<span style=color:#0ff;font-weight:700>&#39;http-proxy-middleware&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#007f7f>// proxy api requests
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span><span style=color:#fff;font-weight:700>const</span> exampleProxy = proxy(options); <span style=color:#007f7f>// 这里的 options 就是 webpack 里面的 proxy 选项对应的每个选项
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>
</span></span><span style=display:flex><span><span style=color:#007f7f>// mount `exampleProxy` in web server
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span><span style=color:#fff;font-weight:700>const</span> app = express();
</span></span><span style=display:flex><span>app.use(<span style=color:#0ff;font-weight:700>&#39;/api&#39;</span>, exampleProxy);
</span></span><span style=display:flex><span>app.listen(<span style=color:#ff0;font-weight:700>3000</span>);
</span></span></code></pre></td></tr></table></div></div><blockquote><p>然后再用 <code>nginx</code> 把允许跨域的源地址添加到报头里面即可</p></blockquote><blockquote><p>说到 <code>nginx</code> ，可以再谈谈 <code>CORS</code> 配置，大致如下</p></blockquote><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>location / {
</span></span><span style=display:flex><span>  <span style=color:#fff;font-weight:700>if</span> ($request_method = <span style=color:#0ff;font-weight:700>&#39;OPTIONS&#39;</span>) {
</span></span><span style=display:flex><span>    add_header <span style=color:#0ff;font-weight:700>&#39;Access-Control-Allow-Origin&#39;</span> <span style=color:#0ff;font-weight:700>&#39;*&#39;</span>;  
</span></span><span style=display:flex><span>    add_header <span style=color:#0ff;font-weight:700>&#39;Access-Control-Allow-Methods&#39;</span> <span style=color:#0ff;font-weight:700>&#39;GET, POST, OPTIONS&#39;</span>; 
</span></span><span style=display:flex><span>    add_header <span style=color:#0ff;font-weight:700>&#39;Access-Control-Allow-Credentials&#39;</span> <span style=color:#0ff;font-weight:700>&#39;true&#39;</span>;
</span></span><span style=display:flex><span>    add_header <span style=color:#0ff;font-weight:700>&#39;Access-Control-Allow-Headers&#39;</span> <span style=color:#0ff;font-weight:700>&#39;DNT, X-Mx-ReqToken, Keep-Alive, User-Agent, X-Requested-With, If-Modified-Since, Cache-Control, Content-Type&#39;</span>;  
</span></span><span style=display:flex><span>    add_header <span style=color:#0ff;font-weight:700>&#39;Access-Control-Max-Age&#39;</span> <span style=color:#ff0;font-weight:700>86400</span>;  
</span></span><span style=display:flex><span>    add_header <span style=color:#0ff;font-weight:700>&#39;Content-Type&#39;</span> <span style=color:#0ff;font-weight:700>&#39;text/plain charset=UTF-8&#39;</span>;  
</span></span><span style=display:flex><span>    add_header <span style=color:#0ff;font-weight:700>&#39;Content-Length&#39;</span> <span style=color:#ff0;font-weight:700>0</span>;  
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>return</span> <span style=color:#ff0;font-weight:700>200</span>;  
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=52-http-无状态无连接>5.2 http 无状态无连接<a hidden class=anchor aria-hidden=true href=#52-http-无状态无连接>#</a></h3><ul><li><code>http</code> 协议对于事务处理没有记忆能力</li><li>对同一个<code>url</code>请求没有上下文关系</li><li>每次的请求都是独立的，它的执行情况和结果与前面的请求和之后的请求是无直接关系的，它不会受前面的请求应答情况直接影响，也不会直接影响后面的请求应答情况</li><li>服务器中没有保存客户端的状态，客户端必须每次带上自己的状态去请求服务器</li><li>人生若只如初见，请求过的资源下一次会继续进行请求</li></ul><p><strong>http协议无状态中的 状态 到底指的是什么？！</strong></p><ul><li>【状态】的含义就是：客户端和服务器在某次会话中产生的数据</li><li>那么对应的【无状态】就意味着：这些数据不会被保留</li><li>通过增加<code>cookie</code>和<code>session</code>机制，现在的网络请求其实是有状态的</li><li>在没有状态的<code>http</code>协议下，服务器也一定会保留你每次网络请求对数据的修改，但这跟保留每次访问的数据是不一样的，保留的只是会话产生的结果，而没有保留会话</li></ul><h3 id=53-http-cache就是-http-缓存>5.3 http-cache：就是 http 缓存<a hidden class=anchor aria-hidden=true href=#53-http-cache就是-http-缓存>#</a></h3><p><strong>1. 首先得明确 http 缓存的好处</strong></p><ul><li>减少了冗余的数据传输，减少网费</li><li>减少服务器端的压力</li><li><code>Web</code> 缓存能够减少延迟与网络阻塞，进而减少显示某个资源所用的时间</li><li>加快客户端加载网页的速度</li></ul><p><strong>2. 常见 http 缓存的类型</strong></p><ul><li>私有缓存（一般为本地浏览器缓存）</li><li>代理缓存</li></ul><p><strong>3. 然后谈谈本地缓存</strong></p><blockquote><p>本地缓存是指浏览器请求资源时命中了浏览器本地的缓存资源，浏览器并不会发送真正的请求给服务器了。它的执行过程是</p></blockquote><ul><li>第一次浏览器发送请求给服务器时，此时浏览器还没有本地缓存副本，服务器返回资源给浏览器，响应码是<code>200 OK</code>，浏览器收到资源后，把资源和对应的响应头一起缓存下来</li><li>第二次浏览器准备发送请求给服务器时候，浏览器会先检查上一次服务端返回的响应头信息中的<code>Cache-Control</code>，它的值是一个相对值，单位为秒，表示资源在客户端缓存的最大有效期，过期时间为第一次请求的时间减去<code>Cache-Control</code>的值，过期时间跟当前的请求时间比较，如果本地缓存资源没过期，那么命中缓存，不再请求服务器</li><li>如果没有命中，浏览器就会把请求发送给服务器，进入缓存协商阶段。</li></ul><blockquote><p>与本地缓存相关的头有：<code>Cache-Control</code>、<code>Expires</code>，<code>Cache-Control</code>有多个可选值代表不同的意义，而<code>Expires</code>就是一个日期格式的绝对值。</p></blockquote><p><strong>3.1 Cache-Control</strong></p><blockquote><p><code>Cache-Control</code>是<code>HTPP</code>缓存策略中最重要的头，它是<code>HTTP/1.1</code>中出现的，它由如下几个值</p></blockquote><ul><li><code>no-cache</code>：不使用本地缓存。需要使用缓存协商，先与服务器确认返回的响应是否被更改，如果之前的响应中存在<code>ETag</code>，那么请求的时候会与服务端验证，如果资源未被更改，则可以避免重新下载</li><li><code>no-store</code>：直接禁止游览器缓存数据，每次用户请求该资源，都会向服务器发送一个请求，每次都会下载完整的资源</li><li><code>public</code>：可以被所有的用户缓存，包括终端用户和<code>CDN</code>等中间代理服务器。</li><li><code>private</code>：只能被终端用户的浏览器缓存，不允许<code>CDN</code>等中继缓存服务器对其缓存。</li><li><code>max-age</code>：从当前请求开始，允许获取的响应被重用的最长时间（秒）。</li></ul><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#007f7f># 例如：</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Cache-Control: public, max-age=<span style=color:#ff0;font-weight:700>1000</span> 
</span></span><span style=display:flex><span><span style=color:#007f7f># 表示资源可以被所有用户以及代理服务器缓存，最长时间为1000秒。</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>3.2 Expires</strong></p><blockquote><p><code>Expires</code>是<code>HTTP/1.0</code>出现的头信息，同样是用于决定本地缓存策略的头，它是一个绝对时间，时间格式是如<code>Mon, 10 Jun 2015 21:31:12 GMT</code>，只要发送请求时间是在<code>Expires</code>之前，那么本地缓存始终有效，否则就会去服务器发送请求获取新的资源。如果同时出现<code>Cache-Control：max-age</code>和<code>Expires</code>，那么<code>max-age</code>优先级更高。他们可以这样组合使用</p></blockquote><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Cache-Control: public
</span></span><span style=display:flex><span>Expires: Wed, Jan 10 2018 00:27:04 GMT
</span></span></code></pre></td></tr></table></div></div><p><strong>3.3 所谓的缓存协商</strong></p><blockquote><p>当第一次请求时服务器返回的响应头中存在以下情况时</p></blockquote><ul><li>没有 <code>Cache-Control</code> 和 <code>Expires</code></li><li><code>Cache-Control</code> 和 <code>Expires</code> 过期了</li><li><code>Cache-Control</code> 的属性设置为 <code>no-cache</code> 时</li></ul><blockquote><p>那么浏览器第二次请求时就会与服务器进行协商，询问浏览器中的缓存资源是不是旧版本，需不需要更新，此时，服务器就会做出判断，如果缓存和服务端资源的最新版本是一致的，那么就无需再次下载该资源，服务端直接返回<code>304 Not Modified</code> 状态码，如果服务器发现浏览器中的缓存已经是旧版本了，那么服务器就会把最新资源的完整内容返回给浏览器，状态码就是<code>200 Ok</code>，那么服务端是根据什么来判断浏览器的缓存是不是最新的呢？其实是根据<code>HTTP</code>的另外两组头信息，分别是：<code>Last-Modified/If-Modified-Since</code> 与 <code>ETag/If-None-Match</code>。</p></blockquote><p><strong>Last-Modified 与 If-Modified-Since</strong></p><ul><li>浏览器第一次请求资源时，服务器会把资源的最新修改时间<code>Last-Modified:Thu, 29 Dec 2011 18:23:55 GMT</code>放在响应头中返回给浏览器</li><li>第二次请求时，浏览器就会把上一次服务器返回的修改时间放在请求头<code>If-Modified-Since:Thu, 29 Dec 2011 18:23:55</code>发送给服务器，服务器就会拿这个时间跟服务器上的资源的最新修改时间进行对比</li></ul><blockquote><p>如果两者相等或者大于服务器上的最新修改时间，那么表示浏览器的缓存是有效的，此时缓存会命中，服务器就不再返回内容给浏览器了，同时<code>Last-Modified</code>头也不会返回，因为资源没被修改，返回了也没什么意义。如果没命中缓存则最新修改的资源连同<code>Last-Modified</code>头一起返回</p></blockquote><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#007f7f># 第一次请求返回的响应头</span>
</span></span><span style=display:flex><span>Cache-Control:max-age=<span style=color:#ff0;font-weight:700>3600</span>
</span></span><span style=display:flex><span>Expires: Fri, Jan <span style=color:#ff0;font-weight:700>12</span> <span style=color:#ff0;font-weight:700>2018</span> 00:27:04 GMT
</span></span><span style=display:flex><span>Last-Modified: Wed, Jan <span style=color:#ff0;font-weight:700>10</span> <span style=color:#ff0;font-weight:700>2018</span> 00:27:04 GMT
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#007f7f># 第二次请求的请求头信息</span>
</span></span><span style=display:flex><span>If-Modified-Since: Wed, Jan <span style=color:#ff0;font-weight:700>10</span> <span style=color:#ff0;font-weight:700>2018</span> 00:27:04 GMT
</span></span></code></pre></td></tr></table></div></div><blockquote><p>这组头信息是基于资源的修改时间来判断资源有没有更新，另一种方式就是根据资源的内容来判断，就是接下来要讨论的 <code>ETag</code> 与 <code>If-None-Match</code></p></blockquote><p><strong>ETag与If-None-Match</strong></p><blockquote><p><code>ETag/If-None-Match</code>与<code>Last-Modified/If-Modified-Since</code>的流程其实是类似的，唯一的区别是它基于资源的内容的摘要信息（比如<code>MD5 hash</code>）来判断</p></blockquote><blockquote><p>浏览器发送第二次请求时，会把第一次的响应头信息<code>ETag</code>的值放在<code>If-None-Match</code>的请求头中发送到服务器，与最新的资源的摘要信息对比，如果相等，取浏览器缓存，否则内容有更新，最新的资源连同最新的摘要信息返回。用<code>ETag</code>的好处是如果因为某种原因到时资源的修改时间没改变，那么用<code>ETag</code>就能区分资源是不是有被更新。</p></blockquote><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#007f7f># 第一次请求返回的响应头：</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Cache-Control: public, max-age=<span style=color:#ff0;font-weight:700>31536000</span>
</span></span><span style=display:flex><span>ETag: <span style=color:#0ff;font-weight:700>&#34;15f0fff99ed5aae4edffdd6496d7131f&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#007f7f># 第二次请求的请求头信息：</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>If-None-Match: <span style=color:#0ff;font-weight:700>&#34;15f0fff99ed5aae4edffdd6496d7131f&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=54-cookie-和-session>5.4 cookie 和 session<a hidden class=anchor aria-hidden=true href=#54-cookie-和-session>#</a></h3><ul><li><code>session</code>： 是一个抽象概念，开发者为了实现中断和继续等操作，将 <code>user agent </code>和 <code>server</code> 之间一对一的交互，抽象为“会话”，进而衍生出“会话状态”，也就是 <code>session</code> 的概念</li><li><code>cookie</code>：它是一个世纪存在的东西，<code>http</code> 协议中定义在 <code>header</code> 中的字段，可以认为是 <code>session</code> 的一种后端无状态实现</li></ul><blockquote><p>现在我们常说的 <code>session</code>，是为了绕开 <code>cookie</code> 的各种限制，通常借助 <code>cookie</code>本身和后端存储实现的，一种更高级的会话状态实现</p></blockquote><p><code>session</code> 的常见实现要借助<code>cookie</code>来发送 <code>sessionID</code></p><h3 id=55-安全问题如-xss-和-csrf>5.5 安全问题，如 XSS 和 CSRF<a hidden class=anchor aria-hidden=true href=#55-安全问题如-xss-和-csrf>#</a></h3><ul><li><code>XSS</code>：跨站脚本攻击，是一种网站应用程序的安全漏洞攻击，是代码注入的一种。常见方式是将恶意代码注入合法代码里隐藏起来，再诱发恶意代码，从而进行各种各样的非法活动</li></ul><blockquote><p>防范：记住一点 “所有用户输入都是不可信的”，所以得做输入过滤和转义</p></blockquote><ul><li><code>CSRF</code>：跨站请求伪造，也称 <code>XSRF</code>，是一种挟制用户在当前已登录的<code>Web</code>应用程序上执行非本意的操作的攻击方法。与 <code>XSS</code> 相比，<code>XSS</code>利用的是用户对指定网站的信任，<code>CSRF</code>利用的是网站对用户网页浏览器的信任。</li></ul><blockquote><p>防范：用户操作验证（验证码），额外验证机制（<code>token</code>使用）等</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/>面试题集</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/tech/frontend/00-%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%92%8C%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7whistle/><span class=title>« Prev</span><br><span>网络抓包和代理工具：Whistle</span></a>
<a class=next href=https://bablvsj.github.io/posts/tech/frontend/15-%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/01-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/><span class=title>Next »</span><br><span>01-前端代码规范</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>本站由</span><img width=60 src=/images/upyun.png>提供CDN加速/云存储服务</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>