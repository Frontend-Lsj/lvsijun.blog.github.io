<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>32-正则表达式 | Bablvsj's Blog</title><meta name=keywords content="JavaScript"><meta name=description content="正则表达式简介 定义：正则表达式用于定义一些字符串的规则。 作用：计算机可以根据正则表达式，来检查一个字符串是否符合指定的规则；或者将字符串中符"><meta name=author content><link rel=canonical href=https://bablvsj.github.io/posts/tech/wait/04-javascript/32-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/><link crossorigin=anonymous href=/assets/css/stylesheet.89e53fb10d7090a33517d83b18da1cdb3f4d7bfa546525e8b3cf5a41f9817fb5.css integrity="sha256-ieU/sQ1wkKM1F9g7GNoc2z9Ne/pUZSXos89aQfmBf7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="32-正则表达式"><meta property="og:description" content="正则表达式简介 定义：正则表达式用于定义一些字符串的规则。 作用：计算机可以根据正则表达式，来检查一个字符串是否符合指定的规则；或者将字符串中符"><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/tech/wait/04-javascript/32-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-01T17:11:35+08:00"><meta property="article:modified_time" content="2020-01-01T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="32-正则表达式"><meta name=twitter:description content="正则表达式简介 定义：正则表达式用于定义一些字符串的规则。 作用：计算机可以根据正则表达式，来检查一个字符串是否符合指定的规则；或者将字符串中符"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"文章","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"32-正则表达式","item":"https://bablvsj.github.io/posts/tech/wait/04-javascript/32-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"32-正则表达式","name":"32-正则表达式","description":"正则表达式简介 定义：正则表达式用于定义一些字符串的规则。 作用：计算机可以根据正则表达式，来检查一个字符串是否符合指定的规则；或者将字符串中符","keywords":["JavaScript"],"articleBody":"正则表达式简介 定义：正则表达式用于定义一些字符串的规则。\n作用：计算机可以根据正则表达式，来检查一个字符串是否符合指定的规则；或者将字符串中符合规则的内容提取出来。\n如果你想查看正则更多的内容，可以查阅官方文档关于 RegExp 这个内置对象的用法。\n创建正则表达式的对象 方式一：使用构造函数创建正则表达式的对象 语法：\n1 2 3 var 变量 = new RegExp(\"正则表达式\"); // 注意，参数是字符串 var 变量 = new RegExp(\"正则表达式\", \"匹配模式\"); // 注意，两个参数都是字符串 备注：RegExp的意思是 Regular expression。使用typeof检查正则对象，会返回object。\n上面的语法中，既可以传一个参数，也可以传两个参数。\n创建了正则表达式的对象后，该怎么使用呢？大致分为两个步骤：\n（1）创建正则表达式的对象 reg。\n（2）使用 reg 的test() 方法，判断指定字符串是否符合规则。\n正则表达式的test()方法：【重要】\n1 myReg.test(str); // 判断字符串 str 是否符合 指定的 myReg 这个正则表达式的规则 解释：使用test()这个方法可以用来检查一个字符串是否符合正则表达式的规则，如果符合则返回true，否则返回false。\n我们来看看下面的例子。\n1、传一个参数时：\n构造函数 RegExp 中，可以只传一个参数。\n代码举例：\n1 2 3 4 5 6 7 8 var reg = new RegExp(\"a\"); // 定义一个正则表达式：检查一个字符串中是否含有 a var str1 = \"qianguyihao\"; var str2 = \"smyh\"; // 通过 test()方法，判断字符串是否符合 上面定义的 reg 规则 console.log(reg.test(str1)); // 打印结果：true console.log(reg.test(str2)); // 打印结果：false 注意，上面的例子中，我们是先定义了一个正则表达式的规则，然后通过正则表达式的test()方法来判断字符串是否符合之前定义的规则。\n2、传两个参数时：匹配模式 【重要】\n构造函数 RegExp 中，也可以传两个参数。我们可以传递一个匹配模式作为第二个参数。这个参数可以是：\ni 忽略大小写。这里的 i 指的是 ignore。\ng 全局匹配模式。这里的 g 指的是 global。\n代码举例：\n1 2 3 4 var reg = new RegExp('A', 'i'); var str = 'qiangu'; console.log(reg.test(str)); // 打印结果：true 方式二：使用字面量创建正则表达式 我们可以使用字面量来创建正则表达式。\n语法：\n1 2 3 var 变量 = /正则表达式/; // 注意，这个语法里没有引号 var 变量 = /正则表达式/匹配模式; // 注意，这个语法里没有引号 代码举例：\n1 2 3 4 5 var reg = /A/i; // 定义正则表达式的规则：检查一个字符串中是否含有 a。忽略大小写。 var str = \"qiangu\"; console.log(typeof reg); // 打印结果：object console.log(reg.test(str)); // 打印结果：true 以上两种方式的对比 方式一：使用构造函数创建时，更加灵活，因为参数中还可以传递变量。\n方式二：使用字面量的方式创建，更加简单。\n代码举例：\n1 2 3 var reg = new RegExp(\"a\", \"i\"); // 方式一 var reg = /a/i; // 方式二 上面这两行代码的作用是等价的。\n避坑指南：全局匹配 g 慎用test()方法 对于非全局匹配的正则表达式，test()只会检测是否存在某个目标字符串（只要存在就为 true），多次检测的结果都相同。例如：\n1 2 3 4 5 6 const reg = /test/; const str = '_test_test'; reg.test(str) // true reg.test(str) // true reg.test(str) // true 重点来了。\n当设置全局标志 /g 时，一旦字符串中还存在匹配，test() 方法都将返回 true，同时匹配成功后将把 lastIndex 属性的值设置为上次匹配成功结果之后的第一个字符所在的位置，下次匹配将从 lastIndex 指示的位置开始；匹配不成功时返回 false，同时将 lastIndex 属性的值重置为 0。\n举例：（很重要的例子，看仔细）\n1 2 3 4 5 6 7 8 9 10 11 const reg = /test/g; const str = '_test_test'; console.log(reg.test(str)); // true console.log(reg.lastIndex); // 5 console.log(reg.test(str)); // true console.log(reg.lastIndex); // 10 console.log(reg.test(str)); // false console.log(reg.lastIndex); // 0 总结：\n全局匹配模式g一般用于 exec()、match()、replace()等方法。\n全局匹配模式g如果用于test()方法会有问题。因为g模式会生成一个lastindex参数来存储匹配最后一次的位置。\n参考链接：\nJS正则表达式全局匹配的那些坑\njavascript正则全局匹配g慎用test方法\nissues\n正则表达式的简单语法 检查一个字符串中是否包含 a或b 写法1：\n1 var reg = /a|b/; 解释：使用 | 表示或的意思。\n写法2：\n1 var reg = /[ab]/; // 跟上面的那行语法，是等价的 解释：这里的[]也是表示或的意思。\n[]这个符号在正则还是比较常用的。我们接下来看几个例子。\n[]表示：或 一些规则：\n/[ab]/ 等价于 /a|b/：检查一个字符串中是否包含 a或b\n/[a-z]/：检查一个字符串那种是否包含任意小写字母\n/[A-Z]/：任意大写字母\n/[A-z]/：任意字母\n/[0-9]/：任意数字\n/a[bde]c/：检查一个字符串中是否包含 abc 或 adc 或 aec\n[^ ] 表示：除了 举例1：\n1 2 3 4 var reg = /[^ab]/; // 规则：字符串中，除了a、b之外，还有没有其他的字符内容？ var str = \"acb\"; console.log(reg.test(str)); // 打印结果：true 举例2：（可以用来验证某字符串是否为 纯数字）\n1 2 3 4 5 6 var reg = /[^0-9]/; // 规则：字符串中，除了数字之外，还有没有其他的内容？ var str1 = \"1991\"; var str2 = \"199a1\"; console.log(reg.test(str1)); // 打印结果：false （如果字符串是 纯数字，则返回 false） console.log(reg.test(str2)); // 打印结果：true 支持正则表达式的 String 对象的方法 String对象的如下方法，是支持正则表达式的：\n方法 描述 备注 split() 将字符串拆分成数组 search() 搜索字符串中是否含有指定内容，返回索引 index match() 根据正则表达式，从一个字符串中将符合条件的内容提取出来 replace() 将字符串中的指定内容，替换为新的内容并返回 下面来分别介绍和举例。\nsplit() split()：将一个字符串拆分成一个数组。可以接受一个正则表达式作为参数。\n备注：关于split()更详细的用法，可以看之前的关于《内置对象：String》这篇文章。\n正则相关的举例：根据任意字母，将字符串拆分成数组。\n代码实现：（通过正则）\n1 2 3 4 var str = \"1a2b3c4d5e6f7g\"; var result = str.split(/[A-z]/); // 参数是一个正则表达式：表示所有字母 console.log(result); 打印结果：\n1 [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"\"] search() search()：搜索字符串中是否含有指定内容。如果搜索到指定内容，则会返回第一次出现的索引；否则返回-1。\nsearch()方法可以接受一个正则表达式作为参数，然后会根据正则表达式去检索字符串。serach()只会查找第一个，即使设置全局匹配也没用。\n举例：\n1 2 3 4 5 6 var str = \"hello abc hello aec afc\"; /* * 搜索字符串中是否含有abc 或 aec 或 afc */ result = str.search(/a[bef]c/); console.log(result); // 打印结果：6 match() match()：根据正则表达式，从一个字符串中将符合条件的内容提取出来，封装到一个数组中返回（即使只查询到一个结果）。\n注意：默认情况下，match()方法只会找到第一个符合要求的内容，找到以后就停止检索。我们可以设置正则表达式为全局匹配模式，这样就会匹配到所有的内容，并以数组的形式返回。\n另外，我们可以为一个正则表达式设置多个匹配模式，且匹配模式的顺序无所谓。\n代码举例：\n1 2 3 4 5 6 7 8 9 var str = \"1a2a3a4a5e6f7A8B9C\"; var result1 = str.match(/[a-z]/); // 找到符合要求的第一个内容，然后返回 var result2 = str.match(/[a-z]/g); // 设置为“全局匹配”模式，匹配字符串中 所有的小写字母 var result3 = str.match(/[a-z]/gi); // 设置多个匹配模式，匹配字符串中 所有的字母（忽略大小写） console.log(result1); // 打印结果：[\"a\"] console.log(result2); // 打印结果：[\"a\", \"a\", \"a\", \"a\", \"e\", \"f\"] console.log(result3); // 打印结果：[\"a\", \"a\", \"a\", \"a\", \"e\", \"f\", \"A\", \"B\", \"C\"] 总结：\nmatch()这个方法还是很实用的，可以在一个很长的字符串中，提取出有规则的内容。这不就是爬虫的时候经常会遇到的场景么？\nreplace() replace()：将字符串中的指定内容，替换为新的内容并返回。不会修改原字符串。\n语法：\n1 新的字符串 = str.replace(被替换的内容，新的内容); 参数解释：\n被替换的内容：可以接受一个正则表达式作为参数。\n新的内容：默认只会替换第一个。如果需要替换全部符合条件的内容，可以设置正则表达式为全局匹配模式。\n代码举例：\n1 2 3 4 5 6 //replace()方法：替换 var str2 = \"Today is fine day,today is fine day !!!\" console.log(str2); console.log(str2.replace(\"today\",\"tomorrow\")); //只能替换第一个today console.log(str2.replace(/today/gi,\"tomorrow\")); //这里用到了正则，且为“全局匹配”模式，才能替换所有的today 常见正则表达式举例 检查一个字符串是否是一个合法手机号 手机号的规则：\n以1开头（^1 表示1开头 , [^1]表示非1或除了1）\n第二位是3~9之间任意数字\n三位以后任意9位数字\n正则实现：\n1 2 3 4 5 var phoneStr = \"13067890123\"; var phoneReg = /^1[3-9][0-9]{9}$/; console.log(phoneReg.test(phoneStr)); 备注：如果在正则表达式中同时使用^和$符号，则要求字符串必须完全符合正则表达式。\n去掉字符串开头和结尾的空格 正则实现：\n1 str = str.replace(/^\\s*|\\s*$/g,\"\"); 解释如下：\n1 2 3 str = str.replace(/^\\s*/, \"\"); //去除开头的空格 str = str.replace(/\\s*$/, \"\"); //去除结尾的空格 判断字符串是否为电子邮件 正则实现：\n1 2 3 4 5 var emailReg = /^\\w{3,}(\\.\\w+)*@[A-z0-9]+(\\.[A-z]{2,5}){1,2}$/; var email = \"abchello@163.com\"; console.log(emailReg.test(email)); ","wordCount":"3319","inLanguage":"en","datePublished":"2020-01-01T17:11:35+08:00","dateModified":"2020-01-01T17:11:35+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/tech/wait/04-javascript/32-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=主页><span>主页</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=时间轴><span>时间轴</span></a></li><li><a href=https://bablvsj.github.io/tags title=标签><span>标签</span></a></li><li><a href=https://bablvsj.github.io/about title=关于><span>关于</span></a></li><li><a href=https://bablvsj.github.io/search title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>32-正则表达式</h1><div class=post-meta><ul class=post-tags-meta><a href=https://bablvsj.github.io/tags/javascript/>JavaScript</a></ul>7 min&nbsp;·&nbsp;<span title='2020-01-01 17:11:35 +0800 +0800'>2020/01/01</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%ae%80%e4%bb%8b aria-label=正则表达式简介>正则表达式简介</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e5%af%b9%e8%b1%a1 aria-label=创建正则表达式的对象>创建正则表达式的对象</a><ul><li><a href=#%e6%96%b9%e5%bc%8f%e4%b8%80%e4%bd%bf%e7%94%a8%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e5%88%9b%e5%bb%ba%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e5%af%b9%e8%b1%a1 aria-label=方式一：使用构造函数创建正则表达式的对象>方式一：使用构造函数创建正则表达式的对象</a></li><li><a href=#%e6%96%b9%e5%bc%8f%e4%ba%8c%e4%bd%bf%e7%94%a8%e5%ad%97%e9%9d%a2%e9%87%8f%e5%88%9b%e5%bb%ba%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f aria-label=方式二：使用字面量创建正则表达式>方式二：使用字面量创建正则表达式</a></li><li><a href=#%e4%bb%a5%e4%b8%8a%e4%b8%a4%e7%a7%8d%e6%96%b9%e5%bc%8f%e7%9a%84%e5%af%b9%e6%af%94 aria-label=以上两种方式的对比>以上两种方式的对比</a></li><li><a href=#%e9%81%bf%e5%9d%91%e6%8c%87%e5%8d%97%e5%85%a8%e5%b1%80%e5%8c%b9%e9%85%8d-g-%e6%85%8e%e7%94%a8test%e6%96%b9%e6%b3%95 aria-label="避坑指南：全局匹配 g 慎用test()方法">避坑指南：全局匹配 g 慎用test()方法</a></li></ul></li><li><a href=#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e7%ae%80%e5%8d%95%e8%af%ad%e6%b3%95 aria-label=正则表达式的简单语法>正则表达式的简单语法</a><ul><li><a href=#%e6%a3%80%e6%9f%a5%e4%b8%80%e4%b8%aa%e5%ad%97%e7%ac%a6%e4%b8%b2%e4%b8%ad%e6%98%af%e5%90%a6%e5%8c%85%e5%90%ab-a%e6%88%96b aria-label="检查一个字符串中是否包含 a或b">检查一个字符串中是否包含 a或b</a></li><li><a href=#%e8%a1%a8%e7%a4%ba%e6%88%96 aria-label=[]表示：或>[]表示：或</a></li><li><a href=#--%e8%a1%a8%e7%a4%ba%e9%99%a4%e4%ba%86 aria-label="[^ ] 表示：除了">[^ ] 表示：除了</a></li></ul></li><li><a href=#%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84-string-%e5%af%b9%e8%b1%a1%e7%9a%84%e6%96%b9%e6%b3%95 aria-label="支持正则表达式的 String 对象的方法">支持正则表达式的 String 对象的方法</a><ul><li><a href=#split aria-label=split()>split()</a></li><li><a href=#search aria-label=search()>search()</a></li><li><a href=#match aria-label=match()>match()</a></li><li><a href=#replace aria-label=replace()>replace()</a></li></ul></li><li><a href=#%e5%b8%b8%e8%a7%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e4%b8%be%e4%be%8b aria-label=常见正则表达式举例>常见正则表达式举例</a><ul><li><a href=#%e6%a3%80%e6%9f%a5%e4%b8%80%e4%b8%aa%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%98%af%e5%90%a6%e6%98%af%e4%b8%80%e4%b8%aa%e5%90%88%e6%b3%95%e6%89%8b%e6%9c%ba%e5%8f%b7 aria-label=检查一个字符串是否是一个合法手机号>检查一个字符串是否是一个合法手机号</a></li><li><a href=#%e5%8e%bb%e6%8e%89%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%bc%80%e5%a4%b4%e5%92%8c%e7%bb%93%e5%b0%be%e7%9a%84%e7%a9%ba%e6%a0%bc aria-label=去掉字符串开头和结尾的空格>去掉字符串开头和结尾的空格</a></li><li><a href=#%e5%88%a4%e6%96%ad%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%98%af%e5%90%a6%e4%b8%ba%e7%94%b5%e5%ad%90%e9%82%ae%e4%bb%b6 aria-label=判断字符串是否为电子邮件>判断字符串是否为电子邮件</a></li></ul></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=正则表达式简介>正则表达式简介<a hidden class=anchor aria-hidden=true href=#正则表达式简介>#</a></h2><p><strong>定义</strong>：正则表达式用于定义一些字符串的规则。</p><p><strong>作用</strong>：计算机可以根据正则表达式，来检查一个字符串是否符合指定的规则；或者将字符串中符合规则的内容提取出来。</p><p>如果你想查看正则更多的内容，可以查阅官方文档关于 RegExp 这个内置对象的用法。</p><h2 id=创建正则表达式的对象>创建正则表达式的对象<a hidden class=anchor aria-hidden=true href=#创建正则表达式的对象>#</a></h2><h3 id=方式一使用构造函数创建正则表达式的对象>方式一：使用构造函数创建正则表达式的对象<a hidden class=anchor aria-hidden=true href=#方式一使用构造函数创建正则表达式的对象>#</a></h3><p>语法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>变量</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>RegExp</span><span class=p>(</span><span class=s2>&#34;正则表达式&#34;</span><span class=p>);</span> <span class=c1>// 注意，参数是字符串
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>变量</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>RegExp</span><span class=p>(</span><span class=s2>&#34;正则表达式&#34;</span><span class=p>,</span> <span class=s2>&#34;匹配模式&#34;</span><span class=p>);</span> <span class=c1>// 注意，两个参数都是字符串
</span></span></span></code></pre></td></tr></table></div></div><p>备注：<code>RegExp</code>的意思是 <strong>Regular expression</strong>。使用typeof检查正则对象，会返回object。</p><p>上面的语法中，既可以传一个参数，也可以传两个参数。</p><p>创建了正则表达式的对象后，该怎么使用呢？大致分为两个步骤：</p><ul><li><p>（1）创建正则表达式的对象 reg。</p></li><li><p>（2）使用 reg 的test() 方法，判断指定字符串是否符合规则。</p></li></ul><p><strong>正则表达式的<code>test()</code>方法</strong>：【重要】</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=nx>myReg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>);</span> <span class=c1>// 判断字符串 str 是否符合 指定的 myReg 这个正则表达式的规则
</span></span></span></code></pre></td></tr></table></div></div><p>解释：使用<code>test()</code>这个方法可以用来检查一个字符串是否符合正则表达式的规则，<strong>如果符合则返回true，否则返回false</strong>。</p><p>我们来看看下面的例子。</p><p><strong>1、传一个参数时</strong>：</p><p>构造函数 RegExp 中，可以只传一个参数。</p><p>代码举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>RegExp</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>);</span> <span class=c1>// 定义一个正则表达式：检查一个字符串中是否含有 a
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>str1</span> <span class=o>=</span> <span class=s2>&#34;qianguyihao&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>str2</span> <span class=o>=</span> <span class=s2>&#34;smyh&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// 通过 test()方法，判断字符串是否符合 上面定义的 reg 规则
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str1</span><span class=p>));</span> <span class=c1>// 打印结果：true
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str2</span><span class=p>));</span> <span class=c1>// 打印结果：false
</span></span></span></code></pre></td></tr></table></div></div><p>注意，上面的例子中，我们是先定义了一个正则表达式的规则，然后通过正则表达式的<code>test()</code>方法来判断字符串是否符合之前定义的规则。</p><p><strong>2、传两个参数时</strong>：匹配模式 【重要】</p><p>构造函数 RegExp 中，也可以传两个参数。我们可以传递一个<strong>匹配模式</strong>作为第二个参数。这个参数可以是：</p><ul><li><p><code>i</code> 忽略大小写。这里的 i 指的是 ignore。</p></li><li><p><code>g</code> 全局匹配模式。这里的 g 指的是 global。</p></li></ul><p>代码举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>RegExp</span><span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;i&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>str</span> <span class=o>=</span> <span class=s1>&#39;qiangu&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>));</span> <span class=c1>// 打印结果：true
</span></span></span></code></pre></td></tr></table></div></div><h3 id=方式二使用字面量创建正则表达式>方式二：使用字面量创建正则表达式<a hidden class=anchor aria-hidden=true href=#方式二使用字面量创建正则表达式>#</a></h3><p>我们可以使用字面量来创建正则表达式。</p><p>语法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>变量</span> <span class=o>=</span> <span class=sr>/正则表达式/</span><span class=p>;</span>  <span class=c1>// 注意，这个语法里没有引号
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>变量</span> <span class=o>=</span> <span class=err>/正则表达式/匹配模式;  // 注意，这个语法里没有引号</span>
</span></span></code></pre></td></tr></table></div></div><p>代码举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/A/i</span><span class=p>;</span> <span class=c1>// 定义正则表达式的规则：检查一个字符串中是否含有 a。忽略大小写。
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>var</span> <span class=nx>str</span> <span class=o>=</span> <span class=s2>&#34;qiangu&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>typeof</span> <span class=nx>reg</span><span class=p>);</span>  <span class=c1>// 打印结果：object
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>));</span> <span class=c1>// 打印结果：true
</span></span></span></code></pre></td></tr></table></div></div><h3 id=以上两种方式的对比>以上两种方式的对比<a hidden class=anchor aria-hidden=true href=#以上两种方式的对比>#</a></h3><ul><li><p>方式一：使用构造函数创建时，更加灵活，因为参数中还可以传递变量。</p></li><li><p>方式二：使用字面量的方式创建，更加简单。</p></li></ul><p>代码举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>RegExp</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;i&#34;</span><span class=p>);</span> <span class=c1>// 方式一
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/a/i</span><span class=p>;</span> <span class=c1>// 方式二
</span></span></span></code></pre></td></tr></table></div></div><p>上面这两行代码的作用是等价的。</p><h3 id=避坑指南全局匹配-g-慎用test方法>避坑指南：全局匹配 g 慎用test()方法<a hidden class=anchor aria-hidden=true href=#避坑指南全局匹配-g-慎用test方法>#</a></h3><p>对于非全局匹配的正则表达式，<code>test()</code>只会检测<strong>是否存在某个目标字符串</strong>（只要存在就为 true），多次检测的结果都相同。例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/test/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>str</span> <span class=o>=</span> <span class=s1>&#39;_test_test&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>)</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>)</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>)</span> <span class=c1>// true
</span></span></span></code></pre></td></tr></table></div></div><p>重点来了。</p><p>当设置全局标志 <code>/g</code> 时，一旦字符串中还存在匹配，test() 方法都将返回 true，同时匹配成功后将把 <code>lastIndex</code> 属性的值<strong>设置为上次匹配成功结果之后的第一个字符所在的位置</strong>，下次匹配将从 <code>lastIndex</code> 指示的位置开始；匹配不成功时返回 false，同时将 lastIndex 属性的值重置为 0。</p><p>举例：（很重要的例子，看仔细）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/test/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>str</span> <span class=o>=</span> <span class=s1>&#39;_test_test&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>));</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>lastIndex</span><span class=p>);</span> <span class=c1>// 5
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>));</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>lastIndex</span><span class=p>);</span> <span class=c1>// 10
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>));</span> <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>lastIndex</span><span class=p>);</span> <span class=c1>// 0
</span></span></span></code></pre></td></tr></table></div></div><p><strong>总结</strong>：</p><p>全局匹配模式<code>g</code>一般用于 <code>exec()</code>、<code>match()</code>、<code>replace()</code>等方法。</p><p>全局匹配模式<code>g</code>如果用于test()方法会有问题。因为g模式会生成一个<code>lastindex</code>参数来存储匹配最后一次的位置。</p><p>参考链接：</p><ul><li><p><a href=https://juejin.im/post/5de9bd5fe51d45582c27b6f3>JS正则表达式全局匹配的那些坑</a></p></li><li><p><a href=https://blog.csdn.net/Leolu007/article/details/8576490>javascript正则全局匹配g慎用test方法</a></p></li><li><p><a href=https://github.com/qianguyihao/Web/issues/69>issues</a></p></li></ul><h2 id=正则表达式的简单语法>正则表达式的简单语法<a hidden class=anchor aria-hidden=true href=#正则表达式的简单语法>#</a></h2><h3 id=检查一个字符串中是否包含-a或b>检查一个字符串中是否包含 a或b<a hidden class=anchor aria-hidden=true href=#检查一个字符串中是否包含-a或b>#</a></h3><p><strong>写法1</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/a|b/</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>解释：使用 <code>|</code> 表示<code>或</code>的意思。</p><p><strong>写法2</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/[ab]/</span><span class=p>;</span>  <span class=c1>// 跟上面的那行语法，是等价的
</span></span></span></code></pre></td></tr></table></div></div><p>解释：这里的<code>[]</code>也是表示<code>或</code>的意思。</p><p><code>[]</code>这个符号在正则还是比较常用的。我们接下来看几个例子。</p><h3 id=表示或>[]表示：或<a hidden class=anchor aria-hidden=true href=#表示或>#</a></h3><p>一些规则：</p><ul><li><p><code>/[ab]/</code> 等价于 <code>/a|b/</code>：检查一个字符串中是否包含 <strong>a或b</strong></p></li><li><p><code>/[a-z]/</code>：检查一个字符串那种是否包含<strong>任意小写字母</strong></p></li><li><p><code>/[A-Z]/</code>：任意大写字母</p></li><li><p><code>/[A-z]/</code>：任意字母</p></li><li><p><code>/[0-9]/</code>：任意数字</p></li><li><p><code>/a[bde]c/</code>：检查一个字符串中是否包含 abc 或 adc 或 aec</p></li></ul><h3 id=--表示除了>[^ ] 表示：除了<a hidden class=anchor aria-hidden=true href=#--表示除了>#</a></h3><p>举例1：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/[^ab]/</span><span class=p>;</span> <span class=c1>// 规则：字符串中，除了a、b之外，还有没有其他的字符内容？
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>var</span> <span class=nx>str</span> <span class=o>=</span> <span class=s2>&#34;acb&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str</span><span class=p>));</span> <span class=c1>// 打印结果：true
</span></span></span></code></pre></td></tr></table></div></div><p>举例2：（可以用来验证某字符串是否为 纯数字）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>reg</span> <span class=o>=</span> <span class=sr>/[^0-9]/</span><span class=p>;</span>  <span class=c1>// 规则：字符串中，除了数字之外，还有没有其他的内容？
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>var</span> <span class=nx>str1</span> <span class=o>=</span> <span class=s2>&#34;1991&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>str2</span> <span class=o>=</span> <span class=s2>&#34;199a1&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str1</span><span class=p>));</span> <span class=c1>// 打印结果：false （如果字符串是 纯数字，则返回 false）
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>reg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>str2</span><span class=p>));</span> <span class=c1>// 打印结果：true
</span></span></span></code></pre></td></tr></table></div></div><h2 id=支持正则表达式的-string-对象的方法>支持正则表达式的 String 对象的方法<a hidden class=anchor aria-hidden=true href=#支持正则表达式的-string-对象的方法>#</a></h2><p>String对象的如下方法，是支持正则表达式的：</p><table><thead><tr><th style=text-align:left>方法</th><th style=text-align:left>描述</th><th style=text-align:left>备注</th></tr></thead><tbody><tr><td style=text-align:left>split()</td><td style=text-align:left>将字符串拆分成数组</td><td style=text-align:left></td></tr><tr><td style=text-align:left>search()</td><td style=text-align:left>搜索字符串中是否含有指定内容，返回索引 index</td><td style=text-align:left></td></tr><tr><td style=text-align:left>match()</td><td style=text-align:left>根据正则表达式，从一个字符串中将符合条件的内容提取出来</td><td style=text-align:left></td></tr><tr><td style=text-align:left>replace()</td><td style=text-align:left>将字符串中的指定内容，替换为新的内容并返回</td><td style=text-align:left></td></tr></tbody></table><p>下面来分别介绍和举例。</p><h3 id=split>split()<a hidden class=anchor aria-hidden=true href=#split>#</a></h3><p><code>split()</code>：将一个字符串拆分成一个数组。可以接受一个正则表达式作为参数。</p><p>备注：关于<code>split()</code>更详细的用法，可以看之前的关于《内置对象：String》这篇文章。</p><p><strong>正则相关的举例</strong>：根据任意字母，将字符串拆分成数组。</p><p>代码实现：（通过正则）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>str</span> <span class=o>=</span> <span class=s2>&#34;1a2b3c4d5e6f7g&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=sr>/[A-z]/</span><span class=p>);</span> <span class=c1>// 参数是一个正则表达式：表示所有字母
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>打印结果：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl>	<span class=p>[</span><span class=s2>&#34;1&#34;</span><span class=p>,</span> <span class=s2>&#34;2&#34;</span><span class=p>,</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> <span class=s2>&#34;4&#34;</span><span class=p>,</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> <span class=s2>&#34;6&#34;</span><span class=p>,</span> <span class=s2>&#34;7&#34;</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=search>search()<a hidden class=anchor aria-hidden=true href=#search>#</a></h3><p><code>search()</code>：搜索字符串中是否含有指定内容。如果搜索到指定内容，则会返回第一次出现的索引；否则返回-1。</p><p><code>search()</code>方法可以接受一个正则表达式作为参数，然后会根据正则表达式去检索字符串。<code>serach()</code>只会查找第一个，即使设置全局匹配也没用。</p><p><strong>举例</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>str</span> <span class=o>=</span> <span class=s2>&#34;hello abc hello aec afc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* 搜索字符串中是否含有abc 或 aec 或 afc
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=nx>result</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>search</span><span class=p>(</span><span class=sr>/a[bef]c/</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span> <span class=c1>// 打印结果：6
</span></span></span></code></pre></td></tr></table></div></div><h3 id=match>match()<a hidden class=anchor aria-hidden=true href=#match>#</a></h3><p><code>match()</code>：根据正则表达式，从一个字符串中将符合条件的内容提取出来，封装到一个数组中返回（即使只查询到一个结果）。</p><p><strong>注意</strong>：默认情况下，<code>match()</code>方法只会找到<strong>第一个</strong>符合要求的内容，找到以后就停止检索。我们可以设置正则表达式为<strong>全局匹配</strong>模式，这样就会匹配到所有的内容，并以<strong>数组</strong>的形式返回。</p><p>另外，我们可以为一个正则表达式设置多个匹配模式，且匹配模式的顺序无所谓。</p><p><strong>代码举例</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>str</span> <span class=o>=</span> <span class=s2>&#34;1a2a3a4a5e6f7A8B9C&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>result1</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=sr>/[a-z]/</span><span class=p>);</span>   <span class=c1>// 找到符合要求的第一个内容，然后返回
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>var</span> <span class=nx>result2</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=sr>/[a-z]/g</span><span class=p>);</span>  <span class=c1>// 设置为“全局匹配”模式，匹配字符串中 所有的小写字母
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>var</span> <span class=nx>result3</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=sr>/[a-z]/gi</span><span class=p>);</span> <span class=c1>// 设置多个匹配模式，匹配字符串中 所有的字母（忽略大小写）
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result1</span><span class=p>);</span> <span class=c1>// 打印结果：[&#34;a&#34;]
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result2</span><span class=p>);</span> <span class=c1>// 打印结果：[&#34;a&#34;, &#34;a&#34;, &#34;a&#34;, &#34;a&#34;, &#34;e&#34;, &#34;f&#34;]
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result3</span><span class=p>);</span> <span class=c1>// 打印结果：[&#34;a&#34;, &#34;a&#34;, &#34;a&#34;, &#34;a&#34;, &#34;e&#34;, &#34;f&#34;, &#34;A&#34;, &#34;B&#34;, &#34;C&#34;]
</span></span></span></code></pre></td></tr></table></div></div><p><strong>总结</strong>：</p><p>match()这个方法还是很实用的，可以在一个很长的字符串中，提取出<strong>有规则</strong>的内容。这不就是爬虫的时候经常会遇到的场景么？</p><h3 id=replace>replace()<a hidden class=anchor aria-hidden=true href=#replace>#</a></h3><p><code>replace()</code>：将字符串中的指定内容，替换为新的内容并返回。不会修改原字符串。</p><p>语法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=nx>新的字符串</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=nx>被替换的内容</span><span class=err>，</span><span class=nx>新的内容</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>参数解释：</p><ul><li><p>被替换的内容：可以接受一个正则表达式作为参数。</p></li><li><p>新的内容：默认只会替换第一个。如果需要替换全部符合条件的内容，可以设置正则表达式为<strong>全局匹配</strong>模式。</p></li></ul><p>代码举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>    <span class=c1>//replace()方法：替换
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>str2</span> <span class=o>=</span> <span class=s2>&#34;Today is fine day,today is fine day !!!&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>str2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>str2</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=s2>&#34;today&#34;</span><span class=p>,</span><span class=s2>&#34;tomorrow&#34;</span><span class=p>));</span>  <span class=c1>//只能替换第一个today
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>str2</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/today/gi</span><span class=p>,</span><span class=s2>&#34;tomorrow&#34;</span><span class=p>));</span> <span class=c1>//这里用到了正则，且为“全局匹配”模式，才能替换所有的today
</span></span></span></code></pre></td></tr></table></div></div><h2 id=常见正则表达式举例>常见正则表达式举例<a hidden class=anchor aria-hidden=true href=#常见正则表达式举例>#</a></h2><h3 id=检查一个字符串是否是一个合法手机号>检查一个字符串是否是一个合法手机号<a hidden class=anchor aria-hidden=true href=#检查一个字符串是否是一个合法手机号>#</a></h3><p>手机号的规则：</p><ul><li><p>以1开头（<code>^1</code> 表示1开头 , <code>[^1]</code>表示非1或除了1）</p></li><li><p>第二位是3~9之间任意数字</p></li><li><p>三位以后任意9位数字</p></li></ul><p>正则实现：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>phoneStr</span> <span class=o>=</span> <span class=s2>&#34;13067890123&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>phoneReg</span> <span class=o>=</span> <span class=sr>/^1[3-9][0-9]{9}$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>phoneReg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>phoneStr</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>备注</strong>：如果在正则表达式中同时使用<code>^</code>和<code>$</code>符号，则要求字符串必须完全符合正则表达式。</p><h3 id=去掉字符串开头和结尾的空格>去掉字符串开头和结尾的空格<a hidden class=anchor aria-hidden=true href=#去掉字符串开头和结尾的空格>#</a></h3><p>正则实现：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=nx>str</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/^\s*|\s*$/g</span><span class=p>,</span><span class=s2>&#34;&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>解释如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=nx>str</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/^\s*/</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>);</span> <span class=c1>//去除开头的空格
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=nx>str</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/\s*$/</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>);</span> <span class=c1>//去除结尾的空格
</span></span></span></code></pre></td></tr></table></div></div><h3 id=判断字符串是否为电子邮件>判断字符串是否为电子邮件<a hidden class=anchor aria-hidden=true href=#判断字符串是否为电子邮件>#</a></h3><p>正则实现：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>emailReg</span> <span class=o>=</span> <span class=sr>/^\w{3,}(\.\w+)*@[A-z0-9]+(\.[A-z]{2,5}){1,2}$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>email</span> <span class=o>=</span> <span class=s2>&#34;abchello@163.com&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>emailReg</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>email</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/javascript/>JavaScript</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/tech/wait/04-javascript/31-%E7%B1%BB%E5%92%8C%E6%9E%84%E9%80%A0%E7%BB%A7%E6%89%BF%E5%BE%85%E6%9B%B4%E6%96%B0/><span class=title>« Prev</span><br><span>31-类和构造继承（待更新）</span></a>
<a class=next href=https://bablvsj.github.io/posts/tech/wait/04-javascript/33-%E4%BA%8B%E4%BB%B6%E7%AE%80%E4%BB%8B/><span class=title>Next »</span><br><span>33-事件简介</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>本站由</span><img width=60 src=/images/upyun.png>提供CDN加速/云存储服务</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>