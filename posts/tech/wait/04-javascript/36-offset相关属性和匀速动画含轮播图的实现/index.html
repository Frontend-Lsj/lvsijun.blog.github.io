<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>36-offset相关属性和匀速动画(含轮播图的实现) | Bablvsj's Blog</title><meta name=keywords content="JavaScript"><meta name=description content="36-offset相关属性和匀速动画(含轮播图的实现) - Bablvsj's Blog"><meta name=author content><link rel=canonical href=https://bablvsj.github.io/posts/tech/wait/04-javascript/36-offset%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7%E5%92%8C%E5%8C%80%E9%80%9F%E5%8A%A8%E7%94%BB%E5%90%AB%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E5%AE%9E%E7%8E%B0/><link crossorigin=anonymous href=/assets/css/stylesheet.b33b75c69bb2ec0d4accfeaad1d3ba05b272f180583f687c640a522d6492076f.css integrity="sha256-szt1xpuy7A1KzP6q0dO6BbJy8YBYP2h8ZApSLWSSB28=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=/css/syntax.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="36-offset相关属性和匀速动画(含轮播图的实现)"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/tech/wait/04-javascript/36-offset%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7%E5%92%8C%E5%8C%80%E9%80%9F%E5%8A%A8%E7%94%BB%E5%90%AB%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E5%AE%9E%E7%8E%B0/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-01T17:11:35+08:00"><meta property="article:modified_time" content="2020-01-01T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="36-offset相关属性和匀速动画(含轮播图的实现)"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"文章","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"36-offset相关属性和匀速动画(含轮播图的实现)","item":"https://bablvsj.github.io/posts/tech/wait/04-javascript/36-offset%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7%E5%92%8C%E5%8C%80%E9%80%9F%E5%8A%A8%E7%94%BB%E5%90%AB%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E5%AE%9E%E7%8E%B0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"36-offset相关属性和匀速动画(含轮播图的实现)","name":"36-offset相关属性和匀速动画(含轮播图的实现)","description":"","keywords":["JavaScript"],"articleBody":"前言 JS动画的主要内容如下：\n1、三大家族和一个事件对象：\n三大家族：offset/scroll/client。也叫三大系列。\n事件对象/event（事件被触动时，鼠标和键盘的状态）（通过属性控制）。\n2、动画(闪现/匀速/缓动)\n3、冒泡/兼容/封装\noffset 家族的组成 我们知道，JS动画的三大家族包括：offset/scroll/client。今天来讲一下offset，以及与其相关的匀速动画。\noffset的中文是：偏移，补偿，位移。\njs中有一套方便的获取元素尺寸的办法就是offset家族。offset家族包括：\noffsetWidth\noffsetHight\noffsetLeft\noffsetTop\noffsetParent\n下面分别介绍。\n1、offsetWidth 和 offsetHight offsetWidth 和 offsetHight：获取元素的宽高 + padding + border，不包括margin。如下：\noffsetWidth = width + padding + border\noffsetHeight = Height + padding + border\n这两个属性，他们绑定在了所有的节点元素上。获取元素之后，只要调用这两个属性，我们就能够获取元素节点的宽和高。\n举例如下：\n\u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead lang=\"en\"\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003cstyle\u003e div { width: 100px; height: 100px; padding: 10px; border: 10px solid #000; margin: 100px; background-color: pink; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv class=\"box\"\u003e\u003c/div\u003e \u003cscript\u003e var div1 = document.getElementsByTagName(\"div\")[0]; console.log(div1.offsetHeight); //打印结果：140（100+20+20） console.log(typeof div1.offsetHeight); //打印结果：number \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e 2、offsetParent offsetParent：获取当前元素的定位父元素。\n如果当前元素的父元素，有CSS定位（position为absolute、relative、fixed），那么 offsetParent 获取的是最近的那个父元素。\n如果当前元素的父元素，没有CSS定位（position为absolute、relative、fixed），那么offsetParent 获取的是body。\n举例：\n\u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead lang=\"en\"\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv class=\"box1\" style=\"position: absolute;\"\u003e \u003cdiv class=\"box2\" style=\"position: fixed;\"\u003e \u003cdiv class=\"box3\"\u003e\u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cscript\u003e var box3 = document.getElementsByClassName(\"box3\")[0]; console.log(box3.offsetParent); \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e 打印结果：\n3、offsetLeft 和 offsetTop offsetLeft：当前元素相对于其定位父元素的水平偏移量。\noffsetTop：当前元素相对于其定位父元素的垂直偏移量。\n备注：从父亲的 padding 开始算起，父亲的 border 不算在内。\n举例：\n\u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead lang=\"en\"\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003cstyle\u003e .box1 { width: 300px; height: 300px; padding: 100px; margin: 100px; position: relative; border: 100px solid #000; background-color: pink; } .box2 { width: 100px; height: 100px; background-color: red; /*position: absolute;*/ /*left: 10px;*/ /*top: 10px;*/ } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv class=\"box1\"\u003e \u003cdiv class=\"box2\" style=\"left: 10px\"\u003e\u003c/div\u003e \u003c/div\u003e \u003cscript\u003e var box2 = document.getElementsByClassName(\"box2\")[0]; //offsetTop和offsetLeft console.log(box2.offsetLeft); //100 console.log(box2.style.left); //10px \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e 在父盒子有定位的情况下，offsetLeft == style.left(去掉px之后)。注意，后者只识别行内样式。但区别不仅仅于此，下面会讲。\noffsetLeft 和 style.left 区别 （1）最大区别在于：\noffsetLeft 可以返回无定位父元素的偏移量。如果父元素中都没有定位，则body为准。\nstyle.left 只能获取行内样式，如果父元素中都没有设置定位，则返回\"\"（意思是，返回空字符串）;\n（2）offsetTop 返回的是数字，而 style.top 返回的是字符串，而且还带有单位：px。\n比如：\ndiv.offsetLeft = 100; div.style.left = \"100px\"; （3）offsetLeft 和 offsetTop 只读，而 style.left 和 style.top 可读写（只读是获取值，可写是修改值）\n总结：我们一般的做法是：用offsetLeft 和 offsetTop 获取值，用style.left 和 style.top 赋值（比较方便）。理由如下：\nstyle.left：只能获取行内式，获取的值可能为空，容易出现NaN。\noffsetLeft：获取值特别方便，而且是现成的number，方便计算。它是只读的，不能赋值。\n动画的种类 闪现（基本不用）\n匀速（本文重点）\n缓动（后续重点）\n简单举例如下：（每间隔500ms，向右移动盒子100px）\n\u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead lang=\"en\"\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003cstyle\u003e div { width: 100px; height: 100px; background-color: pink; position: absolute; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cbutton\u003e动画\u003c/button\u003e \u003cdiv class=\"box\" style=\"left: 0px\"\u003e\u003c/div\u003e \u003cscript\u003e var btn = document.getElementsByTagName(\"button\")[0]; var div = document.getElementsByTagName(\"div\")[0]; //1、闪动 // btn.onclick = function () { // div.style.left = \"500px\"; // } //2、匀速运动 btn.onclick = function () { //定时器，每隔一定的时间向右走一些 setInterval(function () { console.log(parseInt(div.style.left)); //动画原理： 盒子未来的位置 = 盒子现在的位置 + 步长； //方法1：用offsetLeft获取值，用style.left赋值。 div.style.left = div.offsetLeft + 100 + 'px'; // 方法2：必须一开始就在DOM节点上添加 style=\"left: 0px;\"属性，才能用方法2。否则， div.style.left 的值为 NaN // div.style.left = parseInt(div.style.left)+100+\"px\"; //方法2： }, 500); }; \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e 效果如下：\n匀速动画的封装：每间隔30ms，移动盒子10px【重要】 代码如下：\n\u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead lang=\"en\"\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003cstyle\u003e .box1 { margin: 0; padding: 5px; height: 300px; background-color: #ddd; position: relative; } button { margin: 5px; } .box2 { width: 100px; height: 100px; background-color: red; position: absolute; left: 195px; top: 40px; } .box3 { width: 100px; height: 100px; background-color: yellow; position: absolute; left: 0; top: 150px; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv class=\"box1\"\u003e \u003cbutton\u003e运动到 left = 200px\u003c/button\u003e \u003cbutton\u003e运动到 left = 400px\u003c/button\u003e \u003cdiv class=\"box2\"\u003e\u003c/div\u003e \u003cdiv class=\"box3\"\u003e\u003c/div\u003e \u003c/div\u003e \u003cscript\u003e var btnArr = document.getElementsByTagName(\"button\"); var box2 = document.getElementsByClassName(\"box2\")[0]; var box3 = document.getElementsByClassName(\"box3\")[0]; //绑定事件 btnArr[0].onclick = function () { //如果有一天我们要传递另外一个盒子，那么我们的方法就不好用了 //所以我们要增加第二个参数，被移动的盒子本身。 animate(box2, 200); animate(box3, 200); } btnArr[1].onclick = function () { animate(box2, 400); animate(box3, 400); } //【重要】方法的封装：每间隔30ms，将盒子向右移动10px function animate(ele, target) { //要用定时器，先清除定时器 //一个盒子只能有一个定时器，这样的话，不会和其他盒子出现定时器冲突 //我们可以把定时器本身，当成为盒子的一个属性 clearInterval(ele.timer); //我们要求盒子既能向前又能向后，那么我们的步长就得有正有负 //目标值如果大于当前值取正，目标值如果小于当前值取负 var speed = target \u003e ele.offsetLeft ? 10 : -10; //speed指的是步长 ele.timer = setInterval(function () { //在执行之前就获取当前值和目标值之差 var val = target - ele.offsetLeft; ele.style.left = ele.offsetLeft + speed + \"px\"; //移动的过程中，如果目标值和当前值之差如果小于步长，那么就不能在前进了 //因为步长有正有负，所有转换成绝对值来比较 if (Math.abs(val) \u003c Math.abs(speed)) { ele.style.left = target + \"px\"; clearInterval(ele.timer); } }, 30) } \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e 实现的效果：\n上方代码中的方法封装，可以作为一个模板步骤，要记住。其实，这个封装的方法，写成下面这样，会更严谨，更容易理解：（将if语句进行了改进）\n//【重要】方法的封装：每间隔30ms，将盒子向右移动10px function animate(ele, target) { //要用定时器，先清除定时器 //一个盒子只能有一个定时器，这样的话，不会和其他盒子出现定时器冲突 //我们可以把定时器本身，当成为盒子的一个属性 clearInterval(ele.timer); //我们要求盒子既能向前又能向后，那么我们的步长就得有正有负 //目标值如果大于当前值取正，目标值如果小于当前值取负 var speed = target \u003e ele.offsetLeft ? 10 : -10; //speed指的是步长 ele.timer = setInterval(function () { //在执行之前就获取当前值和目标值之差 var val = target - ele.offsetLeft; //移动的过程中，如果目标值和当前值之差如果小于步长，那么就不能在前进了 //因为步长有正有负，所有转换成绝对值来比较 if (Math.abs(val) \u003c Math.abs(speed)) { //如果val小于步长，则直接到达目的地；否则，每次移动一个步长 ele.style.left = target + \"px\"; clearInterval(ele.timer); } else { ele.style.left = ele.offsetLeft + speed + \"px\"; } }, 30) } 代码举例：轮播图的实现 完整版代码如下：（注释已经比较详细）\n\u003c!doctype html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/\u003e \u003ctitle\u003e无标题文档\u003c/title\u003e \u003cstyle type=\"text/css\"\u003e * { padding: 0; margin: 0; list-style: none; border: 0; } .all { width: 500px; height: 200px; padding: 7px; border: 1px solid #ccc; margin: 100px auto; position: relative; } .screen { width: 500px; height: 200px; overflow: hidden; position: relative; } .screen li { width: 500px; height: 200px; overflow: hidden; float: left; } .screen ul { position: absolute; left: 0; top: 0px; width: 3000px; } .all ol { position: absolute; right: 10px; bottom: 10px; line-height: 20px; text-align: center; } .all ol li { float: left; width: 20px; height: 20px; background: #fff; border: 1px solid #ccc; margin-left: 10px; cursor: pointer; } .all ol li.current { background: yellow; } #arr { display: none; } #arr span { width: 40px; height: 40px; position: absolute; left: 5px; top: 50%; margin-top: -20px; background: #000; cursor: pointer; line-height: 40px; text-align: center; font-weight: bold; font-family: '黑体'; font-size: 30px; color: #fff; opacity: 0.3; border: 1px solid #fff; } #arr #right { right: 5px; left: auto; } \u003c/style\u003e \u003cscript\u003e window.onload = function () { //需求：无缝滚动。 //思路：赋值第一张图片放到ul的最后，然后当图片切换到第五张的时候 // 直接切换第六章，再次从第一张切换到第二张的时候先瞬间切换到 // 第一张图片，然后滑动到第二张 //步骤： //1.获取事件源及相关元素。（老三步） //2.复制第一张图片所在的li,添加到ul的最后面。 //3.给ol中添加li，ul中的个数-1个，并点亮第一个按钮。 //4.鼠标放到ol的li上切换图片 //5.添加定时器 //6.左右切换图片（鼠标放上去隐藏，移开显示） //1.获取事件源及相关元素。（老三步） var all = document.getElementById(\"all\"); var screen = all.firstElementChild || all.firstChild; var imgWidth = screen.offsetWidth; var ul = screen.firstElementChild || screen.firstChild; var ol = screen.children[1]; var div = screen.lastElementChild || screen.lastChild; var spanArr = div.children; //2.复制第一张图片所在的li,添加到ul的最后面。 var ulNewLi = ul.children[0].cloneNode(true); ul.appendChild(ulNewLi); //3.给ol中添加li，ul中的个数-1个，并点亮第一个按钮。 for (var i = 0; i \u003c ul.children.length - 1; i++) { var olNewLi = document.createElement(\"li\"); olNewLi.innerHTML = i + 1; ol.appendChild(olNewLi) } var olLiArr = ol.children; olLiArr[0].className = \"current\"; //4.鼠标放到ol的li上切换图片 for (var i = 0; i \u003c olLiArr.length; i++) { //自定义属性，把索引值绑定到元素的index属性上 olLiArr[i].index = i; olLiArr[i].onmouseover = function () { //排他思想 for (var j = 0; j \u003c olLiArr.length; j++) { olLiArr[j].className = \"\"; } this.className = \"current\"; //鼠标放到小的方块上的时候索引值和key以及square同步 // key = this.index; // square = this.index; key = square = this.index; //移动盒子 animate(ul, -this.index * imgWidth); } } //5.添加定时器 var timer = setInterval(autoPlay, 1000); //固定向右切换图片 //两个定时器（一个记录图片，一个记录小方块） var key = 0; var square = 0; function autoPlay() { //通过控制key的自增来模拟图片的索引值，然后移动ul key++; if (key \u003e olLiArr.length) { //图片已经滑动到最后一张，接下来，跳转到第一张，然后在滑动到第二张 ul.style.left = 0; key = 1; } animate(ul, -key * imgWidth); //通过控制square的自增来模拟小方块的索引值，然后点亮盒子 //排他思想做小方块 square++; if (square \u003e olLiArr.length - 1) {//索引值不能大于等于5，如果等于5，立刻变为0； square = 0; } for (var i = 0; i \u003c olLiArr.length; i++) { olLiArr[i].className = \"\"; } olLiArr[square].className = \"current\"; } //鼠标放上去清除定时器，移开后在开启定时器 all.onmouseover = function () { div.style.display = \"block\"; clearInterval(timer); } all.onmouseout = function () { div.style.display = \"none\"; timer = setInterval(autoPlay, 1000); } //6.左右切换图片（鼠标放上去显示，移开隐藏） spanArr[0].onclick = function () { //通过控制key的自增来模拟图片的索引值，然后移动ul key--; if (key \u003c 0) { //先移动到最后一张，然后key的值取之前一张的索引值，然后在向前移动 ul.style.left = -imgWidth * (olLiArr.length) + \"px\"; key = olLiArr.length - 1; } animate(ul, -key * imgWidth); //通过控制square的自增来模拟小方块的索引值，然后点亮盒子 //排他思想做小方块 square--; if (square \u003c 0) {//索引值不能大于等于5，如果等于5，立刻变为0； square = olLiArr.length - 1; } for (var i = 0; i \u003c olLiArr.length; i++) { olLiArr[i].className = \"\"; } olLiArr[square].className = \"current\"; } spanArr[1].onclick = function () { //右侧的和定时器一模一样 autoPlay(); } function animate(ele, target) { clearInterval(ele.timer); var speed = target \u003e ele.offsetLeft ? 10 : -10; ele.timer = setInterval(function () { var val = target - ele.offsetLeft; ele.style.left = ele.offsetLeft + speed + \"px\"; if (Math.abs(val) \u003c Math.abs(speed)) { ele.style.left = target + \"px\"; clearInterval(ele.timer); } }, 10) } } \u003c/script\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv class=\"all\" id='all'\u003e \u003cdiv class=\"screen\" id=\"screen\"\u003e \u003cul id=\"ul\"\u003e \u003cli\u003e\u003cimg src=\"images/1.jpg\" width=\"500\" height=\"200\"/\u003e\u003c/li\u003e \u003cli\u003e\u003cimg src=\"images/2.jpg\" width=\"500\" height=\"200\"/\u003e\u003c/li\u003e \u003cli\u003e\u003cimg src=\"images/3.jpg\" width=\"500\" height=\"200\"/\u003e\u003c/li\u003e \u003cli\u003e\u003cimg src=\"images/4.jpg\" width=\"500\" height=\"200\"/\u003e\u003c/li\u003e \u003cli\u003e\u003cimg src=\"images/5.jpg\" width=\"500\" height=\"200\"/\u003e\u003c/li\u003e \u003c/ul\u003e \u003col\u003e \u003c/ol\u003e \u003cdiv id=\"arr\"\u003e \u003cspan id=\"left\"\u003e\u003c\u003c/span\u003e \u003cspan id=\"right\"\u003e\u003e\u003c/span\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/body\u003e \u003c/html\u003e 实现效果：\n温馨提示：动图太大，可以把http://img.smyhvae.com/20180202_2020.gif单独在浏览器中打开。\n工程文件：\n2018-02-02-JS动画实现轮播图.rar ","wordCount":"3996","inLanguage":"en","datePublished":"2020-01-01T17:11:35+08:00","dateModified":"2020-01-01T17:11:35+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/tech/wait/04-javascript/36-offset%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7%E5%92%8C%E5%8C%80%E9%80%9F%E5%8A%A8%E7%94%BB%E5%90%AB%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E5%AE%9E%E7%8E%B0/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=主页><span>主页</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=时间轴><span>时间轴</span></a></li><li><a href=https://bablvsj.github.io/tags title=标签><span>标签</span></a></li><li><a href=https://bablvsj.github.io/about title=关于><span>关于</span></a></li><li><a href=https://bablvsj.github.io/search title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>36-offset相关属性和匀速动画(含轮播图的实现)</h1><div class=post-meta><div class=post-tags-meta><a href=https://bablvsj.github.io/tags/javascript/>JavaScript</a></div>8 min&nbsp;·&nbsp;<span title='2020-01-01 17:11:35 +0800 +0800'>2020/01/01</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#offset-%e5%ae%b6%e6%97%8f%e7%9a%84%e7%bb%84%e6%88%90 aria-label="offset 家族的组成">offset 家族的组成</a><ul><li><a href=#1offsetwidth-%e5%92%8c-offsethight aria-label="1、offsetWidth 和 offsetHight">1、offsetWidth 和 offsetHight</a></li><li><a href=#2offsetparent aria-label=2、offsetParent>2、offsetParent</a></li><li><a href=#3offsetleft-%e5%92%8c-offsettop aria-label="3、offsetLeft 和 offsetTop">3、offsetLeft 和 offsetTop</a></li><li><a href=#offsetleft-%e5%92%8c-styleleft-%e5%8c%ba%e5%88%ab aria-label="offsetLeft 和 style.left 区别">offsetLeft 和 style.left 区别</a></li></ul></li><li><a href=#%e5%8a%a8%e7%94%bb%e7%9a%84%e7%a7%8d%e7%b1%bb aria-label=动画的种类>动画的种类</a></li><li><a href=#%e5%8c%80%e9%80%9f%e5%8a%a8%e7%94%bb%e7%9a%84%e5%b0%81%e8%a3%85%e6%af%8f%e9%97%b4%e9%9a%9430ms%e7%a7%bb%e5%8a%a8%e7%9b%92%e5%ad%9010px%e9%87%8d%e8%a6%81 aria-label=匀速动画的封装：每间隔30ms，移动盒子10px【重要】>匀速动画的封装：每间隔30ms，移动盒子10px【重要】</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e4%b8%be%e4%be%8b%e8%bd%ae%e6%92%ad%e5%9b%be%e7%9a%84%e5%ae%9e%e7%8e%b0 aria-label=代码举例：轮播图的实现>代码举例：轮播图的实现</a></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>JS动画的主要内容如下：</p><p>1、三大家族和一个事件对象：</p><ul><li><p>三大家族：offset/scroll/client。也叫三大系列。</p></li><li><p>事件对象/event（事件被触动时，鼠标和键盘的状态）（通过属性控制）。</p></li></ul><p>2、动画(闪现/匀速/缓动)</p><p>3、冒泡/兼容/封装</p><h2 id=offset-家族的组成>offset 家族的组成<a hidden class=anchor aria-hidden=true href=#offset-家族的组成>#</a></h2><p>我们知道，JS动画的三大家族包括：offset/scroll/client。今天来讲一下offset，以及与其相关的匀速动画。</p><blockquote><p>offset的中文是：偏移，补偿，位移。</p></blockquote><p>js中有一套方便的<strong>获取元素尺寸</strong>的办法就是offset家族。offset家族包括：</p><ul><li><p>offsetWidth</p></li><li><p>offsetHight</p></li><li><p>offsetLeft</p></li><li><p>offsetTop</p></li><li><p>offsetParent</p></li></ul><p>下面分别介绍。</p><h3 id=1offsetwidth-和-offsethight>1、offsetWidth 和 offsetHight<a hidden class=anchor aria-hidden=true href=#1offsetwidth-和-offsethight>#</a></h3><p><code>offsetWidth</code> 和 <code>offsetHight</code>：获取元素的<strong>宽高 + padding + border</strong>，不包括margin。如下：</p><ul><li><p>offsetWidth = width + padding + border</p></li><li><p>offsetHeight = Height + padding + border</p></li></ul><p>这两个属性，他们绑定在了所有的节点元素上。获取元素之后，只要调用这两个属性，我们就能够获取元素节点的宽和高。</p><p>举例如下：</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#427b58>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>html</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>head</span> <span style=color:#79740e;font-weight:700>lang</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>meta</span> <span style=color:#79740e;font-weight:700>charset</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>title</span>&gt;&lt;/<span style=color:#9d0006>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#9d0006>div</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>padding</span>: <span style=color:#8f3f71>10</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>border</span>: <span style=color:#8f3f71>10</span><span style=color:#b57614>px</span> <span style=color:#af3a03>solid</span> <span style=color:#8f3f71>#000</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background-color</span>: <span style=color:#af3a03>pink</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box&#34;</span>&gt;&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> div1 <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByTagName(<span style=color:#79740e>&#34;div&#34;</span>)[<span style=color:#8f3f71>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    console.log(div1.offsetHeight);          <span style=color:#928374;font-style:italic>//打印结果：140（100+20+20）
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    console.log(<span style=color:#af3a03>typeof</span> div1.offsetHeight);   <span style=color:#928374;font-style:italic>//打印结果：number
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>html</span>&gt;
</span></span></code></pre></div><h3 id=2offsetparent>2、offsetParent<a hidden class=anchor aria-hidden=true href=#2offsetparent>#</a></h3><p><code>offsetParent</code>：获取当前元素的<strong>定位父元素</strong>。</p><ul><li><p>如果当前元素的父元素，<strong>有CSS定位</strong>（position为absolute、relative、fixed），那么 <code>offsetParent</code> 获取的是<strong>最近的</strong>那个父元素。</p></li><li><p>如果当前元素的父元素，<strong>没有CSS定位</strong>（position为absolute、relative、fixed），那么<code>offsetParent</code> 获取的是<strong>body</strong>。</p></li></ul><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#427b58>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>html</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>head</span> <span style=color:#79740e;font-weight:700>lang</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>meta</span> <span style=color:#79740e;font-weight:700>charset</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>title</span>&gt;&lt;/<span style=color:#9d0006>title</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box1&#34;</span> <span style=color:#79740e;font-weight:700>style</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;position: absolute;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box2&#34;</span> <span style=color:#79740e;font-weight:700>style</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;position: fixed;&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box3&#34;</span>&gt;&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> box3 <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByClassName(<span style=color:#79740e>&#34;box3&#34;</span>)[<span style=color:#8f3f71>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    console.log(box3.offsetParent);
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>html</span>&gt;
</span></span></code></pre></div><p>打印结果：</p><p><img loading=lazy src=http://img.smyhvae.com/20180202_1725.png alt></p><h3 id=3offsetleft-和-offsettop>3、offsetLeft 和 offsetTop<a hidden class=anchor aria-hidden=true href=#3offsetleft-和-offsettop>#</a></h3><p><code>offsetLeft</code>：当前元素相对于其<strong>定位父元素</strong>的水平偏移量。</p><p><code>offsetTop</code>：当前元素相对于其<strong>定位父元素</strong>的垂直偏移量。</p><p>备注：从父亲的 padding 开始算起，父亲的 border 不算在内。</p><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#427b58>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>html</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>head</span> <span style=color:#79740e;font-weight:700>lang</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>meta</span> <span style=color:#79740e;font-weight:700>charset</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>title</span>&gt;&lt;/<span style=color:#9d0006>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>        .box1 {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>300</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>300</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>padding</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>relative</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>border</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span> <span style=color:#af3a03>solid</span> <span style=color:#8f3f71>#000</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background-color</span>: <span style=color:#af3a03>pink</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .box2 {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background-color</span>: <span style=color:#af3a03>red</span>;
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>/*position: absolute;*/</span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>/*left: 10px;*/</span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>/*top: 10px;*/</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box1&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box2&#34;</span> <span style=color:#79740e;font-weight:700>style</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;left: 10px&#34;</span>&gt;&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> box2 <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByClassName(<span style=color:#79740e>&#34;box2&#34;</span>)[<span style=color:#8f3f71>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#928374;font-style:italic>//offsetTop和offsetLeft
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    console.log(box2.offsetLeft);  <span style=color:#928374;font-style:italic>//100
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    console.log(box2.style.left);  <span style=color:#928374;font-style:italic>//10px
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>html</span>&gt;
</span></span></code></pre></div><p>在父盒子有定位的情况下，offsetLeft == style.left(去掉px之后)。注意，后者只识别行内样式。但区别不仅仅于此，下面会讲。</p><h3 id=offsetleft-和-styleleft-区别>offsetLeft 和 style.left 区别<a hidden class=anchor aria-hidden=true href=#offsetleft-和-styleleft-区别>#</a></h3><p>（1）最大区别在于：</p><p>offsetLeft 可以返回无定位父元素的偏移量。如果父元素中都没有定位，则body为准。</p><p>style.left 只能获取行内样式，如果父元素中都没有设置定位，则返回""（意思是，返回空字符串）;</p><p>（2）offsetTop 返回的是数字，而 style.top 返回的是字符串，而且还带有单位：px。</p><p>比如：</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>
</span></span><span style=display:flex><span>div.offsetLeft <span style=color:#af3a03>=</span> <span style=color:#8f3f71>100</span>;
</span></span><span style=display:flex><span>div.style.left <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;100px&#34;</span>;
</span></span></code></pre></div><p>（3）offsetLeft 和 offsetTop <strong>只读</strong>，而 style.left 和 style.top 可读写（只读是获取值，可写是修改值）</p><p>总结：我们一般的做法是：<strong>用offsetLeft 和 offsetTop 获取值，用style.left 和 style.top 赋值</strong>（比较方便）。理由如下：</p><ul><li><p>style.left：只能获取行内式，获取的值可能为空，容易出现NaN。</p></li><li><p>offsetLeft：获取值特别方便，而且是现成的number，方便计算。它是只读的，不能赋值。</p></li></ul><h2 id=动画的种类>动画的种类<a hidden class=anchor aria-hidden=true href=#动画的种类>#</a></h2><ul><li><p>闪现（基本不用）</p></li><li><p>匀速（本文重点）</p></li><li><p>缓动（后续重点）</p></li></ul><p>简单举例如下：（每间隔500ms，向右移动盒子100px）</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#427b58>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>html</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>head</span> <span style=color:#79740e;font-weight:700>lang</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>meta</span> <span style=color:#79740e;font-weight:700>charset</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>title</span>&gt;&lt;/<span style=color:#9d0006>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#9d0006>div</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background-color</span>: <span style=color:#af3a03>pink</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>absolute</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>button</span>&gt;动画&lt;/<span style=color:#9d0006>button</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box&#34;</span> <span style=color:#79740e;font-weight:700>style</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;left: 0px&#34;</span>&gt;&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> btn <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByTagName(<span style=color:#79740e>&#34;button&#34;</span>)[<span style=color:#8f3f71>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> div <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByTagName(<span style=color:#79740e>&#34;div&#34;</span>)[<span style=color:#8f3f71>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#928374;font-style:italic>//1、闪动
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    <span style=color:#928374;font-style:italic>//    btn.onclick = function () {
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    <span style=color:#928374;font-style:italic>//        div.style.left = &#34;500px&#34;;
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    <span style=color:#928374;font-style:italic>//    }
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>    <span style=color:#928374;font-style:italic>//2、匀速运动
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    btn.onclick <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//定时器，每隔一定的时间向右走一些
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        setInterval(<span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>            console.log(<span style=color:#b57614>parseInt</span>(div.style.left));
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//动画原理： 盒子未来的位置 = 盒子现在的位置 + 步长；
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//方法1：用offsetLeft获取值，用style.left赋值。
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            div.style.left <span style=color:#af3a03>=</span> div.offsetLeft <span style=color:#af3a03>+</span> <span style=color:#8f3f71>100</span> <span style=color:#af3a03>+</span> <span style=color:#79740e>&#39;px&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>// 方法2：必须一开始就在DOM节点上添加 style=&#34;left: 0px;&#34;属性，才能用方法2。否则， div.style.left 的值为 NaN
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>// div.style.left = parseInt(div.style.left)+100+&#34;px&#34;;  //方法2：
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        }, <span style=color:#8f3f71>500</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>html</span>&gt;
</span></span></code></pre></div><p>效果如下：</p><p><img loading=lazy src=http://img.smyhvae.com/20180202_1840.gif alt></p><h2 id=匀速动画的封装每间隔30ms移动盒子10px重要>匀速动画的封装：每间隔30ms，移动盒子10px【重要】<a hidden class=anchor aria-hidden=true href=#匀速动画的封装每间隔30ms移动盒子10px重要>#</a></h2><p>代码如下：</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#427b58>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>html</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>head</span> <span style=color:#79740e;font-weight:700>lang</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>meta</span> <span style=color:#79740e;font-weight:700>charset</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>title</span>&gt;&lt;/<span style=color:#9d0006>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>        .box1 {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin</span>: <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>padding</span>: <span style=color:#8f3f71>5</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>300</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background-color</span>: <span style=color:#8f3f71>#ddd</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>relative</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9d0006>button</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin</span>: <span style=color:#8f3f71>5</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .box2 {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background-color</span>: <span style=color:#af3a03>red</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>absolute</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>left</span>: <span style=color:#8f3f71>195</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>top</span>: <span style=color:#8f3f71>40</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .box3 {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background-color</span>: <span style=color:#af3a03>yellow</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>absolute</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>left</span>: <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>top</span>: <span style=color:#8f3f71>150</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box1&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>button</span>&gt;运动到 left = 200px&lt;/<span style=color:#9d0006>button</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>button</span>&gt;运动到 left = 400px&lt;/<span style=color:#9d0006>button</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box2&#34;</span>&gt;&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;box3&#34;</span>&gt;&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> btnArr <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByTagName(<span style=color:#79740e>&#34;button&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> box2 <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByClassName(<span style=color:#79740e>&#34;box2&#34;</span>)[<span style=color:#8f3f71>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#af3a03>var</span> box3 <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementsByClassName(<span style=color:#79740e>&#34;box3&#34;</span>)[<span style=color:#8f3f71>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#928374;font-style:italic>//绑定事件
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    btnArr[<span style=color:#8f3f71>0</span>].onclick <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//如果有一天我们要传递另外一个盒子，那么我们的方法就不好用了
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//所以我们要增加第二个参数，被移动的盒子本身。
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        animate(box2, <span style=color:#8f3f71>200</span>);
</span></span><span style=display:flex><span>        animate(box3, <span style=color:#8f3f71>200</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    btnArr[<span style=color:#8f3f71>1</span>].onclick <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        animate(box2, <span style=color:#8f3f71>400</span>);
</span></span><span style=display:flex><span>        animate(box3, <span style=color:#8f3f71>400</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#928374;font-style:italic>//【重要】方法的封装：每间隔30ms，将盒子向右移动10px
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    <span style=color:#af3a03>function</span> animate(ele, target) {
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//要用定时器，先清除定时器
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//一个盒子只能有一个定时器，这样的话，不会和其他盒子出现定时器冲突
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//我们可以把定时器本身，当成为盒子的一个属性
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        clearInterval(ele.timer);
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//我们要求盒子既能向前又能向后，那么我们的步长就得有正有负
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//目标值如果大于当前值取正，目标值如果小于当前值取负
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#af3a03>var</span> speed <span style=color:#af3a03>=</span> target <span style=color:#af3a03>&gt;</span> ele.offsetLeft <span style=color:#af3a03>?</span> <span style=color:#8f3f71>10</span> <span style=color:#af3a03>:</span> <span style=color:#af3a03>-</span><span style=color:#8f3f71>10</span>;  <span style=color:#928374;font-style:italic>//speed指的是步长
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        ele.timer <span style=color:#af3a03>=</span> setInterval(<span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//在执行之前就获取当前值和目标值之差
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>var</span> val <span style=color:#af3a03>=</span> target <span style=color:#af3a03>-</span> ele.offsetLeft;
</span></span><span style=display:flex><span>            ele.style.left <span style=color:#af3a03>=</span> ele.offsetLeft <span style=color:#af3a03>+</span> speed <span style=color:#af3a03>+</span> <span style=color:#79740e>&#34;px&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//移动的过程中，如果目标值和当前值之差如果小于步长，那么就不能在前进了
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//因为步长有正有负，所有转换成绝对值来比较
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>if</span> (<span style=color:#b57614>Math</span>.abs(val) <span style=color:#af3a03>&lt;</span> <span style=color:#b57614>Math</span>.abs(speed)) {
</span></span><span style=display:flex><span>                ele.style.left <span style=color:#af3a03>=</span> target <span style=color:#af3a03>+</span> <span style=color:#79740e>&#34;px&#34;</span>;
</span></span><span style=display:flex><span>                clearInterval(ele.timer);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }, <span style=color:#8f3f71>30</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>html</span>&gt;
</span></span></code></pre></div><p>实现的效果：</p><p><img loading=lazy src=http://img.smyhvae.com/20180202_1910.gif alt></p><p>上方代码中的方法封装，可以作为一个模板步骤，要记住。其实，这个封装的方法，写成下面这样，会更严谨，更容易理解：（将if语句进行了改进）</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    <span style=color:#928374;font-style:italic>//【重要】方法的封装：每间隔30ms，将盒子向右移动10px
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    <span style=color:#af3a03>function</span> animate(ele, target) {
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//要用定时器，先清除定时器
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//一个盒子只能有一个定时器，这样的话，不会和其他盒子出现定时器冲突
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//我们可以把定时器本身，当成为盒子的一个属性
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        clearInterval(ele.timer);
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//我们要求盒子既能向前又能向后，那么我们的步长就得有正有负
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//目标值如果大于当前值取正，目标值如果小于当前值取负
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#af3a03>var</span> speed <span style=color:#af3a03>=</span> target <span style=color:#af3a03>&gt;</span> ele.offsetLeft <span style=color:#af3a03>?</span> <span style=color:#8f3f71>10</span> <span style=color:#af3a03>:</span> <span style=color:#af3a03>-</span><span style=color:#8f3f71>10</span>;  <span style=color:#928374;font-style:italic>//speed指的是步长
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        ele.timer <span style=color:#af3a03>=</span> setInterval(<span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//在执行之前就获取当前值和目标值之差
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>var</span> val <span style=color:#af3a03>=</span> target <span style=color:#af3a03>-</span> ele.offsetLeft;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//移动的过程中，如果目标值和当前值之差如果小于步长，那么就不能在前进了
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//因为步长有正有负，所有转换成绝对值来比较
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>if</span> (<span style=color:#b57614>Math</span>.abs(val) <span style=color:#af3a03>&lt;</span> <span style=color:#b57614>Math</span>.abs(speed)) {  <span style=color:#928374;font-style:italic>//如果val小于步长，则直接到达目的地；否则，每次移动一个步长
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                ele.style.left <span style=color:#af3a03>=</span> target <span style=color:#af3a03>+</span> <span style=color:#79740e>&#34;px&#34;</span>;
</span></span><span style=display:flex><span>                clearInterval(ele.timer);
</span></span><span style=display:flex><span>            } <span style=color:#af3a03>else</span> {
</span></span><span style=display:flex><span>                ele.style.left <span style=color:#af3a03>=</span> ele.offsetLeft <span style=color:#af3a03>+</span> speed <span style=color:#af3a03>+</span> <span style=color:#79740e>&#34;px&#34;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }, <span style=color:#8f3f71>30</span>)
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h2 id=代码举例轮播图的实现>代码举例：轮播图的实现<a hidden class=anchor aria-hidden=true href=#代码举例轮播图的实现>#</a></h2><p>完整版代码如下：（注释已经比较详细）</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#427b58>&lt;!doctype html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>html</span> <span style=color:#79740e;font-weight:700>lang</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>meta</span> <span style=color:#79740e;font-weight:700>http-equiv</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;Content-Type&#34;</span> <span style=color:#79740e;font-weight:700>content</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;text/html; charset=utf-8&#34;</span>/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>title</span>&gt;无标题文档&lt;/<span style=color:#9d0006>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>style</span> <span style=color:#79740e;font-weight:700>type</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;text/css&#34;</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#af3a03>*</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>padding</span>: <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin</span>: <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>list-style</span>: <span style=color:#af3a03>none</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>border</span>: <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .all {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>500</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>200</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>padding</span>: <span style=color:#8f3f71>7</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>border</span>: <span style=color:#8f3f71>1</span><span style=color:#b57614>px</span> <span style=color:#af3a03>solid</span> <span style=color:#8f3f71>#ccc</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin</span>: <span style=color:#8f3f71>100</span><span style=color:#b57614>px</span> <span style=color:#af3a03>auto</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>relative</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .screen {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>500</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>200</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>overflow</span>: <span style=color:#af3a03>hidden</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>relative</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .screen <span style=color:#9d0006>li</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>500</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>200</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>overflow</span>: <span style=color:#af3a03>hidden</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>float</span>: <span style=color:#af3a03>left</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .screen <span style=color:#9d0006>ul</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>absolute</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>left</span>: <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>top</span>: <span style=color:#8f3f71>0</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>3000</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .all <span style=color:#9d0006>ol</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>absolute</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>right</span>: <span style=color:#8f3f71>10</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>bottom</span>: <span style=color:#8f3f71>10</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>line-height</span>: <span style=color:#8f3f71>20</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>text-align</span>: <span style=color:#af3a03>center</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .all <span style=color:#9d0006>ol</span> <span style=color:#9d0006>li</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>float</span>: <span style=color:#af3a03>left</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>20</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>20</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background</span>: <span style=color:#8f3f71>#fff</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>border</span>: <span style=color:#8f3f71>1</span><span style=color:#b57614>px</span> <span style=color:#af3a03>solid</span> <span style=color:#8f3f71>#ccc</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin-left</span>: <span style=color:#8f3f71>10</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>cursor</span>: <span style=color:#af3a03>pointer</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        .all <span style=color:#9d0006>ol</span> <span style=color:#9d0006>li</span>.current {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background</span>: <span style=color:#af3a03>yellow</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        #arr {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>display</span>: <span style=color:#af3a03>none</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        #arr <span style=color:#9d0006>span</span> {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>width</span>: <span style=color:#8f3f71>40</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>height</span>: <span style=color:#8f3f71>40</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>position</span>: <span style=color:#af3a03>absolute</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>left</span>: <span style=color:#8f3f71>5</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>top</span>: <span style=color:#8f3f71>50</span><span style=color:#b57614>%</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>margin-top</span>: <span style=color:#8f3f71>-20</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>background</span>: <span style=color:#8f3f71>#000</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>cursor</span>: <span style=color:#af3a03>pointer</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>line-height</span>: <span style=color:#8f3f71>40</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>text-align</span>: <span style=color:#af3a03>center</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>font-weight</span>: <span style=color:#af3a03>bold</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>font-family</span>: <span style=color:#79740e>&#39;黑体&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>font-size</span>: <span style=color:#8f3f71>30</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>color</span>: <span style=color:#8f3f71>#fff</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>opacity</span>: <span style=color:#8f3f71>0.3</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>border</span>: <span style=color:#8f3f71>1</span><span style=color:#b57614>px</span> <span style=color:#af3a03>solid</span> <span style=color:#8f3f71>#fff</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        #arr #right {
</span></span><span style=display:flex><span>            <span style=color:#af3a03>right</span>: <span style=color:#8f3f71>5</span><span style=color:#b57614>px</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>left</span>: <span style=color:#af3a03>auto</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>style</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#b57614>window</span>.onload <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//需求：无缝滚动。
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//思路：赋值第一张图片放到ul的最后，然后当图片切换到第五张的时候
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//     直接切换第六章，再次从第一张切换到第二张的时候先瞬间切换到
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//     第一张图片，然后滑动到第二张
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//步骤：
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//1.获取事件源及相关元素。（老三步）
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//2.复制第一张图片所在的li,添加到ul的最后面。
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//3.给ol中添加li，ul中的个数-1个，并点亮第一个按钮。
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//4.鼠标放到ol的li上切换图片
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//5.添加定时器
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//6.左右切换图片（鼠标放上去隐藏，移开显示）
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//1.获取事件源及相关元素。（老三步）
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>var</span> all <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.getElementById(<span style=color:#79740e>&#34;all&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> screen <span style=color:#af3a03>=</span> all.firstElementChild <span style=color:#af3a03>||</span> all.firstChild;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> imgWidth <span style=color:#af3a03>=</span> screen.offsetWidth;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> ul <span style=color:#af3a03>=</span> screen.firstElementChild <span style=color:#af3a03>||</span> screen.firstChild;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> ol <span style=color:#af3a03>=</span> screen.children[<span style=color:#8f3f71>1</span>];
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> div <span style=color:#af3a03>=</span> screen.lastElementChild <span style=color:#af3a03>||</span> screen.lastChild;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> spanArr <span style=color:#af3a03>=</span> div.children;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//2.复制第一张图片所在的li,添加到ul的最后面。
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>var</span> ulNewLi <span style=color:#af3a03>=</span> ul.children[<span style=color:#8f3f71>0</span>].cloneNode(<span style=color:#af3a03>true</span>);
</span></span><span style=display:flex><span>            ul.appendChild(ulNewLi);
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//3.给ol中添加li，ul中的个数-1个，并点亮第一个按钮。
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>for</span> (<span style=color:#af3a03>var</span> i <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>; i <span style=color:#af3a03>&lt;</span> ul.children.length <span style=color:#af3a03>-</span> <span style=color:#8f3f71>1</span>; i<span style=color:#af3a03>++</span>) {
</span></span><span style=display:flex><span>                <span style=color:#af3a03>var</span> olNewLi <span style=color:#af3a03>=</span> <span style=color:#b57614>document</span>.createElement(<span style=color:#79740e>&#34;li&#34;</span>);
</span></span><span style=display:flex><span>                olNewLi.innerHTML <span style=color:#af3a03>=</span> i <span style=color:#af3a03>+</span> <span style=color:#8f3f71>1</span>;
</span></span><span style=display:flex><span>                ol.appendChild(olNewLi)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> olLiArr <span style=color:#af3a03>=</span> ol.children;
</span></span><span style=display:flex><span>            olLiArr[<span style=color:#8f3f71>0</span>].className <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;current&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//4.鼠标放到ol的li上切换图片
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>for</span> (<span style=color:#af3a03>var</span> i <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>; i <span style=color:#af3a03>&lt;</span> olLiArr.length; i<span style=color:#af3a03>++</span>) {
</span></span><span style=display:flex><span>                <span style=color:#928374;font-style:italic>//自定义属性，把索引值绑定到元素的index属性上
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                olLiArr[i].index <span style=color:#af3a03>=</span> i;
</span></span><span style=display:flex><span>                olLiArr[i].onmouseover <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>                    <span style=color:#928374;font-style:italic>//排他思想
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                    <span style=color:#af3a03>for</span> (<span style=color:#af3a03>var</span> j <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>; j <span style=color:#af3a03>&lt;</span> olLiArr.length; j<span style=color:#af3a03>++</span>) {
</span></span><span style=display:flex><span>                        olLiArr[j].className <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;&#34;</span>;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    <span style=color:#af3a03>this</span>.className <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;current&#34;</span>;
</span></span><span style=display:flex><span>                    <span style=color:#928374;font-style:italic>//鼠标放到小的方块上的时候索引值和key以及square同步
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>//                    key = this.index;
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>//                    square = this.index;
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                    key <span style=color:#af3a03>=</span> square <span style=color:#af3a03>=</span> <span style=color:#af3a03>this</span>.index;
</span></span><span style=display:flex><span>                    <span style=color:#928374;font-style:italic>//移动盒子
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                    animate(ul, <span style=color:#af3a03>-</span><span style=color:#af3a03>this</span>.index <span style=color:#af3a03>*</span> imgWidth);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//5.添加定时器
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>var</span> timer <span style=color:#af3a03>=</span> setInterval(autoPlay, <span style=color:#8f3f71>1000</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//固定向右切换图片
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#928374;font-style:italic>//两个定时器（一个记录图片，一个记录小方块）
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            <span style=color:#af3a03>var</span> key <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#af3a03>var</span> square <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#af3a03>function</span> autoPlay() {
</span></span><span style=display:flex><span>                <span style=color:#928374;font-style:italic>//通过控制key的自增来模拟图片的索引值，然后移动ul
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                key<span style=color:#af3a03>++</span>;
</span></span><span style=display:flex><span>                <span style=color:#af3a03>if</span> (key <span style=color:#af3a03>&gt;</span> olLiArr.length) {
</span></span><span style=display:flex><span>                    <span style=color:#928374;font-style:italic>//图片已经滑动到最后一张，接下来，跳转到第一张，然后在滑动到第二张
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                    ul.style.left <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>                    key <span style=color:#af3a03>=</span> <span style=color:#8f3f71>1</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                animate(ul, <span style=color:#af3a03>-</span>key <span style=color:#af3a03>*</span> imgWidth);
</span></span><span style=display:flex><span>                <span style=color:#928374;font-style:italic>//通过控制square的自增来模拟小方块的索引值，然后点亮盒子
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                <span style=color:#928374;font-style:italic>//排他思想做小方块
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                square<span style=color:#af3a03>++</span>;
</span></span><span style=display:flex><span>                <span style=color:#af3a03>if</span> (square <span style=color:#af3a03>&gt;</span> olLiArr.length <span style=color:#af3a03>-</span> <span style=color:#8f3f71>1</span>) {<span style=color:#928374;font-style:italic>//索引值不能大于等于5，如果等于5，立刻变为0；
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                    square <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#af3a03>for</span> (<span style=color:#af3a03>var</span> i <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>; i <span style=color:#af3a03>&lt;</span> olLiArr.length; i<span style=color:#af3a03>++</span>) {
</span></span><span style=display:flex><span>                    olLiArr[i].className <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;&#34;</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                olLiArr[square].className <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;current&#34;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//鼠标放上去清除定时器，移开后在开启定时器
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            all.onmouseover <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>                div.style.display <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;block&#34;</span>;
</span></span><span style=display:flex><span>                clearInterval(timer);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            all.onmouseout <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>                div.style.display <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;none&#34;</span>;
</span></span><span style=display:flex><span>                timer <span style=color:#af3a03>=</span> setInterval(autoPlay, <span style=color:#8f3f71>1000</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#928374;font-style:italic>//6.左右切换图片（鼠标放上去显示，移开隐藏）
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>            spanArr[<span style=color:#8f3f71>0</span>].onclick <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>                <span style=color:#928374;font-style:italic>//通过控制key的自增来模拟图片的索引值，然后移动ul
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                key<span style=color:#af3a03>--</span>;
</span></span><span style=display:flex><span>                <span style=color:#af3a03>if</span> (key <span style=color:#af3a03>&lt;</span> <span style=color:#8f3f71>0</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#928374;font-style:italic>//先移动到最后一张，然后key的值取之前一张的索引值，然后在向前移动
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                    ul.style.left <span style=color:#af3a03>=</span> <span style=color:#af3a03>-</span>imgWidth <span style=color:#af3a03>*</span> (olLiArr.length) <span style=color:#af3a03>+</span> <span style=color:#79740e>&#34;px&#34;</span>;
</span></span><span style=display:flex><span>                    key <span style=color:#af3a03>=</span> olLiArr.length <span style=color:#af3a03>-</span> <span style=color:#8f3f71>1</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                animate(ul, <span style=color:#af3a03>-</span>key <span style=color:#af3a03>*</span> imgWidth);
</span></span><span style=display:flex><span>                <span style=color:#928374;font-style:italic>//通过控制square的自增来模拟小方块的索引值，然后点亮盒子
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                <span style=color:#928374;font-style:italic>//排他思想做小方块
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                square<span style=color:#af3a03>--</span>;
</span></span><span style=display:flex><span>                <span style=color:#af3a03>if</span> (square <span style=color:#af3a03>&lt;</span> <span style=color:#8f3f71>0</span>) {<span style=color:#928374;font-style:italic>//索引值不能大于等于5，如果等于5，立刻变为0；
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                    square <span style=color:#af3a03>=</span> olLiArr.length <span style=color:#af3a03>-</span> <span style=color:#8f3f71>1</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#af3a03>for</span> (<span style=color:#af3a03>var</span> i <span style=color:#af3a03>=</span> <span style=color:#8f3f71>0</span>; i <span style=color:#af3a03>&lt;</span> olLiArr.length; i<span style=color:#af3a03>++</span>) {
</span></span><span style=display:flex><span>                    olLiArr[i].className <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;&#34;</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                olLiArr[square].className <span style=color:#af3a03>=</span> <span style=color:#79740e>&#34;current&#34;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            spanArr[<span style=color:#8f3f71>1</span>].onclick <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>                <span style=color:#928374;font-style:italic>//右侧的和定时器一模一样
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>                autoPlay();
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#af3a03>function</span> animate(ele, target) {
</span></span><span style=display:flex><span>                clearInterval(ele.timer);
</span></span><span style=display:flex><span>                <span style=color:#af3a03>var</span> speed <span style=color:#af3a03>=</span> target <span style=color:#af3a03>&gt;</span> ele.offsetLeft <span style=color:#af3a03>?</span> <span style=color:#8f3f71>10</span> <span style=color:#af3a03>:</span> <span style=color:#af3a03>-</span><span style=color:#8f3f71>10</span>;
</span></span><span style=display:flex><span>                ele.timer <span style=color:#af3a03>=</span> setInterval(<span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>                    <span style=color:#af3a03>var</span> val <span style=color:#af3a03>=</span> target <span style=color:#af3a03>-</span> ele.offsetLeft;
</span></span><span style=display:flex><span>                    ele.style.left <span style=color:#af3a03>=</span> ele.offsetLeft <span style=color:#af3a03>+</span> speed <span style=color:#af3a03>+</span> <span style=color:#79740e>&#34;px&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#af3a03>if</span> (<span style=color:#b57614>Math</span>.abs(val) <span style=color:#af3a03>&lt;</span> <span style=color:#b57614>Math</span>.abs(speed)) {
</span></span><span style=display:flex><span>                        ele.style.left <span style=color:#af3a03>=</span> target <span style=color:#af3a03>+</span> <span style=color:#79740e>&#34;px&#34;</span>;
</span></span><span style=display:flex><span>                        clearInterval(ele.timer);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }, <span style=color:#8f3f71>10</span>)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>head</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;all&#34;</span> <span style=color:#79740e;font-weight:700>id</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#39;all&#39;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>class</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;screen&#34;</span> <span style=color:#79740e;font-weight:700>id</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;screen&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#9d0006>ul</span> <span style=color:#79740e;font-weight:700>id</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;ul&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#9d0006>li</span>&gt;&lt;<span style=color:#9d0006>img</span> <span style=color:#79740e;font-weight:700>src</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;images/1.jpg&#34;</span> <span style=color:#79740e;font-weight:700>width</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;500&#34;</span> <span style=color:#79740e;font-weight:700>height</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;200&#34;</span>/&gt;&lt;/<span style=color:#9d0006>li</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#9d0006>li</span>&gt;&lt;<span style=color:#9d0006>img</span> <span style=color:#79740e;font-weight:700>src</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;images/2.jpg&#34;</span> <span style=color:#79740e;font-weight:700>width</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;500&#34;</span> <span style=color:#79740e;font-weight:700>height</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;200&#34;</span>/&gt;&lt;/<span style=color:#9d0006>li</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#9d0006>li</span>&gt;&lt;<span style=color:#9d0006>img</span> <span style=color:#79740e;font-weight:700>src</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;images/3.jpg&#34;</span> <span style=color:#79740e;font-weight:700>width</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;500&#34;</span> <span style=color:#79740e;font-weight:700>height</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;200&#34;</span>/&gt;&lt;/<span style=color:#9d0006>li</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#9d0006>li</span>&gt;&lt;<span style=color:#9d0006>img</span> <span style=color:#79740e;font-weight:700>src</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;images/4.jpg&#34;</span> <span style=color:#79740e;font-weight:700>width</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;500&#34;</span> <span style=color:#79740e;font-weight:700>height</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;200&#34;</span>/&gt;&lt;/<span style=color:#9d0006>li</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#9d0006>li</span>&gt;&lt;<span style=color:#9d0006>img</span> <span style=color:#79740e;font-weight:700>src</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;images/5.jpg&#34;</span> <span style=color:#79740e;font-weight:700>width</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;500&#34;</span> <span style=color:#79740e;font-weight:700>height</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;200&#34;</span>/&gt;&lt;/<span style=color:#9d0006>li</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#9d0006>ul</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#9d0006>ol</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;/<span style=color:#9d0006>ol</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#9d0006>div</span> <span style=color:#79740e;font-weight:700>id</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;arr&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#9d0006>span</span> <span style=color:#79740e;font-weight:700>id</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;left&#34;</span>&gt;&lt;&lt;/<span style=color:#9d0006>span</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#9d0006>span</span> <span style=color:#79740e;font-weight:700>id</span><span style=color:#af3a03>=</span><span style=color:#79740e>&#34;right&#34;</span>&gt;&gt;&lt;/<span style=color:#9d0006>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#9d0006>html</span>&gt;
</span></span></code></pre></div><p>实现效果：</p><p><img loading=lazy src=http://img.smyhvae.com/20180202_2020.gif alt></p><p>温馨提示：动图太大，可以把<a href=http://img.smyhvae.com/20180202_2020.gif>http://img.smyhvae.com/20180202_2020.gif</a>单独在浏览器中打开。</p><p>工程文件：</p><ul><li><a href=http://download.csdn.net/download/smyhvae/10237662>2018-02-02-JS动画实现轮播图.rar</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/javascript/>JavaScript</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/tech/wait/04-javascript/35-%E9%80%9A%E8%BF%87style%E5%AF%B9%E8%B1%A1%E8%8E%B7%E5%8F%96%E5%92%8C%E8%AE%BE%E7%BD%AE%E8%A1%8C%E5%86%85%E6%A0%B7%E5%BC%8F/><span class=title>« Prev</span><br><span>35-通过style对象获取和设置行内样式</span></a>
<a class=next href=https://bablvsj.github.io/posts/tech/wait/04-javascript/37-scroll%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7%E5%92%8C%E7%BC%93%E5%8A%A8%E5%8A%A8%E7%94%BB/><span class=title>Next »</span><br><span>37-scroll相关属性和缓动动画</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>本站由</span><img width=60 src=/images/upyun.png>提供CDN加速/云存储服务</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>