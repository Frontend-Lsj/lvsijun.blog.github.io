<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>C&#43;&#43; | Bablvsj&#39;s Blog</title>
<meta name="keywords" content="exams">
<meta name="description" content="计算机信息管理专业课程 自考笔记在线更新地址 : https://github.com/Eished/self-study-exam_notes 配套代码：https://github.com/Eished/C-CPP 2019版 单选题 1分x">
<meta name="author" content="">
<link rel="canonical" href="https://bablvsj.github.io/posts/exams/c&#43;&#43;/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d24f879e6096b820c8747034ec6955182ecf05ab4edac7ba138af09f7298e152.css" integrity="sha256-0k&#43;HnmCWuCDIdHA07GlVGC7PBatO2se6E4rwn3KY4VI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://bablvsj.github.io/img/Q.gif">
<link rel="apple-touch-icon" href="https://bablvsj.github.io/Q.gif">
<link rel="mask-icon" href="https://bablvsj.github.io/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="stylesheet" href="/css/syntax.css">


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="C&#43;&#43;" />
<meta property="og:description" content="计算机信息管理专业课程 自考笔记在线更新地址 : https://github.com/Eished/self-study-exam_notes 配套代码：https://github.com/Eished/C-CPP 2019版 单选题 1分x" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bablvsj.github.io/posts/exams/c&#43;&#43;/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-26T13:46:19+08:00" />
<meta property="article:modified_time" content="2022-10-26T13:46:19+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="C&#43;&#43;"/>
<meta name="twitter:description" content="计算机信息管理专业课程 自考笔记在线更新地址 : https://github.com/Eished/self-study-exam_notes 配套代码：https://github.com/Eished/C-CPP 2019版 单选题 1分x"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "文章",
      "item": "https://bablvsj.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "C++",
      "item": "https://bablvsj.github.io/posts/exams/c++/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "C++",
  "name": "C\u002b\u002b",
  "description": "计算机信息管理专业课程 自考笔记在线更新地址 : https://github.com/Eished/self-study-exam_notes 配套代码：https://github.com/Eished/C-CPP 2019版 单选题 1分x",
  "keywords": [
    "exams"
  ],
  "articleBody": " 计算机信息管理专业课程\n自考笔记在线更新地址 : https://github.com/Eished/self-study-exam_notes\n配套代码：https://github.com/Eished/C-CPP\n2019版 单选题 1分x20题 = 20分 填空题 1分x15题 = 15分 程序填空题 4分x5题 = 20分 程序分析题 5分x6题 = 30分 程序设计题 5分x1题 = 5分 10分x1题 = 10分 IDE 书本推荐：Dev C++ 5.11\n本人使用：VScode\n配置文件在附录\nVScode 执行完会自动关闭终端, return 前设置断点\n或者修改 launch.json 文件为 \"externalConsole\": false, 内置终端支持 utf-8 使用外置终端，utf-8 中文乱码问题, 在 vs code 修改代码的打开和保存方式\n直接就将代码保存为 gb2312。在 vs code 右下角可以看到当前文件编码方式，点击utf-8 修改打开和保存方式为 gb2312。\n学习建议 先大概看一遍全书，有整体概念，做习题时再去细看不懂的地方，重点都在内容小结部分。 习题代码写一遍，遇到不懂的再翻书或去网上查，例题代码一般不用写看懂就行。 学习本课程之前需具备较好的C语言基础（如基本的语法知识和三大程序结构等） C语言基础 标识符可以由3种字符组成：字母、下划线、数字，并且不能以数字开头，不能是C++的关键字。\n语句以分号;结束\n第一章 C++ 语言简介 C++发展历史，与C语言的异同 C++是C的一个超集，进一步扩充和完善了C，C++比C更安全。 C++是一种编译式、通用式、大小写敏感的编程语言，完全支持面向对象程序设计。 掌握C++ 程序结构，正确使用头文件及命名空间 基本输入/输出 函数声明和传参 函数重载概念 理解 const ，指针，引用，动态内存分配和释放 string 类基本功能 第一节 C++发展简史 低级语言：机器语言，汇编语言 中级语言：C语言 高级语言：面向用户，易懂、通用。 第二节 C++特点 编译式、通用、大小写敏感，支持面向对象 特点 继承和兼容C 语言，简洁高效 面向对象 一、头文件和命名空间 1.头文件 是用户应用程序和函数库之间的桥梁和纽带。作为一种包含功能函数、数据接口声明的载体文件，主要用于保存程序的声明，而定义文件用于保存程序的实现。\n头文件保存程序中用到的声明，如函数声明、常量定义等，需要使用预处理命名包含头文件#include 常用的头文件 标准输入输出流: 标准文件流: 标准字符串处理函数: 标准数学函数: 自定义头文件 \u003c\u003e: 系统设定目录寻找, 未找到再去指定目录找 “”: 用户当前目录或指定目录找 #include \"e:\\myprog\\ex1.h\" 2.命名空间 namespace 命名空间是一种将程序库名称封装起来的方法，提高了程序的性能和可靠性，可消除同名引起的冲突。 标准程序库的命名空间 using namespace std;\nnamespace 命名空间名 { 命名空间内各种声明(函数声明\\类声明) } 引用命名空间标识符\n不引用命名空间, 则使用全称: 命名空间名::标识符名 using 命名空间名::标识符; // 单独引用 using namespace 命名空间名; // 引用整个命名空间 namespace S { int x; void FunA() { ... } } // 若访问 x，可写成 S::x； // 访问 FunA() 则为 S::FunA()； 二、基本输入/输出 标准输入 cin \u003e\u003e 变量1 \u003e\u003e 变量2 \u003e\u003e... \u003e\u003e 变量n; 标准输出 cout \u003c\u003c 表达式1 \u003c\u003c 表达式2 \u003c\u003c ...\u003c\u003c 表达式n; 头文件 #include // 头文件：输入输出流 using namespace std; // 使用命名空间 换行操作 用语句 cout \u003c\u003c endl; 或 cout \u003c\u003c \"\\n\"; 运算符重载后才可以使用 输入：空格、TAB、ENTER 作为分隔符\n#include using namespace std; int main() { int a = 1, b = 2; cin \u003e\u003e a \u003e\u003e b; cout \u003c\u003c \"Hello Vscode\\n\" \u003c\u003c a * b \u003c\u003c endl; return 0; } 输入/输出示例\n#include #include using namespace std; int main() { int oneInt1, oneInt2; char strArray[20]; string str; double oneDouble; char oneChar = 'a'; cout \u003c\u003c \"输入两个整型值，一个字符，一个字符串，一个浮点值,\"; cout \u003c\u003c \"以空格、tab、enter 键分割\" \u003c\u003c endl; cin \u003e\u003e oneInt1 \u003e\u003e oneInt2 \u003e\u003e oneChar \u003e\u003e strArray \u003e\u003e oneDouble; str = strArray; cout \u003c\u003c \"输入的数据是:\" \u003c\u003c endl; //endl 是换行 cout \u003c\u003c \"字符串:\\t\\t\" \u003c\u003c str \u003c\u003c endl //\\t是制表符 \u003c\u003c \"两个整型值:\\t\" \u003c\u003c oneInt1 \u003c\u003c \"和\\t\" \u003c\u003c oneInt2 \u003c\u003c endl \u003c\u003c \"字符:\\t\\t\" \u003c\u003c oneChar \u003c\u003c \"\\n\" //\"\\n\"是换行符,与endl相同 \u003c\u003c \"浮点值:\\t\\t\" \u003c\u003c oneDouble \u003c\u003c endl; return 0; } cin 实现键盘输入，输入字符类型时根据变量类型自动提取相应长度字节, 数值类型数据需要分隔\ngetchar(): 获取 space\\tab\\enter 等特殊字符\ncout \u003c\u003c\"1234\\ //\"\\\" 用于连接换行的内容 566785\"\u003c",
  "wordCount" : "49242",
  "inLanguage": "en",
  "datePublished": "2022-10-26T13:46:19+08:00",
  "dateModified": "2022-10-26T13:46:19+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://bablvsj.github.io/posts/exams/c++/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Bablvsj's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://bablvsj.github.io/img/Q.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://bablvsj.github.io" accesskey="h" title="Bablvsj&#39;s Blog (Alt + H)">Bablvsj&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://bablvsj.github.io/" title="主页">
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/archives/" title="时间轴">
                    <span>时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/tags" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/about" title="关于">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/search" title="🔍 (Alt &#43; /)" accesskey=/>
                    <span>🔍</span>
                </a>
            </li>
        </ul>
    </nav>
</header>


<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      C&#43;&#43;
    </h1>
    <div class="post-meta">
      
<div class="post-tags-meta">
    <a href="https://bablvsj.github.io/tags/exams/">exams</a>
</div>

99 min&nbsp;·&nbsp;<span title='2022-10-26 13:46:19 +0800 CST'>2022/10/26</span>


      
    </div>
    
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        
        <div class="inner"><ul>
                <li>
                    <a href="#2019%e7%89%88" aria-label="2019版">2019版</a><ul>
                        
                <li>
                    <a href="#ide" aria-label="IDE">IDE</a></li>
                <li>
                    <a href="#%e5%ad%a6%e4%b9%a0%e5%bb%ba%e8%ae%ae" aria-label="学习建议">学习建议</a></li></ul>
                </li>
                <li>
                    <a href="#c%e8%af%ad%e8%a8%80%e5%9f%ba%e7%a1%80" aria-label="C语言基础">C语言基础</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e7%ab%a0-c-%e8%af%ad%e8%a8%80%e7%ae%80%e4%bb%8b" aria-label="第一章 C&#43;&#43; 语言简介">第一章 C++ 语言简介</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e8%8a%82-c%e5%8f%91%e5%b1%95%e7%ae%80%e5%8f%b2" aria-label="第一节 C&#43;&#43;发展简史">第一节 C++发展简史</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e8%8a%82-c%e7%89%b9%e7%82%b9" aria-label="第二节 C&#43;&#43;特点">第二节 C++特点</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e5%a4%b4%e6%96%87%e4%bb%b6%e5%92%8c%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4" aria-label="一、头文件和命名空间">一、头文件和命名空间</a><ul>
                        <ul>
                        
                <li>
                    <a href="#1%e5%a4%b4%e6%96%87%e4%bb%b6" aria-label="1.头文件">1.头文件</a></li>
                <li>
                    <a href="#2%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4-namespace" aria-label="2.命名空间 namespace">2.命名空间 namespace</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e5%9f%ba%e6%9c%ac%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba" aria-label="二、基本输入/输出">二、基本输入/输出</a></li>
                <li>
                    <a href="#%e4%b8%89%e5%87%bd%e6%95%b0%e7%9a%84%e5%ba%94%e7%94%a8" aria-label="三、函数的应用">三、函数的应用</a><ul>
                        <ul>
                        
                <li>
                    <a href="#1%e5%87%bd%e6%95%b0%e5%8f%82%e6%95%b0%e7%9a%84%e9%bb%98%e8%ae%a4%e5%80%bc" aria-label="1.函数参数的默认值">1.函数参数的默认值</a></li>
                <li>
                    <a href="#2%e5%bc%95%e7%94%a8%e5%92%8c%e5%87%bd%e6%95%b0%e5%8f%82%e6%95%b0%e7%9a%84%e4%bc%a0%e9%80%92" aria-label="2.引用和函数参数的传递">2.引用和函数参数的传递</a><ul>
                        
                <li>
                    <a href="#21-%e5%bc%95%e7%94%a8" aria-label="2.1 引用">2.1 引用</a></li>
                <li>
                    <a href="#22-%e5%b8%b8%e5%bc%95%e7%94%a8" aria-label="2.2 常引用">2.2 常引用</a></li>
                <li>
                    <a href="#23-%e5%bc%95%e7%94%a8%e5%9c%a8%e5%87%bd%e6%95%b0%e4%b8%ad%e4%bd%bf%e7%94%a8" aria-label="2.3 引用在函数中使用">2.3 引用在函数中使用</a></li></ul>
                </li>
                <li>
                    <a href="#3%e5%86%85%e8%81%94%e5%87%bd%e6%95%b0-inline-%e5%b8%b8%e8%80%83" aria-label="3.内联函数 inline （常考）">3.内联函数 inline （常考）</a></li>
                <li>
                    <a href="#4%e5%87%bd%e6%95%b0%e7%9a%84%e9%87%8d%e8%bd%bd%e5%bf%85%e8%80%83" aria-label="4.函数的重载（必考）">4.函数的重载（必考）</a></li>
                <li>
                    <a href="#5const-%e4%b8%8e%e6%8c%87%e9%92%88%e5%85%b1%e5%90%8c%e4%bd%bf%e7%94%a8" aria-label="5.const 与指针共同使用">5.const 与指针共同使用</a></li></ul>
                    
                <li>
                    <a href="#6%e6%8c%87%e9%92%88%e5%92%8c%e5%8a%a8%e6%80%81%e5%86%85%e5%ad%98%e5%88%86%e9%85%8d" aria-label="6.指针和动态内存分配">6.指针和动态内存分配</a><ul>
                        
                <li>
                    <a href="#61-%e6%8c%87%e9%92%88" aria-label="6.1 指针">6.1 <strong>指针</strong></a></li>
                <li>
                    <a href="#62-%e5%8a%a8%e6%80%81%e5%86%85%e5%ad%98%e5%88%86%e9%85%8d-%e5%b8%b8%e8%80%83" aria-label="6.2 动态内存分配 （常考）">6.2 动态内存分配 （常考）</a></li></ul>
                </li>
                <li>
                    <a href="#7%e7%94%a8-string-%e5%af%b9%e8%b1%a1%e5%a4%84%e7%90%86%e5%ad%97%e7%ac%a6%e4%b8%b2" aria-label="7.用 string 对象处理字符串">7.用 string 对象处理字符串</a><ul>
                        
                <li>
                    <a href="#8%e5%bc%ba%e5%88%b6%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2" aria-label="8.强制类型转换">8.强制类型转换</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b-c%e7%a8%8b%e5%ba%8f%e7%bb%93%e6%9e%84" aria-label="四、 C&#43;&#43;程序结构">四、 C++程序结构</a></li>
                <li>
                    <a href="#%e4%ba%94%e5%bc%ba%e5%88%b6%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="五、强制类型转换运算符">五、强制类型转换运算符</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e7%ab%a0-%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e7%9a%84%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" aria-label="第二章 面向对象的基本概念">第二章 面向对象的基本概念</a><ul>
                        
                <li>
                    <a href="#21-%e7%bb%93%e6%9e%84%e5%8c%96%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1" aria-label="2.1 结构化程序设计">2.1 结构化程序设计</a></li>
                <li>
                    <a href="#22-%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e6%80%9d%e6%83%b3" aria-label="2.2 面向对象思想">2.2 面向对象思想</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#1%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86" aria-label="1.面向对象基础知识">1.面向对象基础知识</a></li>
                <li>
                    <a href="#2%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1%e7%9a%84%e7%89%b9%e7%82%b9" aria-label="2.面向对象程序设计的特点">2.面向对象程序设计的特点</a></li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#23-%e7%b1%bb%e7%9a%84%e5%88%9d%e6%ad%a5%e7%9f%a5%e8%af%86" aria-label="2.3 类的初步知识">2.3 类的初步知识</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#1%e7%b1%bb%e7%9a%84%e5%ae%9a%e4%b9%89" aria-label="1.类的定义">1.类的定义</a></li>
                <li>
                    <a href="#2%e7%b1%bb%e7%9a%84%e5%ae%9a%e4%b9%89%e7%a4%ba%e4%be%8b" aria-label="2.类的定义示例">2.类的定义示例</a></li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#24-%e7%b1%bb%e6%88%90%e5%91%98%e7%9a%84%e8%ae%bf%e9%97%ae" aria-label="2.4 类成员的访问">2.4 类成员的访问</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#1%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f%e5%92%8c%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0%e7%9a%84%e5%ae%9a%e4%b9%89" aria-label="1.成员变量和成员函数的定义">1.成员变量和成员函数的定义</a></li>
                <li>
                    <a href="#2%e5%ae%9a%e4%b9%89%e5%af%b9%e8%b1%a1%e7%9a%84%e4%b8%a4%e7%a7%8d%e6%96%b9%e6%b3%95" aria-label="2.定义对象的两种方法">2.定义对象的两种方法</a></li>
                <li>
                    <a href="#3%e4%bd%bf%e7%94%a8%e5%af%b9%e8%b1%a1%e8%ae%bf%e9%97%ae%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f%e4%b8%8e%e8%b0%83%e7%94%a8%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0" aria-label="3.使用对象访问成员变量与调用成员函数">3.使用对象访问成员变量与调用成员函数</a></li>
                <li>
                    <a href="#4%e7%b1%bb%e6%88%90%e5%91%98%e7%9a%84%e5%8f%af%e8%ae%bf%e9%97%ae%e8%8c%83%e5%9b%b4" aria-label="4.类成员的可访问范围">4.类成员的可访问范围</a></li></ul>
                    </ul>
                    </ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%89%e7%ab%a0-%e7%b1%bb%e5%92%8c%e5%af%b9%e8%b1%a1%e8%bf%9b%e9%98%b6" aria-label="第三章 类和对象进阶">第三章 类和对象进阶</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#31-%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="3.1 构造函数">3.1 构造函数</a><ul>
                        
                <li>
                    <a href="#%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e7%9a%84%e5%ae%9a%e4%b9%89" aria-label="构造函数的定义">构造函数的定义</a></li>
                <li>
                    <a href="#%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="构造函数的使用">构造函数的使用</a></li>
                <li>
                    <a href="#%e5%a4%8d%e5%88%b6%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e4%b8%8e%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="复制构造函数与类型转换构造函数"><strong>复制构造函数与类型转换构造函数</strong></a><ul>
                        
                <li>
                    <a href="#%e8%b0%83%e7%94%a8%e5%a4%8d%e5%88%b6%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="调用复制构造函数">调用复制构造函数</a></li>
                <li>
                    <a href="#%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="类型转换构造函数"><strong>类型转换构造函数</strong></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#32-%e6%9e%90%e6%9e%84%e5%87%bd%e6%95%b0" aria-label="3.2 析构函数">3.2 析构函数</a></li>
                <li>
                    <a href="#33-%e7%b1%bb%e7%9a%84%e9%9d%99%e6%80%81%e6%88%90%e5%91%98%e5%b8%b8%e8%80%83" aria-label="3.3 类的静态成员（常考）">3.3 类的静态成员（常考）</a><ul>
                        
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%8f%98%e9%87%8f" aria-label="静态变量">静态变量</a></li>
                <li>
                    <a href="#%e7%b1%bb%e7%9a%84%e9%9d%99%e6%80%81%e6%88%90%e5%91%98" aria-label="类的静态成员">类的静态成员</a><ul>
                        
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f" aria-label="静态成员变量">静态成员变量</a></li>
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0" aria-label="静态成员函数">静态成员函数</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#34-%e5%8f%98%e9%87%8f%e5%8f%8a%e5%af%b9%e8%b1%a1%e7%9a%84%e7%94%9f%e5%ad%98%e6%9c%9f%e5%92%8c%e4%bd%9c%e7%94%a8%e5%9f%9f" aria-label="3.4 变量及对象的生存期和作用域">3.4 变量及对象的生存期和作用域</a></li>
                <li>
                    <a href="#35-%e5%b8%b8%e9%87%8f%e6%88%90%e5%91%98%e5%92%8c%e5%b8%b8%e5%bc%95%e7%94%a8%e6%88%90%e5%91%98" aria-label="3.5 常量成员和常引用成员">3.5 常量成员和常引用成员</a><ul>
                        
                <li>
                    <a href="#%e7%b1%bb%e5%b8%b8%e9%87%8f%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f" aria-label="类常量成员变量">类常量成员变量</a></li>
                <li>
                    <a href="#%e5%b8%b8%e9%87%8f%e5%af%b9%e8%b1%a1" aria-label="常量对象">常量对象</a></li>
                <li>
                    <a href="#%e5%b8%b8%e9%87%8f%e5%87%bd%e6%95%b0" aria-label="常量函数">常量函数</a></li>
                <li>
                    <a href="#%e5%b8%b8%e5%bc%95%e7%94%a8%e4%bd%9c%e4%b8%ba%e5%87%bd%e6%95%b0%e7%9a%84%e5%8f%82%e6%95%b0" aria-label="常引用作为函数的参数">常引用作为函数的参数</a></li>
                <li>
                    <a href="#352-const%e4%bf%ae%e9%a5%b0%e6%8c%87%e9%92%88%e5%8f%98%e9%87%8f" aria-label="3.5.2 const修饰指针变量">3.5.2 const修饰指针变量</a></li></ul>
                </li>
                <li>
                    <a href="#36-%e6%88%90%e5%91%98%e5%af%b9%e8%b1%a1%e5%92%8c%e5%b0%81%e9%97%ad%e7%b1%bb" aria-label="3.6 成员对象和封闭类">3.6 成员对象和封闭类</a><ul>
                        
                <li>
                    <a href="#%e5%b0%81%e9%97%ad%e7%b1%bb%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e5%92%8c%e5%88%9d%e5%a7%8b%e5%8c%96%e5%88%97%e8%a1%a8" aria-label="封闭类构造函数和初始化列表">封闭类构造函数和初始化列表</a></li>
                <li>
                    <a href="#%e5%b0%81%e9%97%ad%e7%b1%bb%e7%9a%84%e5%a4%8d%e5%88%b6%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="封闭类的复制构造函数"><strong>封闭类的复制构造函数</strong></a></li>
                <li>
                    <a href="#%e5%8f%8b%e5%85%83%e7%b1%bb" aria-label="友元类">友元类</a></li></ul>
                </li>
                <li>
                    <a href="#38-this-%e6%8c%87%e9%92%88" aria-label="3.8 this 指针">3.8 this 指针</a></li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e5%9b%9b%e7%ab%a0-%e8%bf%90%e7%ae%97%e7%ac%a6%e9%87%8d%e8%bd%bd" aria-label="第四章 运算符重载">第四章 运算符重载</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#41-%e8%bf%90%e7%ae%97%e7%ac%a6%e9%87%8d%e8%bd%bd%e7%9a%84%e6%a6%82%e5%bf%b5" aria-label="4.1 运算符重载的概念">4.1 运算符重载的概念</a><ul>
                        
                <li>
                    <a href="#%e8%bf%90%e7%ae%97%e7%ac%a6%e9%87%8d%e8%bd%bd%e5%87%bd%e6%95%b0%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0" aria-label="运算符重载函数：成员函数"><strong>运算符重载函数：成员函数</strong></a></li>
                <li>
                    <a href="#%e8%bf%90%e7%ae%97%e7%ac%a6%e9%87%8d%e8%bd%bd%e5%87%bd%e6%95%b0%e5%8f%8b%e5%85%83%e5%87%bd%e6%95%b0" aria-label="运算符重载函数：友元函数"><strong>运算符重载函数：友元函数</strong></a></li>
                <li>
                    <a href="#%e9%87%8d%e8%bd%bd%e8%bf%90%e7%ae%97%e7%ac%a6%e7%9a%84%e8%a7%84%e5%88%99" aria-label="重载运算符的规则">重载运算符的规则</a></li></ul>
                </li>
                <li>
                    <a href="#42-%e9%87%8d%e8%bd%bd%e8%b5%8b%e5%80%bc%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="4.2 重载赋值运算符">4.2 重载赋值运算符</a><ul>
                        
                <li>
                    <a href="#%e9%87%8d%e8%bd%bd%e8%b5%8b%e5%80%bc%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="重载赋值运算符">重载赋值运算符</a></li>
                <li>
                    <a href="#%e6%b5%85%e6%8b%b7%e8%b4%9d%e5%92%8c%e6%b7%b1%e6%8b%b7%e8%b4%9d" aria-label="浅拷贝和深拷贝"><strong>浅拷贝和深拷贝</strong></a><ul>
                        
                <li>
                    <a href="#%e6%b5%85%e6%8b%b7%e8%b4%9d" aria-label="浅拷贝">浅拷贝</a></li>
                <li>
                    <a href="#%e6%b7%b1%e6%8b%b7%e8%b4%9d" aria-label="深拷贝">深拷贝</a></li></ul>
                </li></ul>
                </li></ul>
                    </ul>
                    
                <li>
                    <a href="#%e9%87%8d%e8%bd%bd%e8%b5%8b%e5%80%bc%e8%bf%90%e7%ae%97%e7%ac%a6-1" aria-label="重载赋值运算符">重载赋值运算符</a><ul>
                        <ul>
                        
                <li>
                    <a href="#43-%e9%87%8d%e8%bd%bd%e6%b5%81%e6%8f%92%e5%85%a5%e8%bf%90%e7%ae%97%e7%ac%a6%e5%92%8c%e6%b5%81%e6%8f%90%e5%8f%96%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="4.3 重载流插入运算符和流提取运算符">4.3 重载流插入运算符和流提取运算符</a><ul>
                        <ul>
                        
                <li>
                    <a href="#%e9%87%8d%e8%bd%bd%e6%b5%81%e6%8f%92%e5%85%a5%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="重载流插入运算符">重载流插入运算符</a></li>
                <li>
                    <a href="#%e9%87%8d%e8%bd%bd%e6%b5%81%e6%8f%90%e5%8f%96%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="重载流提取运算符">重载流提取运算符</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#44-%e9%87%8d%e8%bd%bd%e5%bc%ba%e5%88%b6%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2%e8%bf%90%e7%ae%97%e7%ac%a6-%e9%87%8d%e8%a6%81" aria-label="4.4 重载强制类型转换运算符 (重要)">4.4 重载强制类型转换运算符 (重要)</a></li>
                <li>
                    <a href="#45-%e9%87%8d%e8%bd%bd%e8%87%aa%e5%a2%9e%e8%87%aa%e5%87%8f%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="4.5 重载自增、自减运算符">4.5 重载自增、自减运算符</a></li></ul>
                    </ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%94%e7%ab%a0-%e7%b1%bb%e7%9a%84%e7%bb%a7%e6%89%bf%e4%b8%8e%e6%b4%be%e7%94%9f" aria-label="第五章 类的继承与派生">第五章 类的继承与派生</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#51-%e7%b1%bb%e7%9a%84%e7%bb%a7%e6%89%bf%e4%b8%8e%e7%b1%bb%e7%9a%84%e6%b4%be%e7%94%9f" aria-label="5.1 类的继承与类的派生">5.1 类的继承与类的派生</a><ul>
                        
                <li>
                    <a href="#%e7%bb%a7%e6%89%bf%e7%9a%84%e6%a6%82%e5%bf%b5" aria-label="继承的概念">继承的概念</a></li>
                <li>
                    <a href="#%e6%b4%be%e7%94%9f%e7%b1%bb%e7%9a%84%e5%ae%9a%e4%b9%89%e4%b8%8e%e5%a4%a7%e5%b0%8f" aria-label="派生类的定义与大小">派生类的定义与大小</a><ul>
                        
                <li>
                    <a href="#%e6%a0%bc%e5%bc%8f" aria-label="格式">格式</a></li>
                <li>
                    <a href="#%e6%b4%be%e7%94%9f%e7%b1%bb%e7%9a%84%e5%a4%a7%e5%b0%8f" aria-label="派生类的大小">派生类的大小</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bb%a7%e6%89%bf%e5%85%b3%e7%b3%bb%e7%9a%84%e7%89%b9%e6%ae%8a%e6%80%a7" aria-label="继承关系的特殊性">继承关系的特殊性</a></li>
                <li>
                    <a href="#%e6%9c%89%e7%bb%a7%e6%89%bf%e5%85%b3%e7%b3%bb%e7%9a%84%e7%b1%bb%e4%b9%8b%e9%97%b4%e7%9a%84%e8%ae%bf%e9%97%ae" aria-label="有继承关系的类之间的访问">有继承关系的类之间的访问</a></li>
                <li>
                    <a href="#protected-%e8%ae%bf%e9%97%ae%e8%8c%83%e5%9b%b4%e8%af%b4%e6%98%8e%e7%ac%a6" aria-label="protected 访问范围说明符"><code>protected</code> 访问范围说明符</a></li>
                <li>
                    <a href="#%e5%a4%9a%e9%87%8d%e7%bb%a7%e6%89%bf" aria-label="多重继承">多重继承</a></li></ul>
                </li>
                <li>
                    <a href="#52-%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6" aria-label="5.2 访问控制">5.2 访问控制</a><ul>
                        
                <li>
                    <a href="#522-%e7%b1%bb%e5%9e%8b%e5%85%bc%e5%ae%b9%e8%a7%84%e5%88%99" aria-label="5.2.2 类型兼容规则">5.2.2 类型兼容规则</a></li>
                <li>
                    <a href="#523-%e7%a7%81%e6%9c%89%e7%bb%a7%e6%89%bf" aria-label="5.2.3 私有继承">5.2.3 私有继承</a></li>
                <li>
                    <a href="#524%e4%bf%9d%e6%8a%a4%e7%bb%a7%e6%89%bf" aria-label="5.2.4保护继承">5.2.4保护继承</a></li></ul>
                </li>
                <li>
                    <a href="#53-%e6%b4%be%e7%94%9f%e7%b1%bb%e7%9a%84%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e5%92%8c%e6%9e%90%e6%9e%84%e5%87%bd%e6%95%b0" aria-label="5.3 派生类的构造函数和析构函数">5.3 派生类的构造函数和析构函数</a><ul>
                        
                <li>
                    <a href="#531-%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e4%b8%8e%e6%9e%90%e6%9e%84%e5%87%bd%e6%95%b0" aria-label="5.3.1 构造函数与析构函数">5.3.1 构造函数与析构函数</a></li>
                <li>
                    <a href="#532-%e5%a4%8d%e5%88%b6%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="5.3.2 复制构造函数">5.3.2 复制构造函数</a></li>
                <li>
                    <a href="#533-%e5%a4%9a%e9%87%8d%e7%bb%a7%e6%89%bf%e7%9a%84%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e4%b8%8e%e6%9e%90%e6%9e%84%e5%87%bd%e6%95%b0" aria-label="5.3.3 多重继承的构造函数与析构函数">5.3.3 多重继承的构造函数与析构函数</a></li></ul>
                </li>
                <li>
                    <a href="#54--%e7%b1%bb%e4%b9%8b%e9%97%b4%e7%9a%84%e5%85%b3%e7%b3%bb" aria-label="5.4  类之间的关系">5.4  类之间的关系</a><ul>
                        
                <li>
                    <a href="#541-%e7%b1%bb%e4%b8%8e%e7%b1%bb%e4%b9%8b%e9%97%b4%e7%9a%84%e5%85%b3%e7%b3%bb" aria-label="5.4.1 类与类之间的关系">5.4.1 类与类之间的关系</a></li>
                <li>
                    <a href="#542-%e5%b0%81%e9%97%ad%e7%b1%bb%e7%9a%84%e6%b4%be%e7%94%9f" aria-label="5.4.2 封闭类的派生">5.4.2 封闭类的派生</a></li></ul>
                </li>
                <li>
                    <a href="#55--%e5%a4%9a%e5%b1%82%e6%ac%a1%e7%9a%84%e6%b4%be%e7%94%9f" aria-label="5.5  多层次的派生">5.5  多层次的派生</a></li>
                <li>
                    <a href="#56-%e5%9f%ba%e7%b1%bb%e4%b8%8e%e6%b4%be%e7%94%9f%e7%b1%bb%e6%8c%87%e9%92%88%e7%9a%84%e7%9b%b8%e4%ba%92%e8%bd%ac%e6%8d%a2" aria-label="5.6 基类与派生类指针的相互转换">5.6 基类与派生类指针的相互转换</a></li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ad%e7%ab%a0-%e5%a4%9a%e6%80%81%e4%b8%8e%e8%99%9a%e5%87%bd%e6%95%b0" aria-label="第六章 多态与虚函数">第六章 多态与虚函数</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#61-%e5%a4%9a%e6%80%81%e7%9a%84%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" aria-label="6.1 多态的基本概念">6.1 多态的基本概念</a><ul>
                        
                <li>
                    <a href="#611-%e5%a4%9a%e6%80%81" aria-label="6.1.1 多态">6.1.1 多态</a></li>
                <li>
                    <a href="#612-%e8%99%9a%e5%87%bd%e6%95%b0" aria-label="6.1.2 虚函数">6.1.2 虚函数</a></li></ul>
                </li>
                <li>
                    <a href="#62-%e5%a4%9a%e6%80%81%e5%ae%9e%e4%be%8b" aria-label="6.2 多态实例">6.2 多态实例</a></li>
                <li>
                    <a href="#63-%e5%a4%9a%e6%80%81%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="6.3 多态的使用">6.3 多态的使用</a></li>
                <li>
                    <a href="#64-%e8%99%9a%e6%9e%90%e6%9e%84%e5%87%bd%e6%95%b0" aria-label="6.4 虚析构函数">6.4 虚析构函数</a></li>
                <li>
                    <a href="#65-%e7%ba%af%e8%99%9a%e5%87%bd%e6%95%b0%e5%92%8c%e6%8a%bd%e8%b1%a1%e7%b1%bb" aria-label="6.5 纯虚函数和抽象类">6.5 纯虚函数和抽象类</a><ul>
                        
                <li>
                    <a href="#%e7%ba%af%e8%99%9a%e5%87%bd%e6%95%b0" aria-label="纯虚函数">纯虚函数</a></li>
                <li>
                    <a href="#%e6%8a%bd%e8%b1%a1%e7%b1%bb" aria-label="抽象类">抽象类</a></li>
                <li>
                    <a href="#%e8%99%9a%e5%9f%ba%e7%b1%bb" aria-label="虚基类">虚基类</a></li></ul>
                </li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%83%e7%ab%a0-%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba%e6%b5%81" aria-label="第七章 输入/输出流">第七章 输入/输出流</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#71--%e6%b5%81%e7%b1%bb%e7%ae%80%e4%bb%8b" aria-label="7.1  流类简介">7.1  流类简介</a></li>
                <li>
                    <a href="#72-%e6%a0%87%e5%87%86%e6%b5%81%e5%af%b9%e8%b1%a1" aria-label="7.2 标准流对象">7.2 标准流对象</a></li>
                <li>
                    <a href="#73-%e6%8e%a7%e5%88%b6-io-%e6%a0%bc%e5%bc%8f" aria-label="7.3 控制 IO 格式">7.3 控制 IO 格式</a></li>
                <li>
                    <a href="#74-%e8%b0%83%e7%94%a8-cout-%e7%9a%84%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0" aria-label="7.4 调用 cout 的成员函数">7.4 调用 cout 的成员函数</a></li>
                <li>
                    <a href="#75-%e8%b0%83%e7%94%a8-cin-%e7%9a%84%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0" aria-label="7.5 调用 cin 的成员函数">7.5 调用 cin 的成员函数</a></li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ab%e7%ab%a0-%e6%96%87%e4%bb%b6%e6%93%8d%e4%bd%9c" aria-label="第八章 文件操作">第八章 文件操作</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#81-%e6%96%87%e4%bb%b6%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5%e5%92%8c%e6%96%87%e4%bb%b6%e6%b5%81%e7%b1%bb" aria-label="8.1 文件基本概念和文件流类">8.1 文件基本概念和文件流类</a><ul>
                        
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e7%9a%84%e6%a6%82%e5%bf%b5" aria-label="文件的概念">文件的概念</a></li>
                <li>
                    <a href="#c-%e6%96%87%e4%bb%b6%e6%b5%81%e7%b1%bb" aria-label="C&#43;&#43; 文件流类">C++ 文件流类</a></li></ul>
                </li>
                <li>
                    <a href="#82-%e6%89%93%e5%bc%80%e5%92%8c%e5%85%b3%e9%97%ad%e6%96%87%e4%bb%b6" aria-label="8.2 打开和关闭文件">8.2 打开和关闭文件</a><ul>
                        
                <li>
                    <a href="#%e6%89%93%e5%bc%80%e6%96%87%e4%bb%b6" aria-label="打开文件">打开文件</a></li>
                <li>
                    <a href="#%e5%85%b3%e9%97%ad%e6%96%87%e4%bb%b6" aria-label="关闭文件">关闭文件</a></li></ul>
                </li>
                <li>
                    <a href="#83-%e6%96%87%e4%bb%b6%e8%af%bb%e5%86%99%e6%93%8d%e4%bd%9c%e9%87%8d%e8%a6%81" aria-label="8.3 文件读写操作（重要）">8.3 文件读写操作（重要）</a><ul>
                        
                <li>
                    <a href="#831-%e8%af%bb%e5%86%99%e6%96%87%e6%9c%ac%e6%96%87%e4%bb%b6" aria-label="8.3.1 读写文本文件">8.3.1 读写文本文件</a></li>
                <li>
                    <a href="#832-%e8%af%bb%e5%86%99%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6" aria-label="8.3.2 读写二进制文件">8.3.2 读写二进制文件</a><ul>
                        
                <li>
                    <a href="#%e8%af%bb%e5%86%99%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e7%9a%84%e4%b8%93%e7%94%a8%e5%87%bd%e6%95%b0" aria-label="读写二进制文件的专用函数">读写二进制文件的专用函数</a></li></ul>
                </li>
                <li>
                    <a href="#833-%e7%94%a8%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0-put-%e5%92%8c-get-%e8%af%bb%e5%86%99%e6%96%87%e4%bb%b6" aria-label="8.3.3 用成员函数 put() 和 get() 读写文件">8.3.3 用成员函数 <code>put()</code> 和 <code>get()</code> 读写文件</a><ul>
                        
                <li>
                    <a href="#get-%e7%9a%84%e4%b8%89%e7%a7%8d%e4%b8%bb%e8%a6%81%e5%bd%a2%e5%bc%8f" aria-label="get() 的三种主要形式"><code>get()</code> 的三种主要形式</a></li>
                <li>
                    <a href="#put-%e5%87%bd%e6%95%b0" aria-label="put() 函数"><code>put()</code> 函数</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e6%96%87%e4%bb%b6%e4%b8%8e%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e7%9a%84%e5%bc%82%e5%90%8c" aria-label="文本文件与二进制文件的异同">文本文件与二进制文件的异同</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#84-%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e6%96%87%e4%bb%b6" aria-label="8.4 随机访问文件">8.4 随机访问文件</a><ul>
                        
                <li>
                    <a href="#istream-%e4%b8%ad%e4%b8%8e%e4%bd%8d%e7%bd%ae%e6%8c%87%e9%92%88%e7%9b%b8%e5%85%b3%e7%9a%84%e5%87%bd%e6%95%b0" aria-label="istream 中与位置指针相关的函数"><code>istream</code> 中与位置指针相关的函数</a><ul>
                        
                <li>
                    <a href="#%e7%a7%bb%e5%8a%a8%e8%af%bb%e6%8c%87%e9%92%88%e5%87%bd%e6%95%b0" aria-label="移动读指针函数">移动读指针函数</a></li>
                <li>
                    <a href="#%e8%bf%94%e5%9b%9e%e8%af%bb%e6%8c%87%e9%92%88%e5%bd%93%e5%89%8d%e4%bd%8d%e7%bd%ae%e5%80%bc%e7%9a%84%e5%87%bd%e6%95%b0" aria-label="返回读指针当前位置值的函数">返回读指针当前位置值的函数</a></li></ul>
                </li>
                <li>
                    <a href="#ostream-%e4%b8%ad%e4%b8%8e%e4%bd%8d%e7%bd%ae%e6%8c%87%e9%92%88%e7%9b%b8%e5%85%b3%e7%9a%84%e5%87%bd%e6%95%b0" aria-label="ostream 中与位置指针相关的函数"><code>ostream</code> 中与位置指针相关的函数</a><ul>
                        
                <li>
                    <a href="#%e7%a7%bb%e5%8a%a8%e6%8c%87%e9%92%88%e5%87%bd%e6%95%b0" aria-label="移动指针函数">移动指针函数</a></li>
                <li>
                    <a href="#%e8%bf%94%e5%9b%9e%e5%86%99%e6%8c%87%e9%92%88%e5%bd%93%e5%89%8d%e4%bd%8d%e7%bd%ae%e5%80%bc%e7%9a%84%e5%87%bd%e6%95%b0" aria-label="返回写指针当前位置值的函数">返回写指针当前位置值的函数</a></li></ul>
                </li></ul>
                </li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e4%b9%9d%e7%ab%a0-%e5%87%bd%e6%95%b0%e6%a8%a1%e6%9d%bf%e4%b8%8e%e7%b1%bb%e6%a8%a1%e6%9d%bf" aria-label="第九章 函数模板与类模板">第九章 函数模板与类模板</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#91-%e5%87%bd%e6%95%b0%e6%a8%a1%e6%9d%bf" aria-label="9.1 函数模板">9.1 函数模板</a><ul>
                        
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%a8%a1%e6%9d%bf%e6%a6%82%e5%bf%b5" aria-label="函数模板概念">函数模板概念</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%a8%a1%e6%9d%bf%e7%a4%ba%e4%be%8b" aria-label="函数模板示例">函数模板示例</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%88%96%e5%87%bd%e6%95%b0%e6%a8%a1%e6%9d%bf%e8%b0%83%e7%94%a8%e8%af%ad%e5%8f%a5%e7%9a%84%e5%8c%b9%e9%85%8d%e9%a1%ba%e5%ba%8f" aria-label="函数或函数模板调用语句的匹配顺序">函数或函数模板调用语句的匹配顺序</a></li></ul>
                </li>
                <li>
                    <a href="#92-%e7%b1%bb%e6%a8%a1%e6%9d%bf" aria-label="9.2 类模板">9.2 类模板</a><ul>
                        
                <li>
                    <a href="#%e7%b1%bb%e6%a8%a1%e6%9d%bf%e6%a6%82%e5%bf%b5" aria-label="类模板概念">类模板概念</a></li>
                <li>
                    <a href="#%e7%b1%bb%e6%a8%a1%e6%9d%bf%e7%a4%ba%e4%be%8b" aria-label="类模板示例">类模板示例</a></li></ul>
                </li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e9%99%84%e5%bd%95-vscode-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="附录 VScode 配置文件">附录 VScode 配置文件</a><ul>
                        
                <li>
                    <a href="#%e7%bc%96%e8%af%91%e7%8e%af%e5%a2%83-tdm-gcc" aria-label="编译环境 TDM-GCC">编译环境 TDM-GCC</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%99%84%e5%bd%95-%e5%9f%ba%e6%9c%ac%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b" aria-label="附录 基本数据类型">附录 基本数据类型</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e7%9a%84%e5%86%85%e7%bd%ae%e7%b1%bb%e5%9e%8b" aria-label="基本的内置类型">基本的内置类型</a></li>
                <li>
                    <a href="#typedef-%e5%a3%b0%e6%98%8e" aria-label="typedef 声明">typedef 声明</a></li>
                <li>
                    <a href="#%e6%9e%9a%e4%b8%be%e7%b1%bb%e5%9e%8b" aria-label="枚举类型">枚举类型</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%99%84%e5%bd%95-cmath-%e5%b8%b8%e7%94%a8%e5%87%bd%e6%95%b0" aria-label="附录 cmath 常用函数：">附录 cmath 常用函数：</a><ul>
                        
                <li>
                    <a href="#%e5%8f%96%e7%bb%9d%e5%af%b9%e5%80%bc" aria-label="取绝对值">取绝对值</a></li>
                <li>
                    <a href="#%e5%90%91%e4%b8%8a%e5%8f%96%e6%95%b4%e5%92%8c%e5%90%91%e4%b8%8b%e5%8f%96%e6%95%b4" aria-label="向上取整和向下取整">向上取整和向下取整</a></li>
                <li>
                    <a href="#%e6%ac%a1%e6%96%b9%e5%87%bd%e6%95%b0" aria-label="次方函数">次方函数</a></li>
                <li>
                    <a href="#%e5%bc%80%e5%b9%b3%e6%96%b9%e6%a0%b9%e5%87%bd%e6%95%b0" aria-label="开平方根函数">开平方根函数</a></li>
                <li>
                    <a href="#log%e5%87%bd%e6%95%b0" aria-label="log函数">log函数</a></li>
                <li>
                    <a href="#%e4%b8%89%e8%a7%92%e5%87%bd%e6%95%b0" aria-label="三角函数">三角函数</a></li>
                <li>
                    <a href="#%e5%9b%9b%e8%88%8d%e4%ba%94%e5%85%a5%e5%87%bd%e6%95%b0" aria-label="四舍五入函数">四舍五入函数</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%99%84%e5%bd%95-%e8%bd%ac%e4%b9%89%e5%ad%97%e7%ac%a6" aria-label="附录 转义字符">附录 转义字符</a></li>
                <li>
                    <a href="#%e9%99%84%e5%bd%95-%e8%bf%90%e7%ae%97%e7%ac%a6%e7%bb%93%e5%90%88%e6%80%a7" aria-label="附录 运算符结合性">附录 运算符结合性</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e4%ba%9b%e5%ae%b9%e6%98%93%e5%87%ba%e9%94%99%e7%9a%84%e4%bc%98%e5%85%88%e7%ba%a7%e9%97%ae%e9%a2%98" aria-label="一些容易出错的优先级问题">一些容易出错的优先级问题</a><ul>
                        <ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="构造函数">构造函数</a></li>
                <li>
                    <a href="#%e6%9e%90%e6%9e%84%e5%87%bd%e6%95%b0" aria-label="析构函数">析构函数</a>
                </li>
            </ul>
            </li>
            </ul>
            </ul>
            </ul>
            </ul>
            </li>
            </ul>
        </div>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><blockquote>
<p><strong>计算机信息管理专业课程</strong></p>
<p>自考笔记在线更新地址 : <a href="https://github.com/Eished/self-study-exam_notes">https://github.com/Eished/self-study-exam_notes</a></p>
<p><strong>配套代码</strong>：<a href="https://github.com/Eished/C-CPP">https://github.com/Eished/C-CPP</a></p>
</blockquote>
<h1 id="2019版">2019版<a hidden class="anchor" aria-hidden="true" href="#2019版">#</a></h1>
<ul>
<li>单选题
<ul>
<li>1分x20题 = 20分</li>
</ul>
</li>
<li>填空题
<ul>
<li>1分x15题 = 15分</li>
</ul>
</li>
<li>程序填空题
<ul>
<li>4分x5题 = 20分</li>
</ul>
</li>
<li>程序分析题
<ul>
<li>5分x6题 = 30分</li>
</ul>
</li>
<li>程序设计题
<ul>
<li>5分x1题 = 5分</li>
<li>10分x1题 = 10分</li>
</ul>
</li>
</ul>
<h2 id="ide">IDE<a hidden class="anchor" aria-hidden="true" href="#ide">#</a></h2>
<ul>
<li>
<p>书本推荐：Dev C++ 5.11</p>
</li>
<li>
<p>本人使用：VScode</p>
<ul>
<li>
<p>配置文件在附录</p>
</li>
<li>
<p>VScode 执行完会自动关闭终端, return 前设置断点</p>
<ul>
<li>或者修改 <code>launch.json</code> 文件为  <code>&quot;externalConsole&quot;: false,</code></li>
<li>内置终端支持 utf-8</li>
</ul>
</li>
<li>
<p>使用外置终端，utf-8 中文乱码问题, 在 vs code 修改代码的打开和保存方式</p>
<p>直接就将代码保存为 gb2312。在 vs code 右下角可以看到当前文件编码方式，点击utf-8 修改打开和保存方式为 gb2312。</p>
</li>
</ul>
</li>
</ul>
<h2 id="学习建议">学习建议<a hidden class="anchor" aria-hidden="true" href="#学习建议">#</a></h2>
<ul>
<li>先大概看一遍全书，有整体概念，<strong>做习题时再去细看不懂的地方</strong>，重点都在内容小结部分。</li>
<li><strong>习题代码写一遍，遇到不懂的再翻书或去网上查</strong>，例题代码一般不用写看懂就行。</li>
<li>学习本课程之前需具备较好的C语言基础（如基本的语法知识和三大程序结构等）</li>
</ul>
<h1 id="c语言基础">C语言基础<a hidden class="anchor" aria-hidden="true" href="#c语言基础">#</a></h1>
<p>标识符可以由3种字符组成：字母、下划线、数字，并且不能以数字开头，不能是C++的关键字。</p>
<p>语句以分号<code>;</code>结束</p>
<h1 id="第一章-c-语言简介">第一章 C++ 语言简介<a hidden class="anchor" aria-hidden="true" href="#第一章-c-语言简介">#</a></h1>
<ul>
<li>C++发展历史，与C语言的异同
C++是C的一个超集，进一步扩充和完善了C，C++比C更安全。
C++是一种编译式、通用式、大小写敏感的编程语言，完全支持面向对象程序设计。</li>
<li>掌握C++ 程序结构，正确使用头文件及命名空间</li>
<li>基本输入/输出</li>
<li>函数声明和传参</li>
<li>函数重载概念</li>
<li>理解 const ，指针，引用，动态内存分配和释放</li>
<li>string 类基本功能</li>
</ul>
<h2 id="第一节-c发展简史">第一节 C++发展简史<a hidden class="anchor" aria-hidden="true" href="#第一节-c发展简史">#</a></h2>
<ul>
<li>低级语言：机器语言，汇编语言</li>
<li>中级语言：C语言</li>
<li>高级语言：面向用户，易懂、通用。</li>
</ul>
<h2 id="第二节-c特点">第二节 C++特点<a hidden class="anchor" aria-hidden="true" href="#第二节-c特点">#</a></h2>
<ul>
<li>编译式、通用、大小写敏感，支持面向对象</li>
<li>特点
<ul>
<li>继承和兼容C 语言，简洁高效</li>
<li>面向对象</li>
</ul>
</li>
<li></li>
</ul>
<h3 id="一头文件和命名空间">一、头文件和命名空间<a hidden class="anchor" aria-hidden="true" href="#一头文件和命名空间">#</a></h3>
<h5 id="1头文件">1.头文件<a hidden class="anchor" aria-hidden="true" href="#1头文件">#</a></h5>
<p>是用户应用程序和函数库之间的桥梁和纽带。作为一种包含功能函数、数据接口声明的载体文件，主要用于保存程序的声明，而定义文件用于保存程序的实现。</p>
<ol>
<li>头文件保存程序中用到的声明，如函数声明、常量定义等，需要使用<strong>预处理命名包含头文件<code>#include</code></strong></li>
<li>常用的头文件</li>
</ol>
<ul>
<li>标准输入输出流: <code>&lt;iostream&gt;</code></li>
<li>标准文件流: <code>&lt;fstream&gt;</code></li>
<li>标准字符串处理函数: <code>&lt;string&gt;</code></li>
<li>标准数学函数: <code>&lt;cmath&gt;</code></li>
</ul>
<ol start="3">
<li>自定义头文件</li>
</ol>
<ul>
<li><code>&lt;&gt;</code>: 系统设定目录寻找, 未找到再去指定目录找</li>
<li><code>“”</code>: 用户当前目录或指定目录找
<ul>
<li><code>#include &quot;e:\myprog\ex1.h&quot;</code></li>
</ul>
</li>
</ul>
<h5 id="2命名空间-namespace">2.命名空间 namespace<a hidden class="anchor" aria-hidden="true" href="#2命名空间-namespace">#</a></h5>
<ol>
<li>命名空间是一种将程序库名称封装起来的方法，提高了程序的性能和可靠性，<strong>可消除同名引起的冲突</strong>。</li>
</ol>
<p>标准程序库的命名空间 <code>using namespace std;</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">namespace</span> 命名空间名
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>命名空间内各种声明(函数声明\类声明)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="2">
<li>
<p>引用命名空间标识符</p>
<ul>
<li>不引用命名空间, 则使用全称: <code>命名空间名::标识符名</code></li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">using</span> 命名空间名<span style="color:#af3a03">::</span>标识符; <span style="color:#928374;font-style:italic">// 单独引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> 命名空间名; <span style="color:#928374;font-style:italic">// 引用整个命名空间
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">namespace</span> S { 
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> x; 
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">void</span> <span style="color:#b57614">FunA</span>() { 
</span></span><span style="display:flex;"><span>		... 
</span></span><span style="display:flex;"><span>	} 
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 若访问 x，可写成 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>S<span style="color:#af3a03">::</span>x；
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 访问 FunA() 则为 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>S<span style="color:#af3a03">::</span>FunA()；
</span></span></code></pre></div><h3 id="二基本输入输出">二、基本输入/输出<a hidden class="anchor" aria-hidden="true" href="#二基本输入输出">#</a></h3>
<ol>
<li>标准输入</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  cin <span style="color:#af3a03">&gt;&gt;</span> 变量<span style="color:#8f3f71">1</span> <span style="color:#af3a03">&gt;&gt;</span> 变量<span style="color:#8f3f71">2</span> <span style="color:#af3a03">&gt;&gt;</span>... <span style="color:#af3a03">&gt;&gt;</span> 变量n;
</span></span></code></pre></div><ol start="2">
<li>标准输出</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> 表达式<span style="color:#8f3f71">1</span> <span style="color:#af3a03">&lt;&lt;</span> 表达式<span style="color:#8f3f71">2</span> <span style="color:#af3a03">&lt;&lt;</span> ...<span style="color:#af3a03">&lt;&lt;</span> 表达式n; 
</span></span></code></pre></div><ol start="3">
<li>头文件</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;   // 头文件：输入输出流</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;  <span style="color:#928374;font-style:italic">// 使用命名空间
</span></span></span></code></pre></div><ol start="4">
<li>换行操作</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>用语句 cout <span style="color:#af3a03">&lt;&lt;</span> endl; 或  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>;
</span></span></code></pre></div><ol start="5">
<li>运算符重载后才可以使用</li>
</ol>
<ul>
<li>
<p>输入：空格、TAB、ENTER 作为分隔符</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>, b <span style="color:#af3a03">=</span> <span style="color:#8f3f71">2</span>;
</span></span><span style="display:flex;"><span>  cin <span style="color:#af3a03">&gt;&gt;</span> a <span style="color:#af3a03">&gt;&gt;</span> b;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Hello Vscode</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">*</span> b
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>输入/输出示例</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> oneInt1, oneInt2;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">char</span> strArray[<span style="color:#8f3f71">20</span>];
</span></span><span style="display:flex;"><span>  string str;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">double</span> oneDouble;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">char</span> oneChar <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;a&#39;</span>;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;输入两个整型值，一个字符，一个字符串，一个浮点值,&#34;</span>;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;以空格、tab、enter 键分割&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cin <span style="color:#af3a03">&gt;&gt;</span> oneInt1 <span style="color:#af3a03">&gt;&gt;</span> oneInt2 <span style="color:#af3a03">&gt;&gt;</span> oneChar <span style="color:#af3a03">&gt;&gt;</span> strArray <span style="color:#af3a03">&gt;&gt;</span> oneDouble;
</span></span><span style="display:flex;"><span>  str <span style="color:#af3a03">=</span> strArray;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;输入的数据是:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;     <span style="color:#928374;font-style:italic">//endl 是换行
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;字符串:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> str <span style="color:#af3a03">&lt;&lt;</span> endl <span style="color:#928374;font-style:italic">//\t是制表符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;两个整型值:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> oneInt1 <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;和</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> oneInt2 <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;字符:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> oneChar <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span> <span style="color:#928374;font-style:italic">//&#34;\n&#34;是换行符,与endl相同
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;浮点值:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> oneDouble <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p><code>cin</code> <strong>实现键盘输入</strong>，输入字符类型时根据变量类型自动提取相应长度字节, 数值类型数据需要分隔</p>
</li>
<li>
<p><code>getchar()</code>: 获取 space\tab\enter 等特殊字符</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;1234\  //&#34;</span>\<span style="color:#79740e">&#34; 用于连接换行的内容</span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f3f71">566785</span><span style="color:#79740e">&#34;&lt;&lt;endl;</span>
</span></span></code></pre></div><ul>
<li><code>cout</code> 自动识别输出类型</li>
</ul>
<p>指针运算法* ，为取元素的内容</p>
<h3 id="三函数的应用">三、函数的应用<a hidden class="anchor" aria-hidden="true" href="#三函数的应用">#</a></h3>
<h5 id="1函数参数的默认值">1.函数参数的默认值<a hidden class="anchor" aria-hidden="true" href="#1函数参数的默认值">#</a></h5>
<ol>
<li>默认参数就是不要求设定参数，未设置参数时有赋默认值。</li>
<li>默认参数是在函数原型中说明的，<strong>默认参数可以多于1个，但必须放在参数序列的末尾</strong>。</li>
</ol>
<ul>
<li>
<p>声明函数时为形参指定默认值</p>
<ul>
<li>默认值可以写在函数声明或函数定义的地方, 但不能都写</li>
<li><code>void</code> 声明无返回值</li>
<li>默认值不能是局部变量，调用函数可以用局部变量</li>
</ul>
</li>
<li>
<p><strong>默认值的形参必须从右至左提供, 有形参的必须在最后</strong></p>
<ul>
<li>调用时实参为从左至右连续排列，不给则后面取默认值</li>
</ul>
</li>
<li>
<p><strong>函数原型中, 可省略形参名字, 只给出类型和默认值</strong></p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#b57614">void</span> defaultvalue1(<span style="color:#b57614">int</span> <span style="color:#af3a03">=</span> <span style="color:#8f3f71">2</span>,<span style="color:#b57614">double</span> <span style="color:#af3a03">=</span> <span style="color:#8f3f71">3.0</span> )
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> defaultvalue1(<span style="color:#b57614">int</span> a,<span style="color:#b57614">double</span> b <span style="color:#af3a03">=</span> <span style="color:#8f3f71">3.0</span>)
</span></span></code></pre></div><h5 id="2引用和函数参数的传递">2.引用和函数参数的传递<a hidden class="anchor" aria-hidden="true" href="#2引用和函数参数的传递">#</a></h5>
<h6 id="21-引用">2.1 引用<a hidden class="anchor" aria-hidden="true" href="#21-引用">#</a></h6>
<p>引用相当于给变量取了一个别名，对应同一个内存地址。</p>
<p>引用的定义格式：<code>类型名 &amp;引用名 = 同类型的某变量名</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#b57614">int</span> oneInt <span style="color:#af3a03">=</span> <span style="color:#8f3f71">9</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>aname <span style="color:#af3a03">=</span> oneInt; <span style="color:#928374;font-style:italic">//声明引用, aname 是引用名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">// aname 就是x的一个引用，可以有多个引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  ```
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">-</span> 引用的规则
</span></span><span style="display:flex;"><span><span style="color:#af3a03">-</span> <span style="color:#af3a03">**</span>对象在被引用前必须先初始化<span style="color:#af3a03">**</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">-</span> 声明中符号“<span style="color:#af3a03">&amp;</span>”的位置无关紧要
</span></span><span style="display:flex;"><span>```c<span style="color:#af3a03">++</span>
</span></span><span style="display:flex;"><span>以下情况等效
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span><span style="color:#af3a03">&amp;</span> a <span style="color:#af3a03">=</span> x; 
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span> a <span style="color:#af3a03">=</span> x;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>a <span style="color:#af3a03">=</span> x; 
</span></span></code></pre></div><ul>
<li><strong>只能引用已经初始化的变量</strong></li>
<li>不能用常量初始化引用</li>
<li><strong>不能声明引用的引用</strong></li>
<li>不能用表达式初始化引用, 除非表达式返回值是引用</li>
<li>同一个变量可有多个引用</li>
</ul>
<h6 id="22-常引用">2.2 常引用<a hidden class="anchor" aria-hidden="true" href="#22-常引用">#</a></h6>
<p>在定义前加 const 表示 “<strong>常引用</strong>”</p>
<ul>
<li><strong>不能通过常引用修改其引用的变量</strong>, 普通引用可以修改变量的值</li>
<li>变量可以初始化常量(常引用), 常量(常引用)不能初始化变量</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> oneInt <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>; 
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>cname <span style="color:#af3a03">=</span> oneInt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>a <span style="color:#af3a03">=</span> oneInt;  <span style="color:#928374;font-style:italic">// a 是 oneInt的一个普通引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>b <span style="color:#af3a03">=</span> oneInt; <span style="color:#928374;font-style:italic">// b 是 oneInt的一个常引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>; <span style="color:#928374;font-style:italic">// 则 oneInt = 20, b =20
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>oneInt <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30</span>; <span style="color:#928374;font-style:italic">// a = 30，b = 30;
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>b <span style="color:#af3a03">=</span> <span style="color:#8f3f71">40</span>;  <span style="color:#928374;font-style:italic">// 错误
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">const</span> T<span style="color:#af3a03">&amp;</span>  和  T<span style="color:#af3a03">&amp;</span>是不同的类型
</span></span></code></pre></div><ul>
<li>类型转换:
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> cInt <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30</span>;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span> rc1 <span style="color:#af3a03">=</span> cInt; <span style="color:#928374;font-style:italic">//CT&amp;←CT, CT&amp; 表示类型 T 的常引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>r2 <span style="color:#af3a03">=</span> (<span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>) rc1; <span style="color:#928374;font-style:italic">//T&amp;←CT&amp; 强制类型转换
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>r3 <span style="color:#af3a03">=</span> (<span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>) cInt; <span style="color:#928374;font-style:italic">//T&amp;←CT 强制类型换换
</span></span></span></code></pre></div><ul>
<li>T 表示类型</li>
<li>CT 表示常量类型</li>
<li>T&amp; 表示 T 类型的引用</li>
<li>CT&amp; 表示 T 类型的常引用</li>
</ul>
</li>
</ul>
<h6 id="23-引用在函数中使用">2.3 引用在函数中使用<a hidden class="anchor" aria-hidden="true" href="#23-引用在函数中使用">#</a></h6>
<ol>
<li>引用作为函数的参数, 也可作为函数的返回值</li>
</ol>
<ul>
<li>
<p>函数参数的传递方式
<strong>传值</strong>：传递对象的值，形参是实参的副本，形参的改变不会影响实参。
<strong>传引用</strong>： <strong>传递对象的首地址值</strong>(等同于指针)，形参的改变意味着实参的改变。</p>
<p>变量、指针、引用都可以作为赋值语句的左值。</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">SwapValue</span>(<span style="color:#b57614">int</span> a, <span style="color:#b57614">int</span> b) <span style="color:#928374;font-style:italic">//形参
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> tmp;
</span></span><span style="display:flex;"><span>  tmp <span style="color:#af3a03">=</span> a;
</span></span><span style="display:flex;"><span>  a <span style="color:#af3a03">=</span> b;
</span></span><span style="display:flex;"><span>  b <span style="color:#af3a03">=</span> tmp;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;在SwapValue()函数中:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, b=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> b <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">SwapRef</span>(<span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>a, <span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>b) <span style="color:#928374;font-style:italic">//a,b 实参引用地址的值互换
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> tmp;
</span></span><span style="display:flex;"><span>  tmp <span style="color:#af3a03">=</span> a;
</span></span><span style="display:flex;"><span>  a <span style="color:#af3a03">=</span> b;
</span></span><span style="display:flex;"><span>  b <span style="color:#af3a03">=</span> tmp;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;在SwapRef()函数中:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, b=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> b <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> b <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;数据交换前:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, b=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> b <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  SwapValue(a, b);
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;SwapValue后:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, b=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> b <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>;
</span></span><span style="display:flex;"><span>  b <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span>  SwapRef(a, b);
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;SwapRef后:</span><span style="color:#79740e">\t\t</span><span style="color:#79740e">a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, b=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> b <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="2">
<li>引用作为函数的返回值</li>
</ol>
<ul>
<li>
<p>赋值语句左边的叫左值, 右边的叫右值
- 变量\指针\引用 可作左值
- 表达式作右值</p>
<ul>
<li>格式
<ul>
<li><code>数据类型 &amp; 函数名(参数列表)</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> oneX <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> oneY <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>refValue(<span style="color:#b57614">int</span> <span style="color:#af3a03">&amp;</span>x) <span style="color:#928374;font-style:italic">//返回值是引用,可作左值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  refValue(oneX) <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30</span>;             <span style="color:#928374;font-style:italic">//返回值是引用,可作左值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;oneX=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> oneX <span style="color:#af3a03">&lt;&lt;</span> endl; <span style="color:#928374;font-style:italic">//输出 oneX=30
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  refValue(oneY) <span style="color:#af3a03">=</span> <span style="color:#8f3f71">40</span>;             <span style="color:#928374;font-style:italic">//返回值是引用的函数调用表达式,可作左值使用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;oneY=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> oneY <span style="color:#af3a03">&lt;&lt;</span> endl; <span style="color:#928374;font-style:italic">//输出oneY=40
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>函数返回值也可以是指针</p>
<ul>
<li><code>类型标识符 * 函数名(实参列表)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="3内联函数-inline-常考">3.内联函数 inline （常考）<a hidden class="anchor" aria-hidden="true" href="#3内联函数-inline-常考">#</a></h5>
<ol>
<li>作用：避免频繁调用与返回，以空间消耗节省时间开销，降低函数调用的开销。</li>
</ol>
<p><strong>内联函数一般仅适用于只有几条语句的小函数</strong>
<strong>如果函数体中有循环或switch语句，通常不定义为内联函数</strong></p>
<ul>
<li>
<p>函数可以减少程序代码, 实现代码共享, 提高开发效率和可维护性</p>
</li>
<li>
<p>在编译时内嵌到主函数中</p>
<ul>
<li>
<p>格式</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">inline</span> 返回值类型 函数名(形参表)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> 函数体
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>只在声明函数原型时加 inline 不能内联, 看编译器的选择</p>
</li>
</ul>
</li>
</ul>
<h5 id="4函数的重载必考">4.函数的重载（必考）<a hidden class="anchor" aria-hidden="true" href="#4函数的重载必考">#</a></h5>
<ol>
<li>函数重载可以使一个函数名具有多种功能，即具有“多种形态”，称为多态性。</li>
<li>重载的条件：<strong>参数个数不同、参数类型不同、不同类型参数的次序不同</strong>。</li>
<li>返回值类型、引用参数都不能区分重载。</li>
</ol>
<ul>
<li>程序的同一范围内声明几个功能类似的同名函数
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">int</span> a,<span style="color:#b57614">int</span> b){}
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">float</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">float</span> a,<span style="color:#b57614">float</span> b){}
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">double</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">double</span> a,<span style="color:#b57614">double</span> b){}
</span></span></code></pre></div></li>
</ul>
<p><strong>错误的重载函数</strong></p>
<p>返回值类型不同 函数不能重载</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">double</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">double</span> a,<span style="color:#b57614">double</span> b){}
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">double</span> a,<span style="color:#b57614">double</span> b){} <span style="color:#928374;font-style:italic">// ERROR
</span></span></span></code></pre></div><p>引用参数 函数不能重载</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">double</span>){}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">double</span> <span style="color:#af3a03">&amp;</span>){} <span style="color:#928374;font-style:italic">// ERROR
</span></span></span></code></pre></div><p>参数个数不同, 多一个默认值时, 产生二义性，不能采用函数重载</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">int</span> a,<span style="color:#b57614">int</span> b,<span style="color:#b57614">int</span> c<span style="color:#af3a03">=</span><span style="color:#8f3f71">0</span>){}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">bigger</span>(<span style="color:#b57614">int</span> a,<span style="color:#b57614">int</span> b){} <span style="color:#928374;font-style:italic">// ERROR
</span></span></span></code></pre></div><h5 id="5const-与指针共同使用">5.const 与指针共同使用<a hidden class="anchor" aria-hidden="true" href="#5const-与指针共同使用">#</a></h5>
<ul>
<li>const 修饰指针变量时，优先匹配左侧</li>
</ul>
<ol>
<li><strong>唯一的<code>const</code> 位于 * 左侧，表示指针所指数据为常量</strong>，数据不能通过本指针改变,; 但指针本身是变量, 可以指向其它内存单元。（<strong>数据不能改，指针指向能改</strong>）</li>
</ol>
<p>指针是变量、数据是常量，常量不可变，数据可以变。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#b57614">int</span> a1<span style="color:#af3a03">=</span><span style="color:#8f3f71">10</span>,a2<span style="color:#af3a03">=</span><span style="color:#8f3f71">20</span>,<span style="color:#af3a03">*</span>pa1<span style="color:#af3a03">=&amp;</span>a1;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">*</span>pa1<span style="color:#af3a03">=</span><span style="color:#8f3f71">30</span>;   <span style="color:#928374;font-style:italic">// 正确，a1 变成 30
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a2;  <span style="color:#928374;font-style:italic">// pa2所指的是常量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">*</span>pa2 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">40</span>;  <span style="color:#928374;font-style:italic">// ERROR
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a1;  <span style="color:#928374;font-style:italic">// 正确
</span></span></span></code></pre></div><ol start="2">
<li><strong>唯一的const 位于 * 右侧，表示指针本身是常量</strong>，不能让该指针指向其他内存地址，指针所指的数据可以通过本指针进行修改。（<strong>指针不能改，指针所指数据能改</strong>）</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> a1<span style="color:#af3a03">=</span><span style="color:#8f3f71">10</span>,a2<span style="color:#af3a03">=</span><span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">*</span> <span style="color:#af3a03">const</span> pa2<span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a2;  <span style="color:#928374;font-style:italic">// 指针变量pa2是常量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a1;  <span style="color:#928374;font-style:italic">// ERROR
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">*</span>pa2 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">40</span>;  <span style="color:#928374;font-style:italic">// 正确
</span></span></span></code></pre></div><ol start="3">
<li><strong>在 * 左右各一个 const 时, 表示指针和所指数据都是常量, 都不能改变。</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> a1 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>,a2 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span> <span style="color:#af3a03">const</span> pa1 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a1; <span style="color:#928374;font-style:italic">//指针和所指数据都是常量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>pa1 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a2; <span style="color:#928374;font-style:italic">// ERROR
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">*</span>pa1 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30</span>; <span style="color:#928374;font-style:italic">// ERROR
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">const</span> <span style="color:#af3a03">*</span> <span style="color:#af3a03">const</span> pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a2;  <span style="color:#928374;font-style:italic">//指针和所指数据都是常量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a1;  <span style="color:#928374;font-style:italic">// ERROR
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">*</span>pa2 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">40</span>p; <span style="color:#928374;font-style:italic">// ERROR
</span></span></span></code></pre></div><p>记住const的修饰规则：</p>
<p>如果const是本行的第一个标识符，则它修饰其右侧的内容。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a2;  <span style="color:#928374;font-style:italic">// pa2所指的常量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">int</span> <span style="color:#af3a03">*</span> <span style="color:#af3a03">const</span> pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a2; <span style="color:#928374;font-style:italic">// 指针变量pa2是常量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span> <span style="color:#af3a03">const</span> pa1 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a1; <span style="color:#928374;font-style:italic">//指针和所指数据都是常量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">int</span> <span style="color:#af3a03">const</span> <span style="color:#af3a03">*</span> <span style="color:#af3a03">const</span> pa2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a2;  <span style="color:#928374;font-style:italic">//指针和所指数据都是常量
</span></span></span></code></pre></div><blockquote>
<p>调用时变量前加 &ldquo;&amp;&rdquo; &mdash;&mdash;-返回该变量的地址
声明时变量前加 &ldquo;基本类型 <em>&rdquo; &mdash;&mdash;-该指针变量表示另一个普通变量的地址  eg:int</em> 或 char *
调用时变量前加 &ldquo;*&rdquo;&mdash;&mdash;-表示取该地址的内容
声明时变量前加 &ldquo;基本类型 **&rdquo;&mdash;&mdash;-该二级指针变量表示另一个一级&quot;基本类型 *&ldquo;指针变量地址</p>
</blockquote>
<h4 id="6指针和动态内存分配">6.指针和动态内存分配<a hidden class="anchor" aria-hidden="true" href="#6指针和动态内存分配">#</a></h4>
<h5 id="61-指针">6.1 <strong>指针</strong><a hidden class="anchor" aria-hidden="true" href="#61-指针">#</a></h5>
<p>即指针变量，储存的是一个内存地址，是该指针所指对象的首地址。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">100</span>,<span style="color:#af3a03">*</span>pa <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> s[<span style="color:#8f3f71">10</span>],ps <span style="color:#af3a03">=</span> s;  <span style="color:#928374;font-style:italic">// 指针ps指向数组s的首地址
</span></span></span></code></pre></div><h5 id="62-动态内存分配-常考">6.2 动态内存分配 （常考）<a hidden class="anchor" aria-hidden="true" href="#62-动态内存分配-常考">#</a></h5>
<ul>
<li>C++ 不允许定义不确定元素个数的数组</li>
</ul>
<p>动态分配内存一般格式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>指针名 <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> 类型名; <span style="color:#928374;font-style:italic">// 分配
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">delete</span> 指针名；      <span style="color:#928374;font-style:italic">// 释放
</span></span></span></code></pre></div><ol>
<li><strong>使用关键字 new 运算符实现动态内存分配</strong></li>
</ol>
<ul>
<li><code>T *p = new T;</code> 分配大小为sizeof(T)字节的内存空间</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>p;
</span></span><span style="display:flex;"><span>p <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> <span style="color:#b57614">int</span>; <span style="color:#928374;font-style:italic">// 分配4字节空间,p指向首地址
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">*</span>p <span style="color:#af3a03">=</span> <span style="color:#8f3f71">5</span>;
</span></span></code></pre></div><ul>
<li><code>T *p = new T[N];</code> 实现动态分配任意大小的数组，N为数组元素个数，T为数组类型</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>pArray;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">5</span>;
</span></span><span style="display:flex;"><span>pArray <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> <span style="color:#b57614">int</span>[i<span style="color:#af3a03">*</span><span style="color:#8f3f71">20</span>]; <span style="color:#928374;font-style:italic">// 分配100个元素的整型数组
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>pArray[<span style="color:#8f3f71">0</span>] <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span>pArray[<span style="color:#8f3f71">99</span>] <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30</span>;
</span></span></code></pre></div><ol start="2">
<li>
<p><strong>当不再使用这个空间时，必须使用 delete 释放空间</strong></p>
<ul>
<li>忘记 delete [] 时, 导致数组不完全释放</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>A <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> <span style="color:#b57614">int</span>[<span style="color:#8f3f71">5</span>];
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">5</span>; i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      A[i] <span style="color:#af3a03">=</span> i <span style="color:#af3a03">+</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> A[i] <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// delete[] A;  //释放空间
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">delete</span> A;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">5</span>; i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> A[i] <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">delete</span> []A;  <span style="color:#928374;font-style:italic">//释放空间
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ol>
<p>delete 数组：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>delete []指针; <span style="color:#928374;font-style:italic">//释放数组元素
</span></span></span></code></pre></div><h4 id="7用-string-对象处理字符串">7.用 string 对象处理字符串<a hidden class="anchor" aria-hidden="true" href="#7用-string-对象处理字符串">#</a></h4>
<p>使用 string ：<code>#include&lt;string&gt;</code></p>
<ol>
<li>声明 string 对象 ：<code>string 变量名</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>string str1;  <span style="color:#928374;font-style:italic">// 值为空
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>string city <span style="color:#af3a03">=</span> <span style="color:#79740e">&#34;ganzhou&#34;</span>; <span style="color:#928374;font-style:italic">// 声明对象并初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>string str2 <span style="color:#af3a03">=</span> city; <span style="color:#928374;font-style:italic">// 使用字符串变量进行赋值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span> 
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 字符数组
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">char</span> name[] <span style="color:#af3a03">=</span> <span style="color:#79740e">&#34;C++程序&#34;</span>;
</span></span><span style="display:flex;"><span>string str3 <span style="color:#af3a03">=</span> name; <span style="color:#928374;font-style:italic">// 使用字符数组对string变量进行初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>string citys[] <span style="color:#af3a03">=</span> {<span style="color:#79740e">&#34;Beijing&#34;</span>,<span style="color:#79740e">&#34;Shanghai&#34;</span>,<span style="color:#79740e">&#34;jing&#34;</span>}; <span style="color:#928374;font-style:italic">// 声明string对象数组，每个数组元素都是字符串  
</span></span></span></code></pre></div><p><code>sizeof(对象/数组)</code> 元素个数<br>
sizeof(string)  在32位系统是4,64位是8</p>
<ol start="2">
<li>string 对象操作</li>
</ol>
<p>string对象可以使用cin和cout进行输入和输出</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>string s1,s2;
</span></span><span style="display:flex;"><span>cin <span style="color:#af3a03">&gt;&gt;</span> s1 <span style="color:#af3a03">&gt;&gt;</span> <span style="color:#8f3f71">2</span>;
</span></span><span style="display:flex;"><span>cout <span style="color:#af3a03">&lt;&lt;</span> s1 <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> s2 <span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span></code></pre></div><p>string对象之间可以互相赋值，也可用字符串常量和字符数组对string对象进行赋值。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>string s1,s2 <span style="color:#af3a03">=</span> <span style="color:#79740e">&#34;OK&#34;</span>;
</span></span><span style="display:flex;"><span>s1 <span style="color:#af3a03">=</span> <span style="color:#79740e">&#34;China&#34;</span>;
</span></span><span style="display:flex;"><span>s2 <span style="color:#af3a03">=</span> s1;
</span></span></code></pre></div><p>支持运算符(ASCII)</p>
<p>支持“+” 拼接字符串</p>
<ol start="3">
<li><code>string</code> 对象用法示例</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>const char *c_str() const;</code></td>
<td style="text-align:left">返回一个指向字符串的指针, 内容与原 string 相同, 用于转换为 <code>const char *</code></td>
</tr>
<tr>
<td style="text-align:left">int <strong>size()</strong> const;`</td>
<td style="text-align:left">返回当前字符串大小</td>
</tr>
<tr>
<td style="text-align:left">int <strong>length()</strong> const;</td>
<td style="text-align:left">返回当前字符串长度</td>
</tr>
<tr>
<td style="text-align:left">bool <strong>empty()</strong> const;</td>
<td style="text-align:left">返回当前字符串是否为空</td>
</tr>
<tr>
<td style="text-align:left">size_type <strong>find(const char * str , size_type index)</strong>;</td>
<td style="text-align:left">返回 <code>str</code> 在字符串中第一次出现的位置, 从 <code>index</code> 开始查找, 没有返回-1</td>
</tr>
<tr>
<td style="text-align:left">size_type <strong>find( char ch , size_type index)</strong>;</td>
<td style="text-align:left">返回 <code>ch</code> 在字符串中第一次出现的位置, 从 <code>index</code> 开始查找, 没有返回-1</td>
</tr>
<tr>
<td style="text-align:left"><code>string &amp;insert(int p, const string &amp;s);</code></td>
<td style="text-align:left">在 <code>p</code> 位置插入字符串 s</td>
</tr>
<tr>
<td style="text-align:left"><code>string &amp;append(const char *s);</code></td>
<td style="text-align:left">将字符串 <code>s</code> 拼接到当前字符串结尾</td>
</tr>
<tr>
<td style="text-align:left"><code>string substr(int pos=0, int n=npos) const;</code></td>
<td style="text-align:left">返回从 <code>pos</code> 开始的 <code>n</code> 个字符组成的字符串</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  string str;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">if</span> (str.empty())
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;str is null,&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;length=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> str.length() <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">else</span>
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;str Not null&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  str <span style="color:#af3a03">=</span> str.append(<span style="color:#79740e">&#34;sadfgflk&#34;</span>);
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;str is &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> str <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,size=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> str.size() <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">const</span> <span style="color:#b57614">char</span> <span style="color:#af3a03">*</span>p <span style="color:#af3a03">=</span> str.c_str();
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;p=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;find:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> str.find(<span style="color:#79740e">&#34;ad&#34;</span>, <span style="color:#8f3f71">0</span>) <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;find:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> str.find(<span style="color:#79740e">&#34;de&#34;</span>, <span style="color:#8f3f71">4</span>) <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  string str1 <span style="color:#af3a03">=</span> str.insert(<span style="color:#8f3f71">4</span>, <span style="color:#79740e">&#34;123&#34;</span>);
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> str1 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="8强制类型转换">8.强制类型转换<a hidden class="anchor" aria-hidden="true" href="#8强制类型转换">#</a></h5>
<ol>
<li>将一种数据类型转换成另一种数据类型</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>stati_cast<span style="color:#af3a03">&lt;</span>类型名<span style="color:#af3a03">&gt;</span>(表达式);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>下面四种方式，强制转换都是可以的
</span></span><span style="display:flex;"><span>oneint2 <span style="color:#af3a03">=</span> <span style="color:#af3a03">static_cast</span><span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span><span style="color:#af3a03">&gt;</span>(oneDouble);
</span></span><span style="display:flex;"><span>oneint2 <span style="color:#af3a03">=</span> <span style="color:#b57614">int</span>(oneDouble);
</span></span><span style="display:flex;"><span>oneint2 <span style="color:#af3a03">=</span> (<span style="color:#b57614">int</span>)oneDouble;  <span style="color:#928374;font-style:italic">// 圆括号
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>oneint2 <span style="color:#af3a03">=</span> oneDouble  <span style="color:#928374;font-style:italic">// 自动类型转换
</span></span></span></code></pre></div><p>例子：强制类型转换</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> b;
</span></span><span style="display:flex;"><span><span style="color:#b57614">float</span> fa <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30.45</span>;
</span></span><span style="display:flex;"><span>b <span style="color:#af3a03">=</span> <span style="color:#af3a03">static_cast</span><span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span><span style="color:#af3a03">&gt;</span>(fa);
</span></span><span style="display:flex;"><span>b <span style="color:#af3a03">=</span> <span style="color:#b57614">int</span>(fa);
</span></span><span style="display:flex;"><span>b <span style="color:#af3a03">=</span> (<span style="color:#b57614">int</span>)fa;   <span style="color:#928374;font-style:italic">// 旧有强制转换的形式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>b <span style="color:#af3a03">=</span> fa;  <span style="color:#928374;font-style:italic">// 自动类型转换
</span></span></span></code></pre></div><ol start="2">
<li>stati_cast&lt;类型名&gt;(表达式);
功能：
将常量指针转化成非常量的指针，并且仍然指向原来的对象；
将常量引用转换成非常量的引用，并且仍然指向原来的对象。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>,<span style="color:#af3a03">*</span>q;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> ca <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>p <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a;  <span style="color:#928374;font-style:italic">// 不能使用常量指针p修改a的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>q <span style="color:#af3a03">=</span> <span style="color:#af3a03">const_cast</span><span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span> <span style="color:#af3a03">*&gt;</span>(p);    <span style="color:#928374;font-style:italic">// 不能q=p
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">*</span>q <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;  <span style="color:#928374;font-style:italic">// 变量a的值变为20，不能形成*碰= 20；
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>p <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>ca;  <span style="color:#928374;font-style:italic">// ca的值不能修改
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>q <span style="color:#af3a03">=</span> <span style="color:#af3a03">const_cast</span><span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span> <span style="color:#af3a03">*&gt;</span>(p);   <span style="color:#928374;font-style:italic">// 不能 q=p
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">*</span>q <span style="color:#af3a03">=</span> <span style="color:#8f3f71">40</span>; <span style="color:#928374;font-style:italic">// *q的值为40，*p的值变成40，变量ca的值仍然是30
</span></span></span></code></pre></div><h3 id="四-c程序结构">四、 C++程序结构<a hidden class="anchor" aria-hidden="true" href="#四-c程序结构">#</a></h3>
<ol>
<li>主程序 main</li>
</ol>
<ul>
<li>以<code>.cpp</code> 作为文件扩展名，文件中包含若干个类和若干个函数。</li>
<li>有且一个主函数 <code>main()</code> , 程序从主函数开始执行</li>
<li>主函数可以调用其他函数, 其他函数不能调用主函数</li>
</ul>
<ol start="2">
<li>主函数结束</li>
</ol>
<ul>
<li>
<p>主函数中遇到 <code>return</code></p>
</li>
<li>
<p>执行到主函数后面 <code>}</code></p>
</li>
<li>
<p>注释风格</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/* 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">  多行注释
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">  多行注释
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">  */</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 单行注释
</span></span></span></code></pre></div><h3 id="五强制类型转换运算符">五、强制类型转换运算符<a hidden class="anchor" aria-hidden="true" href="#五强制类型转换运算符">#</a></h3>
<ul>
<li>
<p>不同类型量混合运算时, 系统自动执行类型转换, 也可使用 强制类型转换运算符 <code>static_cast</code> 或 <code>const_cast</code> 进行转换</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#af3a03">static_cast</span><span style="color:#af3a03">&lt;</span>类型名<span style="color:#af3a03">&gt;</span>(表达式); <span style="color:#928374;font-style:italic">//static_cast 可以省略
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  oneInt2<span style="color:#af3a03">=</span><span style="color:#af3a03">static_cast</span><span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span><span style="color:#af3a03">&gt;</span>(oneDouble); <span style="color:#928374;font-style:italic">//强制类型转换
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  oneInt2<span style="color:#af3a03">=</span><span style="color:#b57614">int</span>(oneDouble); <span style="color:#928374;font-style:italic">//强制类型转换运算符的新形式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  oneInt2<span style="color:#af3a03">=</span>(<span style="color:#b57614">int</span>)oneDouble; <span style="color:#928374;font-style:italic">//强制类型转换运算符的旧形式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  oneInt2<span style="color:#af3a03">=</span>oneDouble; <span style="color:#928374;font-style:italic">//自动类型转换
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#af3a03">const_cast</span><span style="color:#af3a03">&lt;</span>类型名<span style="color:#af3a03">&gt;</span>(表达式); 
</span></span></code></pre></div><ul>
<li>
<p>用于去除指针和引用的常量性,不能去除变量的常量性</p>
</li>
<li>
<p>常量指针转化为非常量指针, 任指向原对象(<code>const int *p=&gt; int *p</code>)</p>
</li>
<li>
<p>常量引用转化为非常量引用, 任指向原对象</p>
</li>
<li>
<p>指针的教程: <a href="https://www.imooc.com/video/7858">https://www.imooc.com/video/7858</a></p>
<ul>
<li>指针的本质就是内存地址</li>
</ul>
</li>
<li>
<p>示例:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>p <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>a; <span style="color:#928374;font-style:italic">//不能使用常量指针p修改a的值,&#34;&amp;&#34;取地址符,&#34;*&#34;从地址取值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> ca <span style="color:#af3a03">=</span> <span style="color:#8f3f71">30</span>; <span style="color:#928374;font-style:italic">//被const修饰
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>q;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;a的内存地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> a的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;p指向的地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> *p的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  q <span style="color:#af3a03">=</span> <span style="color:#af3a03">const_cast</span><span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span> <span style="color:#af3a03">*&gt;</span>(p); <span style="color:#928374;font-style:italic">//去除p的常量性赋给q,如果写q=p;会报错
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">*</span>q <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;                  <span style="color:#928374;font-style:italic">//如果写*p=20;是错误的
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;a的内存地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> a的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;p指向的地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> *p的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;q指向的地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> q <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> *q的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>q <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;分界线&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  p <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>ca;                  <span style="color:#928374;font-style:italic">//ca的值不能修改
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  q <span style="color:#af3a03">=</span> <span style="color:#af3a03">const_cast</span><span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span> <span style="color:#af3a03">*&gt;</span>(p); <span style="color:#928374;font-style:italic">//去除p的常量性赋给q,如果写q=p;会报错
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">*</span>q <span style="color:#af3a03">=</span> <span style="color:#8f3f71">40</span>;                  <span style="color:#928374;font-style:italic">//如果写*p=40;是错误的
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;ca的内存地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>ca <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> ca的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> ca <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;p指向的地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> *p的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;q指向的地址为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> q <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e"> *q的值为:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>q <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>疑问: 常量的非常量指针修改内存地址内的值, 内存地址相同, 值不同</p>
</li>
</ul>
</li>
</ul>
<h1 id="第二章-面向对象的基本概念">第二章 面向对象的基本概念<a hidden class="anchor" aria-hidden="true" href="#第二章-面向对象的基本概念">#</a></h1>
<ul>
<li>结构化程序设计方法和局限性</li>
<li>面对对象程序设计，并对比结构化。理解抽象、封装、继承和多态</li>
<li>类定义方法，成员变量，成员函数</li>
<li>类定义中访问范围说明符</li>
<li>对象</li>
<li>指针，引用访问类成员的方法</li>
</ul>
<h2 id="21-结构化程序设计">2.1 结构化程序设计<a hidden class="anchor" aria-hidden="true" href="#21-结构化程序设计">#</a></h2>
<ol>
<li>
<p>采用自顶向下、逐步求精及功能模块化的思想，将复杂的大问题层层分解为许多简单的小问题。</p>
</li>
<li>
<p>三种基本控制结构: <strong>顺序 / 选择 / 循环结构</strong></p>
</li>
<li>
<p>结构化程序设计的基本思想：数据结构+算法=程序</p>
</li>
<li>
<p>结构化程序设计的缺点：代码规模庞大时，变得难以理解、难以扩充、难以查错和难以复用。</p>
</li>
</ol>
<h2 id="22-面向对象思想">2.2 面向对象思想<a hidden class="anchor" aria-hidden="true" href="#22-面向对象思想">#</a></h2>
<h5 id="1面向对象基础知识">1.面向对象基础知识<a hidden class="anchor" aria-hidden="true" href="#1面向对象基础知识">#</a></h5>
<ol>
<li>
<p>面向对象程序设计方法是在20世纪90年代以来软件开发方法的主流，它继承了结构化程序设计方法的优点，同时又<strong>比较有效地改善了结构化程序设计的不足</strong>。</p>
</li>
<li>
<p>面向对象程序设计方法：使分析、设计和实现一个系统的方法尽可能地接近人们认识一个系统的方法。面向对象的程序设计方式更接近于人们看待真实世界。通常包括3个方面：            <strong>面向对象的分析、面向对象的设计 和 面向对象的程序设计</strong></p>
</li>
<li>
<p>对象的特性</p>
</li>
</ol>
<ul>
<li><strong>状态（属性）</strong>: 对象本身的信息</li>
<li><strong>行为（操作）</strong>: 对对象的操作</li>
<li>对象 = 数据（属性） + 函数 （行为）</li>
</ul>
<ol start="4">
<li>类是对现实客观事物的抽象，找出同一类对象的共同属性(静态特征)和行为(动态特征)</li>
<li>对象是类的实例（具体化），类是对象的抽象</li>
<li>用对象名、属性和操作来描述对象。</li>
</ol>
<h5 id="2面向对象程序设计的特点">2.面向对象程序设计的特点<a hidden class="anchor" aria-hidden="true" href="#2面向对象程序设计的特点">#</a></h5>
<ul>
<li><strong>封装</strong>: 对象的属性和操作结合成一个独立的单元,
<ol>
<li>数据和操作数据的函数紧密联系起来。</li>
<li>可将对象的部分属性和函数隐藏起来，对外不可见，起到保护作用</li>
<li>将另外一部分对外可见，提供操作的接口。</li>
</ol>
</li>
<li><strong>继承</strong>: 编写新类时, 以现有类为基础派生,<strong>达到代码扩充和复用的目的</strong>。</li>
<li><strong>多态</strong>: 不同种类的对象都具有名字相同的行为, 而具体行为的实现方式有所不同，这<strong>大大提高了人们解决复杂问题的能力。</strong></li>
<li>抽象：将同一类事物的共同特点概括出来，这个过程称为抽象。</li>
</ul>
<p>对象由成员变量和成员函数构成</p>
<h2 id="23-类的初步知识">2.3 类的初步知识<a hidden class="anchor" aria-hidden="true" href="#23-类的初步知识">#</a></h2>
<h5 id="1类的定义">1.类的定义<a hidden class="anchor" aria-hidden="true" href="#1类的定义">#</a></h5>
<p>类是对具有相同属性和操作的一组对象的集合，其内部包括属性（本类的成员变量）和行为（本类的成员函数）两个部分。
类是用户自定义的数据类型。
类要先声明后使用、是具有唯一标识符的实体。</p>
<p>基本数据类型</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#b57614">bool</span> 布尔型 \ <span style="color:#b57614">char</span> 字符型 \ <span style="color:#b57614">int</span> 整型 \ <span style="color:#b57614">float</span> 浮点型  \ <span style="color:#b57614">double</span> 双精度浮点型
</span></span></code></pre></div><p>声明类的一般形式：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> 类名{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		私有变量和函数
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#928374;font-style:italic">//公有变量和函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#b57614">void</span> Setxy(<span style="color:#b57614">int</span> a,<span style="color:#b57614">int</span> b); <span style="color:#928374;font-style:italic">// 声明无返回值的公有成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#b57614">int</span> <span style="color:#b57614">Getx</span>(); <span style="color:#928374;font-style:italic">// 声明返回值为int的公有成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">protected</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		保护变量和函数
</span></span><span style="display:flex;"><span>	 ...
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li>类名不能重复</li>
<li>类定义以“;”结束</li>
<li>如无访问权限的关键字，则<strong>默认声明为private</strong>;</li>
<li>不能在类的声明中对成员变量进行初始化</li>
<li>类声明中可以给出成员函数的参数的默认值</li>
<li>类中声明的任何成员不能使用 extern、auto和register关键字修饰</li>
<li><strong>类中可以不含有任何成员变量和成员函数</strong>，这样的类称为空类。</li>
</ul>
<p><strong>使用 public 关键字声明的公有成员可在类外访问</strong>，即公有类型成员定义了外部接口。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span><span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> area <span style="color:#928374;font-style:italic">//定义 area 类。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span> <span style="color:#928374;font-style:italic">//定义公有成员，外部可以访问。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">double</span> width;
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> length;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    area area1; <span style="color:#928374;font-style:italic">//定义对象 area1。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">double</span> AREA; <span style="color:#928374;font-style:italic">//定义双精度型变量 AREA。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    area1.width<span style="color:#af3a03">=</span><span style="color:#8f3f71">3</span>; <span style="color:#928374;font-style:italic">//外部访问公有成员，设置宽为 3。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    area1.length<span style="color:#af3a03">=</span><span style="color:#8f3f71">3.1</span>; <span style="color:#928374;font-style:italic">//外部访问公有成员，设置长为 3.1。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    AREA<span style="color:#af3a03">=</span>area1.width<span style="color:#af3a03">*</span>area1.length; <span style="color:#928374;font-style:italic">//计算面积。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> AREA <span style="color:#af3a03">&lt;&lt;</span>endl; <span style="color:#928374;font-style:italic">//输出面积 9.3
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>使用 protected 关键字声明的受保护成员可在本类和子类中访问</strong>。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span><span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> area <span style="color:#928374;font-style:italic">//定义 area 类。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">protected</span><span style="color:#af3a03">:</span><span style="color:#928374;font-style:italic">//定义受保护的成员。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">double</span> width;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> squarearea<span style="color:#af3a03">:</span>area <span style="color:#928374;font-style:italic">//定义 squarearea 子类。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span> <span style="color:#928374;font-style:italic">//定义公有成员。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> setsquarewidth(<span style="color:#b57614">double</span> wid); <span style="color:#928374;font-style:italic">//定义成员函数。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">double</span> <span style="color:#b57614">getsquarewidth</span>(<span style="color:#b57614">void</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//定义子类的成员函数。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">void</span> squarearea<span style="color:#af3a03">::</span>setsquarewidth(<span style="color:#b57614">double</span> wid)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    width<span style="color:#af3a03">=</span>wid; <span style="color:#928374;font-style:italic">//通过 squarearea 子类访问 area 类中受保护的成员 width。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">double</span> squarearea<span style="color:#af3a03">::</span>getsquarewidth(<span style="color:#b57614">void</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> width;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//程序的主函数 。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    squarearea square; <span style="color:#928374;font-style:italic">//定义对象。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    square.setsquarewidth(<span style="color:#8f3f71">3.1</span>); <span style="color:#928374;font-style:italic">//设置宽度为 3.1。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;width:&#34;</span><span style="color:#af3a03">&lt;&lt;</span>square.getsquarewidth()<span style="color:#af3a03">&lt;&lt;</span>endl; <span style="color:#928374;font-style:italic">//输出设置的宽度。 width: 3.1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>此程序可以分为相对独立的三个部分，一是对 area 类的定义，二是对 squarearea 子类及子类函数的定义，三是主函数 main()。对于 area 类中受保护的成员 width 可以通过子类进行访问。</p>
<p><strong>使用 private 关键字声明的私有成员只能被本类的成员函数访问</strong>。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span><span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> area
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span> <span style="color:#928374;font-style:italic">//定义公有成员
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">double</span> length;
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">void</span> <span style="color:#b57614">setwidth</span>(<span style="color:#b57614">double</span> wid);
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> <span style="color:#b57614">getwidth</span>(<span style="color:#b57614">void</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span><span style="color:#928374;font-style:italic">//定义私有成员
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">double</span> width;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//定义公有成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">void</span> area<span style="color:#af3a03">::</span>setwidth(<span style="color:#b57614">double</span> wid)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    width<span style="color:#af3a03">=</span>wid;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">double</span> area<span style="color:#af3a03">::</span>getwidth(<span style="color:#b57614">void</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> width;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//主函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    area len1; <span style="color:#928374;font-style:italic">//定义对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    area wid1;
</span></span><span style="display:flex;"><span>    len1.length<span style="color:#af3a03">=</span><span style="color:#8f3f71">3.1</span>; <span style="color:#928374;font-style:italic">//访问 area 类公有成员。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;length:&#34;</span><span style="color:#af3a03">&lt;&lt;</span>len1.length<span style="color:#af3a03">&lt;&lt;</span>endl;    <span style="color:#928374;font-style:italic">// length: 3.1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    wid1.setwidth(<span style="color:#8f3f71">3.2</span>); <span style="color:#928374;font-style:italic">//使用公有成员函数设置宽度。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;width:&#34;</span><span style="color:#af3a03">&lt;&lt;</span>wid1.getwidth()<span style="color:#af3a03">&lt;&lt;</span>endl;   <span style="color:#928374;font-style:italic">// width: 3.2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>此程序可以分为相对独立的两个部分，一是 area 类及其公有成员函数的定义，二是主函数 main()。私有成员 width 只能先被类中成员函数访问，再通过相关的公共成员函数实现外部访问。</p>
<ol start="2">
<li>
<p>访问范围说明符: public(公有)、private(私有)、protected(保护)</p>
<ul>
<li>定义类时系统不分配内存, 而是把类看成模板</li>
<li>按功能划分: 成员变量和成员函数
<ul>
<li>成员变量私有, 类外不可访问, 为每个成员变量定义一对访问函数, 设置函数和获取函数</li>
<li>成员函数可以重载, 可以设定默认值</li>
</ul>
</li>
<li>按权限划分: 公有成员/私有成员/保护成员</li>
</ul>
</li>
<li>
<p><strong>类中的成员变量不能在声明时进行初始化</strong>。成员函数定义在类体内部，则默认为内联函数，也可在类体内部声明函数，并加上inline，然后在类体外给出函数的定义，这样也是内联函数。</p>
</li>
<li>
<p><strong>定义类体外的成员函数</strong>：类体内必须有函数原型，<strong>类体外函数定义前必须用 “类名::” 作用域运算符</strong>，表明它后面的成员函数是用于类名标识的这个类的。</p>
<ul>
<li>不属于任何类的函数: 全局函数</li>
<li>在类外定义成员函数
<ul>
<li>inline 内联</li>
<li>类内有函数原型</li>
</ul>
</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> 类名{
</span></span><span style="display:flex;"><span>    函数的返回类型 函数名(参数列表)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>返回值类型 类名<span style="color:#af3a03">::</span>函数名(参数列表) <span style="color:#928374;font-style:italic">//其形式为：类名::函数名(参数列表)。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    函数体
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>例如在 area 类中有成员函数 <code>void setwidth(double wid);</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> area{
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> setwidth(<span style="color:#b57614">double</span> wid);
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//在类外说明函数的具体实现
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">void</span> area<span style="color:#af3a03">::</span>setwidth(<span style="color:#b57614">double</span> wid){
</span></span><span style="display:flex;"><span>    函数体
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>成员函数允许重载</p>
<h5 id="2类的定义示例">2.类的定义示例<a hidden class="anchor" aria-hidden="true" href="#2类的定义示例">#</a></h5>
<ul>
<li>
<p>myDate</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> myDate
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      myDate();                    <span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      myDate(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);       <span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setDate</span>(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>); <span style="color:#928374;font-style:italic">//设置日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setDate</span>(myDate);        <span style="color:#928374;font-style:italic">//设置日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      myDate <span style="color:#b57614">getDate</span>();            <span style="color:#928374;font-style:italic">//获取日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setYear</span>(<span style="color:#b57614">int</span>);           <span style="color:#928374;font-style:italic">//设置年
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">int</span> <span style="color:#b57614">getMonth</span>();              <span style="color:#928374;font-style:italic">//获取月
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">printDate</span>() <span style="color:#af3a03">const</span>;      <span style="color:#928374;font-style:italic">//打印日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">int</span> year, month, day; <span style="color:#928374;font-style:italic">//成员变量,年月日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//类体外定义成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate<span style="color:#af3a03">::</span>myDate(){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1970</span>, month <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>, day <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(<span style="color:#b57614">int</span> y, <span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> d){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setDate(<span style="color:#b57614">int</span> y, <span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> d){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setDate(myDate oneD){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> oneD.year;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> oneD.month;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> oneD.day;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>myDate myDate<span style="color:#af3a03">::</span>getDate(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setYear(<span style="color:#b57614">int</span> y){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> myDate<span style="color:#af3a03">::</span>getMonth(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> month;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>printDate() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> year <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;/&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> month <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;/&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> day;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>Student</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> Student{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">void</span> setStudent(string, myDate); <span style="color:#928374;font-style:italic">//设置学生信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">setName</span>(string);            <span style="color:#928374;font-style:italic">//设置姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        string <span style="color:#b57614">getName</span>();                <span style="color:#928374;font-style:italic">//获取姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">setBirthday</span>(myDate);        <span style="color:#928374;font-style:italic">//设置生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myDate <span style="color:#b57614">getBirthday</span>();            <span style="color:#928374;font-style:italic">//获取生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">printStudent</span>() <span style="color:#af3a03">const</span>;       <span style="color:#928374;font-style:italic">//打印信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        string name;     <span style="color:#928374;font-style:italic">//姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myDate birthday; <span style="color:#928374;font-style:italic">//生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//类体外定义成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setStudent(string s, myDate d){
</span></span><span style="display:flex;"><span>        name <span style="color:#af3a03">=</span> s;
</span></span><span style="display:flex;"><span>        birthday.setDate(d);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setName(string n){
</span></span><span style="display:flex;"><span>        name <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    string Student<span style="color:#af3a03">::</span>getName(){
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setBirthday(myDate d){
</span></span><span style="display:flex;"><span>        birthday.setDate(d);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    myDate Student<span style="color:#af3a03">::</span>getBirthday(){
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span> birthday;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>printStudent() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>        cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;姓名:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> name <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">生日:&#34;</span>;
</span></span><span style="display:flex;"><span>        birthday.printDate(); <span style="color:#928374;font-style:italic">//调用类myDate 的成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></li>
</ul>
<h2 id="24-类成员的访问">2.4 类成员的访问<a hidden class="anchor" aria-hidden="true" href="#24-类成员的访问">#</a></h2>
<h5 id="1成员变量和成员函数的定义">1.成员变量和成员函数的定义<a hidden class="anchor" aria-hidden="true" href="#1成员变量和成员函数的定义">#</a></h5>
<ol>
<li>一个完整的C++程序包括：主函数main、用户定义的任意多个的类及全局函数、全局说明、注释、头文件</li>
<li>成员变量一般定义为私有访问权限，仅在本类中访问。类外需访问本函数来访问私有的成员变量。</li>
<li>在类体外定义成员函数时，要指明类的名称。如在函数体定义在类体内，系统将视为内联函数。</li>
<li>类中定义的成员函数允许重载。成员函数在内存中只有一份，每个对象共享。</li>
</ol>
<p>类的静态成员函数由类来调用
实例化对象时，系统为每个对象的成员变量分配内存，不会分配成员函数的空间。</p>
<h5 id="2定义对象的两种方法">2.定义对象的两种方法<a hidden class="anchor" aria-hidden="true" href="#2定义对象的两种方法">#</a></h5>
<ul>
<li>方法一，对象是类的实例</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     类名 对象名;   <span style="color:#928374;font-style:italic">// 多个对象可用逗号隔开一起定义
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     类名 对象名(参数);  <span style="color:#928374;font-style:italic">// 定义对象的初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     类名 对象名 <span style="color:#af3a03">=</span> 类名(参数);
</span></span><span style="display:flex;"><span>     类名 对象名<span style="color:#8f3f71">1</span>, 对象名<span style="color:#8f3f71">2</span>,...;
</span></span><span style="display:flex;"><span>     类名 对象名<span style="color:#8f3f71">1</span>(参数),对象名<span style="color:#8f3f71">2</span>(参数),...;
</span></span></code></pre></div><ul>
<li>方法二，用 new 创建对象时返回的是一个对象的指针, 必须用 delete 来撤销</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     类名 <span style="color:#af3a03">*</span>对象指针名 <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> 类名;    <span style="color:#928374;font-style:italic">//成员变量不初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     类名 <span style="color:#af3a03">*</span>对象指针名 <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> 类名();    <span style="color:#928374;font-style:italic">//成员变量初始化，构造函数进行初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     类名 <span style="color:#af3a03">*</span>对象指针名 <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> 类名(参数);
</span></span></code></pre></div><ul>
<li>声明对象引用, 即别名</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     类名 <span style="color:#af3a03">&amp;</span>对象引用名 <span style="color:#af3a03">=</span> 对象;       <span style="color:#928374;font-style:italic">// 声明对象引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     
</span></span><span style="display:flex;"><span>     类名 <span style="color:#af3a03">*</span>对象指针名 <span style="color:#af3a03">=</span> 对象的地址;  <span style="color:#928374;font-style:italic">// 声明对象指针
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     
</span></span><span style="display:flex;"><span>     类名 对象数组名[数组大小];   <span style="color:#928374;font-style:italic">// 声明对象数组
</span></span></span></code></pre></div><ul>
<li>同类型对象之间可以相互赋值, 对象和对象指针都可以用作函数参数, 函数返回值可以使对象或指针</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>myDate d1,d2;   <span style="color:#928374;font-style:italic">// 定义了myDate对象d1,d2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate <span style="color:#af3a03">*</span>p <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>d1;  <span style="color:#928374;font-style:italic">// 定义了指向对象d1的myDate类类型的指针p
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate <span style="color:#af3a03">&amp;</span>R <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>d2;  <span style="color:#928374;font-style:italic">// 定义了myDate类类型对象d2的引用R
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate date[<span style="color:#8f3f71">3</span>];   <span style="color:#928374;font-style:italic">// 定义了myDate类类型对象的数组date,含3个元素
</span></span></span></code></pre></div><h5 id="3使用对象访问成员变量与调用成员函数">3.使用对象访问成员变量与调用成员函数<a hidden class="anchor" aria-hidden="true" href="#3使用对象访问成员变量与调用成员函数">#</a></h5>
<p>私有成员在类的外部不可以直接调用</p>
<ol>
<li>对象访问成员变量的格式</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>对象名.成员变量名
</span></span></code></pre></div><ol start="2">
<li>使用对象的指针访问成员变量</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>对象的指针<span style="color:#af3a03">-&gt;</span>成员变量名
</span></span></code></pre></div><ol start="3">
<li>使用对象的引用访问成员变量</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>对象的引用名.成员名
</span></span></code></pre></div><ol start="4">
<li>调用成员函数的格式</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>对象名.成员函数名(参数表)
</span></span><span style="display:flex;"><span>对象的指针<span style="color:#af3a03">-&gt;</span>成员函数名(参数表)
</span></span><span style="display:flex;"><span>对象的引用.成员函数名(参数表)
</span></span></code></pre></div><p>示例：验证类功能的驱动程序</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> myDate{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  myDate();                    <span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  myDate(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);       <span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">setDate</span>(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>); <span style="color:#928374;font-style:italic">//设置日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">setDate</span>(myDate);        <span style="color:#928374;font-style:italic">//设置日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  myDate <span style="color:#b57614">getDate</span>();            <span style="color:#928374;font-style:italic">//获取日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">setYear</span>(<span style="color:#b57614">int</span>);           <span style="color:#928374;font-style:italic">//设置年
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">int</span> <span style="color:#b57614">getMonth</span>();              <span style="color:#928374;font-style:italic">//获取月
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">printDate</span>() <span style="color:#af3a03">const</span>;      <span style="color:#928374;font-style:italic">//打印日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#b57614">int</span> year, month, day; <span style="color:#928374;font-style:italic">//成员变量,年月日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//类体外定义成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate<span style="color:#af3a03">::</span>myDate(){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1970</span>, month <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>, day <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(<span style="color:#b57614">int</span> y, <span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> d){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setDate(<span style="color:#b57614">int</span> y, <span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> d){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setDate(myDate oneD){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> oneD.year;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> oneD.month;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> oneD.day;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>myDate myDate<span style="color:#af3a03">::</span>getDate(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setYear(<span style="color:#b57614">int</span> y){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> myDate<span style="color:#af3a03">::</span>getMonth(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> month;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>printDate() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> year <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;/&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> month <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;/&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> day;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> Student{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#b57614">void</span> setStudent(string, myDate); <span style="color:#928374;font-style:italic">//设置学生信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">setName</span>(string);            <span style="color:#928374;font-style:italic">//设置姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  string <span style="color:#b57614">getName</span>();                <span style="color:#928374;font-style:italic">//获取姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">setBirthday</span>(myDate);        <span style="color:#928374;font-style:italic">//设置生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  myDate <span style="color:#b57614">getBirthday</span>();            <span style="color:#928374;font-style:italic">//获取生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">printStudent</span>() <span style="color:#af3a03">const</span>;       <span style="color:#928374;font-style:italic">//打印信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  string name;     <span style="color:#928374;font-style:italic">//姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	  myDate birthday; <span style="color:#928374;font-style:italic">//生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//类体外定义成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setStudent(string s, myDate d){
</span></span><span style="display:flex;"><span>  name <span style="color:#af3a03">=</span> s;
</span></span><span style="display:flex;"><span>  birthday.setDate(d);
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setName(string n){
</span></span><span style="display:flex;"><span>  name <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>string Student<span style="color:#af3a03">::</span>getName(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> name;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setBirthday(myDate d){
</span></span><span style="display:flex;"><span>  birthday.setDate(d);
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>myDate Student<span style="color:#af3a03">::</span>getBirthday(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> birthday;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>printStudent() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;姓名:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> name <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">生日:&#34;</span>;
</span></span><span style="display:flex;"><span>  birthday.printDate(); <span style="color:#928374;font-style:italic">//调用类myDate 的成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>	Student ss;
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> y, m, d;
</span></span><span style="display:flex;"><span>	string name_;
</span></span><span style="display:flex;"><span>	cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;请输入学生的姓名和生日, 生日以</span><span style="color:#79740e">\&#34;</span><span style="color:#79740e">年 月 日</span><span style="color:#79740e">\&#34;</span><span style="color:#79740e">的次序输入:&#34;</span>;
</span></span><span style="display:flex;"><span>	cin <span style="color:#af3a03">&gt;&gt;</span> name_ <span style="color:#af3a03">&gt;&gt;</span> y <span style="color:#af3a03">&gt;&gt;</span> m <span style="color:#af3a03">&gt;&gt;</span> d;
</span></span><span style="display:flex;"><span>	ss.setStudent(name_, myDate(y, m, d));
</span></span><span style="display:flex;"><span>	ss.printStudent();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#928374;font-style:italic">// 指针方式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	Student <span style="color:#af3a03">*</span>sp <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>ss;
</span></span><span style="display:flex;"><span>	sp<span style="color:#af3a03">-&gt;</span>setName(name_,myDate(y,m,d));
</span></span><span style="display:flex;"><span>	sp<span style="color:#af3a03">-&gt;</span>printStudent();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#928374;font-style:italic">// 对象的引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	Student <span style="color:#af3a03">&amp;</span>sy <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>ss;
</span></span><span style="display:flex;"><span>	sy.setName(name_,myDate(y,m,d));
</span></span><span style="display:flex;"><span>	sy.printStudent();
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="4类成员的可访问范围">4.类成员的可访问范围<a hidden class="anchor" aria-hidden="true" href="#4类成员的可访问范围">#</a></h5>
<p>访问范围说明符的含义</p>
<ul>
<li><code>public</code>: 公有, 任何地方可以访问</li>
<li><code>private</code>: 私有, 仅能在本类（或友元函数）中被访问</li>
<li><code>protected</code>: 允许本类及子类 ( 派生类 ) 中被访问</li>
</ul>
<p>如果某个成员没有范围修饰符，默认为私有成员</p>
<p>一般将成员变量声明为私有，相关成员函数声明为公有，以便外部调用成员函数来操纵成员变量。</p>
<p>设置为私有成员的机制叫作 <strong>隐藏</strong>。隐藏的优点有：</p>
<ol>
<li>有利于程序的修改</li>
<li>可以避免对对象的不正确操作</li>
</ol>
<h1 id="第三章-类和对象进阶">第三章 类和对象进阶<a hidden class="anchor" aria-hidden="true" href="#第三章-类和对象进阶">#</a></h1>
<ul>
<li>构造函数、析构函数、复制构造函数</li>
<li>特殊成员，包括静态成员、常量成员、常引用成员</li>
<li>类成员的生存期及作用域</li>
<li>封闭类的概念，定义封闭类</li>
<li>友元函数</li>
<li>this 指针</li>
</ul>
<h4 id="31-构造函数">3.1 构造函数<a hidden class="anchor" aria-hidden="true" href="#31-构造函数">#</a></h4>
<h5 id="构造函数的定义">构造函数的定义<a hidden class="anchor" aria-hidden="true" href="#构造函数的定义">#</a></h5>
<ul>
<li><strong>构造函数名字与类名相同</strong>, 无返回值, 一个类可以有多个构造函数(参数不能相同), 允许重载</li>
<li>构造函数的作用：完成对象的初始化, 成员变量赋初值</li>
<li><code>类名(形参1,形参2,...形参n);</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     <span style="color:#928374;font-style:italic">// 类外定义构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     <span style="color:#928374;font-style:italic">// 成员变量 x1,x2,...,xn;
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     <span style="color:#928374;font-style:italic">// 形式1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     类名<span style="color:#af3a03">::</span>类名(形参<span style="color:#8f3f71">1</span>,形参<span style="color:#8f3f71">2</span>,...形参n)<span style="color:#af3a03">:</span>x1(形参<span style="color:#8f3f71">1</span>),x2(形参<span style="color:#8f3f71">2</span>),...,xn(形参n){}   <span style="color:#928374;font-style:italic">// 形参1赋值给x1，形参2赋值给x2,... 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     
</span></span><span style="display:flex;"><span>     <span style="color:#928374;font-style:italic">// 形式2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     类名<span style="color:#af3a03">::</span>类名(形参<span style="color:#8f3f71">1</span>,形参<span style="color:#8f3f71">2</span>,...,形参n)
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       x1 <span style="color:#af3a03">=</span> 形参<span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>       x2 <span style="color:#af3a03">=</span> 形参<span style="color:#8f3f71">2</span>;
</span></span><span style="display:flex;"><span>       ...
</span></span><span style="display:flex;"><span>       xn <span style="color:#af3a03">=</span> 形参n;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>     <span style="color:#928374;font-style:italic">// 形式3
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     类名<span style="color:#af3a03">::</span>类名()  <span style="color:#928374;font-style:italic">// 成员变量所赋的初值都是固定的
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     {
</span></span><span style="display:flex;"><span>     	x1 <span style="color:#af3a03">=</span> 初始化表达值<span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>     	x2 <span style="color:#af3a03">=</span> 初始化表达值<span style="color:#8f3f71">2</span>;
</span></span><span style="display:flex;"><span>     	...
</span></span><span style="display:flex;"><span>     	xn <span style="color:#af3a03">=</span> 初始化表达值n;
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> myDate{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		myDate();
</span></span><span style="display:flex;"><span>		myDate(<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>		myDate(<span style="color:#b57614">int</span>,<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>		myDate(<span style="color:#b57614">int</span>,<span style="color:#b57614">int</span>,<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>		...
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">int</span> year,month,day;  <span style="color:#928374;font-style:italic">// 成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 定义构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate<span style="color:#af3a03">::</span>myDate(){ <span style="color:#928374;font-style:italic">// 固定初始值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	year <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1970</span>;
</span></span><span style="display:flex;"><span>	month <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>	day <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(<span style="color:#b57614">int</span> d)<span style="color:#af3a03">:</span>year(<span style="color:#8f3f71">1970</span>),month(<span style="color:#8f3f71">1</span>){  <span style="color:#928374;font-style:italic">// 带一个参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(<span style="color:#b57614">int</span> m,<span style="color:#b57614">int</span> m)<span style="color:#af3a03">:</span>year(<span style="color:#8f3f71">1970</span>){ <span style="color:#928374;font-style:italic">// 带2个参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>	day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(<span style="color:#b57614">int</span> y,<span style="color:#b57614">int</span> m,<span style="color:#b57614">int</span> d){  <span style="color:#928374;font-style:italic">// 带三个参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>	month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>	day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="构造函数的使用">构造函数的使用<a hidden class="anchor" aria-hidden="true" href="#构造函数的使用">#</a></h5>
<ul>
<li>
<p>创建对象时根据调用语句中所带实参数量确定使用哪个构造函数</p>
</li>
<li>
<p>当程序创建一个对象时，系统自动调用构造函数来初始化对象。</p>
</li>
<li>
<p>如果创建对象提供了实参，则使用实参为对象成员变量赋值；如果没有提供实参，则使用默认值为对象的成员变量赋值。</p>
</li>
<li>
<p>使用构造函数创建对象指针</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(<span style="color:#b57614">int</span> y<span style="color:#af3a03">=</span><span style="color:#8f3f71">1970</span>,<span style="color:#b57614">int</span> m <span style="color:#af3a03">=</span> <span style="color:#8f3f71">2</span>,<span style="color:#b57614">int</span> d <span style="color:#af3a03">=</span> <span style="color:#8f3f71">14</span>){
</span></span><span style="display:flex;"><span>	year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>	month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>	day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>使用 new 创建对象指针</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 括号可加、可不加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate <span style="color:#af3a03">*</span>pd <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> myDate();
</span></span><span style="display:flex;"><span>myDate <span style="color:#af3a03">*</span>pd <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> myDate;
</span></span></code></pre></div><ul>
<li>
<p>加括号, 系统为成员变量分配内存的同时，将其初始化为 0</p>
</li>
<li>
<p>不加括号时, 系统只为成员变量分配内存空间，但不进行内存的初始化，成员变量的值是随机值。</p>
<ul>
<li>声明对象数组, 每一个元素都是对象, 一定要为对象所属定义一个无参的构造函数，<strong>每一个数组元素都要调用构造函数。</strong></li>
</ul>
</li>
</ul>
<p>如 类MyDate为例：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>myDate A[<span style="color:#8f3f71">3</span>];   <span style="color:#928374;font-style:italic">// 此时调用无参的构造函数3次，为数组A的3个元素进行初始化。 A[0]=A[1]=A[2]的值都是1970/2/14
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate B[<span style="color:#8f3f71">3</span>] <span style="color:#af3a03">=</span> {myDate(<span style="color:#8f3f71">1980</span>),myDate(<span style="color:#8f3f71">1990</span>,<span style="color:#8f3f71">12</span>),myDate(<span style="color:#8f3f71">1980</span>,<span style="color:#8f3f71">9</span>,<span style="color:#8f3f71">10</span>)}; 
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//    A[0]= 1980/2/14  A[1]= 1990/12/14    A[2] = 1980/9/10
</span></span></span></code></pre></div><p>特例, 声明数组时给各元素赋初值, 不用无参构造函数</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       Student stud;
</span></span><span style="display:flex;"><span>       stud.printStudent();                           <span style="color:#928374;font-style:italic">//输出默认值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       stud.setName(<span style="color:#79740e">&#34;111&#34;</span>);                           <span style="color:#928374;font-style:italic">//姓名改为111
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       stud.printStudent();                           <span style="color:#928374;font-style:italic">//输出修改后的值 111
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       
</span></span><span style="display:flex;"><span>       Student <span style="color:#af3a03">*</span>spointer[<span style="color:#8f3f71">2</span>] <span style="color:#af3a03">=</span> {<span style="color:#af3a03">new</span> Student(), <span style="color:#af3a03">&amp;</span>stud}; <span style="color:#928374;font-style:italic">//初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       Student sy[<span style="color:#8f3f71">2</span>] <span style="color:#af3a03">=</span> {Student(), stud};             <span style="color:#928374;font-style:italic">//初始化 分配新的内存地址
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">2</span>; i<span style="color:#af3a03">++</span>)                    <span style="color:#928374;font-style:italic">//使用指针输出指针指向的对象的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         spointer[i]<span style="color:#af3a03">-&gt;</span>printStudent();                 <span style="color:#928374;font-style:italic">//姓名111
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">2</span>; i<span style="color:#af3a03">++</span>)                    <span style="color:#928374;font-style:italic">//使用点运算符输出各值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         sy[i].printStudent();                        <span style="color:#928374;font-style:italic">//姓名111
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         
</span></span><span style="display:flex;"><span>       stud.setName(<span style="color:#79740e">&#34;222&#34;</span>);                           <span style="color:#928374;font-style:italic">//姓名222
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">2</span>; i<span style="color:#af3a03">++</span>)                    <span style="color:#928374;font-style:italic">//sp[1]指向的对象的值改变
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         spointer[i]<span style="color:#af3a03">-&gt;</span>printStudent();                 <span style="color:#928374;font-style:italic">//姓名222
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         
</span></span><span style="display:flex;"><span>       spointer[<span style="color:#8f3f71">0</span>]<span style="color:#af3a03">-&gt;</span>setName(<span style="color:#79740e">&#34;333&#34;</span>);                   <span style="color:#928374;font-style:italic">//影响student的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       spointer[<span style="color:#8f3f71">1</span>]<span style="color:#af3a03">-&gt;</span>setName(<span style="color:#79740e">&#34;444&#34;</span>);                   <span style="color:#928374;font-style:italic">//影响stud的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">2</span>; i<span style="color:#af3a03">++</span>)                    <span style="color:#928374;font-style:italic">//指向对象的值都改变
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         spointer[i]<span style="color:#af3a03">-&gt;</span>printStudent();                 <span style="color:#928374;font-style:italic">// 姓名444
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       stud.printStudent();                           <span style="color:#928374;font-style:italic">//值变成 姓名444 生日1970
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">2</span>; i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>         sy[i].printStudent(); <span style="color:#928374;font-style:italic">//值不变
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#928374;font-style:italic">// 姓名NoName 生日1970
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#928374;font-style:italic">// 姓名111 生日1970
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><h5 id="复制构造函数与类型转换构造函数"><strong>复制构造函数与类型转换构造函数</strong><a hidden class="anchor" aria-hidden="true" href="#复制构造函数与类型转换构造函数">#</a></h5>
<ul>
<li>
<p>也叫拷贝构造函数，作用：<strong>使用一个已存在的对象去初始化另一个新创建的对象</strong></p>
</li>
<li>
<p>如果类中没有给出复制构造函数，那么编译器会自动生成一个默认复制构造函数</p>
<ul>
<li><strong>复制构造函数只有一个参数</strong>，参数是引用类自己的对象，<strong>形参是本类对象的引用</strong></li>
</ul>
</li>
<li>
<p>对于类 A ，复制构造函数的原型如下</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 为了不改变原有对象，使用const限制
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>A<span style="color:#af3a03">::</span>A(<span style="color:#af3a03">const</span> A<span style="color:#af3a03">&amp;</span>);    <span style="color:#928374;font-style:italic">// 对象的引用作为形参
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>A<span style="color:#af3a03">::</span>A(A<span style="color:#af3a03">&amp;</span>);
</span></span></code></pre></div><ul>
<li>声明和实现复制构造函数的格式</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> 类名{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    	类名(参数表);				<span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    	类名(类名 <span style="color:#af3a03">&amp;</span> 对象名);	 <span style="color:#928374;font-style:italic">//复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      ...
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>类名<span style="color:#af3a03">::</span>类名(类名 <span style="color:#af3a03">&amp;</span> 对象名) <span style="color:#928374;font-style:italic">//复制构造函数的实现
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>	函数体
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 在类Student中声明复制构造函数的原型
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student(<span style="color:#af3a03">const</span> Student <span style="color:#af3a03">&amp;</span>s);
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 赋值构造函数的函数体如下
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student<span style="color:#af3a03">::</span>Student(<span style="color:#af3a03">const</span> Student <span style="color:#af3a03">&amp;</span>s){
</span></span><span style="display:flex;"><span>	name <span style="color:#af3a03">=</span> <span style="color:#79740e">&#34;copy&#34;</span> <span style="color:#af3a03">+</span> s.name;
</span></span><span style="display:flex;"><span>	birthday <span style="color:#af3a03">=</span> s.birthday;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 主函数有如下的语句
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student stud;  <span style="color:#928374;font-style:italic">// 定义对象stud并调用构造函数初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student <span style="color:#b57614">stud2</span>(stud); <span style="color:#928374;font-style:italic">// 定义对象stud2并调用复制构造函数初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student stud3 <span style="color:#af3a03">=</span> stud; <span style="color:#928374;font-style:italic">// 定义对象stud3 并调用复制构造函数初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student ss[<span style="color:#8f3f71">3</span>] <span style="color:#af3a03">=</span> {Student(),stud,Student(stud)}; 
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">/* Student()调用构造函数为ss[0]初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"> stud，Student(stud)作用一样，都是调用复制构造函数为ss[1]和ss[2]初始化，结果也一样的*/</span>
</span></span></code></pre></div><h6 id="调用复制构造函数">调用复制构造函数<a hidden class="anchor" aria-hidden="true" href="#调用复制构造函数">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>Student stud;
</span></span><span style="display:flex;"><span>Student ss[<span style="color:#8f3f71">2</span>] <span style="color:#af3a03">=</span> {stud,Student()}; <span style="color:#928374;font-style:italic">// 创建ss[0]中的对象时，用到了默认复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>第二句等同于如下三句：
</span></span><span style="display:flex;"><span>Student ss[<span style="color:#8f3f71">2</span>];
</span></span><span style="display:flex;"><span>ss[<span style="color:#8f3f71">0</span>] <span style="color:#af3a03">=</span> Student(stud);  <span style="color:#928374;font-style:italic">// 调用默认复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>ss[<span style="color:#8f3f71">1</span>] <span style="color:#af3a03">=</span> Student();   <span style="color:#928374;font-style:italic">// 调用构造函数
</span></span></span></code></pre></div><ul>
<li>自动调用复制函数的三种情况</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     类名 对象名<span style="color:#8f3f71">2</span>(对象名<span style="color:#8f3f71">1</span>);
</span></span><span style="display:flex;"><span>     类名 对象名<span style="color:#8f3f71">2</span> <span style="color:#af3a03">=</span> 对象名<span style="color:#8f3f71">1</span>;
</span></span></code></pre></div><pre><code>1.用一个对象去初始化本类另一个对象
2. 如果函数F 的参数是类A 的对象, 调用F 时, 会调用类 A 的复制构造函数
3. 如果函数返回值是类A 的对象, 函数返回时会调用类 A 的复制构造函数
</code></pre>
<p>注意: 复制构造函数的参数表中加上 const 更好</p>
<h6 id="类型转换构造函数"><strong>类型转换构造函数</strong><a hidden class="anchor" aria-hidden="true" href="#类型转换构造函数">#</a></h6>
<ul>
<li>如果构造函数只有一个参数, 则可以看做类型转换构造函数, 作用是进行类型自动转换</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>     <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>     <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">class</span> Demo
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">int</span> id;
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>       Demo(<span style="color:#b57614">int</span> i)
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>         id <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;id=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> id <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">printDemo</span>();
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">~</span>Demo()
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;id=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> id <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;析构函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl; <span style="color:#928374;font-style:italic">//下节介绍
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       }
</span></span><span style="display:flex;"><span>     };
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">void</span> Demo<span style="color:#af3a03">::</span>printDemo()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;id=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> id <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       Demo d4(<span style="color:#8f3f71">4</span>); <span style="color:#928374;font-style:italic">//主函数内定义
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       d4.printDemo();
</span></span><span style="display:flex;"><span>       d4 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">6</span>; <span style="color:#928374;font-style:italic">//可看作是将整型数6 转为Demo 对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       d4.printDemo();
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><h4 id="32-析构函数">3.2 析构函数<a hidden class="anchor" aria-hidden="true" href="#32-析构函数">#</a></h4>
<ul>
<li>成员函数的一种</li>
<li>名字与类名相同</li>
</ul>
<p><strong>析构函数的作用：在对象在消亡时自动调用析构函数，释放由析构函数分配的内存</strong></p>
<ol>
<li>一个类仅有一个析构函数，且不能声明参数<strong>无参数, 无返回值，不能重载</strong>。</li>
<li>如果没有定义析构函数，则自动生成默认的析构函数，默认的析构函数的函数体为空。</li>
<li>使用new运算符动态分配了内存空间，则在析构函数中应使用delete释放掉这部分占用的空间。</li>
<li>先后创建了几个对象时，系统安装<strong>后创建先析构</strong>的原则析构对象。当使用delete调用析构对象时，则按delete的顺序析构。</li>
<li>析构函数在对象的生存期结束时被编译系统自动调用，然后对象占用的内存被回收。</li>
</ol>
<p>析构函数在类体中的声明形式</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//声明形式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>类名前加 <span style="color:#af3a03">~</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// 定义形式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>类名<span style="color:#af3a03">::~</span> 类名()[]
</span></span></code></pre></div><ul>
<li>
<p>对象数组与 delete 语句</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Student <span style="color:#af3a03">*</span>ss <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> Student[<span style="color:#8f3f71">2</span>];
</span></span><span style="display:flex;"><span><span style="color:#af3a03">delete</span> []ss;
</span></span></code></pre></div></li>
<li>
<p>指针数组与 delete 语句</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Student <span style="color:#af3a03">*</span>ss[<span style="color:#8f3f71">2</span>] <span style="color:#af3a03">=</span> {<span style="color:#af3a03">new</span> <span style="color:#b57614">Student</span>(),<span style="color:#af3a03">new</span> Student()};
</span></span><span style="display:flex;"><span><span style="color:#af3a03">delete</span> ss[<span style="color:#8f3f71">0</span>];
</span></span><span style="display:flex;"><span><span style="color:#af3a03">delete</span> ss[<span style="color:#8f3f71">1</span>];
</span></span></code></pre></div></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>- 程序填空题
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>```C++
</span></span><span style="display:flex;"><span>  #include &lt;iostream&gt;
</span></span><span style="display:flex;"><span>  #include &lt;string&gt;
</span></span><span style="display:flex;"><span>  using namespace std;
</span></span><span style="display:flex;"><span>  class Samp{
</span></span><span style="display:flex;"><span>	  public:
</span></span><span style="display:flex;"><span>	    void Setij(int a, int b){
</span></span><span style="display:flex;"><span>	      i = a;
</span></span><span style="display:flex;"><span>	      j = b;
</span></span><span style="display:flex;"><span>	      cout &lt;&lt; &#34;i=&#34; &lt;&lt; i &lt;&lt; &#34;构造函数&#34; &lt;&lt; endl;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    void printDemo();
</span></span><span style="display:flex;"><span>	    ~Samp(){
</span></span><span style="display:flex;"><span>	      cout &lt;&lt; &#34;i=&#34; &lt;&lt; i &lt;&lt; &#34;析构函数&#34; &lt;&lt; endl;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    int GetMuti(){
</span></span><span style="display:flex;"><span>	      return i * j;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	  
</span></span><span style="display:flex;"><span>	  protected:
</span></span><span style="display:flex;"><span>	    int i;
</span></span><span style="display:flex;"><span>	    int j;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  int main(){
</span></span><span style="display:flex;"><span>    Samp *p;
</span></span><span style="display:flex;"><span>    p = new Samp[5];
</span></span><span style="display:flex;"><span>    if (!p)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout &lt;&lt; &#34;内存分配错误\n&#34;;
</span></span><span style="display:flex;"><span>      return 1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    for (int j = 0; j &lt; 5; j++)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>      p[j].Setij(j, j);
</span></span><span style="display:flex;"><span>    for (int k = 0; k &lt; 5; k++)
</span></span><span style="display:flex;"><span>      cout &lt;&lt; &#34;Muti[&#34; &lt;&lt; k &lt;&lt; &#34;] 值是:&#34; &lt;&lt; p[k].GetMuti() &lt;&lt; endl;
</span></span><span style="display:flex;"><span>    delete[] p;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    return 0;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>示例2：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> myDate{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      myDate();                    <span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      myDate(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);       <span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setDate</span>(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>); <span style="color:#928374;font-style:italic">//设置日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setDate</span>(myDate);        <span style="color:#928374;font-style:italic">//设置日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      myDate <span style="color:#b57614">getDate</span>();            <span style="color:#928374;font-style:italic">//获取日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setYear</span>(<span style="color:#b57614">int</span>);           <span style="color:#928374;font-style:italic">//设置年
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">int</span> <span style="color:#b57614">getMonth</span>();              <span style="color:#928374;font-style:italic">//获取月
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">printDate</span>() <span style="color:#af3a03">const</span>;      <span style="color:#928374;font-style:italic">//打印日期
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">int</span> year, month, day; <span style="color:#928374;font-style:italic">//成员变量,年月日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//类体外定义成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>myDate<span style="color:#af3a03">::</span>myDate(){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1970</span>, month <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>, day <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(<span style="color:#b57614">int</span> y, <span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> d){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>  cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;mydate构造函数1&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::~</span>mydate(){  <span style="color:#928374;font-style:italic">// 定义析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;mydate析构函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>} 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setDate(<span style="color:#b57614">int</span> y, <span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> d){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> d;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setDate(myDate oneD){
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> oneD.year;
</span></span><span style="display:flex;"><span>  month <span style="color:#af3a03">=</span> oneD.month;
</span></span><span style="display:flex;"><span>  day <span style="color:#af3a03">=</span> oneD.day;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate myDate<span style="color:#af3a03">::</span>getDate(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>setYear(<span style="color:#b57614">int</span> y) {
</span></span><span style="display:flex;"><span>  year <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> myDate<span style="color:#af3a03">::</span>getMonth(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> month;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>printDate() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> year <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;/&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> month <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;/&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> day;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> Student{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      Student();                       <span style="color:#928374;font-style:italic">//构造函数,无参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      Student(string);                 <span style="color:#928374;font-style:italic">//构造函数,带一个参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setStudent</span>(string, myDate); <span style="color:#928374;font-style:italic">//设置学生信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setName</span>(string);            <span style="color:#928374;font-style:italic">//设置姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      string <span style="color:#b57614">getName</span>();                <span style="color:#928374;font-style:italic">//获取姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">setBirthday</span>(myDate);        <span style="color:#928374;font-style:italic">//设置生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      myDate <span style="color:#b57614">getBirthday</span>();            <span style="color:#928374;font-style:italic">//获取生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#b57614">void</span> <span style="color:#b57614">printStudent</span>() <span style="color:#af3a03">const</span>;       <span style="color:#928374;font-style:italic">//打印信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      Student(<span style="color:#af3a03">const</span> Student <span style="color:#af3a03">&amp;</span>s);       <span style="color:#928374;font-style:italic">//声明复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      string name;     <span style="color:#928374;font-style:italic">//姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      myDate birthday; <span style="color:#928374;font-style:italic">//生日
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//定义构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student<span style="color:#af3a03">::</span>Student() <span style="color:#af3a03">:</span> name(<span style="color:#79740e">&#34;NoName&#34;</span>), birthday(myDate()){
</span></span><span style="display:flex;"><span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;Student构造函数0&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>};  <span style="color:#928374;font-style:italic">//添加,不带参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student<span style="color:#af3a03">::</span>Student(string n) <span style="color:#af3a03">:</span> name(n), birthday(myDate()){}; <span style="color:#928374;font-style:italic">//添加,带一个参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//类体外定义成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>Student<span style="color:#af3a03">::</span>Student(<span style="color:#af3a03">const</span> Student <span style="color:#af3a03">&amp;</span>s){ <span style="color:#928374;font-style:italic">//自定义复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  name <span style="color:#af3a03">=</span> <span style="color:#79740e">&#34;Copy&#34;</span> <span style="color:#af3a03">+</span> s.name;
</span></span><span style="display:flex;"><span>  birthday <span style="color:#af3a03">=</span> s.birthday;
</span></span><span style="display:flex;"><span>  cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;Student复制构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Student<span style="color:#af3a03">::~</span>Student(){  <span style="color:#928374;font-style:italic">// 定义析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;Student析构函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setStudent(string s, myDate d){
</span></span><span style="display:flex;"><span>  name <span style="color:#af3a03">=</span> s;
</span></span><span style="display:flex;"><span>  birthday.setDate(d);
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setName(string n){
</span></span><span style="display:flex;"><span>  name <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>string Student<span style="color:#af3a03">::</span>getName(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> name;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>setBirthday(myDate d){
</span></span><span style="display:flex;"><span>  birthday.setDate(d);
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate Student<span style="color:#af3a03">::</span>getBirthday(){
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> birthday;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Student<span style="color:#af3a03">::</span>printStudent() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;姓名:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> name <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">生日:&#34;</span>;
</span></span><span style="display:flex;"><span>  birthday.printDate(); <span style="color:#928374;font-style:italic">//调用类myDate 的成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>	Student stud;
</span></span><span style="display:flex;"><span>	<span style="color:#928374;font-style:italic">// myDateg构造函数1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// Student构造函数0
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>	stud.printstudent();   <span style="color:#928374;font-style:italic">// 输出默认值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// 姓名：Noname生日：1970/1/1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	Student sy[<span style="color:#8f3f71">2</span>] <span style="color:#af3a03">=</span> {Student(),stud};
</span></span><span style="display:flex;"><span>	<span style="color:#928374;font-style:italic">// myDateg构造函数1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// Student构造函数0
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// myDateg构造函数1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// Student复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">for</span>(<span style="color:#b57614">int</span> i<span style="color:#af3a03">=</span><span style="color:#8f3f71">0</span>;i<span style="color:#af3a03">&lt;</span><span style="color:#8f3f71">2</span>;i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>			sy[i].printStudent();
</span></span><span style="display:flex;"><span>			<span style="color:#928374;font-style:italic">// 姓名：Noname生日：1970/1/1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>			<span style="color:#928374;font-style:italic">// 姓名：copyNoname生日：1970/1/1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#928374;font-style:italic">// Student析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// mydate析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// Student析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// mydate析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// Student析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#928374;font-style:italic">// mydate析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>对象数组与delete语句
</span></span><span style="display:flex;"><span>	Student <span style="color:#af3a03">*</span>ss <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> Student[<span style="color:#8f3f71">2</span>];   <span style="color:#928374;font-style:italic">// ss指向新申请对象数组
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">for</span>(<span style="color:#b57614">int</span> i<span style="color:#af3a03">=</span><span style="color:#8f3f71">0</span>;i<span style="color:#af3a03">&lt;</span><span style="color:#8f3f71">2</span>;i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>		(ss<span style="color:#af3a03">+</span>i)<span style="color:#af3a03">-&gt;</span>printStudent();
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">delete</span> []ss;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>对象指针数组与delete语句
</span></span><span style="display:flex;"><span>	Student <span style="color:#af3a03">*</span>ss[<span style="color:#8f3f71">2</span>] <span style="color:#af3a03">=</span> {<span style="color:#af3a03">new</span> Student(),<span style="color:#af3a03">new</span> Student()};  <span style="color:#928374;font-style:italic">// ss是对象指针数组
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">for</span>(<span style="color:#b57614">int</span> i<span style="color:#af3a03">=</span><span style="color:#8f3f71">0</span>;i<span style="color:#af3a03">&lt;</span><span style="color:#8f3f71">2</span>;i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>		ss[i]<span style="color:#af3a03">-&gt;</span>printStudent();
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">delete</span> ss[<span style="color:#8f3f71">0</span>];
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">delete</span> ss[<span style="color:#8f3f71">1</span>];
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="33-类的静态成员常考">3.3 类的静态成员（常考）<a hidden class="anchor" aria-hidden="true" href="#33-类的静态成员常考">#</a></h4>
<h5 id="静态变量">静态变量<a hidden class="anchor" aria-hidden="true" href="#静态变量">#</a></h5>
<pre><code>局部自动变量每次使用需重新进行初始化。
</code></pre>
<ul>
<li>
<p>static 说明自动变量，分为<strong>静态全局变量</strong>和<strong>静态局部变量</strong></p>
</li>
<li>
<p>静态变量均存储在全局数据区，静态局部变量只执行一次初始化，如果静态变量未初始化值，则系统将其初始为0</p>
</li>
<li>
<p>自动变量和静态变量的使用</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">static</span> <span style="color:#b57614">int</span> glos <span style="color:#af3a03">=</span> <span style="color:#8f3f71">100</span>;  <span style="color:#928374;font-style:italic">// 静态全局变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#b57614">void</span> <span style="color:#b57614">f</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>; <span style="color:#928374;font-style:italic">// 局部自动变量a
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">static</span> <span style="color:#b57614">int</span> fs <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>;  <span style="color:#928374;font-style:italic">// 静态局部变量fs，完成初始化
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;在f中:a(自动变量)=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; fs(静态)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> fs <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; glos(静态)=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> glos <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  a <span style="color:#af3a03">+=</span> <span style="color:#8f3f71">2</span>;
</span></span><span style="display:flex;"><span>  fs <span style="color:#af3a03">+=</span> <span style="color:#8f3f71">2</span>;
</span></span><span style="display:flex;"><span>  glos <span style="color:#af3a03">+=</span> <span style="color:#8f3f71">10</span>;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;在f中:a(自动变量)=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; fs(静态)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> fs <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; glos(静态)=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> glos <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">static</span> <span style="color:#b57614">int</span> ms <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1</span>; i <span style="color:#af3a03">&lt;=</span> <span style="color:#8f3f71">3</span>; i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>    f();
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;ms=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> ms <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;glos=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> glos <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h5 id="类的静态成员">类的静态成员<a hidden class="anchor" aria-hidden="true" href="#类的静态成员">#</a></h5>
<h6 id="静态成员变量">静态成员变量<a hidden class="anchor" aria-hidden="true" href="#静态成员变量">#</a></h6>
<ol>
<li>在类体内定义类的成员时，在前面添加 static 关键字。</li>
<li>在类定义中声明静态成员变量, <strong>必须在类体外定义成员静态变量的初值</strong>，不能在类体内赋值。</li>
<li>在类体外定义成员函数时，前面也不能加static.</li>
<li><strong>类的静态成员被类的所有对象共享</strong></li>
<li>静态函数和静态函数之间、非静态函数和非静态函数之间是可以相互调用的，非静态成员函数内可以调用静态成员函数，<strong>但静态成员函数内不能调用非静态成员变量</strong>。</li>
</ol>
<p>在类体外给静态成员赋初值的格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>类型 类名<span style="color:#af3a03">::</span>静态成员变量 <span style="color:#af3a03">=</span> 初值;   <span style="color:#928374;font-style:italic">// 前面不能加static 
</span></span></span></code></pre></div><p>访问静态成员</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>类名<span style="color:#af3a03">::</span>静态成员名
</span></span><span style="display:flex;"><span>对象名.静态成员名
</span></span><span style="display:flex;"><span>对象指针<span style="color:#af3a03">-&gt;</span>静态成员名
</span></span></code></pre></div><h6 id="静态成员函数">静态成员函数<a hidden class="anchor" aria-hidden="true" href="#静态成员函数">#</a></h6>
<ol>
<li>可以不指向某个具体的对象，只与类名连用</li>
<li>在没有建立对象之前，静态成员就已存在</li>
<li>静态成员是类的成员，不是对象的成员</li>
<li>类的静态成员被类的所有对象共享，它们被存储于一个公用内存中</li>
<li>**类的静态成员函数没有 this 指针, 只能通过对象名或指向对象的指针访问类的数据成员</li>
<li>静态成员函数不能被说明为虚函数</li>
<li>静态成员函数不能直接访问非静态函数</li>
</ol>
<p>静态对象的构造函数在代码执行过程中，在第一次遇到它的变量定义并初始化时被调用，但直到整个程序结束之前仅调用一次；而普通对象则是遇到变量定义就被调用，遇到几次调用几次。</p>
<p>静态对象的析构函数在整个程序退出之前被调用，同样也是只调用一次；而普通对象则是变量定义几次，则析构几次。</p>
<ul>
<li>程序填空题</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span> <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span> <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span> <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span> <span style="color:#af3a03">class</span> Test{
</span></span><span style="display:flex;"><span>	 <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  ___ <span style="color:#af3a03">static</span> <span style="color:#b57614">int</span> x;___
</span></span><span style="display:flex;"><span>	   <span style="color:#b57614">Test</span>(<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>){
</span></span><span style="display:flex;"><span>	     x <span style="color:#af3a03">=</span> i <span style="color:#af3a03">+</span> x;
</span></span><span style="display:flex;"><span>	   }
</span></span><span style="display:flex;"><span>	   <span style="color:#b57614">int</span> <span style="color:#b57614">Getnum</span>(){
</span></span><span style="display:flex;"><span>	     <span style="color:#af3a03">return</span> Test<span style="color:#af3a03">::</span>x <span style="color:#af3a03">+</span> <span style="color:#8f3f71">7</span>;
</span></span><span style="display:flex;"><span>	   }
</span></span><span style="display:flex;"><span> };
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>__int Test<span style="color:#af3a03">::</span>x <span style="color:#af3a03">=</span> <span style="color:#8f3f71">83</span>;__
</span></span><span style="display:flex;"><span> <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>   Test test;
</span></span><span style="display:flex;"><span>   cout <span style="color:#af3a03">&lt;&lt;</span> test.Getnum() <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>   <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><h4 id="34-变量及对象的生存期和作用域">3.4 变量及对象的生存期和作用域<a hidden class="anchor" aria-hidden="true" href="#34-变量及对象的生存期和作用域">#</a></h4>
<ol>
<li>
<p>变量的生存期和作用域</p>
<ul>
<li>
<p>生存期：分配内存到释放内存</p>
</li>
<li>
<p>作用域：变量的有效范围</p>
<ul>
<li>全局域
<ul>
<li>程序作用域
<ul>
<li>多文件作用域, extern 说明的外部变量和外部函数</li>
</ul>
</li>
<li>文件作用域
<ul>
<li>单文件作用域, 文件内函数外的变量/函数</li>
</ul>
</li>
</ul>
</li>
<li>局部域
<ul>
<li>类作用域</li>
<li>函数作用域</li>
<li>块作用域</li>
<li>函数原型作用域
<ul>
<li>不是定义函数, 而是声明函数, 函数原型形参作用域只在声明中</li>
<li>所以通常只要声明形参的个数和类型, 省略参数名</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>重名标识符，不同作用域允许重名</p>
<ol>
<li>无包含关系，互不影响</li>
<li>有包含关系，在哪定义在哪有效</li>
</ol>
</li>
</ul>
</li>
<li>
<p>类对象的生存期和作用域</p>
<ul>
<li>类对象在生成时调用构造函数, 在消亡（销毁）时调用析构函数</li>
<li>作用域越大的越晚销毁</li>
</ul>
</li>
</ol>
<h4 id="35-常量成员和常引用成员">3.5 常量成员和常引用成员<a hidden class="anchor" aria-hidden="true" href="#35-常量成员和常引用成员">#</a></h4>
<h5 id="类常量成员变量">类常量成员变量<a hidden class="anchor" aria-hidden="true" href="#类常量成员变量">#</a></h5>
<p><strong>类常量成员变量：const修饰的类的数据成员变量</strong>，必须在构造函数的成员初始化列表中进行初始化</p>
<p>一般格式：<code>const 数据类型 类常量成员变量 = 表达式;</code></p>
<h5 id="常量对象">常量对象<a hidden class="anchor" aria-hidden="true" href="#常量对象">#</a></h5>
<p><strong>常量对象</strong>：使用 const 声明的对象就是常对象，必须在声明的同时进行初始化，而且不能更新。</p>
<p>定义常量对象的一般格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">const</span> 类名 对象名(参数表);
</span></span><span style="display:flex;"><span>类名 <span style="color:#af3a03">const</span> 对象名(参数表);
</span></span><span style="display:flex;"><span>myDate <span style="color:#af3a03">const</span> <span style="color:#b57614">a1</span>(<span style="color:#8f3f71">1997</span>,<span style="color:#8f3f71">12</span>,<span style="color:#8f3f71">20</span>);  <span style="color:#928374;font-style:italic">// 定义myDate类常量对象a1并初始化
</span></span></span></code></pre></div><ol>
<li>常量对象只能调用常用常量，常量对象各属性值不能修改。</li>
<li><strong>常量对象只能调用常量成员函数</strong>，不能调用非常量函数，普通对象可以调用所有成员函数。</li>
</ol>
<h5 id="常量函数">常量函数<a hidden class="anchor" aria-hidden="true" href="#常量函数">#</a></h5>
<p><strong>常量函数</strong>：用const声明、定义的成员函数</p>
<p>声明及定义的一般格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>在类体内定义常量函数为内联函数时的形式：
</span></span><span style="display:flex;"><span>	类型标识符 函数名(参数列表) <span style="color:#af3a03">const</span>{ ...函数体 }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>在类体内声明，类体外定义时的形式：
</span></span><span style="display:flex;"><span>声明形式：
</span></span><span style="display:flex;"><span>	类型标识符 函数名(参数列表) <span style="color:#af3a03">const</span>;
</span></span><span style="display:flex;"><span>定义形式：
</span></span><span style="display:flex;"><span>	类型标识符 类名<span style="color:#af3a03">::</span>函数名(参数列表) <span style="color:#af3a03">const</span> {...函数体}
</span></span></code></pre></div><p>常量函数不能更新对象的数据成员，也不能调用该类中没有用const修饰的成员函数。</p>
<h5 id="常引用作为函数的参数">常引用作为函数的参数<a hidden class="anchor" aria-hidden="true" href="#常引用作为函数的参数">#</a></h5>
<p>使用引用作为函数参数，传送的是地址，所以形参改变，则实参跟着改变，但如不希望函数改变对象的值，就要使用<strong>常引用作为参数</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">Display</span>(<span style="color:#af3a03">const</span> <span style="color:#b57614">double</span> <span style="color:#af3a03">&amp;</span>r){  <span style="color:#928374;font-style:italic">// Display 只能使用而不能改变r所引用的对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	cout <span style="color:#af3a03">&lt;&lt;</span> r <span style="color:#af3a03">&lt;&lt;</span> endl;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>常量成员变量及常量成员函数的使用</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> constClass{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">const</span> <span style="color:#b57614">int</span> conMbr; <span style="color:#928374;font-style:italic">//类中的常量成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">int</span> Mbr;          <span style="color:#928374;font-style:italic">//普通成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	    constClass()<span style="color:#af3a03">:</span>conMbr(<span style="color:#8f3f71">0</span>), Mbr(<span style="color:#8f3f71">100</span>) {} <span style="color:#928374;font-style:italic">//初始化列表处给初始值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	    constClass(<span style="color:#b57614">int</span> i)<span style="color:#af3a03">:</span>conMbr(i){         <span style="color:#928374;font-style:italic">//初始化列表处给初始值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      Mbr <span style="color:#af3a03">=</span> <span style="color:#8f3f71">200</span>;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">void</span> <span style="color:#b57614">printConst</span>(){
</span></span><span style="display:flex;"><span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;conMbr=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> conMbr <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,Mbr&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> Mbr <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">int</span> <span style="color:#b57614">getConst</span>(){
</span></span><span style="display:flex;"><span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;调用非常量函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	      <span style="color:#af3a03">return</span> conMbr;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">int</span> <span style="color:#b57614">getConst</span>() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;调用常量函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	      <span style="color:#af3a03">return</span> conMbr;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">int</span> <span style="color:#b57614">getValue</span>(){
</span></span><span style="display:flex;"><span>	      <span style="color:#af3a03">return</span> Mbr;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">void</span> <span style="color:#b57614">processConst</span>(){
</span></span><span style="display:flex;"><span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;--在processConst函数中 非常量--&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	      <span style="color:#b57614">int</span> x <span style="color:#af3a03">=</span> <span style="color:#8f3f71">2</span> <span style="color:#af3a03">*</span> conMbr <span style="color:#af3a03">+</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;x=2*conMbr+1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> endl; <span style="color:#928374;font-style:italic">//可以读取 conMbr
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      <span style="color:#928374;font-style:italic">//conMbr++; //错误, 不能更改常量成员变量 conMbr的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      Mbr<span style="color:#af3a03">++</span>; <span style="color:#928374;font-style:italic">//可以修改非常量成员 Mbr的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Mbr=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> Mbr <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">void</span> <span style="color:#b57614">processConst</span>() <span style="color:#af3a03">const</span>{
</span></span><span style="display:flex;"><span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;--在processConst函数中 常量--&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	      <span style="color:#b57614">int</span> x <span style="color:#af3a03">=</span> conMbr <span style="color:#af3a03">+</span> <span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;x=conMbr+1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> endl; <span style="color:#928374;font-style:italic">//可以读取 conMbr
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      <span style="color:#928374;font-style:italic">//conMbr++; //错误, 不能更改常量成员变量 conMbr的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      <span style="color:#928374;font-style:italic">// Mbr++; //不能修改非常量成员 Mbr的值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Mbr=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> Mbr <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    constClass ob1(<span style="color:#8f3f71">123</span>), ob2;
</span></span><span style="display:flex;"><span>    ob1.printConst();  <span style="color:#928374;font-style:italic">// conMbr = 123;Mbr = 200
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;ob2.getConst()=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> ob2.getConst() <span style="color:#af3a03">&lt;&lt;</span> endl;  <span style="color:#928374;font-style:italic">// 调用非常量函数 ob2.getConst()= 0
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    ob2.processConst();  <span style="color:#928374;font-style:italic">// --在processConst函数中 非常量-- \n  x=2*conMbr+1= 1  \n  Mbr=101
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">const</span> constClass ob3(<span style="color:#8f3f71">20</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;ob3.getConst()=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> ob3.getConst() <span style="color:#af3a03">&lt;&lt;</span> endl;  <span style="color:#928374;font-style:italic">// 调用常量函数 ob3.getConst()=20
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    ob3.processConst();   <span style="color:#928374;font-style:italic">//-在processConst函数中 常量--  \n  x=conMbr+1= 21 \n Mbr=200
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="352-const修饰指针变量">3.5.2 const修饰指针变量<a hidden class="anchor" aria-hidden="true" href="#352-const修饰指针变量">#</a></h5>
<ol>
<li>唯一的 const 位于* 左侧，表示指针所指数据是常量，数据不能通过指针改变，但指针本身是常量</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">const</span> <span style="color:#af3a03">*</span>p
</span></span></code></pre></div><ol start="2">
<li>唯一的 const 位于* 右侧，表示指针本身是常量，指针不能指向其他内存地址，但指针所指的数据可以通过指针修改</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#af3a03">*</span> <span style="color:#af3a03">const</span> p  
</span></span></code></pre></div><ol start="3">
<li>
<ul>
<li>左右各一个const，表示指针和指向都是常量，指向的值和指针都不能修改。</li>
</ul>
</li>
</ol>
<h4 id="36-成员对象和封闭类">3.6 成员对象和封闭类<a hidden class="anchor" aria-hidden="true" href="#36-成员对象和封闭类">#</a></h4>
<p><strong>一个类的成员变量如果是另一个类的对象, 称该变量为成员对象， 包含成员对象的类叫做封闭类。</strong></p>
<p>例题： 类Student和类myDate，类Student中的成员变量 birthday 是类 myDate的对象，<strong>birthday就是成员对象，Student是封闭类。</strong></p>
<h5 id="封闭类构造函数和初始化列表">封闭类构造函数和初始化列表<a hidden class="anchor" aria-hidden="true" href="#封闭类构造函数和初始化列表">#</a></h5>
<ul>
<li>
<p>定义封闭类的的构造函数时, 需要添加<strong>初始化列表</strong>, 指明要调用成员对象的那个构造函数</p>
</li>
<li>
<p>对于成员对象，初始化列表的“参数表”中列出的成员对象构造函数（指明了该成员对象如何初始化）</p>
<ol>
<li>封闭类对象生成时，<strong>先执行成员对象的构造函数，再执行封闭类自己的的构造函数</strong>;</li>
<li><strong>成员对象构造函数的执行顺序与成员对象在类定义中的说明顺序相同</strong>，析构函数的调用则相反。</li>
<li>销毁时先执行封闭类析构函数, 再执行成员对象的析构函数；</li>
<li><strong>成员对象析构函数的执行次序：谁先构造，后析构，后构造先析构。</strong></li>
</ol>
</li>
</ul>
<p>添加初始化列表格式</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>封闭类名<span style="color:#af3a03">::</span>构造函数名(参数表)<span style="color:#af3a03">:</span>成员变量<span style="color:#8f3f71">1</span>(参数表),成员变量<span style="color:#8f3f71">2</span>(参数表),... {...}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Student<span style="color:#af3a03">::</span>Student(string n)<span style="color:#af3a03">:</span>name,birthday(myDate()){ ... }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> CTyre{   <span style="color:#928374;font-style:italic">// 轮胎类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">int</span> radius; <span style="color:#928374;font-style:italic">// 半径
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#b57614">int</span> width; <span style="color:#928374;font-style:italic">// 宽度
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	    CTyre()<span style="color:#af3a03">:</span>radius(<span style="color:#8f3f71">16</span>),width(<span style="color:#8f3f71">185</span>){} <span style="color:#928374;font-style:italic">// 定义构造函数1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	    CTyre(<span style="color:#b57614">int</span> r,<span style="color:#b57614">int</span> w)<span style="color:#af3a03">:</span>radius(r),width(w){} <span style="color:#928374;font-style:italic">// 定义构造函数2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#b57614">int</span> <span style="color:#b57614">getRadius</span>(){<span style="color:#af3a03">return</span> radius;}  <span style="color:#928374;font-style:italic">// 获取半径
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#b57614">int</span> <span style="color:#b57614">getWidth</span>(){<span style="color:#af3a03">return</span> width;}  <span style="color:#928374;font-style:italic">// 获取宽度
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> CCar{  <span style="color:#928374;font-style:italic">// 汽车类，封闭类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">int</span> price; <span style="color:#928374;font-style:italic">// 价格
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		Ctyre tyre; <span style="color:#928374;font-style:italic">// 成员对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	    CCar(); <span style="color:#928374;font-style:italic">// 声明构造函数3
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	    CCar(<span style="color:#b57614">int</span> p,<span style="color:#b57614">int</span> tr,<span style="color:#b57614">int</span> tw); <span style="color:#928374;font-style:italic">// 声明构造函数4
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#b57614">int</span> <span style="color:#b57614">getPrice</span>(){<span style="color:#af3a03">return</span> price;}  <span style="color:#928374;font-style:italic">// 获取价格
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		CTyre <span style="color:#b57614">getCTyre</span>(){<span style="color:#af3a03">return</span> tyre;}  <span style="color:#928374;font-style:italic">// 获取轮胎信息
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CCar<span style="color:#af3a03">::</span>CCar(){ <span style="color:#928374;font-style:italic">// 定义构造函数3
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	price <span style="color:#af3a03">=</span> <span style="color:#8f3f71">50010</span>;
</span></span><span style="display:flex;"><span>	CTyre();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>CCar<span style="color:#af3a03">::</span>CCar(<span style="color:#b57614">int</span> p,<span style="color:#b57614">int</span> tr,<span style="color:#b57614">int</span> tw)<span style="color:#af3a03">:</span>price(p),tyre(tr,tw){}  <span style="color:#928374;font-style:italic">// 定义构造函数4，使用初始化列表
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	CCar car(<span style="color:#8f3f71">48900</span>,<span style="color:#8f3f71">17</span>,<span style="color:#8f3f71">225</span>); <span style="color:#928374;font-style:italic">// 定义对象car并调用构造函数4初始化，需要先执行构造函数2初始化轮胎信息，在继续指向构造函数3初始化价格
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;price=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>car.getPrice();  <span style="color:#928374;font-style:italic">// 48900
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">CTyre.Radius=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>car.getCTyre().getRadius()  <span style="color:#928374;font-style:italic">// 17
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">CTyre.Width=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> car.getCTyre().getWidth() <span style="color:#af3a03">&lt;&lt;</span> endl;  <span style="color:#928374;font-style:italic">//225
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="封闭类的复制构造函数"><strong>封闭类的复制构造函数</strong><a hidden class="anchor" aria-hidden="true" href="#封闭类的复制构造函数">#</a></h5>
<p>如果封闭类的<strong>对象是用默认复制构造函数初始化</strong>的, 那么它<strong>包含的成员对象</strong>也会用复制构造函数初始化</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> A{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        A(){  <span style="color:#928374;font-style:italic">// 构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;default&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        A(A <span style="color:#af3a03">&amp;</span>a){  <span style="color:#928374;font-style:italic">// 复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;copy&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> B{  <span style="color:#928374;font-style:italic">// 封闭类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    A a;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    B b1, b2(b1);   <span style="color:#928374;font-style:italic">// default 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span> 			       <span style="color:#928374;font-style:italic">// copy
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#928374;font-style:italic">// b1: 是用类A的构造函数初始化的
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#928374;font-style:italic">// b2(b1): 是用类A的复制构造函数初始化的
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  ```
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#427b58">#### 3.7 友元
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>一个类里的私有成员和保护成员只能由类内部的成员函数访问，外部不能通过对象直接访问。但为了提高编程效率，需要<span style="color:#af3a03">**</span>允许一个类外的函数访问本类的私有成员变量<span style="color:#af3a03">**</span>，这时可将这些类或函数声明为<span style="color:#af3a03">**</span>类的友元<span style="color:#af3a03">**</span>。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">-</span>  兼顾C 语言程序设计的习惯与 C<span style="color:#af3a03">++</span> 信息隐藏的特点, 而增加的功能
</span></span><span style="display:flex;"><span><span style="color:#af3a03">-</span> 是一种类成员的访问权限
</span></span><span style="display:flex;"><span> <span style="color:#af3a03">-</span> <span style="color:#af3a03">**</span>破坏了类的封装性和信息隐藏, 但有助于数据共享, 能够提高程序运行效率<span style="color:#af3a03">**</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">-</span> `<span style="color:#af3a03">friend</span>`
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#427b58">##### 友元函数
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">**</span>把一些函数（包括全局函数和其他类的成员函数）声明为“友元”<span style="color:#af3a03">**</span>，这样那些函数就成为本类的友元函数
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f3f71">1.</span> 在类定义中声明友元函数的格式如下
</span></span><span style="display:flex;"><span>```c<span style="color:#af3a03">++</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">friend</span> 函数类型 函数名(参数列表)；  <span style="color:#928374;font-style:italic">// 针对全局函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">friend</span> 函数类型 函数所在类类名<span style="color:#af3a03">::</span>函数名(参数列表);
</span></span></code></pre></div><ol start="2">
<li>
<p>友元函数可在类中的私有或公有部分通过关键字 friend 声明或定义，但在类中声明，而在类外定义，就不能再在类外使用friend关键字。</p>
</li>
<li>
<p>友元函数应被看作类的接口的一部分，使用它的主要目的是提高程序运行效率，因为它可以直接访问对象的私有成员，从而省去调用类的相应成员函数的开销</p>
</li>
<li>
<p>友元函数的另一个优点：列的设计中不必完全再设计这个类，而是可以根据需要，通过使用友元来增加类的接口。</p>
<ul>
<li>
<p>有某类A 定义后, 将类 A 的成员函数说明为友元函数的格式如下</p>
<ul>
<li><code>friend 返回值类型 类A::类A的成员函数名(参数名);</code></li>
<li>不能把其他类的私有成员函数声明为友元函数</li>
</ul>
</li>
<li>
<p><strong>友元函数不是类的成员函数,但允许访问类的所有成员</strong></p>
<ul>
<li>在函数体中访问对象成员
<ul>
<li><code>对象名.对象成员名</code></li>
</ul>
</li>
<li>不受访问权限关键词限制</li>
</ul>
</li>
<li>
<p>类成员函数实现复数类操作</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex{ <span style="color:#928374;font-style:italic">//复数类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> real, imag; <span style="color:#928374;font-style:italic">//复数的实部和虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex();
</span></span><span style="display:flex;"><span>        myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i);
</span></span><span style="display:flex;"><span>        myComplex <span style="color:#b57614">addCom</span>(myComplex c); <span style="color:#928374;font-style:italic">//成员函数, 调用者对象与参数对象c相加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>();                 <span style="color:#928374;font-style:italic">//成员函数, 输出调用者对象的有关数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span>addCom(myComplex c){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(real <span style="color:#af3a03">+</span> c.real, imag <span style="color:#af3a03">+</span> c.imag);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> myComplex<span style="color:#af3a03">::</span>outCom(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    myComplex c1(<span style="color:#8f3f71">1</span>, <span style="color:#8f3f71">2</span>), c2(<span style="color:#8f3f71">3</span>, <span style="color:#8f3f71">4</span>), res;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1.addCom(c2); <span style="color:#928374;font-style:italic">//调用成员函数必须通过类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c1.outCom();  <span style="color:#928374;font-style:italic">// (1,2)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;+&#34;</span>;  <span style="color:#928374;font-style:italic">// +
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c2.outCom();  <span style="color:#928374;font-style:italic">// (3,4)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span>;  <span style="color:#928374;font-style:italic">//  =
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    res.outCom();  <span style="color:#928374;font-style:italic">// (4,6)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>友元函数实现复数操作</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex <span style="color:#928374;font-style:italic">//复数类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> real, imag; <span style="color:#928374;font-style:italic">//复数的实部和虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex();
</span></span><span style="display:flex;"><span>        myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#b57614">addCom</span>(myComplex c1, myComplex c2); <span style="color:#928374;font-style:italic">//友元函数, 两个参数对象相加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>(myComplex c);                     <span style="color:#928374;font-style:italic">//友元函数, 输惨参数对象数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#b57614">addCom</span>(myComplex c1, myComplex c2) <span style="color:#928374;font-style:italic">//定义函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> myComplex(c1.real <span style="color:#af3a03">+</span> c2.real, c1.imag <span style="color:#af3a03">+</span> c2.imag);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>(myComplex c) <span style="color:#928374;font-style:italic">//定义函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> c.real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> c.imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    myComplex c1(<span style="color:#8f3f71">1</span>, <span style="color:#8f3f71">2</span>), c2(<span style="color:#8f3f71">3</span>, <span style="color:#8f3f71">4</span>), res;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> addCom(c1, c2); <span style="color:#928374;font-style:italic">//调用成员函数必须通过类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    outCom(c1);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;+&#34;</span>;
</span></span><span style="display:flex;"><span>    outCom(c2);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span>;
</span></span><span style="display:flex;"><span>    outCom(res);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
<h5 id="友元类">友元类<a hidden class="anchor" aria-hidden="true" href="#友元类">#</a></h5>
<ol>
<li>
<p>如果一个类B说明为另一类A的友元类，则B中所有的函数都是类A的友元函数</p>
</li>
<li>
<p>声明友元类的格式如下：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">friend</span> <span style="color:#af3a03">class</span> 类名;
</span></span></code></pre></div><ol start="3">
<li>
<p>类友元关系是单向的，若类B是类A的友元类，不等于类A也是类B的友元类</p>
</li>
<li>
<p>不能传递，若类B是A的友元类，类C是类B的友元类，不等于类C是类A的友元类</p>
</li>
<li>
<p>非必要时不用类友元，而仅把类中的某些成员函数说明为友元函数</p>
<ul>
<li>
<p>类友元示例</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex <span style="color:#928374;font-style:italic">//复数类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> real, imag; <span style="color:#928374;font-style:italic">//复数的实部和虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex();
</span></span><span style="display:flex;"><span>        myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">friend</span> <span style="color:#af3a03">class</span> oper; <span style="color:#928374;font-style:italic">//oper是myComplex的友元类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> oper{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex addCom(myComplex c1, myComplex c2); <span style="color:#928374;font-style:italic">//友元函数, 两个参数对象相加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>(myComplex c);                     <span style="color:#928374;font-style:italic">//友元函数, 输惨参数对象数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex oper<span style="color:#af3a03">::</span>addCom(myComplex c1, myComplex c2) <span style="color:#928374;font-style:italic">//类外定义函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">+</span> c2.real, c1.imag <span style="color:#af3a03">+</span> c2.imag);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> oper<span style="color:#af3a03">::</span>outCom(myComplex c) <span style="color:#928374;font-style:italic">//定义函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> c.real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> c.imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    myComplex c1(<span style="color:#8f3f71">1</span>, <span style="color:#8f3f71">2</span>), c2(<span style="color:#8f3f71">3</span>, <span style="color:#8f3f71">4</span>), res;
</span></span><span style="display:flex;"><span>    oper o;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> o.addCom(c1, c2); <span style="color:#928374;font-style:italic">//通过类oper操作类myComplex的成员 调用成员函数必须通过类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    o.outCom(c1);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;+&#34;</span>;
</span></span><span style="display:flex;"><span>    o.outCom(c2);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span>;
</span></span><span style="display:flex;"><span>    o.outCom(res);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// (1,2) + (3,4) = (4,6)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>程序填空题</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;cmath&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> Point{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> x, y;
</span></span><span style="display:flex;"><span>   	 __friend <span style="color:#af3a03">class</span> Line;__
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        Point(<span style="color:#b57614">double</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>, <span style="color:#b57614">double</span> j <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>){
</span></span><span style="display:flex;"><span>          x <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>          y <span style="color:#af3a03">=</span> j;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        Point(Point <span style="color:#af3a03">&amp;</span>p){
</span></span><span style="display:flex;"><span>          x <span style="color:#af3a03">=</span> p.x;
</span></span><span style="display:flex;"><span>          y <span style="color:#af3a03">=</span> p.y;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> Line{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        Point p1, p2;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        Line(Point <span style="color:#af3a03">&amp;</span>xp1, Point <span style="color:#af3a03">&amp;</span>xp2) <span style="color:#af3a03">:</span>__ p1(xp1), p2(xp2)___ {}  <span style="color:#928374;font-style:italic">// 复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">double</span> <span style="color:#b57614">GetLength</span>();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">double</span> Line<span style="color:#af3a03">::</span>GetLength(){  <span style="color:#928374;font-style:italic">// 定义函数，计算两点间的距离
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">double</span> dx <span style="color:#af3a03">=</span> p2.x <span style="color:#af3a03">-</span> p1.x;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">double</span> dy <span style="color:#af3a03">=</span> p2.y <span style="color:#af3a03">-</span> p1.y;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">sqrt</span>(dx <span style="color:#af3a03">*</span> dx <span style="color:#af3a03">+</span> dy <span style="color:#af3a03">*</span> dy);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    Point p1, p2(<span style="color:#8f3f71">6</span>, <span style="color:#8f3f71">8</span>);
</span></span><span style="display:flex;"><span>    Line L1(p1, p2);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> L1.GetLength() <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
<h4 id="38-this-指针">3.8 this 指针<a hidden class="anchor" aria-hidden="true" href="#38-this-指针">#</a></h4>
<ol>
<li>C++规定，当一个成员函数被调用是，系统将自动向它传递一个隐含的参数，该参数时一个指向调用该函数的对象的指针，名为this指针。</li>
</ol>
<ul>
<li>
<p>被调用函数的内存首地址</p>
</li>
<li>
<p><strong>this指针始终指向调用成员函数的对象</strong></p>
<ul>
<li>
<p><strong>每个当前对象都含有一个指向该对象的this指针</strong></p>
</li>
<li>
<p><strong><code>this</code>指针只能在类的成员函数中使用</strong></p>
</li>
<li>
<p>静态成员是类具有的属性，不是对象的特征，this 表示的是隐藏的对象的指针，所以<strong>静态成员函数不能够有this指针</strong>。</p>
</li>
<li>
<p>友元函数不通过对象调用，所以没有 this 指针</p>
</li>
<li>
<p><code>this -&gt;成员变量 = 形参;</code></p>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate <span style="color:#af3a03">::</span> myDate(<span style="color:#b57614">int</span> year,<span style="color:#b57614">int</span> month,<span style="color:#b57614">int</span> day){
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">this</span> <span style="color:#af3a03">-&gt;</span> year <span style="color:#af3a03">=</span> year;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">this</span> <span style="color:#af3a03">-&gt;</span> month <span style="color:#af3a03">=</span> month;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">this</span> <span style="color:#af3a03">-&gt;</span> day <span style="color:#af3a03">=</span> day;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>this 指针的使用</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">double</span> real, imag;
</span></span><span style="display:flex;"><span>    myComplex() <span style="color:#af3a03">:</span> real(<span style="color:#8f3f71">0</span>), imag(<span style="color:#8f3f71">0</span>) {}
</span></span><span style="display:flex;"><span>    myComplex(<span style="color:#b57614">double</span>, <span style="color:#b57614">double</span>);
</span></span><span style="display:flex;"><span>    myComplex <span style="color:#b57614">AddRealOne</span>();
</span></span><span style="display:flex;"><span>    myComplex <span style="color:#b57614">AddImagOne</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>(); <span style="color:#928374;font-style:italic">//成员函数, 输出调用者对象的有关数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(<span style="color:#b57614">double</span> real, <span style="color:#b57614">double</span> imag)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">=</span> real;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">=</span> imag;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> myComplex<span style="color:#af3a03">::</span>outCom()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span>AddRealOne()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>; <span style="color:#928374;font-style:italic">// 返回对象本身
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span>AddImagOne()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>; <span style="color:#928374;font-style:italic">// 返回对象本身
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    myComplex c1(<span style="color:#8f3f71">1</span>, <span style="color:#8f3f71">1</span>), c2, c3;
</span></span><span style="display:flex;"><span>    c1.outCom();
</span></span><span style="display:flex;"><span>    c2.outCom();
</span></span><span style="display:flex;"><span>    c3.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>         <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;分界线&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    c2 <span style="color:#af3a03">=</span> c1.AddRealOne();
</span></span><span style="display:flex;"><span>    c1.outCom();
</span></span><span style="display:flex;"><span>    c3 <span style="color:#af3a03">=</span> c1.AddImagOne();
</span></span><span style="display:flex;"><span>    c2.outCom();
</span></span><span style="display:flex;"><span>    c3.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h1 id="第四章-运算符重载">第四章 运算符重载<a hidden class="anchor" aria-hidden="true" href="#第四章-运算符重载">#</a></h1>
<ul>
<li>运算重载符</li>
<li>运算重载符作为成员函数和友元函数的两种方式</li>
<li>对自己定义的类重载运算符</li>
<li>对特定类重载前置和后置异同</li>
<li>浅拷贝和深拷贝</li>
</ul>
<h4 id="41-运算符重载的概念">4.1 运算符重载的概念<a hidden class="anchor" aria-hidden="true" href="#41-运算符重载的概念">#</a></h4>
<ol>
<li>运算符重载：已有的运算符赋予多重含义, 使同一个运算符作用于不同类型的数据时产生不同的行为</li>
<li><strong>运算符重载的目的是使得运算符能够用来操作对象</strong></li>
</ol>
<p>可重载的运算符</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>双目算术运算符</td>
<td><code>+, -, *, /, %</code></td>
</tr>
<tr>
<td>关系运算符</td>
<td><code>==, !=, &lt;, &gt;, &lt;=, &gt;=</code></td>
</tr>
<tr>
<td>逻辑运算符</td>
<td>`</td>
</tr>
<tr>
<td>单目运算符</td>
<td><code>+(正), -(负), *(指针), &amp;(取地址)</code></td>
</tr>
<tr>
<td>自增自减运算符</td>
<td><code>++, --</code></td>
</tr>
<tr>
<td>位运算符</td>
<td>`</td>
</tr>
<tr>
<td>赋值运算符</td>
<td>`=, +=, -=, *=, /=, %=, &amp;=(按位与赋值),</td>
</tr>
<tr>
<td>空间申请与释放</td>
<td><code>new, delete, new[], delete[]</code></td>
</tr>
<tr>
<td>其他运算符</td>
<td><code>()(函数调用), -&gt;(成员访问), ,(逗号), [](下标)</code></td>
</tr>
</tbody>
</table>
<p>不可重载的运算符和符号</p>
<table>
<thead>
<tr>
<th>成员访问运算符</th>
<th><code>.</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>成员指针访问运算符</td>
<td><code>.*</code>  , <code> -&gt;*</code></td>
</tr>
<tr>
<td>域运算符</td>
<td><code>::</code></td>
</tr>
<tr>
<td>长度运算符</td>
<td><code>sizeof</code></td>
</tr>
<tr>
<td>条件运算符</td>
<td><code>?:</code></td>
</tr>
<tr>
<td>预处理符号</td>
<td><code>#</code></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>用于类运算的运算符通常都要重载, 系统提供了两个重载运算符</p>
<ul>
<li><code>=, &amp;</code> 复制和地址</li>
</ul>
</li>
</ul>
<ol start="3">
<li>运算符重载的实质是编写以运算符为名称的函数，使用运算符的表达式就被解释为对重载函数的调用</li>
</ol>
<p>运算符函数的格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>返回值类型 <span style="color:#af3a03">operator</span> 运算符(形参表){函数体}
</span></span></code></pre></div><ol start="4">
<li>运算符可以被重载为全局函数,（通常为类的友元函数，全局函数不能访问类的私有成员)，对于二元运算符，需要传递两个参数。</li>
<li>运算符可以被重载为成员函数，对于二元运算符，只需要传递一个参数。</li>
</ol>
<h5 id="运算符重载函数成员函数"><strong>运算符重载函数：成员函数</strong><a hidden class="anchor" aria-hidden="true" href="#运算符重载函数成员函数">#</a></h5>
<ul>
<li>
<p>传递的参数比运算符的操作数少一个，因为<strong>调用者本身也参与运算</strong>，<code>this</code> 可省略</p>
</li>
<li>
<p>使用重载运算符</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex <span style="color:#928374;font-style:italic">//复数类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> real, imag; <span style="color:#928374;font-style:italic">//复数的实部和虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex();
</span></span><span style="display:flex;"><span>        myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i);
</span></span><span style="display:flex;"><span>        myComplex <span style="color:#b57614">addCom</span>(myComplex c);                                        <span style="color:#928374;font-style:italic">//成员函数, 调用者对象与参数对象c相加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>();                                                        <span style="color:#928374;font-style:italic">//成员函数, 输出调用者对象的有关数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c);                              <span style="color:#928374;font-style:italic">//声明成员函数 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2); <span style="color:#928374;font-style:italic">//声明友元函数 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span>addCom(myComplex c){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(real <span style="color:#af3a03">+</span> c.real, imag <span style="color:#af3a03">+</span> c.imag);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> myComplex<span style="color:#af3a03">::</span>outCom(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c){ <span style="color:#928374;font-style:italic">//重载成员函数，一个参数，返回一个临时对象，this可省略
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(<span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">-</span> c.real, <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">-</span> c.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2){ <span style="color:#928374;font-style:italic">// 重载友元函数，两个参数，返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">+</span> c2.real, c1.imag <span style="color:#af3a03">+</span> c2.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    myComplex c1(<span style="color:#8f3f71">1</span>, <span style="color:#8f3f71">2</span>), c2(<span style="color:#8f3f71">3</span>, <span style="color:#8f3f71">4</span>), res;
</span></span><span style="display:flex;"><span>    c1.outCom(); <span style="color:#928374;font-style:italic">// (1,2)operator+(3,4) = (4,6)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;operator+&#34;</span>;
</span></span><span style="display:flex;"><span>    c2.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span>;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">+</span> c2;  <span style="color:#928374;font-style:italic">// 调用运算符重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    res.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    c1.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;operator-&#34;</span>;
</span></span><span style="display:flex;"><span>    c2.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span>;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">-</span> c2; <span style="color:#928374;font-style:italic">// 调用运算符重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    res.outCom(); <span style="color:#928374;font-style:italic">// (1,2)operator-(3,4)=(-2,-2)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h5 id="运算符重载函数友元函数"><strong>运算符重载函数：友元函数</strong><a hidden class="anchor" aria-hidden="true" href="#运算符重载函数友元函数">#</a></h5>
<ul>
<li>
<p>重载运算符作为友元函数时,参数个数为运算符的操作数个数</p>
</li>
<li>
<p>重载作为友元函数</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex <span style="color:#928374;font-style:italic">//复数类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> real, imag; <span style="color:#928374;font-style:italic">//复数的实部和虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex();
</span></span><span style="display:flex;"><span>        myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i);
</span></span><span style="display:flex;"><span>        myComplex <span style="color:#b57614">addCom</span>(myComplex c);                                        <span style="color:#928374;font-style:italic">//成员函数, 调用者对象与参数对象c相加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>();                                                        <span style="color:#928374;font-style:italic">//成员函数, 输出调用者对象的有关数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c);                              <span style="color:#928374;font-style:italic">//成员 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2); <span style="color:#928374;font-style:italic">//友元 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2); <span style="color:#928374;font-style:italic">//友元 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#b57614">double</span> r);            <span style="color:#928374;font-style:italic">//友元 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#b57614">double</span> r, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1);            <span style="color:#928374;font-style:italic">//友元 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span>addCom(myComplex c){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(real <span style="color:#af3a03">+</span> c.real, imag <span style="color:#af3a03">+</span> c.imag);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> myComplex<span style="color:#af3a03">::</span>outCom(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(<span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">-</span> c.real, <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">-</span> c.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2){ <span style="color:#928374;font-style:italic">//c1+c2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">+</span> c2.real, c1.imag <span style="color:#af3a03">+</span> c2.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2){ <span style="color:#928374;font-style:italic">//c1-c2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">-</span> c2.real, c1.imag <span style="color:#af3a03">-</span> c2.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#b57614">double</span> r){ <span style="color:#928374;font-style:italic">//c1-r
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">-</span> r, c1.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#b57614">double</span> r, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1){ <span style="color:#928374;font-style:italic">//r-c1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(r <span style="color:#af3a03">-</span> c1.real, r<span style="color:#af3a03">-</span>c1.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    myComplex c1(<span style="color:#8f3f71">1</span>, <span style="color:#8f3f71">2</span>), c2(<span style="color:#8f3f71">3</span>, <span style="color:#8f3f71">4</span>), res;
</span></span><span style="display:flex;"><span>    c1.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;operator+&#34;</span>;
</span></span><span style="display:flex;"><span>    c2.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span>;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">+</span> c2;
</span></span><span style="display:flex;"><span>    res.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    c1.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;operator-&#34;</span>;
</span></span><span style="display:flex;"><span>    c2.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span>;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">-</span> c2;
</span></span><span style="display:flex;"><span>    res.outCom();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">-</span> c2;
</span></span><span style="display:flex;"><span>    res.outCom();
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">-</span> <span style="color:#8f3f71">5</span>;
</span></span><span style="display:flex;"><span>    res.outCom();
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> <span style="color:#8f3f71">5</span> <span style="color:#af3a03">-</span> c1;
</span></span><span style="display:flex;"><span>    res.outCom();
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h5 id="重载运算符的规则">重载运算符的规则<a hidden class="anchor" aria-hidden="true" href="#重载运算符的规则">#</a></h5>
<ol>
<li>重载后含义应符合原有用法习惯。例如重载“+”运算符，完成的功能应类似于加法。</li>
<li><strong>不能改变运算符原有的语义, 包括优先级和结合性</strong></li>
<li><strong>运算符重载不能改变运算符操作的个数和语法结构</strong></li>
<li>不能创建新的运算符，即重载运算符不能超出C++语言允许重载的运算符范围。</li>
<li><strong><code>(), [], -&gt;, =</code> 只能重载为成员函数, 不能重载为全局函数</strong></li>
<li>运算符重载不能改变该运算符用于基本数据类型对象的含义</li>
</ol>
<h4 id="42-重载赋值运算符">4.2 重载赋值运算符<a hidden class="anchor" aria-hidden="true" href="#42-重载赋值运算符">#</a></h4>
<h5 id="重载赋值运算符">重载赋值运算符<a hidden class="anchor" aria-hidden="true" href="#重载赋值运算符">#</a></h5>
<ol>
<li>
<p>赋值运算符<code>=</code>： 系统默认重载为对象成员变量的复制</p>
</li>
<li>
<p>地址运算符：系统默认重载为返回任何类对象的地址</p>
<ul>
<li>重载后被解释为函数调用的形式</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>c1和c2都是复数类的对象
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>c1 <span style="color:#af3a03">=</span> c2; <span style="color:#928374;font-style:italic">// 合法，系统默认的重载赋值运算
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>c1 <span style="color:#af3a03">=</span> <span style="color:#8f3f71">7</span>; <span style="color:#928374;font-style:italic">// 错误，数据类型不同，需要编写相应重载赋值运算符的函数
</span></span></span></code></pre></div><ul>
<li>
<p>为类 myComplex 重载赋值运算符</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex <span style="color:#928374;font-style:italic">//复数类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> real, imag; <span style="color:#928374;font-style:italic">//复数的实部和虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex();                   <span style="color:#928374;font-style:italic">// 构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i); <span style="color:#928374;font-style:italic">// 构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">~</span>myComplex() {}                                                       <span style="color:#928374;font-style:italic">//析构函数，不能有分号
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myComplex <span style="color:#b57614">addCom</span>(myComplex c1);                                       <span style="color:#928374;font-style:italic">//成员函数, 调用者对象与参数对象c相加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>();                                                        <span style="color:#928374;font-style:italic">//成员函数, 输出调用者对象的有关数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">outCom</span>(string s);                                                <span style="color:#928374;font-style:italic">//成员函数, 输出调用者对象的有关数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#b57614">void</span> <span style="color:#b57614">changeReal</span>(<span style="color:#b57614">double</span> r);                                            <span style="color:#928374;font-style:italic">//成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c);                              <span style="color:#928374;font-style:italic">//成员 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2); <span style="color:#928374;font-style:italic">//友元 重载函数 c1+c2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#b57614">double</span> r);            <span style="color:#928374;font-style:italic">//友元 重载函数 c1+r
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#b57614">double</span> r, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1);            <span style="color:#928374;font-style:italic">//友元 重载函数 r+c1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2); <span style="color:#928374;font-style:italic">//友元 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#b57614">double</span> r);            <span style="color:#928374;font-style:italic">//友元 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">friend</span> myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#b57614">double</span> r, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1);            <span style="color:#928374;font-style:italic">//友元 重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myComplex <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">=</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c);                             <span style="color:#928374;font-style:italic">//成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        myComplex <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">=</span>(<span style="color:#b57614">double</span>);                                         <span style="color:#928374;font-style:italic">//成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex<span style="color:#af3a03">::</span>myComplex(){
</span></span><span style="display:flex;"><span>    real <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    imag <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex myComplex<span style="color:#af3a03">::</span>addCom(myComplex c1){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(<span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">+</span> c1.real, <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">+</span> c1.imag);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> myComplex<span style="color:#af3a03">::</span>outCom(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> myComplex<span style="color:#af3a03">::</span>outCom(string s){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> s <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> myComplex<span style="color:#af3a03">::</span>changeReal(<span style="color:#b57614">double</span> r){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// myComplex myComplex::operator-(const myComplex &amp;c)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">// {
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//   return myComplex(this-&gt;real - c.real, this-&gt;imag - c.imag); //返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">// }
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2) <span style="color:#928374;font-style:italic">//c1+c2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">+</span> c2.real, c1.imag <span style="color:#af3a03">+</span> c2.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#b57614">double</span> r) <span style="color:#928374;font-style:italic">//c1+r
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">+</span> r, c1.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">+</span>(<span style="color:#b57614">double</span> r, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1) <span style="color:#928374;font-style:italic">//r+c2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(r <span style="color:#af3a03">+</span> c1.real, c1.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c2) <span style="color:#928374;font-style:italic">//c1-c2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">-</span> c2.real, c1.imag <span style="color:#af3a03">-</span> c2.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1, <span style="color:#b57614">double</span> r) <span style="color:#928374;font-style:italic">//c1-r
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(c1.real <span style="color:#af3a03">-</span> r, c1.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">operator</span><span style="color:#af3a03">-</span>(<span style="color:#b57614">double</span> r, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1) <span style="color:#928374;font-style:italic">//r-c1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#b57614">myComplex</span>(r <span style="color:#af3a03">+</span> c1.real, <span style="color:#af3a03">-</span>c1.imag); <span style="color:#928374;font-style:italic">//返回一个临时对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">&amp;</span>myComplex<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">=</span>(<span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c1)  <span style="color:#928374;font-style:italic">// 赋值运算符重载成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">=</span> c1.real;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">=</span> c1.imag;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  myComplex <span style="color:#af3a03">&amp;</span>myComplex<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">=</span>(<span style="color:#b57614">double</span> r)     <span style="color:#928374;font-style:italic">// 赋值运算符重载成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">=</span> r;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    myComplex c1(<span style="color:#8f3f71">1</span>, <span style="color:#8f3f71">2</span>), c2(<span style="color:#8f3f71">3</span>, <span style="color:#8f3f71">4</span>), res;
</span></span><span style="display:flex;"><span>    c1.outCom(<span style="color:#79740e">&#34;</span><span style="color:#79740e">\t\t\t</span><span style="color:#79740e">c1&#34;</span>);
</span></span><span style="display:flex;"><span>    c2.outCom(<span style="color:#79740e">&#34;</span><span style="color:#79740e">\t\t\t</span><span style="color:#79740e">c2&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">+</span> c2;
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;执行 res = c1 + c2 →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1.addCom(c2);
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;执行 res = c1.addCom(c2) →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">+</span> <span style="color:#8f3f71">5</span>;
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;执行 res = c1 + 5 →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> <span style="color:#8f3f71">5</span> <span style="color:#af3a03">+</span> c1;
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;执行 res = 5 + c1 →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1;
</span></span><span style="display:flex;"><span>    c1.outCom(<span style="color:#79740e">&#34;</span><span style="color:#79740e">\t\t\t</span><span style="color:#79740e">c1&#34;</span>);
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;执行 res = c1 →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    c1.changeReal(<span style="color:#af3a03">-</span><span style="color:#8f3f71">3</span>);
</span></span><span style="display:flex;"><span>    c1.outCom(<span style="color:#79740e">&#34;执行 changeReal(-3) →</span><span style="color:#79740e">\t</span><span style="color:#79740e">c1&#34;</span>);
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;</span><span style="color:#79740e">\t\t\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> c1;
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;res = c1 →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> <span style="color:#8f3f71">7</span>;
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;res = 7 →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);
</span></span><span style="display:flex;"><span>    res <span style="color:#af3a03">=</span> <span style="color:#8f3f71">7</span> <span style="color:#af3a03">+</span> <span style="color:#8f3f71">8</span>;
</span></span><span style="display:flex;"><span>    res.outCom(<span style="color:#79740e">&#34;res = 7 + 8; →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);  <span style="color:#928374;font-style:italic">// res（15,0）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    res <span style="color:#af3a03">=</span> c1 <span style="color:#af3a03">=</span> c2;  <span style="color:#928374;font-style:italic">// 两次调用 operator=(const myComplex &amp;c)  c2赋给c1,c1赋给res
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c1.outCom(<span style="color:#79740e">&#34;</span><span style="color:#79740e">\t\t\t</span><span style="color:#79740e">c1&#34;</span>);  <span style="color:#928374;font-style:italic">// c1（3,4）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c2.outCom(<span style="color:#79740e">&#34;</span><span style="color:#79740e">\t\t\t</span><span style="color:#79740e">c2&#34;</span>);  <span style="color:#928374;font-style:italic">// c2（3,4）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    res.outCom(<span style="color:#79740e">&#34;res = c1 = c2 →</span><span style="color:#79740e">\t</span><span style="color:#79740e">res&#34;</span>);  <span style="color:#928374;font-style:italic">// res（3,4）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<p>重载运算符：</p>
<ol>
<li>赋值运算符<strong>必须重载为成员函数，不能重载为友元函数</strong>。</li>
<li>为了让正常的赋值运算符的功能相一致，应让重载的赋值运算符仍然能连续使用，即“res=c1=c2;&ldquo;应成立。所以operator=函<strong>要返回引用</strong>，具体到本例中，返回值类型是 myComplex &amp;;</li>
</ol>
<h5 id="浅拷贝和深拷贝"><strong>浅拷贝和深拷贝</strong><a hidden class="anchor" aria-hidden="true" href="#浅拷贝和深拷贝">#</a></h5>
<h6 id="浅拷贝">浅拷贝<a hidden class="anchor" aria-hidden="true" href="#浅拷贝">#</a></h6>
<ol>
<li>如果没有经过重载，“=”的作用就是赋值号右侧对象的值一一赋值给左侧对象，这相当于值的拷贝。</li>
<li>如果赋值对象涉及指针或引用, 则它们之间是相互关联的, 一个值改变，另一个值也跟着改变，因为对象中的指针指向同一个内存地址。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span> <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span> <span style="color:#af3a03">class</span> pointer{
</span></span><span style="display:flex;"><span>	 <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span> 
</span></span><span style="display:flex;"><span>	   <span style="color:#b57614">int</span> a;
</span></span><span style="display:flex;"><span>	   <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>p;
</span></span><span style="display:flex;"><span>	   pointer(){
</span></span><span style="display:flex;"><span>	     a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">100</span>;
</span></span><span style="display:flex;"><span>	     p <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> <span style="color:#b57614">int</span>(<span style="color:#8f3f71">10</span>); <span style="color:#928374;font-style:italic">//初始化内存
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	   }
</span></span><span style="display:flex;"><span>	   pointer(<span style="color:#af3a03">const</span> pointer <span style="color:#af3a03">&amp;</span>tempp){ <span style="color:#928374;font-style:italic">// 复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		   <span style="color:#af3a03">if</span>(<span style="color:#af3a03">this</span><span style="color:#af3a03">!=&amp;</span>tempp){  <span style="color:#928374;font-style:italic">// 避免a=a这样的赋值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>			   a <span style="color:#af3a03">=</span> tempp.a;
</span></span><span style="display:flex;"><span>			   p <span style="color:#af3a03">=</span> tempp.p;
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>	   }
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	 <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>         pointer p1;
</span></span><span style="display:flex;"><span>         pointer p2(p1);  <span style="color:#928374;font-style:italic">// 使用复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         pointer p3 <span style="color:#af3a03">=</span> p1; <span style="color:#928374;font-style:italic">// 使用复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;对象名</span><span style="color:#79740e">\t</span><span style="color:#79740e">   对象地址      a的值           p中的值           p指向的值      p的地址&#34;</span>
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&amp;p1:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p1 <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p1.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p1.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p1.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p1.p<span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&amp;p2:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p2 <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p2.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p2=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p2.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p2.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p2.p<span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&amp;p3:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p3 <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p3.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p3=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p3.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p3.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p3.p<span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     <span style="color:#928374;font-style:italic">// 对象名\t   对象地址      a的值           p中的值           p指向的值         p的地址
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     <span style="color:#928374;font-style:italic">//  p1        0x22fe20      100           0x2f7590            10              0x22fe28
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	 <span style="color:#928374;font-style:italic">//  p2        0x22fe10      100           0x2f7590            10              0x22fe18
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     <span style="color:#928374;font-style:italic">//  p3        0x22fe00      100           0x2f7590            10              0x22fe08
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	     <span style="color:#af3a03">*</span>p1.p <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span>	     p2.a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">300</span>;
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;对象名</span><span style="color:#79740e">\t</span><span style="color:#79740e">   对象地址      a的值           p中的值           p指向的值      p的地址&#34;</span>
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&amp;p1:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p1 <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p1.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p1.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p1.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p1.p<span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&amp;p2:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p2 <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p2.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p2=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p2.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p2.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p2.p<span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>         cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&amp;p3:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p3 <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p3.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p3=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> p3.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p3.p <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;,&#34;</span><span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">&amp;</span>p3.p<span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     <span style="color:#928374;font-style:italic">// 对象名\t   对象地址      a的值           p中的值           p指向的值         p的地址
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     <span style="color:#928374;font-style:italic">//  p1        0x22fe20      100           0x537590            20              0x22fe28
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	 <span style="color:#928374;font-style:italic">//  p2        0x22fe10      300           0x537590            20              0x22fe18
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     <span style="color:#928374;font-style:italic">//  p3        0x22fe00      100           0x537590            20              0x22fe08
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>	```
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>浅拷贝可能造成的问题：
</span></span><span style="display:flex;"><span><span style="color:#8f3f71">1.</span> <span style="color:#af3a03">**</span>重复释放同一块空间产生错误。<span style="color:#af3a03">**</span> 当对象p1消亡时，需要释放析构函数中<span style="color:#af3a03">new</span>()  动态申请的空间。而当对象p2消亡时，也会试图释放这个空间，造成重复释放同一块空间，程序出错。
</span></span><span style="display:flex;"><span><span style="color:#8f3f71">2.</span> <span style="color:#af3a03">**</span>某块内存永远不会被释放而成为内存垃圾。<span style="color:#af3a03">**</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>```c<span style="color:#af3a03">++</span>
</span></span><span style="display:flex;"><span>pointer p4; <span style="color:#928374;font-style:italic">// 调用默认构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>p4 <span style="color:#af3a03">=</span> p1;
</span></span></code></pre></div><p>创建对象p4时，为p4中的成员变量p分配了空间，并赋了初值10。执行语句“ p4 = p1; ” p4中的成员变量p指向了p1中p指针指向的地址，而丢弃了原来指向的地址，这块内存成了内存垃圾。</p>
<h6 id="深拷贝">深拷贝<a hidden class="anchor" aria-hidden="true" href="#深拷贝">#</a></h6>
<p>赋值语句的功能是将一个对象中指针成员变量指向的内容，复制到另一个对象中指针成员变量指向的地方，这样的拷贝叫深拷贝。</p>
<ul>
<li>自定义复制构造函数
- 原复制构造函数，值和指针指向地址都被复制
- 新复制构造函数，只复制值到新的指针指向的地址
<ul>
<li>
<h2 id="重载赋值运算符-1">重载赋值运算符<a hidden class="anchor" aria-hidden="true" href="#重载赋值运算符-1">#</a></h2>
</li>
<li>
<p><code>delete 指针;</code> 释放原指针的内存再保存到新的指针指向的内存地址</p>
</li>
<li>
<p>深拷贝的实现(4-4)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> pointer{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> a;
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> <span style="color:#af3a03">*</span>p;
</span></span><span style="display:flex;"><span>        pointer(){
</span></span><span style="display:flex;"><span>          a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">100</span>;
</span></span><span style="display:flex;"><span>          p <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> <span style="color:#b57614">int</span>(<span style="color:#8f3f71">10</span>); <span style="color:#928374;font-style:italic">//初始化内存
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        pointer(<span style="color:#af3a03">const</span> pointer <span style="color:#af3a03">&amp;</span>temp){ <span style="color:#928374;font-style:italic">//复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          <span style="color:#af3a03">if</span> (<span style="color:#af3a03">this</span> <span style="color:#af3a03">!=</span> <span style="color:#af3a03">&amp;</span>temp){
</span></span><span style="display:flex;"><span>            a <span style="color:#af3a03">=</span> temp.a; <span style="color:#928374;font-style:italic">// a 是局部变量，内存跟随对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>            p <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> <span style="color:#b57614">int</span>(); <span style="color:#928374;font-style:italic">// 新申请的内存空间
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>            <span style="color:#af3a03">*</span>p <span style="color:#af3a03">=</span> <span style="color:#af3a03">*</span>temp.p;     
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">~</span>pointer(){ <span style="color:#928374;font-style:italic">//析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          <span style="color:#af3a03">if</span> (p <span style="color:#af3a03">!=</span> <span style="color:#b57614">NULL</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#af3a03">delete</span> p;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        pointer <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">=</span>(pointer <span style="color:#af3a03">&amp;</span>a){ <span style="color:#928374;font-style:italic">//成员函数 重载赋值运算符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          <span style="color:#af3a03">if</span> (<span style="color:#af3a03">this</span> <span style="color:#af3a03">==</span> <span style="color:#af3a03">&amp;</span>a) <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          <span style="color:#af3a03">delete</span> p;   <span style="color:#928374;font-style:italic">// 释放原来的内存空间
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>p <span style="color:#af3a03">=</span> <span style="color:#af3a03">new</span> <span style="color:#b57614">int</span>(<span style="color:#af3a03">*</span>a.p); <span style="color:#928374;font-style:italic">// 申请新空间保存值
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    pointer p1;
</span></span><span style="display:flex;"><span>    pointer p2(p1);
</span></span><span style="display:flex;"><span>    pointer p3;
</span></span><span style="display:flex;"><span>    p3 <span style="color:#af3a03">=</span> p1;
</span></span><span style="display:flex;"><span>    p1.a <span style="color:#af3a03">=</span> <span style="color:#8f3f71">123</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">*</span>p1.p <span style="color:#af3a03">=</span> <span style="color:#8f3f71">234</span>;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> p1.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p1.p <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> p2.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p2=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p2.p <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> p3.a <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,p3=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">*</span>p3.p <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h4 id="43-重载流插入运算符和流提取运算符">4.3 重载流插入运算符和流提取运算符<a hidden class="anchor" aria-hidden="true" href="#43-重载流插入运算符和流提取运算符">#</a></h4>
<p><strong>流插入运算符</strong>：左移运算符 <code>&lt;&lt;</code> 和 <code>cout</code> 一起用于输出, 称为 “流插入运算符”
<strong>流提取运算符</strong>：右移运算符 <code>&gt;&gt;</code> 和 <code>cin</code> 一起用于输出, 称为 “流插入运算符”</p>
<p>左插右提：左移流插入，右移流提取</p>
<p>C++ 类库提供的头文件对 <code>&lt;&lt;</code> <code>&gt;&gt;</code> 进行了重载</p>
<ul>
<li>
<p><code>cout &lt;&lt;</code> 是 <code>ostream</code> 的对象</p>
</li>
<li>
<p><code>cin &gt;&gt;</code> 是 <code>istream</code> 的对象</p>
</li>
<li>
<p>在头文件 <code>iostream</code> 中声明, 所以要用 <code>#include&lt;iostream&gt;</code></p>
</li>
<li>
<p>重载流运算符</p>
<ul>
<li>
<p>操作符右边是流对象的别名, 不是操作对象</p>
<ul>
<li>运算符接在流对象后面, 直接访问类的私有数据</li>
<li>可对这两个运算符进行重载，<strong>但重载函数不能是流类库中的成员, 而且必须重载为类的友元。</strong></li>
<li>流只能继承不能修改,</li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="重载流插入运算符">重载流插入运算符<a hidden class="anchor" aria-hidden="true" href="#重载流插入运算符">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ostream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&lt;&lt;</span>(ostream <span style="color:#af3a03">&amp;</span> output, 类名<span style="color:#af3a03">&amp;</span>对象名){
</span></span><span style="display:flex;"><span>	... 
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">return</span> output;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol>
<li>output是类ostream对象的引用，它是cout的别名</li>
<li>插入运算符函数不改变对象的值，所以第二个参数 “类名 &amp;对象名” 或者“类名 对象名”两种重载方式都是可以的。</li>
</ol>
<h6 id="重载流提取运算符">重载流提取运算符<a hidden class="anchor" aria-hidden="true" href="#重载流提取运算符">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>istream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&gt;&gt;</span>(istream <span style="color:#af3a03">&amp;</span> input, 类名<span style="color:#af3a03">&amp;</span>对象名){
</span></span><span style="display:flex;"><span>	... 
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">return</span> input;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol>
<li>input是类istream对象的引用，它是cin的别名 ，例如（<code>istream &amp; input = cin;</code>）。</li>
<li>提取运算符函数需要返回新的对象值，所以<strong>只能使用引用，即“类名 &amp;对象名”</strong>，不能使用“类名 对象名”。</li>
</ol>
<ul>
<li>
<p>流插入运算符和流提取运算符重载为友元</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;   // 输入输出流函数头文件</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;cstdlib&gt;     // 常用函数库， atof() 就是其中的函数</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;   // 字符串处理函数头文件</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">double</span> real, imag;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    myComplex() <span style="color:#af3a03">:</span> real(<span style="color:#8f3f71">0</span>), imag(<span style="color:#8f3f71">0</span>) {}
</span></span><span style="display:flex;"><span>    myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i) <span style="color:#af3a03">:</span> real(r), imag(i) {}
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">friend</span> ostream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&lt;&lt;</span>(ostream <span style="color:#af3a03">&amp;</span>os, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c); <span style="color:#928374;font-style:italic">//友元,插入
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">friend</span> istream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&gt;&gt;</span>(istream <span style="color:#af3a03">&amp;</span>is, myComplex <span style="color:#af3a03">&amp;</span>c);       <span style="color:#928374;font-style:italic">//友元,提取
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  ostream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&lt;&lt;</span>(ostream <span style="color:#af3a03">&amp;</span>os, <span style="color:#af3a03">const</span> myComplex <span style="color:#af3a03">&amp;</span>c)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">if</span> (c.imag <span style="color:#af3a03">&gt;=</span> <span style="color:#8f3f71">0</span>){
</span></span><span style="display:flex;"><span>      os <span style="color:#af3a03">&lt;&lt;</span> c.real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;+&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> c.imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;i&#34;</span>; <span style="color:#928374;font-style:italic">//以 a+bi 的形式输入
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      os <span style="color:#af3a03">&lt;&lt;</span> c.real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">-</span>c.imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;i&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> os;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  istream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&gt;&gt;</span>(istream <span style="color:#af3a03">&amp;</span>is, myComplex <span style="color:#af3a03">&amp;</span>c)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    string s;
</span></span><span style="display:flex;"><span>    is <span style="color:#af3a03">&gt;&gt;</span> s;                  <span style="color:#928374;font-style:italic">//将a+bi 作为字符串读入,a+bi中间不能有空格
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">int</span> pos <span style="color:#af3a03">=</span> s.find(<span style="color:#79740e">&#34;+&#34;</span>, <span style="color:#8f3f71">0</span>); <span style="color:#928374;font-style:italic">//查找虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">if</span> (pos <span style="color:#af3a03">==</span> <span style="color:#af3a03">-</span><span style="color:#8f3f71">1</span>)
</span></span><span style="display:flex;"><span>      pos <span style="color:#af3a03">=</span> s.find(<span style="color:#79740e">&#34;-&#34;</span>, <span style="color:#8f3f71">1</span>);                      <span style="color:#928374;font-style:italic">//虚部为负数时
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    string sReal <span style="color:#af3a03">=</span> s.substr(<span style="color:#8f3f71">0</span>, pos);             <span style="color:#928374;font-style:italic">//分离出代表实部的字符串
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c.real <span style="color:#af3a03">=</span> atof(sReal.c_str());                <span style="color:#928374;font-style:italic">//atof() 能将参数内容转换成浮点数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    sReal <span style="color:#af3a03">=</span> s.substr(pos, s.length() <span style="color:#af3a03">-</span> pos <span style="color:#af3a03">-</span> <span style="color:#8f3f71">1</span>); <span style="color:#928374;font-style:italic">//分离出代表虚部的字符串
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c.imag <span style="color:#af3a03">=</span> atof(sReal.c_str());
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> is;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    myComplex c, c1;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> n;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;请输入两个复数([-]a±bi)和一个整数, 以空格分隔&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cin <span style="color:#af3a03">&gt;&gt;</span> c <span style="color:#af3a03">&gt;&gt;</span> c1 <span style="color:#af3a03">&gt;&gt;</span> n;  <span style="color:#928374;font-style:italic">// cin&gt;&gt; 理解为oprator &gt;&gt; (cin,c) 输入n时不需要重载
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> c <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> c1;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 2.5+3i 4-5i 10
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">// 2.5+3i 10,4-5i
</span></span></span></code></pre></div></li>
<li>
<p>流插入运算符重载为成员函数</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;cstdlib&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">double</span> real, imag;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    myComplex() <span style="color:#af3a03">:</span> real(<span style="color:#8f3f71">0</span>), imag(<span style="color:#8f3f71">0</span>) {}
</span></span><span style="display:flex;"><span>    myComplex(<span style="color:#b57614">double</span> r, <span style="color:#b57614">double</span> i) <span style="color:#af3a03">:</span> real(r), imag(i) {}
</span></span><span style="display:flex;"><span>    ostream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&lt;&lt;</span>(ostream <span style="color:#af3a03">&amp;</span>os);                      <span style="color:#928374;font-style:italic">//成员函数 ,插入
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">friend</span> istream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&gt;&gt;</span>(istream <span style="color:#af3a03">&amp;</span>is, myComplex <span style="color:#af3a03">&amp;</span>c); <span style="color:#928374;font-style:italic">//友元,提取
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  ostream <span style="color:#af3a03">&amp;</span>myComplex<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&lt;&lt;</span>(ostream <span style="color:#af3a03">&amp;</span>os)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">if</span> (<span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">&gt;=</span> <span style="color:#8f3f71">0</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      os <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;+&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;i&#34;</span>; <span style="color:#928374;font-style:italic">//以 a+bi 的形式输入
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      os <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>real <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">-</span><span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>imag <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;i&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> os;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  istream <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&gt;&gt;</span>(istream <span style="color:#af3a03">&amp;</span>is, myComplex <span style="color:#af3a03">&amp;</span>c)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    string s;
</span></span><span style="display:flex;"><span>    is <span style="color:#af3a03">&gt;&gt;</span> s;                  <span style="color:#928374;font-style:italic">//将a+bi 作为字符串读入,a+bi中间不能有空格
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">int</span> pos <span style="color:#af3a03">=</span> s.find(<span style="color:#79740e">&#34;+&#34;</span>, <span style="color:#8f3f71">0</span>); <span style="color:#928374;font-style:italic">//查找虚部
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">if</span> (pos <span style="color:#af3a03">==</span> <span style="color:#af3a03">-</span><span style="color:#8f3f71">1</span>)
</span></span><span style="display:flex;"><span>      pos <span style="color:#af3a03">=</span> s.find(<span style="color:#79740e">&#34;-&#34;</span>, <span style="color:#8f3f71">1</span>);                      <span style="color:#928374;font-style:italic">//虚部为负数时
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    string sReal <span style="color:#af3a03">=</span> s.substr(<span style="color:#8f3f71">0</span>, pos);             <span style="color:#928374;font-style:italic">//分离出代表实部的字符串
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c.real <span style="color:#af3a03">=</span> atof(sReal.c_str());                <span style="color:#928374;font-style:italic">//atof() 能将参数内容转换成浮点数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    sReal <span style="color:#af3a03">=</span> s.substr(pos, s.length() <span style="color:#af3a03">-</span> pos <span style="color:#af3a03">-</span> <span style="color:#8f3f71">1</span>); <span style="color:#928374;font-style:italic">//分离出代表虚部的字符串
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    c.imag <span style="color:#af3a03">=</span> atof(sReal.c_str());
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> is;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    myComplex c, c1;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> n;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;请输入两个复数([-]a±bi)和一个整数, 以空格分隔&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cin <span style="color:#af3a03">&gt;&gt;</span> c <span style="color:#af3a03">&gt;&gt;</span> c1 <span style="color:#af3a03">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>    c1 <span style="color:#af3a03">&lt;&lt;</span> (c <span style="color:#af3a03">&lt;&lt;</span> cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> n; <span style="color:#928374;font-style:italic">//注意调用形式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h4 id="44-重载强制类型转换运算符-重要">4.4 重载强制类型转换运算符 (重要)<a hidden class="anchor" aria-hidden="true" href="#44-重载强制类型转换运算符-重要">#</a></h4>
<p>强制类型转换运算符是<strong>单目运算符</strong>, <strong>只能重载为成员函数</strong>, 不能重载为全局函数</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>类型名 对象 <span style="color:#928374;font-style:italic">//  重载后等价于 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>对象.<span style="color:#af3a03">operator</span> 类型名()
</span></span></code></pre></div><ul>
<li>
<p>重载强制类型转换运算符 <code>double</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;cstdlib&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> myComplex{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">double</span> real, imag;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        myComplex(<span style="color:#b57614">double</span> r <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>, <span style="color:#b57614">double</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>)<span style="color:#af3a03">:</span>real(r),imag(i){}; <span style="color:#928374;font-style:italic">//成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        <span style="color:#af3a03">operator</span> <span style="color:#b57614">double</span>(){                                       <span style="color:#928374;font-style:italic">//重载强制类型转换运算符double,程序中凡是遇到dmyComplex对象都强制转换为double型，值为real.
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>          <span style="color:#af3a03">return</span> real;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    myComplex c(<span style="color:#8f3f71">1.2</span>, <span style="color:#af3a03">-</span><span style="color:#8f3f71">3.4</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> (<span style="color:#b57614">double</span>)c <span style="color:#af3a03">&lt;&lt;</span> endl; <span style="color:#928374;font-style:italic">// (double)c 等价于 c.operator double() ，将c强制转换为double型，可以直接写成cout&lt;&lt;c ,输出1.2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">double</span> n <span style="color:#af3a03">=</span> <span style="color:#8f3f71">12</span> <span style="color:#af3a03">+</span> c; <span style="color:#928374;font-style:italic">//等价于 double n = 12 + c.operator double()
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> n;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h4 id="45-重载自增自减运算符">4.5 重载自增、自减运算符<a hidden class="anchor" aria-hidden="true" href="#45-重载自增自减运算符">#</a></h4>
<p>前置&amp;、后置</p>
<ul>
<li>允许写一个增加无用int 类型形参的版本, 处理前置时调用参数个数正常的重载函数</li>
</ul>
<ol>
<li><strong>处理后置表达式时, 调用多出一个参数的重载函数</strong></li>
<li>前置 <code>++，--</code> 优先级高于赋值，后置自增自减运算优先级低于赋值</li>
</ol>
<p>示例1：自增重载为作成员函数 自减重载为友元</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>    <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>    <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">class</span> Demo{
</span></span><span style="display:flex;"><span>	    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	      <span style="color:#b57614">int</span> n;
</span></span><span style="display:flex;"><span>	    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	      Demo(<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>) <span style="color:#af3a03">:</span> n(i) {}
</span></span><span style="display:flex;"><span>	      Demo <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>();   <span style="color:#928374;font-style:italic">//用于前置
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      Demo <span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>(<span style="color:#b57614">int</span>); <span style="color:#928374;font-style:italic">//用于后置
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      <span style="color:#af3a03">operator</span> <span style="color:#b57614">int</span>() { <span style="color:#af3a03">return</span> n; }  <span style="color:#928374;font-style:italic">// 重载强制类型转换，凡是遇到CDemo对象就会调用该函数，强制转换成整型。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	      <span style="color:#af3a03">friend</span> Demo <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>(Demo <span style="color:#af3a03">&amp;</span>);
</span></span><span style="display:flex;"><span>	      <span style="color:#af3a03">friend</span> Demo <span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>(Demo <span style="color:#af3a03">&amp;</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    Demo <span style="color:#af3a03">&amp;</span>Demo<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>(){ <span style="color:#928374;font-style:italic">//前置++
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      n<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Demo Demo<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>(<span style="color:#b57614">int</span> k){ <span style="color:#928374;font-style:italic">//后置++,多一个参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      Demo <span style="color:#b57614">tmp</span>(<span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>); <span style="color:#928374;font-style:italic">//记录修改前的对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      n<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> tmp; <span style="color:#928374;font-style:italic">//返回修改前对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    Demo <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>(Demo <span style="color:#af3a03">&amp;</span>d){ <span style="color:#928374;font-style:italic">//前置--
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      d.n<span style="color:#af3a03">--</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> d;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Demo <span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>(Demo <span style="color:#af3a03">&amp;</span>d, <span style="color:#b57614">int</span>){ <span style="color:#928374;font-style:italic">//后置--,多一个参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      Demo <span style="color:#b57614">tmp</span>(d);
</span></span><span style="display:flex;"><span>      d.n<span style="color:#af3a03">--</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> tmp;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>      Demo d(<span style="color:#8f3f71">10</span>);
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (d<span style="color:#af3a03">++</span>) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator++(0)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (<span style="color:#af3a03">++</span>d) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator++()
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (d<span style="color:#af3a03">--</span>) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator--(d,0)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (<span style="color:#af3a03">--</span>d) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator--(d)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>示例2：都作为成员函数</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>    <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>    <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">class</span> Demo
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">int</span> n;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      Demo(<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>) <span style="color:#af3a03">:</span> n(i) {}
</span></span><span style="display:flex;"><span>      Demo <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>();   <span style="color:#928374;font-style:italic">//用于前置
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      Demo <span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>(<span style="color:#b57614">int</span>); <span style="color:#928374;font-style:italic">//用于后置
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">operator</span> <span style="color:#b57614">int</span>() { <span style="color:#af3a03">return</span> n; }
</span></span><span style="display:flex;"><span>      Demo <span style="color:#af3a03">&amp;</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>();
</span></span><span style="display:flex;"><span>      Demo <span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>(<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    Demo <span style="color:#af3a03">&amp;</span>Demo<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>() <span style="color:#928374;font-style:italic">//前置++
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      n<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Demo Demo<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">++</span>(<span style="color:#b57614">int</span> k) <span style="color:#928374;font-style:italic">//后置++
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      Demo <span style="color:#b57614">tmp</span>(<span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>); <span style="color:#928374;font-style:italic">//记录修改前的对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      n<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> tmp; <span style="color:#928374;font-style:italic">//返回修改前对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    Demo <span style="color:#af3a03">&amp;</span>Demo<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>() <span style="color:#928374;font-style:italic">//前置--
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      n<span style="color:#af3a03">--</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Demo Demo<span style="color:#af3a03">::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">--</span>(<span style="color:#b57614">int</span> k) <span style="color:#928374;font-style:italic">//后置--
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      Demo <span style="color:#b57614">tmp</span>(<span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>);
</span></span><span style="display:flex;"><span>      n<span style="color:#af3a03">--</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> tmp;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      Demo d(<span style="color:#8f3f71">10</span>);
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (d<span style="color:#af3a03">++</span>) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator++(0)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (<span style="color:#af3a03">++</span>d) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator++()
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (d<span style="color:#af3a03">--</span>) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator--(d,0)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> (<span style="color:#af3a03">--</span>d) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>; <span style="color:#928374;font-style:italic">// d.operator--(d)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h1 id="第五章-类的继承与派生">第五章 类的继承与派生<a hidden class="anchor" aria-hidden="true" href="#第五章-类的继承与派生">#</a></h1>
<ul>
<li>类的继承与派生</li>
<li>继承关系中友元和静态成员变量的派生特点</li>
<li>单重继承与多重继承，派生层次</li>
<li>权限控制符，基类和派生类之间的访问形式</li>
<li>派生类的构造函数和析构函数</li>
<li>类之间的关系</li>
<li>类与派生类指针</li>
</ul>
<h4 id="51-类的继承与类的派生">5.1 类的继承与类的派生<a hidden class="anchor" aria-hidden="true" href="#51-类的继承与类的派生">#</a></h4>
<h5 id="继承的概念">继承的概念<a hidden class="anchor" aria-hidden="true" href="#继承的概念">#</a></h5>
<ol>
<li>类的派生：通过已有的类建立新类的过程；原来的类叫基类, 也叫父类或一般类；新类称为派生类/ 子类/ 特殊类</li>
<li>派生类会继承基类中<strong>除构造函数和析构函数外</strong>所有的成员变量和成员函数。</li>
<li>相对基类，派生类可以在基类基础上有以下变化：增加新的成员；重新定义已有的成员函数，改变基类成员的访问权限。</li>
<li>派生类成员覆盖基类同名成员, 也称为重定义/ 重写/ 同名隐藏</li>
</ol>
<h5 id="派生类的定义与大小">派生类的定义与大小<a hidden class="anchor" aria-hidden="true" href="#派生类的定义与大小">#</a></h5>
<h6 id="格式">格式<a hidden class="anchor" aria-hidden="true" href="#格式">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> 派生类名:继承方式说明符 基类名{
</span></span><span style="display:flex;"><span>	类体...
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>继承方式说明符指明基类成员在派生类中的访问属性, 一般用 <strong>public</strong>，很少private和protected</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> BaseClass{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">int</span> v1,v2;  <span style="color:#928374;font-style:italic">// 公有访问权限
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		BaseClass()<span style="color:#af3a03">:</span>v1(<span style="color:#8f3f71">1</span>),v2(<span style="color:#8f3f71">2</span>){}
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">int</span> <span style="color:#b57614">temp1</span>(){}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> DerivedClass<span style="color:#af3a03">:</span><span style="color:#af3a03">public</span> BaseClass{
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> v1;  <span style="color:#928374;font-style:italic">// 改为私有访问权限
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#b57614">int</span> <span style="color:#b57614">temp1</span>(){}
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		DerivedClass()<span style="color:#af3a03">:</span>v1(<span style="color:#8f3f71">10</span>){} <span style="color:#928374;font-style:italic">// 构造函数 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		<span style="color:#b57614">void</span> <span style="color:#b57614">printv</span>(){
</span></span><span style="display:flex;"><span>			cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v1 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>			cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base.v1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> BaseClass<span style="color:#af3a03">::</span>v1 <span style="color:#af3a03">&lt;&lt;</span> endl;  <span style="color:#928374;font-style:italic">// 在派生类的成员函数中访问基类的成员时，需要使用类名加以限定
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>	BaseClass be;
</span></span><span style="display:flex;"><span>	DerivedClass dc;
</span></span><span style="display:flex;"><span>	dc.printv();  <span style="color:#928374;font-style:italic">// 调用派生类的函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h6 id="派生类的大小">派生类的大小<a hidden class="anchor" aria-hidden="true" href="#派生类的大小">#</a></h6>
<ol>
<li>派生类对象占用空间大小 = 基类成员变量占用的存储空间大小 + 派生类对象自身成员变量占用的存储空间大小</li>
<li>对象的大小只与普通成员变量有关，与成员函数和类中的静态成员变量无关</li>
<li>为类对象分配空间时，遵循字节补齐原则，<code>char</code> 变量占 1字节, 补齐为 4 字节</li>
<li>空类的大小是1，32位系统 指针 4 字节,  64 位系统指针 8 字节</li>
</ol>
<h5 id="继承关系的特殊性">继承关系的特殊性<a hidden class="anchor" aria-hidden="true" href="#继承关系的特殊性">#</a></h5>
<p>基类的友元不一定是派生类的友元；
基类的成员函数是某类的友元函数，则其作为派生类继承的成员函数仍然是某类的友元函数。</p>
<ul>
<li>基类的 友元类/友元函数, 派生类不继承友元类/友元函数</li>
<li>基类/成员是 某类的友元函数, 派生类继承友元关系</li>
<li>如果基类中的成员是静态的，则在其派生类中，被继承的成员也是静态的。无论有多少个对象被创建，这些成员都只有一个拷贝，它为基类和派生类的所有对象所共享</li>
<li>派生类访问这些成员时，通常用 “ 类名::成员名 ”的方式引用或调用</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> another;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> Base{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">float</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">static</span> <span style="color:#b57614">int</span> staV;
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>(<span style="color:#af3a03">const</span> another <span style="color:#af3a03">&amp;</span>K);
</span></span><span style="display:flex;"><span>      Base(){
</span></span><span style="display:flex;"><span>        staV<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> Base<span style="color:#af3a03">::</span>staV <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> Derived<span style="color:#af3a03">:</span><span style="color:#af3a03">public</span> Base{
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">float</span> y;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      Derived(){
</span></span><span style="display:flex;"><span>        staV<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> another{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">int</span> aaa;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		another(){aaa <span style="color:#af3a03">=</span> <span style="color:#8f3f71">100</span>}
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">friend</span> <span style="color:#b57614">void</span> Base<span style="color:#af3a03">::</span>print(<span style="color:#af3a03">const</span> another <span style="color:#af3a03">&amp;</span>K);  <span style="color:#928374;font-style:italic">// 基类的成员函数声明为本类的友元
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Base<span style="color:#af3a03">::</span>print(<span style="color:#af3a03">const</span> another <span style="color:#af3a03">&amp;</span>K){
</span></span><span style="display:flex;"><span>	cout <span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;Base&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> K.aaa <span style="color:#af3a03">&lt;&lt;</span> enld;  <span style="color:#928374;font-style:italic">// 可以访问私有成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>  Base a;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> a.staV <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  Derived d;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> d.staV <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  another ano;
</span></span><span style="display:flex;"><span>  a.print(ano);
</span></span><span style="display:flex;"><span>  d.print(ano);
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="有继承关系的类之间的访问">有继承关系的类之间的访问<a hidden class="anchor" aria-hidden="true" href="#有继承关系的类之间的访问">#</a></h5>
<ol>
<li>
<p>派生类中的成员函数可以访问基类中的公有成员，但不能直接访问基类中的私有成员。</p>
</li>
<li>
<p>派生类与基类成员同名时，派生类成员优先，此时要访问基类同名成员，需要用 “ 基类名::成员名 ”的方式引用或调用。</p>
<ul>
<li>
<p>访问基类和派生类成员的方式(5-5)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> CB
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> a;
</span></span><span style="display:flex;"><span>    CB(<span style="color:#b57614">int</span> x)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      a <span style="color:#af3a03">=</span> x;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">showa</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Class Cb--a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> CD <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> CB
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> a;                   <span style="color:#928374;font-style:italic">//与基类同名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    CD(<span style="color:#b57614">int</span> x, <span style="color:#b57614">int</span> y) <span style="color:#af3a03">:</span> CB(x) <span style="color:#928374;font-style:italic">//x 初始化基类的成员变量a
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      a <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">showa</span>() <span style="color:#928374;font-style:italic">//基类同名函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Class CD--a&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print2a</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> a <span style="color:#af3a03">&lt;&lt;</span> endl;         <span style="color:#928374;font-style:italic">//访问派生类a
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;CB::a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> CB<span style="color:#af3a03">::</span>a <span style="color:#af3a03">&lt;&lt;</span> endl; <span style="color:#928374;font-style:italic">//访问基类a
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CB CBobj(<span style="color:#8f3f71">12</span>);
</span></span><span style="display:flex;"><span>    CBobj.showa();
</span></span><span style="display:flex;"><span>    CD CDobj(<span style="color:#8f3f71">48</span>, <span style="color:#8f3f71">999</span>);
</span></span><span style="display:flex;"><span>    CDobj.showa();     <span style="color:#928374;font-style:italic">//访问派生类的showa()
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    CDobj.CB<span style="color:#af3a03">::</span>showa(); <span style="color:#928374;font-style:italic">//访问基类的showa()
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;CDobj.a&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> CDobj.a <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;CDobj.CB::a=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> CDobj.CB<span style="color:#af3a03">::</span>a <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>类之间的访问示例(5-6)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> CStudent <span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    string name; <span style="color:#928374;font-style:italic">//姓名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    string id;   <span style="color:#928374;font-style:italic">//学号
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">char</span> gender; <span style="color:#928374;font-style:italic">//性别,&#39;F&#39;代表女生, &#39;M&#39;代表男生
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#b57614">int</span> age;     <span style="color:#928374;font-style:italic">//年龄
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> PrintInfo();
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">SetInfo</span>(<span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">char</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">SetName</span>(string);
</span></span><span style="display:flex;"><span>    string <span style="color:#b57614">GetName</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">SetId</span>(string);
</span></span><span style="display:flex;"><span>    string <span style="color:#b57614">GetId</span>();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CStudent<span style="color:#af3a03">::</span>PrintInfo()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;姓名:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> name <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;学号:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> id <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;年龄:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> age <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;性别:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> gender <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CStudent<span style="color:#af3a03">::</span>SetInfo(<span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>name_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>id_, <span style="color:#b57614">int</span> age_, <span style="color:#b57614">char</span> gender_)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    name <span style="color:#af3a03">=</span> name_;
</span></span><span style="display:flex;"><span>    id <span style="color:#af3a03">=</span> id_;
</span></span><span style="display:flex;"><span>    age <span style="color:#af3a03">=</span> age_;
</span></span><span style="display:flex;"><span>    gender <span style="color:#af3a03">=</span> gender_;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CStudent<span style="color:#af3a03">::</span>SetName(string name)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>name <span style="color:#af3a03">=</span> name;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  string CStudent<span style="color:#af3a03">::</span>GetName()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> name;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CStudent<span style="color:#af3a03">::</span>SetId(string id)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">this</span><span style="color:#af3a03">-&gt;</span>id <span style="color:#af3a03">=</span> id;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  string CStudent<span style="color:#af3a03">::</span>GetId()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> id;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> CUndergraduateStudent <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> CStudent <span style="color:#928374;font-style:italic">//本科生类, 继承于类 CStudent
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    string department; <span style="color:#928374;font-style:italic">//学生所属的系名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> PrintInfo();
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">SetInfo</span>(<span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">char</span>, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>);
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CUndergraduateStudent<span style="color:#af3a03">::</span>PrintInfo()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CStudent<span style="color:#af3a03">::</span>PrintInfo();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;院系:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> department <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>         <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CUndergraduateStudent<span style="color:#af3a03">::</span>SetInfo(<span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>name_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>id_, <span style="color:#b57614">int</span> age_, <span style="color:#b57614">char</span> gender_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>department_)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CStudent<span style="color:#af3a03">::</span>SetInfo(name_, id_, age_, gender_);
</span></span><span style="display:flex;"><span>    department <span style="color:#af3a03">=</span> department_;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> CGraduatedStudent <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> CStudent <span style="color:#928374;font-style:italic">//研究生类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    string department; <span style="color:#928374;font-style:italic">//学生所属的系名
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    string advisor;    <span style="color:#928374;font-style:italic">//导师
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> PrintInfo();
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">SetInfo</span>(<span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>name_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>id_, <span style="color:#b57614">int</span> age_, <span style="color:#b57614">char</span> gender_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>department_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>advisor_);
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CGraduatedStudent<span style="color:#af3a03">::</span>PrintInfo()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CStudent<span style="color:#af3a03">::</span>PrintInfo();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;院系:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> department <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;导师:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> advisor <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> CGraduatedStudent<span style="color:#af3a03">::</span>SetInfo(<span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>name_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>id_, <span style="color:#b57614">int</span> age_, <span style="color:#b57614">char</span> gender_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>department_, <span style="color:#af3a03">const</span> string <span style="color:#af3a03">&amp;</span>advisor_)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CStudent<span style="color:#af3a03">::</span>SetInfo(name_, id_, age_, gender_);
</span></span><span style="display:flex;"><span>    department <span style="color:#af3a03">=</span> department_;
</span></span><span style="display:flex;"><span>    advisor <span style="color:#af3a03">=</span> advisor_;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CStudent s1;
</span></span><span style="display:flex;"><span>    CUndergraduateStudent s2;
</span></span><span style="display:flex;"><span>    CGraduatedStudent s3;
</span></span><span style="display:flex;"><span>    s2.SetInfo(<span style="color:#79740e">&#34;张三&#34;</span>, <span style="color:#79740e">&#34;2020-6-2-4&#34;</span>, <span style="color:#8f3f71">19</span>, <span style="color:#79740e">&#39;M&#39;</span>, <span style="color:#79740e">&#34;数学系&#34;</span>);
</span></span><span style="display:flex;"><span>    s3.SetInfo(<span style="color:#79740e">&#34;李四&#34;</span>, <span style="color:#79740e">&#34;M2021-12&#34;</span>, <span style="color:#8f3f71">19</span>, <span style="color:#79740e">&#39;F&#39;</span>, <span style="color:#79740e">&#34;计算机系&#34;</span>, <span style="color:#79740e">&#34;罗教授&#34;</span>);
</span></span><span style="display:flex;"><span>    s2.PrintInfo();
</span></span><span style="display:flex;"><span>    s3.PrintInfo();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> s2.GetName() <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    s2.SetName(<span style="color:#79740e">&#34;王五&#34;</span>);
</span></span><span style="display:flex;"><span>    s2.PrintInfo();
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> s2.GetName() <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> s2.GetId() <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>类之间的访问(5-7)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;string&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> employee <span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">short</span> age;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">float</span> salary;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">protected</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    string name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    employee(<span style="color:#b57614">short</span> ag, <span style="color:#b57614">float</span> sa, string na)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      age <span style="color:#af3a03">=</span> ag;
</span></span><span style="display:flex;"><span>      salary <span style="color:#af3a03">=</span> sa;
</span></span><span style="display:flex;"><span>      name <span style="color:#af3a03">=</span> na;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#af3a03">&lt;&lt;</span> name <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> age <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;:</span><span style="color:#79740e">\t</span><span style="color:#79740e">&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> salary;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">~</span>employee() {}
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> manager <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> employee <span style="color:#928374;font-style:italic">//派生类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> level;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    manager(<span style="color:#b57614">short</span> ag, <span style="color:#b57614">float</span> sa, string na, <span style="color:#b57614">int</span> lev) <span style="color:#af3a03">:</span> employee(ag, sa, na) <span style="color:#928374;font-style:italic">//初始化基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      level <span style="color:#af3a03">=</span> lev;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      employee<span style="color:#af3a03">::</span>print();
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">level:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> level;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> engineer <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> employee <span style="color:#928374;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">char</span> speciality, adegree;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    engineer(<span style="color:#b57614">short</span> ag, <span style="color:#b57614">float</span> sa, string na, <span style="color:#b57614">char</span> spe, <span style="color:#b57614">char</span> ade) <span style="color:#af3a03">:</span> employee(ag, sa, na) <span style="color:#928374;font-style:italic">//初始化基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      speciality <span style="color:#af3a03">=</span> spe;
</span></span><span style="display:flex;"><span>      adegree <span style="color:#af3a03">=</span> ade;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      employee<span style="color:#af3a03">::</span>print();
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">speciality:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> speciality;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">adegree:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> adegree;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">enum</span> ptitle
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    PS,
</span></span><span style="display:flex;"><span>    GM,
</span></span><span style="display:flex;"><span>    VPS,
</span></span><span style="display:flex;"><span>    VGM
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> director <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> manager
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    ptitle post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    director(<span style="color:#b57614">short</span> ag, <span style="color:#b57614">float</span> sa, string na, <span style="color:#b57614">int</span> le, ptitle po) <span style="color:#af3a03">:</span> manager(ag, sa, na, le) <span style="color:#928374;font-style:italic">//初始化基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      post <span style="color:#af3a03">=</span> po;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      manager<span style="color:#af3a03">::</span>print();
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">post:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> post <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    employee emp1(<span style="color:#8f3f71">23</span>, <span style="color:#8f3f71">610.5</span>, <span style="color:#79740e">&#34;wang&#34;</span>), emp2(<span style="color:#8f3f71">27</span>, <span style="color:#8f3f71">824.75</span>, <span style="color:#79740e">&#34;li&#34;</span>);
</span></span><span style="display:flex;"><span>    manager man1(<span style="color:#8f3f71">32</span>, <span style="color:#8f3f71">812.45</span>, <span style="color:#79740e">&#34;zhang&#34;</span>, <span style="color:#8f3f71">11</span>), man2(<span style="color:#8f3f71">34</span>, <span style="color:#8f3f71">1200.5</span>, <span style="color:#79740e">&#34;chen&#34;</span>, <span style="color:#8f3f71">7</span>);
</span></span><span style="display:flex;"><span>    engineer eng(<span style="color:#8f3f71">26</span>, <span style="color:#8f3f71">1420.10</span>, <span style="color:#79740e">&#34;sun&#34;</span>, <span style="color:#79740e">&#39;E&#39;</span>, <span style="color:#79740e">&#39;M&#39;</span>);
</span></span><span style="display:flex;"><span>    director dir(<span style="color:#8f3f71">38</span>, <span style="color:#8f3f71">1800.2</span>, <span style="color:#79740e">&#34;liu&#34;</span>, <span style="color:#8f3f71">2</span>, VPS);
</span></span><span style="display:flex;"><span>    emp1.print();
</span></span><span style="display:flex;"><span>    emp2.print();
</span></span><span style="display:flex;"><span>    man1.print();
</span></span><span style="display:flex;"><span>    man2.employee<span style="color:#af3a03">::</span>print();
</span></span><span style="display:flex;"><span>    eng.print();
</span></span><span style="display:flex;"><span>    dir.print();
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
<h5 id="protected-访问范围说明符"><code>protected</code> 访问范围说明符<a hidden class="anchor" aria-hidden="true" href="#protected-访问范围说明符">#</a></h5>
<ol>
<li>派生类可以直接访问基类中的保护成员</li>
<li>派生类不能直接访问基类中的私有成员</li>
<li>基类需要隐藏的成员一般设置为保护成员, 方便派生类成员访问</li>
<li>派生类的成员函数只能访问所作用的那个对象（即this指针指向的对象）的基类保护成员，不能访问其他基类对象的基类保护成员。</li>
</ol>
<h5 id="多重继承">多重继承<a hidden class="anchor" aria-hidden="true" href="#多重继承">#</a></h5>
<ol>
<li>
<p>多重继承：一个派生类可以同时有多个基类</p>
</li>
<li>
<p>格式</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> 派生类名:继承方式说明符 基类名1, 继承方式说明符 基类名2, ... ,继承方式说明符 基类名n{
</span></span><span style="display:flex;"><span>       	类体...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> DerivedClasss<span style="color:#af3a03">:</span><span style="color:#af3a03">public</span> BaseClass1, <span style="color:#af3a03">public</span> BaseClass2{}
</span></span></code></pre></div><p>派生类继承了所有成员变量和成员函数, 和普通继承一样</p>
<p>二义性问题：多重继承是，如果多个基类有重名的成员，则它们都被继承到派生类中，这时访问重名成员会遇到二义性问题。</p>
<ul>
<li>
<p>访问派生类对象中的某个变量时，添加“ 基类:: ”作为前缀，指明需要访问从哪个基类继承来的，从而可以排除二义性。</p>
</li>
<li>
<p>如果基类中的成员均不同名，则派生类对象访问时不会出现二义性。</p>
<ul>
<li>
<p>多重继承(5-11)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> BaseClass1 <span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> v1, v2;
</span></span><span style="display:flex;"><span>        BaseClass1();
</span></span><span style="display:flex;"><span>        BaseClass1(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">~</span>BaseClass1();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  BaseClass1<span style="color:#af3a03">::</span>BaseClass1(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass1 No parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  BaseClass1<span style="color:#af3a03">::</span>BaseClass1(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n) <span style="color:#af3a03">:</span> v1(m), v2(n){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass1 Two parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  BaseClass1<span style="color:#af3a03">::~</span>BaseClass1(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass1 Destroy&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> BaseClass2{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> v1, v4;
</span></span><span style="display:flex;"><span>        BaseClass2();
</span></span><span style="display:flex;"><span>        BaseClass2(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">~</span>BaseClass2();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  BaseClass2<span style="color:#af3a03">::</span>BaseClass2(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass2 No parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  BaseClass2<span style="color:#af3a03">::</span>BaseClass2(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n) <span style="color:#af3a03">:</span> v1(m), v4(n){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass2 Two parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  BaseClass2<span style="color:#af3a03">::~</span>BaseClass2(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass2 Destroy&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> DerivedClasss<span style="color:#af3a03">:</span><span style="color:#af3a03">public</span> BaseClass1, <span style="color:#af3a03">public</span> BaseClass2{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> v3;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        DerivedClasss();
</span></span><span style="display:flex;"><span>        DerivedClasss(<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>        DerivedClasss(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">~</span>DerivedClasss();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  DerivedClasss<span style="color:#af3a03">::</span>DerivedClasss(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClasss No parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  DerivedClasss<span style="color:#af3a03">::</span>DerivedClasss(<span style="color:#b57614">int</span> k) <span style="color:#af3a03">:</span> v3(k){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClasss One parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  DerivedClasss<span style="color:#af3a03">::</span>DerivedClasss(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n, <span style="color:#b57614">int</span> k, <span style="color:#b57614">int</span> t) <span style="color:#af3a03">:</span> BaseClass1(m, n), BaseClass2(m, t), v3(k){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClasss Four parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  DerivedClasss<span style="color:#af3a03">::~</span>DerivedClasss(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClasss Destroy&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; create object with parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    DerivedClasss derivedCla1(<span style="color:#8f3f71">1000</span>, <span style="color:#8f3f71">2000</span>, <span style="color:#8f3f71">3000</span>, <span style="color:#8f3f71">4000</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> derivedCla1.BaseClass1<span style="color:#af3a03">::</span>v1 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v2=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> derivedCla1.v2 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> derivedCla1.BaseClass2<span style="color:#af3a03">::</span>v1 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v4=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> derivedCla1.v4 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v3=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> derivedCla1.v3 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h4 id="52-访问控制">5.2 访问控制<a hidden class="anchor" aria-hidden="true" href="#52-访问控制">#</a></h4>
<p>公有控制</p>
<p>基类的公有成员和保护成员的访问属性在派生类中不变, 而基类的私有成员在基类外不可直接访问, 派生类不能访问私有成员</p>
<p>公有继承访问控制</p>
<table>
<thead>
<tr>
<th style="text-align:center">各成员</th>
<th style="text-align:center">派生类中</th>
<th style="text-align:center">基类与派生类外</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">基类的公有成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">直接访问</td>
</tr>
<tr>
<td style="text-align:center">基类的保护成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">调用共有函数访问</td>
</tr>
<tr>
<td style="text-align:center">基类的私有成员</td>
<td style="text-align:center">调用共有函数访问</td>
<td style="text-align:center">调用共有函数访问</td>
</tr>
<tr>
<td style="text-align:center">从基类继承的公有成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">直接访问</td>
</tr>
<tr>
<td style="text-align:center">从基类继承的保护成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">调用共有函数访问</td>
</tr>
<tr>
<td style="text-align:center">从基类继承的私有成员</td>
<td style="text-align:center">调用共有函数访问</td>
<td style="text-align:center">调用共有函数访问</td>
</tr>
<tr>
<td style="text-align:center">派生类中定义的公有成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">直接访问</td>
</tr>
<tr>
<td style="text-align:center">派生类中定义的保护成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">调用共有函数访问</td>
</tr>
<tr>
<td style="text-align:center">派生类中定义的私有成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">调用共有函数访问</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>方便统一处理, 提高程序效率</p>
<ul>
<li>函数的形参为基类的对象/引用/指针时, 实参可以使派生类的对象/指针, 不用为每个类设计单独的模块</li>
</ul>
</li>
</ul>
<h5 id="522-类型兼容规则">5.2.2 类型兼容规则<a hidden class="anchor" aria-hidden="true" href="#522-类型兼容规则">#</a></h5>
<ul>
<li>
<p><strong>任何需要基类对象的地方, 都可以用公有派生类的对象来替代</strong>, 也称为 赋值兼容规则</p>
<ol>
<li><strong>派生类的对象可以赋值给基类对象</strong></li>
<li><strong>派生类对象可以用来初始化基类引用</strong></li>
<li><strong>派生类对象的地址可以赋值给基类指针</strong>, 即派生类的指针可以赋值给基类的指针
此规则反过来不成立</li>
</ol>
</li>
<li>
<p>验证类型兼容规则输出的结果(5-14)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> A <span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> an;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    A() {}
</span></span><span style="display:flex;"><span>    A(<span style="color:#b57614">int</span> n)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      an <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;A 的对象:&#34;</span>;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;an:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> an;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>(<span style="color:#b57614">int</span> k)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;an:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> an;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> B <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> A
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> bn;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    B(<span style="color:#b57614">int</span> n) <span style="color:#af3a03">:</span> A(<span style="color:#8f3f71">2</span> <span style="color:#af3a03">*</span> n)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      bn <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\n</span><span style="color:#79740e">B 的对象:&#34;</span>;
</span></span><span style="display:flex;"><span>      A<span style="color:#af3a03">::</span>print(<span style="color:#8f3f71">1</span>);
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, bn=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> bn <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    A a(<span style="color:#8f3f71">10</span>);
</span></span><span style="display:flex;"><span>    B b(<span style="color:#8f3f71">20</span>);
</span></span><span style="display:flex;"><span>    a.print();
</span></span><span style="display:flex;"><span>    b.print();
</span></span><span style="display:flex;"><span>    a <span style="color:#af3a03">=</span> b;
</span></span><span style="display:flex;"><span>    a.print();
</span></span><span style="display:flex;"><span>    b.print();
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h5 id="523-私有继承">5.2.3 私有继承<a hidden class="anchor" aria-hidden="true" href="#523-私有继承">#</a></h5>
<p>当派生类私有继承基类时，基类中的公有成员和保护成员都成为<strong>派生类的私有成员</strong>，</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">第一级派生中</th>
<th style="text-align:center">第二级派生中</th>
<th style="text-align:center">基类与派生类外</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">基类的公有成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">不可访问</td>
<td style="text-align:center">不可访问</td>
</tr>
<tr>
<td style="text-align:center">基类的保护成员</td>
<td style="text-align:center">直接访问</td>
<td style="text-align:center">不可访问</td>
<td style="text-align:center">不可访问</td>
</tr>
<tr>
<td style="text-align:center">基类的私有成员</td>
<td style="text-align:center">调用公有函数访问</td>
<td style="text-align:center">不可访问</td>
<td style="text-align:center">不可访问</td>
</tr>
</tbody>
</table>
<h5 id="524保护继承">5.2.4保护继承<a hidden class="anchor" aria-hidden="true" href="#524保护继承">#</a></h5>
<p>保护继承中，基类中公有成员和保护成员都以<strong>保护成员继承到派生类中</strong>, 而基类的私有成员不可直接访问。</p>
<h4 id="53-派生类的构造函数和析构函数">5.3 派生类的构造函数和析构函数<a hidden class="anchor" aria-hidden="true" href="#53-派生类的构造函数和析构函数">#</a></h4>
<h5 id="531-构造函数与析构函数">5.3.1 构造函数与析构函数<a hidden class="anchor" aria-hidden="true" href="#531-构造函数与析构函数">#</a></h5>
<ol>
<li>
<p>派生类不继承构造函数, 所以需要在派生类的构造函数中调用基类的构造函数, 以完成对从基类继承的成员变量的初始化工作。</p>
<ul>
<li>执行派生类构造函数前, 总是<strong>先执行基类的构造函数</strong>, 调用顺序为派生继承时的基类声明顺序</li>
<li>派生对象销毁时, 析构函数反之, <strong>先执行派生类的析构函数</strong>,再执行基类析构函数</li>
<li>只要基类不是默认构造函数, 都要显式给出基类名和参数表</li>
<li><strong>基类定义了带有形参的构造函数, 派生类就应当定义构造函数</strong></li>
</ul>
</li>
<li>
<p>格式</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>派生类名<span style="color:#af3a03">::</span>派生类名(参数表)<span style="color:#af3a03">:</span>基类名<span style="color:#8f3f71">1</span>(基类<span style="color:#8f3f71">1</span> 初始化参数表), ... ,基类名m (基类m 初始化参数表), 成员对象名<span style="color:#8f3f71">1</span>(成员对象<span style="color:#8f3f71">1</span>初始化参数表), ... ,成员对象名n (成员对象n初始化参数表)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	派生类构造函数函数体   <span style="color:#928374;font-style:italic">//其它初始化操作
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Derived<span style="color:#af3a03">::</span>DerivedClass(<span style="color:#b57614">int</span> m,<span style="color:#b57614">int</span> n,<span style="color:#b57614">int</span> k,<span style="color:#b57614">int</span> t)<span style="color:#af3a03">:</span>BaseClass1(m,n),BaseClass2(n,t),v3(k){
</span></span><span style="display:flex;"><span>	cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClass 带四个参数构造函数 &#34;</span>  <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>基类和派生类的构造/解析函数(5-15)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> BaseClass {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">protected</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> v1, v2;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        BaseClass();
</span></span><span style="display:flex;"><span>        BaseClass(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">~</span>BaseClass();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  BaseClass<span style="color:#af3a03">::</span>BaseClass(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass No parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  BaseClass<span style="color:#af3a03">::</span>BaseClass(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n){
</span></span><span style="display:flex;"><span>    v1 <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>    v2 <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass Two parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  BaseClass<span style="color:#af3a03">::~</span>BaseClass(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;BaseClass Destroy&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> DerivedClass<span style="color:#af3a03">:</span><span style="color:#af3a03">public</span> BaseClass{
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">int</span> v3;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        DerivedClass();
</span></span><span style="display:flex;"><span>        DerivedClass(<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>        DerivedClass(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">~</span>DerivedClass();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  DerivedClass<span style="color:#af3a03">::</span>DerivedClass(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClass No parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  DerivedClass<span style="color:#af3a03">::</span>DerivedClass(<span style="color:#b57614">int</span> k) <span style="color:#af3a03">:</span> v3(k)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClass One parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  DerivedClass<span style="color:#af3a03">::</span>DerivedClass(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n, <span style="color:#b57614">int</span> k)<span style="color:#af3a03">:</span>BaseClass(m, n), v3(k){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClass Three parameter&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  DerivedClass<span style="color:#af3a03">::~</span>DerivedClass(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;DerivedClass Destroy&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;create no parameter object&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    BaseClass baseCla;
</span></span><span style="display:flex;"><span>    DerivedClass derivedCla;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;create with parameter object&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    BaseClass baseCla1(<span style="color:#8f3f71">10</span>, <span style="color:#8f3f71">20</span>);
</span></span><span style="display:flex;"><span>    DerivedClass derivedCla1(<span style="color:#8f3f71">30</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>派生类函数执行的一般次序</p>
<ol>
<li>调用基类构造函数, 调用顺序按照它们被继承时声明的顺序(从左至右)</li>
<li>对派生类新增成员变量的初始化, 调用顺序按照它们在类中的声明顺序</li>
<li>执行派生类的构造函数体中的内容</li>
</ol>
</li>
</ul>
<p>例题：调用基类和派生类的构造函数/析构函数和成员函数(5-16)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> Base <span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#b57614">int</span> Y;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  Base(<span style="color:#b57614">int</span> y <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>){
</span></span><span style="display:flex;"><span>	    Y <span style="color:#af3a03">=</span> y;
</span></span><span style="display:flex;"><span>	    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	  }
</span></span><span style="display:flex;"><span>	  <span style="color:#af3a03">~</span>Base(){
</span></span><span style="display:flex;"><span>	    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;~Base()&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	  }
</span></span><span style="display:flex;"><span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>(){
</span></span><span style="display:flex;"><span>	    cout <span style="color:#af3a03">&lt;&lt;</span> Y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>	  }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> Derived <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> Base{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#b57614">int</span> Z;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	  Derived(<span style="color:#b57614">int</span> y, <span style="color:#b57614">int</span> z) <span style="color:#af3a03">:</span> Base(y){
</span></span><span style="display:flex;"><span>	    Z <span style="color:#af3a03">=</span> z;
</span></span><span style="display:flex;"><span>	    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Derived(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> z <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	  }
</span></span><span style="display:flex;"><span>	  <span style="color:#af3a03">~</span>Derived(){
</span></span><span style="display:flex;"><span>	    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;~Derived()&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	  }
</span></span><span style="display:flex;"><span>	  <span style="color:#b57614">void</span> <span style="color:#b57614">print</span>(){
</span></span><span style="display:flex;"><span>	    Base<span style="color:#af3a03">::</span>print();
</span></span><span style="display:flex;"><span>	    cout <span style="color:#af3a03">&lt;&lt;</span> Z <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	  }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>  Derived d(<span style="color:#8f3f71">10</span>, <span style="color:#8f3f71">20</span>);  <span style="color:#928374;font-style:italic">// 创建派生类对象并调用构造函数初始化 Base(10)  Derived(10,20)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  d.print(); <span style="color:#928374;font-style:italic">// 10 20
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;  <span style="color:#928374;font-style:italic">// 最后执行析构函数  ~Derived()  ~Base()
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>}
</span></span></code></pre></div><h5 id="532-复制构造函数">5.3.2 复制构造函数<a hidden class="anchor" aria-hidden="true" href="#532-复制构造函数">#</a></h5>
<p>一个类如果没有定义复制构造函数，则系统会自动生成一个隐含的复制构造函数，默认的复制构造函数自动调用基类的复制构造函数, 对派生类新增的成员对象一一复制。</p>
<ul>
<li>
<p>派生类中的复制构造函数(5-17)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> A {<span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        A(){
</span></span><span style="display:flex;"><span>          i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">100</span>;
</span></span><span style="display:flex;"><span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;class A default construct function&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        A(<span style="color:#af3a03">const</span> A <span style="color:#af3a03">&amp;</span>s){
</span></span><span style="display:flex;"><span>          i <span style="color:#af3a03">=</span> s.i;
</span></span><span style="display:flex;"><span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;calss A copy construct funciton&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> <span style="color:#b57614">getValue</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">void</span> <span style="color:#b57614">setValue</span>(<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> i;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> A<span style="color:#af3a03">::</span>getValue(){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">void</span> A<span style="color:#af3a03">::</span>setValue(<span style="color:#b57614">int</span> k){
</span></span><span style="display:flex;"><span>    i <span style="color:#af3a03">=</span> k;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> B <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> A{
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">float</span> f;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        B()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          f <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20.1</span>;
</span></span><span style="display:flex;"><span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;class B default construct function&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        B(<span style="color:#af3a03">const</span> B <span style="color:#af3a03">&amp;</span>v) <span style="color:#af3a03">:</span> A<span style="color:#af3a03">::</span>A(v), f(v.f)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;class B copy construct function&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">float</span> <span style="color:#b57614">getValue</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">int</span> <span style="color:#b57614">getValue1</span>(){
</span></span><span style="display:flex;"><span>          <span style="color:#af3a03">return</span> A<span style="color:#af3a03">::</span>getValue();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">float</span> B<span style="color:#af3a03">::</span>getValue(){
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> f;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>() {
</span></span><span style="display:flex;"><span>    A a;
</span></span><span style="display:flex;"><span>    B b;
</span></span><span style="display:flex;"><span>    B bb(b); <span style="color:#928374;font-style:italic">//调用类A 复制构造函数、类B 赋值构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>赋值运算符的重载及使用(5-18)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> Base
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    Base() {}
</span></span><span style="display:flex;"><span>    Base(Base <span style="color:#af3a03">&amp;</span>c)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base 复制构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Base <span style="color:#af3a03">operator</span><span style="color:#af3a03">=</span>(<span style="color:#af3a03">const</span> Base <span style="color:#af3a03">&amp;</span>b)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base::operator=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> <span style="color:#af3a03">*</span><span style="color:#af3a03">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> Derived <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> Base
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    Derived()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Derived::构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    Derived d1, d2;
</span></span><span style="display:flex;"><span>    Derived d3(d1); <span style="color:#928374;font-style:italic">// d3 初始化过程中会调用类 Base 的复制构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    d2 <span style="color:#af3a03">=</span> d1;        <span style="color:#928374;font-style:italic">// 会调用类 Base 的重载运算符“=”运算符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h5 id="533-多重继承的构造函数与析构函数">5.3.3 多重继承的构造函数与析构函数<a hidden class="anchor" aria-hidden="true" href="#533-多重继承的构造函数与析构函数">#</a></h5>
<p>当创建有多个基类的派生类的对象时，按照类定义中给出的基类的顺序，依次调用它们的构造函数，再调用派生类的构造函数。
对象消亡时，先调用派生类的析构函数，再调用派生类的析构函数。</p>
<ul>
<li>
<p><code>Derived::Derived() : Base(0, 0), Base2(0,0), v3(0)</code> //派生类构造函数参数表的默认参数决定基类调用的构造函数参数，不应该为空</p>
</li>
<li>
<p><code>class Derived : public Base, public Base2</code> <strong>多重继承类定义时间接类的声明顺序就是初始化顺序</strong></p>
<ul>
<li>多重继承(5-19)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>     <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>     <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">class</span> Base <span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     {
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">protected</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">int</span> v1, v2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>       Base();
</span></span><span style="display:flex;"><span>       Base(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">~</span>Base();
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">SetValue</span>(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">PrintValue</span>();
</span></span><span style="display:flex;"><span>     };
</span></span><span style="display:flex;"><span>     Base<span style="color:#af3a03">::</span>Base() <span style="color:#af3a03">:</span> v1(<span style="color:#8f3f71">0</span>), v2(<span style="color:#8f3f71">0</span>) <span style="color:#928374;font-style:italic">//无参数时初始化成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base 无参构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     Base<span style="color:#af3a03">::</span>Base(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n) <span style="color:#af3a03">:</span> v1(m), v2(n)
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       v1 <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>       v2 <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base 带2个参数构造函数, &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v1 <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v2 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     Base<span style="color:#af3a03">::~</span>Base()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base 析构函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">void</span> Base<span style="color:#af3a03">::</span>SetValue(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n)
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       v1 <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>       v2 <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">void</span> Base<span style="color:#af3a03">::</span>PrintValue()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v1 <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">v2=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v2 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">class</span> Base2 <span style="color:#928374;font-style:italic">//基类
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     {
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">protected</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">int</span> v1, v4;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>       Base2();
</span></span><span style="display:flex;"><span>       Base2(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">~</span>Base2();
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">SetValue</span>(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">PrintValue</span>();
</span></span><span style="display:flex;"><span>     };
</span></span><span style="display:flex;"><span>     Base2<span style="color:#af3a03">::</span>Base2() <span style="color:#af3a03">:</span> v1(<span style="color:#8f3f71">0</span>), v4(<span style="color:#8f3f71">0</span>) <span style="color:#928374;font-style:italic">//无参数时初始化成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base2 无参构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     Base2<span style="color:#af3a03">::</span>Base2(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n) <span style="color:#af3a03">:</span> v1(m), v4(n)
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       v1 <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>       v4 <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base2 带2个参数构造函数, &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v1 <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;, &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v4 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     Base2<span style="color:#af3a03">::~</span>Base2()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Base2 析构函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">void</span> Base2<span style="color:#af3a03">::</span>SetValue(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n)
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       v1 <span style="color:#af3a03">=</span> m;
</span></span><span style="display:flex;"><span>       v4 <span style="color:#af3a03">=</span> n;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">void</span> Base2<span style="color:#af3a03">::</span>PrintValue()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;v1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v1 <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">v4=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v4 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">class</span> Derived <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> Base, <span style="color:#af3a03">public</span> Base2
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">int</span> v3;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>       Derived();
</span></span><span style="display:flex;"><span>       Derived(<span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>       Derived(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">~</span>Derived();
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">SetValue</span>(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n, <span style="color:#b57614">int</span> k, <span style="color:#b57614">int</span> h)
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>         Base<span style="color:#af3a03">::</span>SetValue(m, n);
</span></span><span style="display:flex;"><span>         Base2<span style="color:#af3a03">::</span>SetValue(<span style="color:#8f3f71">2</span> <span style="color:#af3a03">*</span> m, h);
</span></span><span style="display:flex;"><span>         v3 <span style="color:#af3a03">=</span> k;
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">SetValue</span>(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n, <span style="color:#b57614">int</span> k)
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>         Base<span style="color:#af3a03">::</span>SetValue(m, n);
</span></span><span style="display:flex;"><span>         Base2<span style="color:#af3a03">::</span>SetValue(<span style="color:#8f3f71">2</span> <span style="color:#af3a03">*</span> m, <span style="color:#8f3f71">2</span> <span style="color:#af3a03">*</span> n);
</span></span><span style="display:flex;"><span>         v3 <span style="color:#af3a03">=</span> k;
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">SetValue</span>(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n)
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>         Base<span style="color:#af3a03">::</span>SetValue(m, n);
</span></span><span style="display:flex;"><span>         Base2<span style="color:#af3a03">::</span>SetValue(<span style="color:#af3a03">-</span><span style="color:#8f3f71">1</span>, <span style="color:#af3a03">-</span><span style="color:#8f3f71">1</span>);
</span></span><span style="display:flex;"><span>         v3 <span style="color:#af3a03">=</span> <span style="color:#af3a03">-</span><span style="color:#8f3f71">1</span>;
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>       <span style="color:#b57614">void</span> <span style="color:#b57614">PrintValue</span>();
</span></span><span style="display:flex;"><span>     };
</span></span><span style="display:flex;"><span>     Derived<span style="color:#af3a03">::</span>Derived() <span style="color:#af3a03">:</span> Base(<span style="color:#8f3f71">0</span>, <span style="color:#8f3f71">0</span>), Base2(), v3(<span style="color:#8f3f71">0</span>) <span style="color:#928374;font-style:italic">//此处默认参数决定基类调用的构造函数参数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Derived 无参构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     Derived<span style="color:#af3a03">::</span>Derived(<span style="color:#b57614">int</span> k)
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       v3 <span style="color:#af3a03">=</span> k;
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;带1个参数构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     Derived<span style="color:#af3a03">::</span>Derived(<span style="color:#b57614">int</span> m, <span style="color:#b57614">int</span> n, <span style="color:#b57614">int</span> k, <span style="color:#b57614">int</span> t) <span style="color:#af3a03">:</span> Base(m, n), Base2(m, t), v3(k)
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;带4个参数构造函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     Derived<span style="color:#af3a03">::~</span>Derived()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;Derived 析构函数&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">void</span> Derived<span style="color:#af3a03">::</span>PrintValue()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       Base<span style="color:#af3a03">::</span>PrintValue();
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\t</span><span style="color:#79740e">v3=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v3 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>       Base2<span style="color:#af3a03">::</span>PrintValue();
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;带4个参数对象的创建&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>       Derived derived(<span style="color:#8f3f71">1000</span>, <span style="color:#8f3f71">2000</span>, <span style="color:#8f3f71">3000</span>, <span style="color:#8f3f71">4000</span>);
</span></span><span style="display:flex;"><span>       derived.PrintValue();
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>            <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;不带参数对象的创建&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>       Derived derived2;
</span></span><span style="display:flex;"><span>       derived2.PrintValue();
</span></span><span style="display:flex;"><span>       cout <span style="color:#af3a03">&lt;&lt;</span> endl
</span></span><span style="display:flex;"><span>            <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;带1个参数对象的创建&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>       Derived derived3(<span style="color:#8f3f71">111</span>);
</span></span><span style="display:flex;"><span>       derived3.PrintValue();
</span></span><span style="display:flex;"><span>       <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     ```
</span></span></code></pre></div></li>
</ul>
<h4 id="54--类之间的关系">5.4  类之间的关系<a hidden class="anchor" aria-hidden="true" href="#54--类之间的关系">#</a></h4>
<h5 id="541-类与类之间的关系">5.4.1 类与类之间的关系<a hidden class="anchor" aria-hidden="true" href="#541-类与类之间的关系">#</a></h5>
<p>使用已有类编写新类的两种方式：<strong>继承 “ is a ”</strong> 和  <strong>组合 “has a”</strong></p>
<p><strong>继承关系 （ is a ）</strong>，具有传递性
组合关系（ <strong>has a</strong> ），具有包含关系，表现为封闭类，即一个类以另一个类的对象作为成员变量。</p>
<h5 id="542-封闭类的派生">5.4.2 封闭类的派生<a hidden class="anchor" aria-hidden="true" href="#542-封闭类的派生">#</a></h5>
<ol>
<li>
<p><strong>一个类的成员变量是另一个类的对象</strong>, 称为封闭类</p>
</li>
<li>
<p>定义封闭类构造函数的一般形式:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>类名<span style="color:#af3a03">::</span>类名(形参表)<span style="color:#af3a03">:</span> 内嵌对象<span style="color:#8f3f71">1</span>(形参表),内前对象<span style="color:#8f3f71">2</span>(形参表), ...
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	类体
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>内嵌对象1(形参表),内前对象2(形参表), ...</code> 是初始化列表, 对内嵌对象进行初始化</p>
<ol start="3">
<li>
<p><strong>互包含关系的类</strong></p>
<ul>
<li>
<p>两个类相互引用, 称为循环依赖的类</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> A <span style="color:#928374;font-style:italic">//类 A 的定义
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>  	<span style="color:#b57614">void</span> f(B b); <span style="color:#928374;font-style:italic">//以类B对象为参数的成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> B <span style="color:#928374;font-style:italic">//定义类 B
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>  	<span style="color:#b57614">void</span> g(A a); <span style="color:#928374;font-style:italic">//以类A对象为参数的成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span></code></pre></div><ul>
<li>会编译错误</li>
</ul>
</li>
<li>
<p>向前引用声明</p>
<ul>
<li>引用未定义的类之前, 将该类的名字告诉编译器, 完整类的定义可以写在其他地方</li>
<li>在提供一个完整的类定义之前, <strong>不能定义该类的对象</strong>, 也不能内联成员函数中使用该类的对象</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="55--多层次的派生">5.5  多层次的派生<a hidden class="anchor" aria-hidden="true" href="#55--多层次的派生">#</a></h4>
<ol>
<li>派生可以是多层次的：类A派生类B，类B派生类C，类C派生类D&hellip;称类A是类B的直接基类，类B是类C的直接基类，类A是类C的间接基类，类A也是类D的间接基类。</li>
<li>在定义派生类时，只需要写直接基类，不需写间接基类。派生类沿着类的层次自动向上继承它所有的直接和间接基类的成员。</li>
<li>类之间的继承关系具有传递性</li>
<li>派生类成员包括派生类自己定义的成员、直接基类中定义的成员及所有间接基类中定义的全部成员</li>
<li>生成派生类对象时, 会从最顶层的基类开始逐层往下执行所有基类的构造函数, 最后执行派生类的构造函数; 析构反之</li>
</ol>
<ul>
<li>一个类可以是多个类的直接基类, 只能说明一次</li>
<li>一个类可以多次成为某个派生类的间接基类</li>
</ul>
<h4 id="56-基类与派生类指针的相互转换">5.6 基类与派生类指针的相互转换<a hidden class="anchor" aria-hidden="true" href="#56-基类与派生类指针的相互转换">#</a></h4>
<ul>
<li>派生类对象可以赋值给基类对象</li>
<li>派生类对象可以用来初始化基类引用</li>
<li>派生类指针可以赋值给基类指针</li>
</ul>
<ol>
<li><strong>基类指针不能直接赋值给派生类指针</strong>，但是通过强制类型转换，可以将基类指针强制转换成派生类指针后，再赋值给派生类指针。</li>
<li>即使基类指针指向一个派生类对象, 也不能通过基类指针访问基类中没有而仅在派生类中定义的成员函数。</li>
<li>当使用指针调用类中的函数时，需要根据指针的类型来决定可调用的函数。</li>
<li>如果一个指针是基类类型的，则不管它指向的是基类对象还是派生对象，都仅能调用基类中声明的函数，而不能调用基类中没有而仅在派生类中声明的函数。</li>
<li>如果一个指针是派生类类型的，则调用的是派生类中的函数；如果派生类中没有声明，则调用从基类继承的同名函数。</li>
</ol>
<ul>
<li>
<p><strong>下面的代码演示了基类和派生类指针的互相转换：</strong>(5-23)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> CBase
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">protected</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">int</span> n;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      CBase(<span style="color:#b57614">int</span> i) <span style="color:#af3a03">:</span>n(i) { }
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">void</span> <span style="color:#b57614">Print</span>() { cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;CBase:n=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> endl; }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> CDerived <span style="color:#af3a03">:</span><span style="color:#af3a03">public</span> CBase
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">int</span> v;
</span></span><span style="display:flex;"><span>      CDerived(<span style="color:#b57614">int</span> i) <span style="color:#af3a03">:</span>CBase(i), v(<span style="color:#8f3f71">2</span> <span style="color:#af3a03">*</span> i) { }
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">void</span> <span style="color:#b57614">Func</span>() { };
</span></span><span style="display:flex;"><span>      <span style="color:#b57614">void</span> <span style="color:#b57614">Print</span>()
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;CDerived:n=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>          cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;CDerived:v=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> v <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>      CDerived objDerived(<span style="color:#8f3f71">3</span>);
</span></span><span style="display:flex;"><span>      CBase objBase(<span style="color:#8f3f71">5</span>);
</span></span><span style="display:flex;"><span>      CBase <span style="color:#af3a03">*</span> pBase <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>objDerived; <span style="color:#928374;font-style:italic">// 使得基类指针指向派生类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>                                   <span style="color:#928374;font-style:italic">//pBase-&gt;Func(); //错, CBase类没有Func()成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>                                   <span style="color:#928374;font-style:italic">//pBase-&gt;v = 5;  //错 CBase类没有v成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      pBase<span style="color:#af3a03">-&gt;</span>Print();
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;1)------------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//CDerived * pDerived = &amp; objBase; //错，不能将基类指针赋值给派生类指针
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      CDerived <span style="color:#af3a03">*</span> pDerived <span style="color:#af3a03">=</span> (CDerived <span style="color:#af3a03">*</span>)(<span style="color:#af3a03">&amp;</span>objBase);
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//等同于 CDerived *pDerived = static_cast&lt;CDerived *&gt;(&amp;objBase);
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      pDerived<span style="color:#af3a03">-&gt;</span>Print();  <span style="color:#928374;font-style:italic">//慎用，可能出现不可预期的错误
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;2)------------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      objDerived.Print();
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;3)------------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      pDerived<span style="color:#af3a03">-&gt;</span>v <span style="color:#af3a03">=</span> <span style="color:#8f3f71">128</span>;  <span style="color:#928374;font-style:italic">//往别人的空间里写入数据，会有问题
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      objDerived.Print();
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>基类引用也可以强制类型转换为派生类引用</p>
</li>
<li>
<p>强制转换都存在安全隐患</p>
<ul>
<li><code>dynamic_cast</code> 强制类型转换运算符, 判断转换是否安全 (指针或引用是否真的指向派生类对象)</li>
</ul>
</li>
<li>
<p>各种类型转换示例</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> Base
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> n;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    Base() <span style="color:#928374;font-style:italic">//没有方法内容会报错
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;基类&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">Print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;基类打印&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> Derived <span style="color:#af3a03">:</span> <span style="color:#af3a03">public</span> Base
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>    Derived()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;派生类&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">void</span> <span style="color:#b57614">Print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;派生类打印&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    Base b;
</span></span><span style="display:flex;"><span>    Derived der;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-----基类指针指向派生类对象-------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    Base <span style="color:#af3a03">*</span>pBase <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>der; <span style="color:#928374;font-style:italic">//基类指针指向派生类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pBase<span style="color:#af3a03">-&gt;</span>Print();     <span style="color:#928374;font-style:italic">//基类 Print 函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-------基类指针指向基类对象-----&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    pBase <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>b;     <span style="color:#928374;font-style:italic">//基类指针指向基类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pBase<span style="color:#af3a03">-&gt;</span>Print(); <span style="color:#928374;font-style:italic">//基类 Print 函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-------派生类对象转换为基类对象-----&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    ((Base)der).Print(); <span style="color:#928374;font-style:italic">//指针或对象是什么类型就调用什么类型的函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#928374;font-style:italic">// ((Derived)b).Print(); //基类对象无法转换为派生类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;------派生类指针指向派生类对象------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    Derived <span style="color:#af3a03">*</span>pDer <span style="color:#af3a03">=</span> <span style="color:#af3a03">&amp;</span>der; <span style="color:#928374;font-style:italic">//派生类指针指向派生类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pDer<span style="color:#af3a03">-&gt;</span>Print();        <span style="color:#928374;font-style:italic">//派生类 Print 函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-----派生类指针指向基类指针转换成派生类指针-------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    pDer <span style="color:#af3a03">=</span> (Derived <span style="color:#af3a03">*</span>)(pBase); <span style="color:#928374;font-style:italic">//基类指针转换成派生类指针赋值给派生类指针
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pDer<span style="color:#af3a03">-&gt;</span>Print();             <span style="color:#928374;font-style:italic">//派生类 Print 函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-----派生类指针指向转换成派生类型的基类对象-------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    pDer <span style="color:#af3a03">=</span> (Derived <span style="color:#af3a03">*</span>)(<span style="color:#af3a03">&amp;</span>b); <span style="color:#928374;font-style:italic">//派生类指针指向转换成派生类型的基类对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pDer<span style="color:#af3a03">-&gt;</span>Print();          <span style="color:#928374;font-style:italic">//派生类 Print 函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-----派生类指针转换成基类指针-------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    pBase <span style="color:#af3a03">=</span> ((Base <span style="color:#af3a03">*</span>)(pDer)); <span style="color:#928374;font-style:italic">//派生类指针转换成基类指针
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pBase<span style="color:#af3a03">-&gt;</span>Print();           <span style="color:#928374;font-style:italic">//基类 Print 函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-----函数调用-------&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    pDer<span style="color:#af3a03">-&gt;</span>Base<span style="color:#af3a03">::</span>Print();           <span style="color:#928374;font-style:italic">//派生类指针调用基类函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pBase<span style="color:#af3a03">-&gt;</span>Base<span style="color:#af3a03">::</span>Print();          <span style="color:#928374;font-style:italic">//基类指针调用基类函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    ((Derived <span style="color:#af3a03">*</span>)(pBase))<span style="color:#af3a03">-&gt;</span>Print(); <span style="color:#928374;font-style:italic">//基类指针转换派生指针调用派生类函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    pBase<span style="color:#af3a03">-&gt;</span>Print();
</span></span><span style="display:flex;"><span>    pDer<span style="color:#af3a03">-&gt;</span>Print();
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h1 id="第六章-多态与虚函数">第六章 多态与虚函数<a hidden class="anchor" aria-hidden="true" href="#第六章-多态与虚函数">#</a></h1>
<ul>
<li>多态原理</li>
<li>虚析构函数</li>
<li>纯虚函数</li>
</ul>
<h4 id="61-多态的基本概念">6.1 多态的基本概念<a hidden class="anchor" aria-hidden="true" href="#61-多态的基本概念">#</a></h4>
<h5 id="611-多态">6.1.1 多态<a hidden class="anchor" aria-hidden="true" href="#611-多态">#</a></h5>
<p>面对对象程序设计语言有封装、继承、多态三种机制，运用这三种机制能搞有效提高程序的可读性、可扩充性和可重用性</p>
<p><strong>多态</strong>：不同对象可以调用相同名称的函数，但可导致完全不同的行为的现象
<strong>封装</strong>：可以使得代码模块化
<strong>继承</strong>：可以让程序在原有的代码基础上进行扩展，它们的目的都是为了代码复用</p>
<p>多态是为了<strong>接口复用</strong>，不论传递过来的是哪个类的对象函数都能够通过同一个接口调用到适应各自对象的实现方法。</p>
<p>多态分为编译时多态和运行时多态
编译时多态(静态多态)：在编译阶段就能绑定调用语句与调用函数入口地址，即函数的重载(包括运算符的重载)
运行时多态(动态多态)：函数调用与代码入口地址的绑定需要在运行时刻才能确定，这也称为动态联编或动态绑定。</p>
<p>实现多态时，必须满足的条件是：<strong>通过基类指针或引用调用基类中声明的虚函数</strong></p>
<ul>
<li>类之间满足赋值兼容的前提下, 实现动态绑定必须满足两个条件
<ol>
<li>必须声明虚函数</li>
<li>通过基类类型的引用或者指针调用虚函数</li>
</ol>
</li>
</ul>
<h5 id="612-虚函数">6.1.2 虚函数<a hidden class="anchor" aria-hidden="true" href="#612-虚函数">#</a></h5>
<ol>
<li>虚函数：在类的定义中使用<code>virtual</code> 关键字来限定的成员函数即成为虚函数。</li>
<li>virtual 关键字只在类定义中的成员函数声明处使用, 不能在类外部成员写函数体时使用
<ul>
<li>静态成员函数不能是虚函数</li>
<li>包含虚函数的类称为“多态类”</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">virtual</span> 函数返回值类型 函数名(形参表);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> A{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">virtual</span> <span style="color:#b57614">void</span> fun(); <span style="color:#928374;font-style:italic">// 声明虚函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> A<span style="color:#af3a03">::</span>fun(){...}  <span style="color:#928374;font-style:italic">// 定义虚函数
</span></span></span></code></pre></div><ul>
<li>注意
<ol>
<li><strong>虚函数一般不声明为内联函数</strong>。虽然虚函数声明为内联不会引起错误, 但因为内联函数是在编译阶段进行动态处理的, 而对虚函数的调用是动态绑定的。</li>
<li>构造函数不能声明为虚函数。</li>
<li>静态成员函数不能声明为虚函数。</li>
<li>友元函数不能声明为虚函数。</li>
<li>全局函数不能声明为虚函数。</li>
<li><strong>派生类重写基类的虚函数实现多态</strong>, 要求函数名、参数列表及返回值类型要完全相同</li>
<li>基类中定义了虚函数, 在派生类中该函数始终<strong>保持虚函数</strong>的特性</li>
<li><strong>不要在构造函数和析构函数中调用虚函数</strong>, 构造函数和析构函数中, 对象不完整的，可能出现未定义的行为。</li>
<li><strong>最好将基类的析构函数声明为虚函数</strong></li>
</ol>
</li>
</ul>
<ol start="3">
<li>
<p>通过基类指针实现多态</p>
<ul>
<li>
<p>声明虚函数后, 派生类对象的地址可以赋值给基类指针, 基类指针可以指向派生类对象</p>
</li>
<li>
<p>调用基类指针时, 指针指向基类对象则执行基类的虚函数, 指向派生类对象则执行派生类的虚函数</p>
</li>
</ul>
</li>
<li>
<p>通过基类引用实现多态</p>
<ul>
<li>引用等同于指针</li>
</ul>
</li>
<li>
<p><strong>多态的实现原理</strong></p>
<ul>
<li>
<p>多态的关键在于通过指针/引用调用一个虚函数时, 编译阶段不能确定到底调用的是基类还是派生类的函数, 运行时才能确定</p>
</li>
<li>
<p>多态机制下对象储存空间的大小(6-4)</p>
</li>
<li>
<p>类A中每个对象都保存自己的虚函数表的地址, 这是实现多态的关键</p>
<ul>
<li>每个虚函数的类都有一个虚函数表, 编译器生成, 程序运行时载入</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="62-多态实例">6.2 多态实例<a hidden class="anchor" aria-hidden="true" href="#62-多态实例">#</a></h4>
<ul>
<li>使用多态处理图形示例</li>
</ul>
<h4 id="63-多态的使用">6.3 多态的使用<a hidden class="anchor" aria-hidden="true" href="#63-多态的使用">#</a></h4>
<ul>
<li>多态与非多态的对比(6-8)</li>
</ul>
<h4 id="64-虚析构函数">6.4 虚析构函数<a hidden class="anchor" aria-hidden="true" href="#64-虚析构函数">#</a></h4>
<ol>
<li>C++不支持虚构造函数，但支持虚析构函数。虚析构函数一般格式：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">virtual</span> <span style="color:#af3a03">~</span>类名();
</span></span></code></pre></div><ol start="2">
<li>虚析构函数没有返回值类型、没有参数</li>
<li>如果一个类的析构函数是虚函数, 则它的派生函数的析构函数都是虚函数</li>
<li><strong>使用虚析构函数的目的是为了在对象消亡时实现多态。</strong> 具体来说，设置了虚析构函数后，在使用指针或引用时可以动态绑定，实现运行时的多态，保证使用基类类型的指针能够调用适当的析构函数针对不同的对象进行清理工作，以避免造成内存泄漏。</li>
<li>构造函数不能是虚函数</li>
</ol>
<h4 id="65-纯虚函数和抽象类">6.5 纯虚函数和抽象类<a hidden class="anchor" aria-hidden="true" href="#65-纯虚函数和抽象类">#</a></h4>
<h5 id="纯虚函数">纯虚函数<a hidden class="anchor" aria-hidden="true" href="#纯虚函数">#</a></h5>
<ol>
<li>纯虚函数：声明在基类中的虚函数，没有具体的定义，而由各派生类根据实际需要给出各自的定义。纯虚函数只有函数的名字但不具备函数的功能，不能调用基类中的这个函数。</li>
<li>纯虚函数一般形式：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">virtual</span> 函数类型 函数名(参数表)<span style="color:#af3a03">=</span><span style="color:#8f3f71">0</span>;
</span></span></code></pre></div><p>必须有<code>=0</code>，不能有函数体, 大括号也不能有，派生类中必须重写这个函数</p>
<h5 id="抽象类">抽象类<a hidden class="anchor" aria-hidden="true" href="#抽象类">#</a></h5>
<ol>
<li>一个类可说明多个纯虚函数，<strong>包含纯虚函数的类称为抽象类。</strong></li>
<li>抽象类的派生类中, 如果没有给出全部纯虚函数的定义, 派生类继续是抽象类, 直到派生类中给出纯虚函数定义后, 才不是抽象类。</li>
<li>一个抽象类只能作为基类来派生新类，（未定义完整）不能创建抽象类的对象，即抽象类不能实例化一个对象。</li>
<li>可以定义抽象类的指针和引用, 指针访问派生类的成员, 具有多态性</li>
<li>抽象类至少含一个虚函数，而且至少有一个虚函数是纯虚函数，以便将它与空的虚函数区分开来，如下：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#af3a03">virtual</span> <span style="color:#b57614">void</span> <span style="color:#b57614">area</span>()<span style="color:#af3a03">=</span><span style="color:#8f3f71">0</span>;  <span style="color:#928374;font-style:italic">// 纯虚函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">virtual</span> <span style="color:#b57614">void</span> <span style="color:#b57614">area</span>(){};  <span style="color:#928374;font-style:italic">// 空的虚函数
</span></span></span></code></pre></div><h5 id="虚基类">虚基类<a hidden class="anchor" aria-hidden="true" href="#虚基类">#</a></h5>
<ul>
<li>
<p>为了避免二义性, C++ 提供虚基类机制, 派生类中继承同一个间接基类的成员仅保留一个版本，通过“ 类名:: ” 排除二义性。</p>
</li>
<li>
<p>定义虚基类的格式</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">class</span> 派生类名 : virtual 派生方式 基类名{
</span></span><span style="display:flex;"><span>  派生类体
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> B<span style="color:#af3a03">:</span><span style="color:#af3a03">virtual</span> <span style="color:#af3a03">public</span> A{ <span style="color:#928374;font-style:italic">// 对类A进行了虚继承
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="第七章-输入输出流">第七章 输入/输出流<a hidden class="anchor" aria-hidden="true" href="#第七章-输入输出流">#</a></h1>
<ul>
<li><code>cin cout</code> 重定向</li>
<li>格式控制</li>
<li>常见成员函数</li>
</ul>
<h4 id="71--流类简介">7.1  流类简介<a hidden class="anchor" aria-hidden="true" href="#71--流类简介">#</a></h4>
<ol>
<li>C++ 没有输入输出语句，输入和输出通过流完成。</li>
</ol>
<ul>
<li>
<p>C++ 标准库中面向对象的 I/O 流类库，输入输出均通过流完成。流是 I/O 流类的核心概念。</p>
</li>
<li>
<p>数据传输称为流</p>
<ul>
<li>读操作称为提取</li>
<li>写操作称为插入</li>
<li>输入输出的相关类称为流类</li>
</ul>
</li>
</ul>
<p>iostream：包含操作所有输入/ 输出所需的基本信息，该文件含有四个标准流对象，提供了无格式化和格式化的 I/O 功能
iomanip：包含格式化 I/O的 带参数流操作符，可用于指定数据输入/输出的格式
fstream：包含处理文件的有关信息。</p>
<p>为避免多重继承的二义性，从 ios 派生 istream 和 ostream 时，均使用了 virtual关键字（虚函数）</p>
<ul>
<li>常用 I/O 流类列表</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">类名</th>
<th style="text-align:center">关键字</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">包含文件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">抽象流基类</td>
<td style="text-align:center"><code>ios</code></td>
<td style="text-align:center">流基类</td>
<td style="text-align:center"><code>ios</code></td>
</tr>
<tr>
<td style="text-align:center">输入流类</td>
<td style="text-align:center"><code>istream</code></td>
<td style="text-align:center">通用输入流基类和其它输入流基类，<code>cin</code> 是该类对象</td>
<td style="text-align:center"><code>istream</code></td>
</tr>
<tr>
<td style="text-align:center">输入流类</td>
<td style="text-align:center"><code>ifstream</code></td>
<td style="text-align:center">文件输入流类，<strong>用于从文件读取数据</strong></td>
<td style="text-align:center"><code>ifstream</code></td>
</tr>
<tr>
<td style="text-align:center">输出流类</td>
<td style="text-align:center"><code>ostream</code></td>
<td style="text-align:center">通用输出流基类和其它输出流基类，<code>cout</code> 是该类对象</td>
<td style="text-align:center"><code>ostream</code></td>
</tr>
<tr>
<td style="text-align:center">输出流类</td>
<td style="text-align:center"><code>ofstream</code></td>
<td style="text-align:center">文件输出流类，<strong>用于向其他文件写数据</strong></td>
<td style="text-align:center"><code>fstream</code></td>
</tr>
<tr>
<td style="text-align:center">输入输出流类</td>
<td style="text-align:center"><code>iostream</code></td>
<td style="text-align:center">通用输入输出流基类和其它输入输出流类基类</td>
<td style="text-align:center"><code>iostream</code></td>
</tr>
<tr>
<td style="text-align:center">输入输出流类</td>
<td style="text-align:center"><code>fstream</code></td>
<td style="text-align:center">文件输入输出流类，<strong>读取和写入文件</strong></td>
<td style="text-align:center"><code>fstream</code></td>
</tr>
</tbody>
</table>
<h4 id="72-标准流对象">7.2 标准流对象<a hidden class="anchor" aria-hidden="true" href="#72-标准流对象">#</a></h4>
<ul>
<li>
<p>标准流对象（也称为标准流），为用户提供外设与内存之间的通信通道，对数据进行解释和传输，和必要的数据缓冲等</p>
<ul>
<li>
<p>四个标准流对象</p>
<ul>
<li><code>cin</code>(标准输入流)：用于从键盘输入数据，是流类istream的对象，可以重定向为从文件读取数据</li>
<li><code>cout</code>(标准输出流)：用于向屏幕输出数据，是流类ostream的对象，可以重定向输出到文件</li>
<li><code>cerr</code>(非缓冲错误输出流)：cerr不使用缓冲区，直接向显示器输出信息，不能重定向。</li>
<li><code>clog</code>(缓冲错误输出流)：先被存储到缓冲区中，缓冲区满或者刷新时才能输出到屏幕，不能重定向。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>cout 可以使用重定向函数 freopen 进行重定向输出到文件中保存。</p>
<ul>
<li>重定向函数 <code>freopen</code> 的原型如下</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>FILE <span style="color:#af3a03">*</span><span style="color:#b57614">freopen</span>(<span style="color:#af3a03">const</span> <span style="color:#b57614">char</span> <span style="color:#af3a03">*</span>path, <span style="color:#af3a03">const</span> <span style="color:#b57614">char</span> <span style="color:#af3a03">*</span>mode, FILE <span style="color:#af3a03">*</span>stream);
</span></span></code></pre></div><p><code>freopen()功能</code>： 将 <code>stream</code> 按 <code>mode</code> 指定的模式重定向到路径 <code>path</code> 指向的文件。如果重定向发生错误，则关闭原来的 stream，函数返回 NULL。mode可以是 &ldquo;w&rdquo;（写）或 r (读) 方式。</p>
<ul>
<li>将标准输出 <code>cout</code> 重定向到文件(7-1)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> x, y;
</span></span><span style="display:flex;"><span>    cin <span style="color:#af3a03">&gt;&gt;</span> x <span style="color:#af3a03">&gt;&gt;</span> y;
</span></span><span style="display:flex;"><span>    freopen(<span style="color:#79740e">&#34;test.txt&#34;</span>, <span style="color:#79740e">&#34;w&#34;</span>, stdout);  <span style="color:#928374;font-style:italic">// 重定向，将标准输出重定向到文件 test.txt  (stdout为标准输出)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">if</span> (y <span style="color:#af3a03">==</span> <span style="color:#8f3f71">0</span>)
</span></span><span style="display:flex;"><span>    cerr <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;error.&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">else</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;/&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">/</span> y <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>标准输入重定向为文件(7-2)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> x, count, sum <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    freopen(<span style="color:#79740e">&#34;input.dat&#34;</span>, <span style="color:#79740e">&#34;r&#34;</span>, stdin); <span style="color:#928374;font-style:italic">//标准输入定向到文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">for</span> (count <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; count <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">10</span>; count<span style="color:#af3a03">++</span>){
</span></span><span style="display:flex;"><span>      cin <span style="color:#af3a03">&gt;&gt;</span> x;
</span></span><span style="display:flex;"><span>      sum <span style="color:#af3a03">+=</span> x;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;前&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> count <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;个整数的平均值 = &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#8f3f71">1.0</span> <span style="color:#af3a03">*</span> sum <span style="color:#af3a03">/</span> count <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><code>ios</code> 中错误状态字</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">标识常量</th>
<th style="text-align:center">值</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>goodbit</code></td>
<td style="text-align:center">0X00</td>
<td style="text-align:center">流状态正常</td>
</tr>
<tr>
<td style="text-align:center"><code>eofbit</code></td>
<td style="text-align:center">0X01</td>
<td style="text-align:center">文件结束符</td>
</tr>
<tr>
<td style="text-align:center"><code>failbit</code></td>
<td style="text-align:center">0X02</td>
<td style="text-align:center">I/O 操作失败,数据未丢失,可恢复</td>
</tr>
<tr>
<td style="text-align:center"><code>badbit</code></td>
<td style="text-align:center">0X04</td>
<td style="text-align:center">非法操作,数据丢失,不可恢复</td>
</tr>
</tbody>
</table>
<ul>
<li><code>ios</code> 中流相关的成员函数, 可直接使用</li>
</ul>
<ol>
<li>
<p><strong>返回流是否结束 (  int eof() const; )</strong></p>
<ul>
<li>是否遇到文件尾, 是则返回1, 否则返回0</li>
<li>在标准输入流cin中，可以通过按下 Ctrl+Z 表示输入流的结束</li>
</ul>
</li>
<li>
<p>返回流是否操作失败 （<code>int fail() const;</code>）</p>
</li>
<li>
<p>判断流是否正常 （ <code>int good() const;</code> ）</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>    <span style="color:#b57614">int</span> <span style="color:#b57614">good</span>() <span style="color:#af3a03">const</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> <span style="color:#af3a03">operator</span> <span style="color:#b57614">void</span> <span style="color:#af3a03">*</span>();
</span></span><span style="display:flex;"><span>    ```
</span></span></code></pre></div></li>
</ol>
<pre><code>如果`eofbit failbit badbit` 都没有被置位（即均为0）则返回1（流正常），否则返回0
</code></pre>
<ol start="4">
<li>返回流是否处于失败状态 （ <code>int bad() const;</code> ）</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>    <span style="color:#b57614">int</span> <span style="color:#b57614">bad</span>() <span style="color:#af3a03">const</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> <span style="color:#af3a03">operator</span> <span style="color:#b57614">void</span> <span style="color:#af3a03">!</span>();
</span></span></code></pre></div><pre><code>   只要`eofbit failbit badbit` 中有一位被置位（即为1）则返回1（流失败），否则返回0
</code></pre>
<ol start="5">
<li>
<p>返回流的当前状态 （ <code>int rdstate() const;</code> ）</p>
</li>
<li>
<p>恢复或设置状态字，即将流状态恢复为正常。</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">void</span> <span style="color:#b57614">clear</span>(<span style="color:#b57614">int</span> nStata <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span> );
</span></span></code></pre></div><ul>
<li>
<p>标准输入重定向为文件并判断文件状态(7-3)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> x, count, sum <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    freopen(<span style="color:#79740e">&#34;input.dat&#34;</span>, <span style="color:#79740e">&#34;r&#34;</span>, stdin); <span style="color:#928374;font-style:italic">//标准输入定向到文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">for</span> (count <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; count <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">10</span>; count<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cin <span style="color:#af3a03">&gt;&gt;</span> x;
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">if</span> (cin.eof())
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        cout <span style="color:#af3a03">&lt;&lt;</span> cin.eof() <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;结束&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">else</span>
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        cout <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> sum <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        sum <span style="color:#af3a03">+=</span> x;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// 遇到输出中文失败，程序不输出结果，代码编码问题，GB2312改为 UTF-8即可。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;前&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> count <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;个整数的平均值 = &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#8f3f71">1.0</span> <span style="color:#af3a03">*</span> sum <span style="color:#af3a03">/</span> count <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>将键盘输入的数据累加(7-4)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">char</span> ch;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> x, count <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>, sum <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;请输入整数 Ctrl+Z 退出&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">do</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">while</span> (cin <span style="color:#af3a03">&gt;&gt;</span> x)
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        sum <span style="color:#af3a03">+=</span> x;
</span></span><span style="display:flex;"><span>        count<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;确认退出请输入 Q&#34;</span>;
</span></span><span style="display:flex;"><span>      cin.clear();
</span></span><span style="display:flex;"><span>      cin <span style="color:#af3a03">&gt;&gt;</span> ch;
</span></span><span style="display:flex;"><span>    } <span style="color:#af3a03">while</span> (toupper(ch) <span style="color:#af3a03">!=</span> <span style="color:#79740e">&#39;Q&#39;</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;sum=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> sum <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,count=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> count <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h4 id="73-控制-io-格式">7.3 控制 IO 格式<a hidden class="anchor" aria-hidden="true" href="#73-控制-io-格式">#</a></h4>
<p>C++进行<strong>I/O格式控制</strong>的方式一般有使用 <strong>流操作符、设置标志字和调用成员函数</strong>。</p>
<ol>
<li>
<p>流操纵符</p>
<ul>
<li>C++ 中常见数据类型的默认 I/O 格式</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>I/O 的数据类型</th>
<th>默认的输入格式</th>
<th>默认的输出格式</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>short/int/long(signed / unsigned)</code></td>
<td>与整数型常数相同</td>
<td>一般整数形式，复数前面有负号</td>
</tr>
<tr>
<td><code>float/double/long/double</code></td>
<td>与浮点数相同</td>
<td>浮点或指数格式，取决于哪个更短</td>
</tr>
<tr>
<td><strong>char <code>*</code> (signed/unsigned)</strong></td>
<td>从第一个空白字符（空格、\t、\n)开始到下个空白字符结束</td>
<td>字符序列（无引号）</td>
</tr>
<tr>
<td><code>char (signed/unsigned)</code></td>
<td>第一个非空白字符</td>
<td>单字符序列（无引号）</td>
</tr>
<tr>
<td><code>void*</code></td>
<td>无前缀的十六进制数</td>
<td>无前缀的十六进制数</td>
</tr>
<tr>
<td><code>Bool</code></td>
<td><code>将true</code>或 <code>1</code> 识别为<code>true</code>; 将fasle或0 识别为false</td>
<td><code>1或0</code></td>
</tr>
</tbody>
</table>
<ul>
<li><code>iostream</code> 中常用的无参数的流操纵符 （<strong>格式控制符</strong>）</li>
</ul>
<table>
<thead>
<tr>
<th>流操纵符</th>
<th>作用</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>endl</code></td>
<td><strong>输出一个新行符</strong>，并清空流</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ends</code></td>
<td><strong>输出字符串结束</strong>，并清空流</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>flush</code></td>
<td>清空流缓冲区</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>dec*</code></td>
<td>以十进制形式输入输出整数</td>
<td><code>I/O</code></td>
</tr>
<tr>
<td><code>hex</code></td>
<td>以十六进制形式输入输出整数</td>
<td><code>I/O</code></td>
</tr>
<tr>
<td><code>oct</code></td>
<td>以八进制形式输入输出整数</td>
<td><code>I/O</code></td>
</tr>
<tr>
<td><code>ws</code></td>
<td>提取空白字符</td>
<td><code>O</code></td>
</tr>
</tbody>
</table>
<p>desc * 的<code>*</code>不属于操纵符的一部分，表示默认设置，在<strong>默认情况下整数采用十进制形式输出</strong>。</p>
<ul>
<li>在头文件 iomanip 中定义了一些常用的**用于格式控制的流操纵符</li>
</ul>
<table>
<thead>
<tr>
<th>流操纵符</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>fixed</strong></td>
<td><strong>普通小数形式输出浮点数</strong></td>
</tr>
<tr>
<td><code>scientific</code></td>
<td>科学计数法形式输出浮点数</td>
</tr>
<tr>
<td><code>left</code></td>
<td>左对齐，宽度不足时填充字符到右边</td>
</tr>
<tr>
<td><code>right *</code></td>
<td><strong>右对齐</strong>，宽度不足时填充字符到左边，<strong>默认</strong></td>
</tr>
<tr>
<td><code>setbase(int b)</code></td>
<td><strong>设置输出整数时的进制</strong>，<code>b</code>为8、10、16</td>
</tr>
<tr>
<td><code>setw(int w)</code></td>
<td><strong>指定输出宽度为 w 个字符，或输入字符串时读入w个字符。一次有效</strong></td>
</tr>
<tr>
<td><code>setfill(int c)</code></td>
<td>指定输出宽度，宽度不足时用ASCII码为c的字符填充（默认空格）</td>
</tr>
<tr>
<td><strong>setpercision(int n)</strong></td>
<td><strong>设置浮点数精度 n, 默认 n 为有效数字位数</strong>，<code>fixed/scientific</code>后n是小数点后保留位数</td>
</tr>
<tr>
<td><code>setiosflags(fmtfalgs f)</code></td>
<td>通用操作符。将格式标志f对应的格式标志位置为1</td>
</tr>
<tr>
<td><code>resetiosflags(fmtfalgs f)</code></td>
<td>通用操作符。将格式标志f对应的格式标志位置为0（清除）</td>
</tr>
<tr>
<td><code>boolapha</code></td>
<td>把<code>true</code> 和 <code>false</code> 输出为字符串</td>
</tr>
<tr>
<td><strong>noboolalpha <code>*</code></strong></td>
<td><strong>把<code>true</code> 和 <code>false</code> 输出为1和0</strong></td>
</tr>
<tr>
<td><strong>showbase</strong></td>
<td><strong>输出表示数值进制的前缀</strong></td>
</tr>
<tr>
<td><code>noshowbase *</code></td>
<td>不输出表示数值进制的前缀，16进制前缀为0x,八进制为0</td>
</tr>
<tr>
<td><code>showpoint</code></td>
<td>总是输出小数点</td>
</tr>
<tr>
<td><code>noshowpoint *</code></td>
<td><strong>只有当小数部分存在时输出小数点</strong></td>
</tr>
<tr>
<td><code>showpos</code></td>
<td>非负数值中显示+</td>
</tr>
<tr>
<td><code>noshowpos *</code></td>
<td>非负数值中不显示+</td>
</tr>
<tr>
<td><code>skipws *</code></td>
<td>输入时跳过空白字符</td>
</tr>
<tr>
<td><code>noskipws</code></td>
<td>输入时不跳过空白字符</td>
</tr>
<tr>
<td><code>uppercase</code></td>
<td>十六进制数中使用 A-E。若输出前缀，为0X，科学计数法输出 E</td>
</tr>
<tr>
<td><code>no uppercase*</code></td>
<td>十六进制数中使用 a-e。若输出前缀，为0x，科学计数法输出 e</td>
</tr>
<tr>
<td><code>internal</code></td>
<td>数值的符号（正负号）指定宽度内左对齐，数值右对齐，中间填充字符</td>
</tr>
<tr>
<td>注：“流操作符”栏中的星号<code>*</code> 不属于操纵符的一部分，表示的是默认设置。</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>使用流操纵符控制整数输出(7-5)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> n <span style="color:#af3a03">=</span> <span style="color:#8f3f71">65535</span>, m <span style="color:#af3a03">=</span> <span style="color:#8f3f71">20</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//分别输出一个整数的十进制 十六进制 八进制
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;十进制：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> hex <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> oct <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 十进制： 65535 = ffff = 177777
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//使用 setbase 分别输出一个整数的十进制、十六进制和八进制
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setbase(<span style="color:#8f3f71">10</span>) <span style="color:#af3a03">&lt;&lt;</span> m <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setbase(<span style="color:#8f3f71">16</span>) <span style="color:#af3a03">&lt;&lt;</span> m <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setbase(<span style="color:#8f3f71">8</span>) <span style="color:#af3a03">&lt;&lt;</span> m <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 20 = 14 = 24
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//使用 showbase 和 setbase 分别输出一个整数 十进制、十六进制、八进制
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  cout <span style="color:#af3a03">&lt;&lt;</span> showbase;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> setbase(<span style="color:#8f3f71">10</span>) <span style="color:#af3a03">&lt;&lt;</span> m <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setbase(<span style="color:#8f3f71">16</span>) <span style="color:#af3a03">&lt;&lt;</span> m <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setbase(<span style="color:#8f3f71">8</span>) <span style="color:#af3a03">&lt;&lt;</span> m <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// 20 = 0x14 = 024
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>使用流操纵符控制浮点数输出(7-6)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">double</span> x <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1234567.89</span>, y <span style="color:#af3a03">=</span> <span style="color:#8f3f71">1.23456789</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//无格式控制 (科学计数法)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;无格式控制：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> x=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;),y=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>;  
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// &#34;无格式控制：  x = 1.23457e+006, y = 1.23457
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//保留5位有效数字
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;保留5位有效数字：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> x=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setprecision(<span style="color:#8f3f71">5</span>) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;),y=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>;
</span></span><span style="display:flex;"><span>     <span style="color:#928374;font-style:italic">// &#34;保留5位有效数字：  x = 1.2346e+006, y = 1.2346
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//保留小数点后5位
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;保留小数点后5位：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> x=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> fixed <span style="color:#af3a03">&lt;&lt;</span> setprecision(<span style="color:#8f3f71">5</span>) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;),y=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// &#34;保留小数点后5位：  x = 1234567.89000 , y = 1.23457
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//科学计数法，保留小数点后5位
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;科学计数法，保留小数点后5位：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> x=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> scientific <span style="color:#af3a03">&lt;&lt;</span> setprecision(<span style="color:#8f3f71">5</span>) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;),y=(&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//非负数显示正号，输出宽度为12字符，宽度不足时用‘*’填补
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;非负数显示正号：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> showpos <span style="color:#af3a03">&lt;&lt;</span> fixed <span style="color:#af3a03">&lt;&lt;</span> setw(<span style="color:#8f3f71">12</span>) <span style="color:#af3a03">&lt;&lt;</span> setfill(<span style="color:#79740e">&#39;*&#39;</span>) <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// ****+1.23457
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//非负数不显示正号，输出宽度为12字符，宽度不足时右边用填充字符填充
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;不显示正号，右边用填充字符填充：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> noshowpos <span style="color:#af3a03">&lt;&lt;</span> left <span style="color:#af3a03">&lt;&lt;</span> setw(<span style="color:#8f3f71">12</span>) <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// 1.23457*****
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//输出宽度为12字符，宽度不足时左边用填充字符填充,如果没有
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;左边用填充字符填充：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> showpos <span style="color:#af3a03">&lt;&lt;</span> right <span style="color:#af3a03">&lt;&lt;</span> setw(<span style="color:#8f3f71">12</span>) <span style="color:#af3a03">&lt;&lt;</span> y <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// *****1.23457
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//宽度不足时，负号和数值分列左右，中间用填充字符填充
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;中间用填充字符填充：</span><span style="color:#79740e">\t\t</span><span style="color:#79740e"> &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> showpos <span style="color:#af3a03">&lt;&lt;</span> internal <span style="color:#af3a03">&lt;&lt;</span> setw(<span style="color:#8f3f71">12</span>) <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">-</span>y <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// -****1.23457
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  }
</span></span></code></pre></div></li>
<li>
<p>通过 <code>setw()</code> 控制输入格式(7-7)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    string s1, s2;
</span></span><span style="display:flex;"><span>    cin <span style="color:#af3a03">&gt;&gt;</span> setw(<span style="color:#8f3f71">5</span>) <span style="color:#af3a03">&gt;&gt;</span> s1 <span style="color:#af3a03">&gt;&gt;</span> setw(<span style="color:#8f3f71">3</span>) <span style="color:#af3a03">&gt;&gt;</span> s2;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;s1=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> s1 <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;,s2=&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> s2 <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<ol start="2">
<li>
<p>标志字</p>
<ul>
<li>常见格式标志常量及含义</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>标志常量名</th>
<th>值</th>
<th>含义</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ios::skipws</code></td>
<td>0X0001</td>
<td>跳过输入中的空白</td>
<td><code>I</code></td>
</tr>
<tr>
<td><code>ios::left</code></td>
<td>0X0002</td>
<td>按输出左对齐，填充字符右边</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::right</code></td>
<td>0X0004</td>
<td>按输出右对齐，填充字符左边</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::internal</code></td>
<td>0X0008</td>
<td>在符号位或基数指示符后填入字符</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::dec *</code></td>
<td>0X0010</td>
<td>转换为十进制基数形式</td>
<td><code>I/O</code></td>
</tr>
<tr>
<td><code>ios::oct</code></td>
<td>0X0020</td>
<td>转换为八进制基数形式</td>
<td><code>I/O</code></td>
</tr>
<tr>
<td><code>ios::hex</code></td>
<td>0X0040</td>
<td>转换为十六进制基数形式</td>
<td><code>I/O</code></td>
</tr>
<tr>
<td><code>ios::showbase</code></td>
<td>0X0080</td>
<td>在输出中显示基数指示符</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::showpoint</code></td>
<td>0X0100</td>
<td>在输出浮点数时必须带小数点和尾部的 0</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::uppercase</code></td>
<td>0X0200</td>
<td>以大写字母表示十六进制数，科学计数法使用大写字母 E</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::showpos</code></td>
<td>0X0400</td>
<td>正数前加 + 号</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::scentific</code></td>
<td>0X0800</td>
<td>科学计数法显示浮点数</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::fixed</code></td>
<td>0X1000</td>
<td>定点法表示浮点数</td>
<td><code>O</code></td>
</tr>
<tr>
<td><code>ios::unitbuf</code></td>
<td>0X2000</td>
<td>插入操作后立即刷新流</td>
<td><code>O</code></td>
</tr>
</tbody>
</table>
<ol>
<li>标志常量实际是在一个整数中仅将某一个二进制位设为 1，其它清零。</li>
<li><strong>设置多个标志，用位或 <code>|</code> 运算符连接</strong></li>
<li>流格式标志每一位表示一种格式，会有相互制约；矛盾时清除原来的标志</li>
</ol>
<ul>
<li>
<p>清除同类互斥位</p>
</li>
<li>
<p><code>ios::basefield</code>    <code>值为 dec | oct | hex</code></p>
</li>
<li>
<p><code>ios::adjustifield</code>   <code>值为 left | right | internal</code></p>
</li>
<li>
<p><code>ios::floatfield</code>   <code>值为 scientific | fixed</code></p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>cout <span style="color:#b57614">setf</span>(ios<span style="color:#af3a03">::</span>oct,ios<span style="color:#af3a03">::</span>basefield);<span style="color:#928374;font-style:italic">//示例，标准流为八进制基数形式插入
</span></span></span></code></pre></div><ul>
<li>
<p>通过 <strong>setiosflags()</strong> 设置标志字进行格式控制(7-8)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">double</span> x <span style="color:#af3a03">=</span> <span style="color:#8f3f71">12.34</span>;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;1)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setiosflags(ios<span style="color:#af3a03">::</span>scientific <span style="color:#af3a03">|</span> ios<span style="color:#af3a03">::</span>showpos) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;2)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> resetiosflags(ios<span style="color:#af3a03">::</span>scientific <span style="color:#af3a03">|</span> ios<span style="color:#af3a03">::</span>showpos) <span style="color:#af3a03">&lt;&lt;</span> setiosflags(ios<span style="color:#af3a03">::</span>showbase) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;3)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> resetiosflags(ios<span style="color:#af3a03">::</span>fixed)
</span></span><span style="display:flex;"><span>         <span style="color:#af3a03">&lt;&lt;</span> setiosflags(ios<span style="color:#af3a03">::</span>scientific <span style="color:#af3a03">|</span> ios<span style="color:#af3a03">::</span>showpos) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;4)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> resetiosflags(ios<span style="color:#af3a03">::</span>showpos) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;5)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> resetiosflags(ios<span style="color:#af3a03">::</span>scientific) <span style="color:#af3a03">&lt;&lt;</span> setiosflags(ios<span style="color:#af3a03">::</span>fixed) <span style="color:#af3a03">&lt;&lt;</span> x <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h4 id="74-调用-cout-的成员函数">7.4 调用 cout 的成员函数<a hidden class="anchor" aria-hidden="true" href="#74-调用-cout-的成员函数">#</a></h4>
<ul>
<li>
<p>常见用于控制格式的成员函数原型如下</p>
<ol>
<li>设置和返回标志字
<ul>
<li><code>long flag(long 1Flags); </code>
<ul>
<li>使用参数 1Flags 设置（替换）标志字，返回设置前标志字</li>
</ul>
</li>
<li><code>long flag() const;</code></li>
<li>返回当前标志字</li>
</ul>
</li>
<li>设置标志位
<ul>
<li><code>long setf(long 1Flags); </code>
<ul>
<li>使用参数 1Flags 置位标志字，返回置位前标志字</li>
</ul>
</li>
<li><code>long setf(long 1Flags, long 1Mask); </code>
<ul>
<li>1Mask 指定标志位清零，设置 1Flags 标志位，返回更新前标志字</li>
</ul>
</li>
</ul>
</li>
<li>清除标志位
<ul>
<li><code>long unsetf(long 1Flags);</code>
<ul>
<li>清除参数 1Flags 指定的标志位，返回清除前的标志字</li>
<li>标志位与 <code>setiosflags()</code> 用到的参数相同</li>
</ul>
</li>
</ul>
</li>
<li>设置和返回输出宽度
<ul>
<li><code>int width(int nw);</code>
<ul>
<li>将下一个输出项的显示宽度设置为 nw。如果nw 大于数据所需宽度，则右对齐。如果nw 小于数据所需宽度，则 nw 无效。一次性有效。</li>
</ul>
</li>
<li><code>int width() const;</code>
<ul>
<li>返回值为当前的输出宽度值</li>
</ul>
</li>
</ul>
</li>
<li>设置填充字符
<ul>
<li><code>char fill(char cFill);</code>
<ul>
<li>设置宽度大于数据所需宽度时，参数 cFill 填充空白。</li>
</ul>
</li>
<li><code>char fill() const;</code>
<ul>
<li>返回当前使用的填充符</li>
</ul>
</li>
</ul>
</li>
<li>设置数据显示精度
<ul>
<li><code>int percision(int np);</code>
<ul>
<li>用参数np 设置数据显示精度。浮点数 np 表示小数点后的数字位数。科学计数法np 表示尾数精度位数（包括小数点）。</li>
</ul>
</li>
<li><code>int precision() const;</code>
<ul>
<li>返回当前数据显示精度。</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p><code>ostream</code> 类的成员函数及作用相同的流操作符</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>成员函数</th>
<th>作用相同的流操作符</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>precision(int p)</code></td>
<td><code>setprecision(np)</code></td>
</tr>
<tr>
<td><code>width(int nw)</code></td>
<td><code>setw(nw)</code></td>
</tr>
<tr>
<td><code>fill(char cFill)</code></td>
<td><code>setfill(cFill)</code></td>
</tr>
<tr>
<td><code>setf(long IFlags)</code></td>
<td><code>setiosflags(IFlags)</code></td>
</tr>
<tr>
<td><code>unsetf(long IFlags)</code></td>
<td><code>resetioslags(IFlags)</code></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>使用 cout 中的函数控制输出格式(7-9)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">double</span> values[] <span style="color:#af3a03">=</span> {<span style="color:#8f3f71">1.23</span>, <span style="color:#8f3f71">20.3456</span>, <span style="color:#8f3f71">300.4567</span>, <span style="color:#8f3f71">4000.56789</span>, <span style="color:#8f3f71">50000.1234567</span>};
</span></span><span style="display:flex;"><span>    cout.fill(<span style="color:#79740e">&#39;*&#39;</span>); <span style="color:#928374;font-style:italic">//填充*
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#af3a03">sizeof</span>(values) <span style="color:#af3a03">/</span> <span style="color:#af3a03">sizeof</span>(<span style="color:#b57614">double</span>); i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;values[&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> i <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;]=(&#34;</span>;
</span></span><span style="display:flex;"><span>      cout.width(<span style="color:#8f3f71">10</span>); <span style="color:#928374;font-style:italic">//设置宽度
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> values[i] <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cout.fill(<span style="color:#79740e">&#39; &#39;</span>); <span style="color:#928374;font-style:italic">//填充空格
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">for</span> (<span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; i <span style="color:#af3a03">&lt;</span> <span style="color:#af3a03">sizeof</span>(values) <span style="color:#af3a03">/</span> <span style="color:#af3a03">sizeof</span>(<span style="color:#b57614">double</span>); i<span style="color:#af3a03">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;values[&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> i <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;]=(&#34;</span>;
</span></span><span style="display:flex;"><span>      cout.width(<span style="color:#8f3f71">10</span>);        <span style="color:#928374;font-style:italic">//设置宽度
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout.precision(i <span style="color:#af3a03">+</span> <span style="color:#8f3f71">3</span>); <span style="color:#928374;font-style:italic">//设置保留有效数字
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      cout <span style="color:#af3a03">&lt;&lt;</span> values[i] <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;)&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>使用 cout() 函数(7-10)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">char</span> c <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;a&#39;</span>, str[<span style="color:#8f3f71">80</span>] <span style="color:#af3a03">=</span> <span style="color:#79740e">&#34;1234567890abcdefghijklmn&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> x <span style="color:#af3a03">=</span> <span style="color:#8f3f71">65</span>;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;cout.put(&#39;a&#39;):&#34;</span>;
</span></span><span style="display:flex;"><span>    cout.put(<span style="color:#79740e">&#39;a&#39;</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\n</span><span style="color:#79740e">cout.put(c+25):&#34;</span>;
</span></span><span style="display:flex;"><span>    cout.put(c <span style="color:#af3a03">+</span> <span style="color:#8f3f71">25</span>); <span style="color:#928374;font-style:italic">//字母转换成整数再相加
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\n</span><span style="color:#79740e">cout.put(x):&#34;</span>;
</span></span><span style="display:flex;"><span>    cout.put(x);
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;</span><span style="color:#79740e">\n</span><span style="color:#79740e">cout.put(str,20):&#34;</span>;
</span></span><span style="display:flex;"><span>    cout.write(str, <span style="color:#8f3f71">20</span>); <span style="color:#928374;font-style:italic">//将str的前20个字节输入到流中
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<h4 id="75-调用-cin-的成员函数">7.5 调用 cin 的成员函数<a hidden class="anchor" aria-hidden="true" href="#75-调用-cin-的成员函数">#</a></h4>
<ol>
<li><code>get()</code> 函数</li>
</ol>
<p><strong>cin.get()</strong>：从输入流中读入一个字符（包括空白），返回值就是该字符的ASII 码。如果碰到输入结束符，则返回值为系统常量 EOF（End Of File，文件结束标记）。</p>
<ul>
<li>采用 EOF 判断输入是否结束(7-11)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> n <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">char</span> ch;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">while</span> (ch <span style="color:#af3a03">=</span> cin.get() <span style="color:#af3a03">!=</span> EOF) <span style="color:#928374;font-style:italic">//文件没有结束时继续进行循环
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    cout.put(ch);  <span style="color:#928374;font-style:italic">// 输出一个字符，类似C语言的putchar()
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    n<span style="color:#af3a03">++</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;输入字符统计：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>单独的一行按 <code>Ctrl + Z</code> 组合键后再按 <code>Enter</code> 键就代表文件输入结束。 cin.get()返回值就是EOF，使while循环正常退出。</p>
<ol start="2">
<li>
<p><code>getline()</code> 函数</p>
<p><strong>cin.getline(char * buf, int n)</strong> 功能：从输入流中的当前字符开始读取 <code>n-1</code> 个字符到缓冲区 <code>buf</code> ，或读到 <code>\n</code> 为止。函数会在 <code>buf</code> 中读入数据的结尾自动添加串结束标记 <code>\0</code>。</p>
</li>
</ol>
<p><strong>cin.getline(char * buf, int n, char delim);</strong> 功能： 从输入流中的当前字符开始读取 <code>n-1</code> 个字符到缓冲区 <code>buf</code> ，或读到字符 <code>delim</code> 为止。函数会在 <code>buf</code> 中读入数据的结尾自动添加串结束标记 <code>\0</code>。</p>
<ul>
<li>
<p><code>getline()</code> 函数功能演示(7-12)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">char</span> buf[<span style="color:#8f3f71">10</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> i <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">while</span> (cin.getline(buf, <span style="color:#8f3f71">10</span>)) <span style="color:#928374;font-style:italic">//输入超过九个就会出错
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#af3a03">++</span>i <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> buf <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;last:&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> buf <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<ol start="3">
<li>
<p><code>eof()</code> 函数</p>
<p><strong>cin.eof()</strong> 用于判断输入流是否已经结束，返回 ture ( 1 ) 表示输入结束</p>
</li>
<li>
<p><code>ignore()</code> 函数</p>
<p><strong>cin.ignore(int n=1, int delim = EOF)</strong> ：跳过输入流中的 <code>n</code> 个字符，或跳过 delim 之前的所有字符。默认跳过一个字符</p>
<ul>
<li>
<p>从输入的字符串中提取电话号码(7-13)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">char</span> str[<span style="color:#8f3f71">30</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">while</span> (<span style="color:#af3a03">!+</span>cin.eof()) <span style="color:#928374;font-style:italic">//当输入流没有结束时继续循环
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>      cin.ignore(<span style="color:#8f3f71">10</span>, <span style="color:#79740e">&#39;:&#39;</span>); <span style="color:#928374;font-style:italic">//在cin流中跳过&#39;:&#39;之前的全部字符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>cin.eof())      <span style="color:#928374;font-style:italic">//输入流没有结束
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      {
</span></span><span style="display:flex;"><span>        cin <span style="color:#af3a03">&gt;&gt;</span> str; <span style="color:#928374;font-style:italic">//输入电话号码
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        cout <span style="color:#af3a03">&lt;&lt;</span> str <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p><code>peek()</code> 函数</p>
</li>
</ol>
<p><strong>cin. peek()</strong>：返回输入流中的当前字符，只读不操作</p>
<ul>
<li>日期格式转换(7-14)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>       <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>       <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>       <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>       string Months[<span style="color:#8f3f71">13</span>] <span style="color:#af3a03">=</span> {<span style="color:#79740e">&#34;&#34;</span>, <span style="color:#79740e">&#34;Jan&#34;</span>, <span style="color:#79740e">&#34;Feb&#34;</span>, <span style="color:#79740e">&#34;Mar&#34;</span>, <span style="color:#79740e">&#34;Apr&#34;</span>, <span style="color:#79740e">&#34;May&#34;</span>, <span style="color:#79740e">&#34;Jun&#34;</span>, <span style="color:#79740e">&#34;Jul&#34;</span>, <span style="color:#79740e">&#34;Aug&#34;</span>, <span style="color:#79740e">&#34;Sep&#34;</span>, <span style="color:#79740e">&#34;Oct&#34;</span>, <span style="color:#79740e">&#34;Nov&#34;</span>, <span style="color:#79740e">&#34;Dec&#34;</span>}; <span style="color:#928374;font-style:italic">//西文格式的月份
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>       <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>         <span style="color:#b57614">char</span> ch;
</span></span><span style="display:flex;"><span>         <span style="color:#b57614">int</span> year, month, day;
</span></span><span style="display:flex;"><span>         <span style="color:#af3a03">while</span> ((ch <span style="color:#af3a03">=</span> cin.peek()) <span style="color:#af3a03">!=</span> EOF) <span style="color:#928374;font-style:italic">//取输入流的第一个字符查看
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>         {
</span></span><span style="display:flex;"><span>           <span style="color:#af3a03">if</span> (ch <span style="color:#af3a03">&gt;</span> <span style="color:#af3a03">+</span><span style="color:#79740e">&#39;A&#39;</span> <span style="color:#af3a03">&amp;&amp;</span> ch <span style="color:#af3a03">&lt;</span> <span style="color:#79740e">&#39;Z&#39;</span>) <span style="color:#928374;font-style:italic">//处理西文格式
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>           {
</span></span><span style="display:flex;"><span>             string sMonth;
</span></span><span style="display:flex;"><span>             cin <span style="color:#af3a03">&gt;&gt;</span> sMonth <span style="color:#af3a03">&gt;&gt;</span> day <span style="color:#af3a03">&gt;&gt;</span> year; <span style="color:#928374;font-style:italic">//接收：月、日、年
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>             <span style="color:#928374;font-style:italic">// 查找月份完成转换
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>             <span style="color:#af3a03">for</span> (month <span style="color:#af3a03">=</span> <span style="color:#8f3f71">0</span>; month <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">12</span> <span style="color:#af3a03">&amp;&amp;</span> sMonth <span style="color:#af3a03">!=</span> Months[month]; <span style="color:#af3a03">++</span>month)
</span></span><span style="display:flex;"><span>               ;
</span></span><span style="display:flex;"><span>           }
</span></span><span style="display:flex;"><span>           <span style="color:#af3a03">else</span>
</span></span><span style="display:flex;"><span>           {
</span></span><span style="display:flex;"><span>             cin <span style="color:#af3a03">&gt;&gt;</span> year;
</span></span><span style="display:flex;"><span>             cin.ignore() <span style="color:#af3a03">&gt;&gt;</span> month;
</span></span><span style="display:flex;"><span>             cin.ignore() <span style="color:#af3a03">&gt;&gt;</span> day;
</span></span><span style="display:flex;"><span>             <span style="color:#928374;font-style:italic">// 以上三条语句等价于 cin&gt;&gt;year&gt;&gt;ch&gt;&gt;month&gt;&gt;ch&gt;&gt;day;
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>           }
</span></span><span style="display:flex;"><span>           cin.ignore();
</span></span><span style="display:flex;"><span>           cout <span style="color:#af3a03">&lt;&lt;</span> setfill(<span style="color:#79740e">&#39;0&#39;</span>) <span style="color:#af3a03">&lt;&lt;</span> setw(<span style="color:#8f3f71">2</span>) <span style="color:#af3a03">&lt;&lt;</span> month;
</span></span><span style="display:flex;"><span>           cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setw(<span style="color:#8f3f71">2</span>) <span style="color:#af3a03">&lt;&lt;</span> day <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;-&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> setw(<span style="color:#8f3f71">4</span>) <span style="color:#af3a03">&lt;&lt;</span> year <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>       
</span></span><span style="display:flex;"><span>         <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>       }
</span></span></code></pre></div><h1 id="第八章-文件操作">第八章 文件操作<a hidden class="anchor" aria-hidden="true" href="#第八章-文件操作">#</a></h1>
<ul>
<li>文件</li>
<li>ifstream、ofstream、fstream</li>
<li>顺序访问和随机访问，文件读写指针和移动文件指针</li>
</ul>
<h4 id="81-文件基本概念和文件流类">8.1 文件基本概念和文件流类<a hidden class="anchor" aria-hidden="true" href="#81-文件基本概念和文件流类">#</a></h4>
<h5 id="文件的概念">文件的概念<a hidden class="anchor" aria-hidden="true" href="#文件的概念">#</a></h5>
<ol>
<li>
<p>C++根据<strong>文件数据的编码方式</strong>不同分为<strong>文本文件</strong>和<strong>二进制文件</strong>。
文本文件：文件中的每个字节都是一个ASCII码
二进制文件：C++中将<strong>非文本文件</strong>统称为二进制文件。</p>
</li>
<li>
<p>根据<strong>存取方式</strong>不同分为<strong>顺序存取文件</strong>和<strong>随机存取文件</strong>
顺序存取文件：就是按照文件中数据存储次序进行顺序操作。
随机访问文件：是根据应用的需要，通过命令移动位置指针直接定位到文件内需要的位置并进行数据操作。</p>
</li>
<li>
<p>基本操作
<strong>读文件</strong>（输入）：将文件中的数据读入内存之中
<strong>写文件</strong>（输出）：将内存中的数据存入文件之中</p>
<ul>
<li>本质都是二进制文件</li>
</ul>
</li>
</ol>
<h5 id="c-文件流类">C++ 文件流类<a hidden class="anchor" aria-hidden="true" href="#c-文件流类">#</a></h5>
<ul>
<li>文件是物理概念，流是逻辑概念</li>
<li>标准库内三个流类可用于文件操作，统称为文件流类
<ol>
<li><code>ifstream</code>：用于文件中读取数据</li>
<li><code>ofstream</code>：用于向文件中写入数据</li>
<li><code>fstream</code>：既可用于读取，也可写入</li>
</ol>
</li>
</ul>
<h4 id="82-打开和关闭文件">8.2 打开和关闭文件<a hidden class="anchor" aria-hidden="true" href="#82-打开和关闭文件">#</a></h4>
<h5 id="打开文件">打开文件<a hidden class="anchor" aria-hidden="true" href="#打开文件">#</a></h5>
<ol>
<li>
<p>打开文件有以下两个目的:</p>
<ol>
<li><strong>建立关联</strong>。通过指定文件名，建立起文件和文件流对象的关联。</li>
<li><strong>指明文件的使用方式和文件格式</strong>。使用方式有<strong>只读、只写、既读又写、在文件末尾追加数据</strong>4种，文件格式是<strong>文本方式</strong>或<strong>二进制方式</strong></li>
</ol>
</li>
<li>
<p>打开方式</p>
<ol>
<li>建立流对象，调用 <code>open()</code> 函数连接外部文件</li>
</ol>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>流类名 对象名;
</span></span><span style="display:flex;"><span>对象名.open(文件名, 模式);
</span></span></code></pre></div><pre><code> 2. 调用流类带参数的构造函数，在建立流对象的同时连接外部文件
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>流类名 对象名(文件名, 模式)
</span></span></code></pre></div><pre><code> 模式：类 `ios` 定义的打开模式的标记常量，表示打开方式
</code></pre>
<ul>
<li>文件打开模式标记</li>
</ul>
<table>
<thead>
<tr>
<th>模式标记</th>
<th>适用对象</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ios::in</code></td>
<td><code>ifstream; fstream</code></td>
<td><strong>以读方式打开文件</strong>，如果不存在则报错</td>
</tr>
<tr>
<td><code>ios::out</code></td>
<td><code>ofstream; fstream</code></td>
<td><strong>以写方式打开</strong>，不存在则新建；已存在则清空原内容</td>
</tr>
<tr>
<td><code>ios::app</code></td>
<td><code>ofstream</code></td>
<td><strong>以追加方式打开</strong>，不存在则新建</td>
</tr>
<tr>
<td><code>ios::ate</code></td>
<td><code>ofstream</code></td>
<td><strong>打开一个已有的文件，并将文件读指针指向文件末尾</strong>。如文件不存在则打开出错</td>
</tr>
<tr>
<td><code>ios::trunc</code></td>
<td><code>ofstream</code></td>
<td>删除文件现有内容，单独使用时与 <code>ios::out</code> 相同</td>
</tr>
<tr>
<td><code>ios::binary</code></td>
<td><code>ifstream;ofstream; fstream</code></td>
<td><strong>以二级制打开文件.若不指定此模式，则以默认的文本模式打开文件。</strong></td>
</tr>
<tr>
<td>ios::in | ios::out</td>
<td><code> fstream</code></td>
<td><strong>打开已存在文件，即可读取其内容，也可向其写入数据</strong>。文件刚打开时，原有内容保持不变，如果文件不存在，则打开报错。</td>
</tr>
<tr>
<td>ios::in | ios::out</td>
<td><code>ofstream</code></td>
<td><strong>打开已存在文件，可以向其写入数据</strong>。文件刚打开时，原有内容保持不变。如果文件不存在则报错</td>
</tr>
<tr>
<td>ios::in | ios::out | ios::trunc</td>
<td><code>fstream</code></td>
<td><strong>打开已存在文件，即可读取，也可向其写入数据</strong>；如果文件本来就存在则清空原内容，不存在则新建该文件</td>
</tr>
</tbody>
</table>
<p>打开文件示例</p>
<ol>
<li>读取当前文件夹中 data.txt 的文件</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ifstream inFile;  <span style="color:#928374;font-style:italic">// 建立输入文件流对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>inFile.open(<span style="color:#79740e">&#34;data.txt&#34;</span>,ios<span style="color:#af3a03">::</span>in); <span style="color:#928374;font-style:italic">//只读模式打开，ios::in 是默认参数可省略
</span></span></span></code></pre></div><p>或者</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ifstream <span style="color:#b57614">inFile</span>(<span style="color:#79740e">&#34;data.txt&#34;</span>,ios<span style="color:#af3a03">::</span>in);
</span></span></code></pre></div><ol start="2">
<li><code>c盘的2019</code>文件夹中创建文件 newfile 的二进制文件</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ofstream outFile; <span style="color:#928374;font-style:italic">// 建立输入文件流对象
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>outFile.open(<span style="color:#79740e">&#34;c:</span><span style="color:#79740e">\\</span><span style="color:#79740e">2019</span><span style="color:#79740e">\\</span><span style="color:#79740e">newfile&#34;</span>,ios<span style="color:#af3a03">::</span>out<span style="color:#af3a03">|</span>ios<span style="color:#af3a03">::</span>binary);  <span style="color:#928374;font-style:italic">// 以写方式打开二进制文件
</span></span></span></code></pre></div><p>或者</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ofstream <span style="color:#b57614">outFile</span>(<span style="color:#79740e">&#34;c:</span><span style="color:#79740e">\\</span><span style="color:#79740e">2019</span><span style="color:#79740e">\\</span><span style="color:#79740e">newfile&#34;</span>,ios<span style="color:#af3a03">::</span>out<span style="color:#af3a03">|</span>ios<span style="color:#af3a03">::</span>binary);
</span></span></code></pre></div><h5 id="关闭文件">关闭文件<a hidden class="anchor" aria-hidden="true" href="#关闭文件">#</a></h5>
<p>当一个文件操作完毕应及时关闭文件。其作用：</p>
<ol>
<li>
<p>系统会将缓冲区中的数据完整地写入文件</p>
</li>
<li>
<p>添加文件结束标记</p>
</li>
<li>
<p>切断流对象与外部文件的连接</p>
<ul>
<li>格式示例</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ifstream inFile;
</span></span><span style="display:flex;"><span>inFile.open(<span style="color:#79740e">&#34;file.txt&#34;</span>,ios<span style="color:#af3a03">::</span>in);<span style="color:#928374;font-style:italic">// 打开成功则进行读文件，省略
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>inFile.close();<span style="color:#928374;font-style:italic">//关闭文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span> <span style="color:#928374;font-style:italic">//inFile 与 file.txt 断开连接，可用于其他文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>inFile.open(<span style="color:#79740e">&#34;file.data&#34;</span>,ios<span style="color:#af3a03">::</span>in);<span style="color:#928374;font-style:italic">//连接另一个文件
</span></span></span></code></pre></div><h4 id="83-文件读写操作重要">8.3 文件读写操作（重要）<a hidden class="anchor" aria-hidden="true" href="#83-文件读写操作重要">#</a></h4>
<h5 id="831-读写文本文件">8.3.1 读写文本文件<a hidden class="anchor" aria-hidden="true" href="#831-读写文本文件">#</a></h5>
<ul>
<li>
<p>C++ 将文件看成顺序排列的无结构的字节流。</p>
<ul>
<li>对于长度 n 的文件来说，字节号从 <code>0 ~ n-1</code> ，最后一位是文件结束标识符EOF <code>0x1A</code></li>
</ul>
</li>
<li>
<p>对文本文件 <code>score.txt</code> 进行输入/输出(8-3)</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;fstream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">char</span> id[<span style="color:#8f3f71">11</span>], name[<span style="color:#8f3f71">21</span>];
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> score;
</span></span><span style="display:flex;"><span>	ofstream outFile;
</span></span><span style="display:flex;"><span>	outFile.open(<span style="color:#79740e">&#34;score.txt&#34;</span>,ios<span style="color:#af3a03">::</span>out);<span style="color:#928374;font-style:italic">//以写方式打开文本文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>outFile)<span style="color:#928374;font-style:italic">//条件成立，则说明文件打开出错
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	{
</span></span><span style="display:flex;"><span>		cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;创建文件失败&#34;</span><span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;请输入：学号 姓名 成绩 （以Ctrl + z 结束输入）</span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">while</span>(cin<span style="color:#af3a03">&gt;&gt;</span>id<span style="color:#af3a03">&gt;&gt;</span>name<span style="color:#af3a03">&gt;&gt;</span>score)
</span></span><span style="display:flex;"><span>		outFile<span style="color:#af3a03">&lt;&lt;</span>id<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&#34;</span><span style="color:#af3a03">&lt;&lt;</span>name<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&#34;</span><span style="color:#af3a03">&lt;&lt;</span>score<span style="color:#af3a03">&lt;&lt;</span>endl; <span style="color:#928374;font-style:italic">// 向流中插入数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	outFile.close(); <span style="color:#928374;font-style:italic">// 关闭文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>读入学生成绩文件 <code>score.txt</code> 并显示内容(8-4)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;fstream&gt; </span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iomanip&gt;  // manipulator &#34;操纵器&#34;的缩写</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">char</span> id[<span style="color:#8f3f71">11</span>], name[<span style="color:#8f3f71">21</span>];
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> score;
</span></span><span style="display:flex;"><span>	ifstream inFile;
</span></span><span style="display:flex;"><span>	inFile.open(<span style="color:#79740e">&#34;score.txt&#34;</span>,ios<span style="color:#af3a03">::</span>in);<span style="color:#928374;font-style:italic">//以写方式打开文本文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>inFile)<span style="color:#928374;font-style:italic">//条件成立，则说明文件打开出错
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	{
</span></span><span style="display:flex;"><span>		cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;打开文件失败&#34;</span><span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;学号 姓名 </span><span style="color:#79740e">\t\t\t</span><span style="color:#79740e">成绩 </span><span style="color:#79740e">\n</span><span style="color:#79740e">&#34;</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">while</span>(inFile<span style="color:#af3a03">&gt;&gt;</span>id<span style="color:#af3a03">&gt;&gt;</span>name<span style="color:#af3a03">&gt;&gt;</span>score)  <span style="color:#928374;font-style:italic">// 读入文件，读到文件尾结束循环
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		inFile<span style="color:#af3a03">&lt;&lt;</span>left<span style="color:#af3a03">&lt;&lt;</span>setw(<span style="color:#8f3f71">10</span>)<span style="color:#af3a03">&lt;&lt;</span>id<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&#34;</span><span style="color:#af3a03">&lt;&lt;</span>setw(<span style="color:#8f3f71">10</span>)<span style="color:#af3a03">&lt;&lt;</span>name<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;&#34;</span><span style="color:#af3a03">&lt;&lt;</span>setw(<span style="color:#8f3f71">3</span>)<span style="color:#af3a03">&lt;&lt;</span>right<span style="color:#af3a03">&lt;&lt;</span>score<span style="color:#af3a03">&lt;&lt;</span>endl; 
</span></span><span style="display:flex;"><span>	inFile.close(); <span style="color:#928374;font-style:italic">// 关闭文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="832-读写二进制文件">8.3.2 读写二进制文件<a hidden class="anchor" aria-hidden="true" href="#832-读写二进制文件">#</a></h5>
<p>文本文件</p>
<ol>
<li>以ASCII码形式保存数据的，存储信息时占用的空间较大。</li>
<li>使用上比较方便，“记事本”软件打开后查看、编辑文件内容等;</li>
<li>在进行数据输入/输出时需要要额外进行内存和外存之间的数据格式转换。</li>
</ol>
<p>二进制数据文件</p>
<ol>
<li>以二进制形式存放，即二进制文件中数据的存储格式与内存格式一致，存储长度仅与数据类型相关</li>
<li>二进制数据流不会对写入或读出的数据做格式转换，便于高速处理数据</li>
</ol>
<h6 id="读写二进制文件的专用函数">读写二进制文件的专用函数<a hidden class="anchor" aria-hidden="true" href="#读写二进制文件的专用函数">#</a></h6>
<ol>
<li><strong>ostream &amp; write(char * buffer, int nCount)</strong>：</li>
</ol>
<p>功能：该成员函数<strong>将内存中 buffer 所指向的 nCount 个字节的内容写入文件</strong>，返回值是对函数所作用的对象的引用。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>	<span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;io#include &lt;fstream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>	<span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">class</span> CStudent
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">char</span> szName[<span style="color:#8f3f71">20</span>];
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">int</span> age;
</span></span><span style="display:flex;"><span>	};
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>	    CStudent s;
</span></span><span style="display:flex;"><span>	    ofstream outFile(<span style="color:#79740e">&#34;students.dat&#34;</span>, ios<span style="color:#af3a03">::</span>out <span style="color:#af3a03">|</span> ios<span style="color:#af3a03">::</span>binary);
</span></span><span style="display:flex;"><span>	    <span style="color:#af3a03">while</span> (cin <span style="color:#af3a03">&gt;&gt;</span> s.szName <span style="color:#af3a03">&gt;&gt;</span> s.age)
</span></span><span style="display:flex;"><span>	        outFile.write((<span style="color:#b57614">char</span><span style="color:#af3a03">*</span>)<span style="color:#af3a03">&amp;</span>s, <span style="color:#af3a03">sizeof</span>(s));  <span style="color:#928374;font-style:italic">// 向文件中写入数据
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	    outFile.close();
</span></span><span style="display:flex;"><span>	    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	Tom <span style="color:#8f3f71">60</span>↙
</span></span><span style="display:flex;"><span>	Jack <span style="color:#8f3f71">80</span>↙
</span></span><span style="display:flex;"><span>	Jane <span style="color:#8f3f71">40</span>↙
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">^</span>Z↙
</span></span></code></pre></div><p><code>(char*)&amp;s</code> 的含义： 对象 s 的地址强制转换为指向char型的指针</p>
<ol start="2">
<li><strong>istream &amp;read(char * buffer, int nCount)</strong> :</li>
</ol>
<p>功能：从<strong>文件中读取nCount个字节的内容</strong>，存放到buffer所指向的内存缓冲区中，返回值是对函数所作用的对象的引用</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>	<span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>	<span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;fstream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>	<span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">class</span> CStudent
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">char</span> szName[<span style="color:#8f3f71">20</span>];
</span></span><span style="display:flex;"><span>	    <span style="color:#b57614">int</span> age;
</span></span><span style="display:flex;"><span>	};
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> <span style="color:#b57614">main</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>	    CStudent s;       
</span></span><span style="display:flex;"><span>	    ifstream inFile(<span style="color:#79740e">&#34;students.dat&#34;</span>,ios<span style="color:#af3a03">::</span>in<span style="color:#af3a03">|</span>ios<span style="color:#af3a03">::</span>binary); <span style="color:#928374;font-style:italic">//二进制读方式打开
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	    <span style="color:#af3a03">if</span>(<span style="color:#af3a03">!</span>inFile) {
</span></span><span style="display:flex;"><span>	        cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;error&#34;</span> <span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>	        <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    <span style="color:#af3a03">while</span>(inFile.read((<span style="color:#b57614">char</span> <span style="color:#af3a03">*</span>)<span style="color:#af3a03">&amp;</span>s, <span style="color:#af3a03">sizeof</span>(s))) { <span style="color:#928374;font-style:italic">//一直读到文件结束
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	        cout <span style="color:#af3a03">&lt;&lt;</span> s.szName <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> s.age <span style="color:#af3a03">&lt;&lt;</span> endl;   
</span></span><span style="display:flex;"><span>	    }
</span></span><span style="display:flex;"><span>	    inFile.close();
</span></span><span style="display:flex;"><span>	    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	Tom <span style="color:#8f3f71">60</span>
</span></span><span style="display:flex;"><span>	Jack <span style="color:#8f3f71">80</span>
</span></span><span style="display:flex;"><span>	Jane <span style="color:#8f3f71">40</span>
</span></span></code></pre></div><ol start="3">
<li>用 <code>ostream::gcount()</code> 成员函数得到<strong>读取字节数</strong></li>
</ol>
<ul>
<li><code>int gcount();</code>：返回值就是最近一次read()函数执行时成功读取的字节数</li>
</ul>
<h5 id="833-用成员函数-put-和-get-读写文件">8.3.3 用成员函数 <code>put()</code> 和 <code>get()</code> 读写文件<a hidden class="anchor" aria-hidden="true" href="#833-用成员函数-put-和-get-读写文件">#</a></h5>
<h6 id="get-的三种主要形式"><code>get()</code> 的三种主要形式<a hidden class="anchor" aria-hidden="true" href="#get-的三种主要形式">#</a></h6>
<ol>
<li>
<p><code>int get();</code>：从指定输入流中提取一个字符（包含空白）。遇到文件结束符时，则返回系统常量EOF。</p>
</li>
<li>
<p><code>istream &amp;get(char &amp;rch);</code>：从指定输入流中提取一个字符（包含空白），将该字符作为 rch 引用的对象。遇到文件尾返回0；否则返回对 istream 对象的引用</p>
</li>
<li>
<p><code>istream &amp; get(char *pch, int nCount, char delim='\n');</code></p>
</li>
</ol>
<ul>
<li>从流的当前字符开始，读取 nCount-1 个字符，或遇到指定分隔符 delim 结束。</li>
<li>函数把读取的字符（不包含分隔符）写入数组 pch ，并增加结束符 ‘ \0 ’</li>
</ul>
<h6 id="put-函数"><code>put()</code> 函数<a hidden class="anchor" aria-hidden="true" href="#put-函数">#</a></h6>
<p>向输出流中插入一个字节</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>ostream<span style="color:#af3a03">&amp;</span> put(<span style="color:#b57614">char</span> ch);
</span></span></code></pre></div><p>成员函数 get() 和 put() 常用于读写字符或文本文件，也可用于二进制文件的处理。</p>
<ol start="3">
<li>文件复制，现在编写一个完成文件复制的程序。程序的用法是在命令提示符窗口输入:
mycopy src.dat destdat即将文件src.dat的内容复制到文件dest.dat中</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;fstrcam&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(intargc,<span style="color:#b57614">char</span> <span style="color:#af3a03">*</span>argv[]){ <span style="color:#928374;font-style:italic">/*主函数带参，argc记录参数个数指针数组argv[]存放输入命令的字符串*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">if</span>(argc<span style="color:#af3a03">!=</span><span style="color:#8f3f71">3</span>){ <span style="color:#928374;font-style:italic">//判断main的参数是否为3个
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;使用方法错误。正确的命令格式:mycopy SourceFileNewFile&#34;</span><span style="color:#af3a03">&lt;&lt;</span><span style="color:#9d0006">endl</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	ifstream inFile(argv[<span style="color:#8f3f71">1</span>],ios<span style="color:#af3a03">::</span>binary ios<span style="color:#af3a03">::</span>in);<span style="color:#928374;font-style:italic">//二进制读模式打开文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>inFile){ 
</span></span><span style="display:flex;"><span>		cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;Source file open error.&#34;</span><span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	ofstream outFilc(argv[<span style="color:#8f3f71">2</span>], ios<span style="color:#af3a03">::</span>binarylios<span style="color:#af3a03">::</span>out);
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">if</span>(<span style="color:#af3a03">!</span>outFile)<span style="color:#928374;font-style:italic">//以二进制写模式打开文件
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		{cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;New file open error.&#34;</span><span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		inFile.close();
</span></span><span style="display:flex;"><span>		<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">char</span> c;
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">while</span> (inFile.get(c))<span style="color:#928374;font-style:italic">//每次读取一个字符，文件结束时退出循环
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		outFile.put(c); <span style="color:#928374;font-style:italic">//每次写入一个字符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	outFile.close();
</span></span><span style="display:flex;"><span>	inFile.close();
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h6 id="文本文件与二进制文件的异同">文本文件与二进制文件的异同<a hidden class="anchor" aria-hidden="true" href="#文本文件与二进制文件的异同">#</a></h6>
<p>文本文件是以文本形式存储数据
优点：是具有较高的兼容性。
缺点：</p>
<ol>
<li>是存储一批纯数值信息时，要在数据之间人为地添加分隔符</li>
<li>在输入/输出过程中，系统要对内外存的数据格式进行相应的转换</li>
<li>不便于对数据进行随机访问。</li>
</ol>
<p>二进制文件是以二进制形式存储数据
优点:</p>
<ol>
<li>
<p>相同数据类 型的数据所占空间的大小均是相同的，不必在数据之间人为地添加分隔符;</p>
</li>
<li>
<p>在输入/输出过程中，系统不需要对数据进行任何转换。</p>
</li>
<li>
<p>便于对数据实行随机访问
缺点：数据兼容性差</p>
</li>
<li>
<p>通常纯文本信息(如字符串) 以文本文件形式存储而将数值信息以二进制文件形式存储。</p>
</li>
<li>
<p>文本文件和二进制文件在处理上和使用上有微小差别</p>
<ul>
<li>Windows 中，以文本方式打开文件，系统会对文本文件中字符 <code>\r\n</code>（俗称回车换行）进行专门处理
<ul>
<li>读文件，<code>\r\n</code> 转化成 <code>\n</code> ；</li>
<li>写文件， <code>\n</code> 转化成 <code>\r\n</code> 再写入</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="84-随机访问文件">8.4 随机访问文件<a hidden class="anchor" aria-hidden="true" href="#84-随机访问文件">#</a></h4>
<p><strong>顺序文件</strong>：只能进行顺序存取操作的文件。如:键盘显示器和保存在磁带上的文件
<strong>随机文件</strong>：可以在文件的任意位置进行存取操作文件。如:磁盘文件。
<strong>顺序访问</strong>：严格按照数据保存的次序从头到尾访问文件
<strong>随机访问</strong>：根据需要在文件的不同位置进行访问</p>
<p>顺序文件只能进行顺序访问，随机文件可以顺序访问，也可以随机访问</p>
<ol>
<li>文件位置指针：文件打开后，系统自动生成一个流指针，这个指针决定着写或读开始的位置。</li>
<li>打开文件时，位置指针指向文件的第1个字节(如果以 ios::ate（追加）方式打开，则指向文件末尾)，文件的读/写操作从位置指针所指位置开始，每完成一次读/写操作后位置指针自动移动到下一个读/写分量的起始位置</li>
</ol>
<ul>
<li>
<p>顺序文件，只能顺序存取：（键盘、显示器）</p>
</li>
<li>
<p>随机文件，任意存取 （磁盘）</p>
</li>
<li>
<p>流指针，文件操作的位置指针</p>
</li>
</ul>
<h5 id="istream-中与位置指针相关的函数"><code>istream</code> 中与位置指针相关的函数<a hidden class="anchor" aria-hidden="true" href="#istream-中与位置指针相关的函数">#</a></h5>
<h6 id="移动读指针函数">移动读指针函数<a hidden class="anchor" aria-hidden="true" href="#移动读指针函数">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>istream <span style="color:#af3a03">&amp;</span> seekg(<span style="color:#b57614">long</span> pos); 将读指针设置为pos，即将读指针移动到文件的pos字节处
</span></span><span style="display:flex;"><span>istream <span style="color:#af3a03">&amp;</span> seekg(<span style="color:#b57614">long</span> offset,ios<span style="color:#af3a03">::</span>seek_dir dir); 将读指针按照seek_dir的指示（方向）移动offset个字节。其中seek_dir是在类ios中定义的一个枚举类型。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>seek_dir的常量值含义如下：
</span></span><span style="display:flex;"><span>ios<span style="color:#af3a03">::</span>beg  <span style="color:#928374;font-style:italic">// 流的开始位置 （默认开始的位置）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>ios<span style="color:#af3a03">::</span>cur  <span style="color:#928374;font-style:italic">// 流的当前位置
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>ios<span style="color:#af3a03">::</span>end  <span style="color:#928374;font-style:italic">// 流的结束位置
</span></span></span></code></pre></div><h6 id="返回读指针当前位置值的函数">返回读指针当前位置值的函数<a hidden class="anchor" aria-hidden="true" href="#返回读指针当前位置值的函数">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">long</span> tellg() 函数返回值为流中读指针的当前位置。
</span></span></code></pre></div><h5 id="ostream-中与位置指针相关的函数"><code>ostream</code> 中与位置指针相关的函数<a hidden class="anchor" aria-hidden="true" href="#ostream-中与位置指针相关的函数">#</a></h5>
<h6 id="移动指针函数">移动指针函数<a hidden class="anchor" aria-hidden="true" href="#移动指针函数">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>ostream <span style="color:#af3a03">&amp;</span> seekp(<span style="color:#b57614">long</span> pos); 将写指针设置为pos，即将写指针移动到文件的pos字节处
</span></span><span style="display:flex;"><span>ostream <span style="color:#af3a03">&amp;</span> seekp(<span style="color:#b57614">long</span> offset,ios<span style="color:#af3a03">::</span>seek_dir dir); 将写指针按照seek_dir的指示（方向）移动offset个字节。其中seek_dir是在类ios中定义的一个枚举类型。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>seek_dir的常量值含义如下：
</span></span><span style="display:flex;"><span>ios<span style="color:#af3a03">::</span>beg  <span style="color:#928374;font-style:italic">// 流的开始位置 （默认开始的位置）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>ios<span style="color:#af3a03">::</span>cur  <span style="color:#928374;font-style:italic">// 流的当前位置
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>ios<span style="color:#af3a03">::</span>end  <span style="color:#928374;font-style:italic">// 流的结束位置
</span></span></span></code></pre></div><h6 id="返回写指针当前位置值的函数">返回写指针当前位置值的函数<a hidden class="anchor" aria-hidden="true" href="#返回写指针当前位置值的函数">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#b57614">long</span> tellp() 函数返回值为流中写指针的当前位置。
</span></span></code></pre></div><ul>
<li>
<p>修改程序 8-7 ，观察文件读操作中位置指针的变化(8-11)</p>
</li>
<li>
<p>读取程序 8-7 中 student.dat ，在文件中查找最高分和最低分并显示学生信息。若同时获得最高分只显示第一个</p>
</li>
</ul>
<h1 id="第九章-函数模板与类模板">第九章 函数模板与类模板<a hidden class="anchor" aria-hidden="true" href="#第九章-函数模板与类模板">#</a></h1>
<ul>
<li>函数模板</li>
<li>类模板</li>
<li>模板与继承</li>
</ul>
<h4 id="91-函数模板">9.1 函数模板<a hidden class="anchor" aria-hidden="true" href="#91-函数模板">#</a></h4>
<h5 id="函数模板概念">函数模板概念<a hidden class="anchor" aria-hidden="true" href="#函数模板概念">#</a></h5>
<ol>
<li>
<p>函数模板：在程序设计时不给出相应数据的实际类型，而是<strong>将类型参数化</strong>，在实际编译时，才由编译器利用实际的类型给予实例化，使它满足需要，就像按照模板来制造新的函数一样，这样的函数就是函数模板。</p>
</li>
<li>
<p>将函数模板与某个具体数据类型连用，就产生了<strong>模板函数</strong>，称这个过程为<strong>函数模板实例化</strong>。函数模板实例化的过程由编译器完成</p>
</li>
<li>
<p>在调用函数模板时，<strong>函数参数的类型决定到底使用模板的哪个版本</strong>，即模板的参数是由函数的参数推断出来的。</p>
<ul>
<li>使用虚拟的类型参数。
<ul>
<li>实际的类型来实例化函数时，将函数模板与某个具体的数据类型连用。编译器将以此产生模板函数。</li>
<li>这个过程叫函数模板实例化。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>定义函数模板格式</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">template</span> <span style="color:#af3a03">&lt;</span>类型 参数名,类型 参数名...<span style="color:#af3a03">&gt;</span> 返回值类型名 
</span></span><span style="display:flex;"><span>函数模板名(参数表){
</span></span><span style="display:flex;"><span>	函数具体定义
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>T add(T x,T y)
</span></span></code></pre></div><p>类型 参数名可以是以下两种</p>
<ol>
<li>类型由 <strong>class( 或 typename ) 标识符</strong>，指明函数模板中可以接收的类型参数，<strong>参数名由标识符表示</strong>。</li>
<li><strong>类型说明符标识符</strong>，指明函数模板中可以接收一个<strong>由“类型说明符”所规定类型的常量作为参数</strong></li>
</ol>
<h5 id="函数模板示例">函数模板示例<a hidden class="anchor" aria-hidden="true" href="#函数模板示例">#</a></h5>
<ul>
<li>定义求绝对值的函数模板,并进行不同的调用(9-1)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">template</span> <span style="color:#af3a03">&lt;</span><span style="color:#af3a03">typename</span> T<span style="color:#af3a03">&gt;</span> <span style="color:#928374;font-style:italic">//T 是占位符
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>T abs(T x){  <span style="color:#928374;font-style:italic">//调用函数时自动判断类型 int abs(int n);
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">return</span> x <span style="color:#af3a03">&lt;</span> <span style="color:#8f3f71">0</span> <span style="color:#af3a03">?</span> <span style="color:#af3a03">-</span><span style="color:#9d0006">x</span> : x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> n <span style="color:#af3a03">=</span> <span style="color:#af3a03">-</span><span style="color:#8f3f71">5</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> m <span style="color:#af3a03">=</span> <span style="color:#8f3f71">10</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">double</span> d <span style="color:#af3a03">=</span> <span style="color:#af3a03">-</span><span style="color:#8f3f71">5</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">float</span> f <span style="color:#af3a03">=</span> <span style="color:#8f3f71">3.2</span>;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> n <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;的绝对值：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> abs(n) <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> m <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;的绝对值：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> abs(m) <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> d <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;的绝对值：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> abs(d) <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  cout <span style="color:#af3a03">&lt;&lt;</span> f <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;的绝对值：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> abs(f) <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>函数模板的使用形式与函数类似，但二者有本质的区别主要表现在以下3个方面</p>
<ol>
<li>函数模板本身在编译时不会生成任何目标代码，只有当通过模板生成具体的函数实例时才会生成目标代码.</li>
<li>被多个源文件引用的函数模板，应当连同函数体一同放在头文件中，而不能像普通函数那样只将声明放在头文件</li>
<li><strong>函数指针只能指向模板的实例</strong>，而不能指向模板本身</li>
</ol>
<p>定义对象交换的函数模板</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">template</span> <span style="color:#af3a03">&lt;</span><span style="color:#af3a03">class</span> T<span style="color:#af3a03">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> Swap(T <span style="color:#af3a03">&amp;</span>x,T <span style="color:#af3a03">&amp;</span>y){ <span style="color:#928374;font-style:italic">//可以交换类对象，参数用的是引用
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	T tmp <span style="color:#af3a03">=</span> x; <span style="color:#928374;font-style:italic">//类类型 T
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	x<span style="color:#af3a03">=</span>y;y<span style="color:#af3a03">=</span>tmp;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> myDate{
</span></span><span style="display:flex;"><span>	<span style="color:#af3a03">public</span><span style="color:#af3a03">:</span><span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		myDate();<span style="color:#928374;font-style:italic">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>		myDate(<span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>, <span style="color:#b57614">int</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">void</span> printDate0 <span style="color:#af3a03">const</span>; <span style="color:#928374;font-style:italic">//成员函数，输出
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#af3a03">private</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#b57614">int</span> year,month,day;<span style="color:#928374;font-style:italic">//成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(){ <span style="color:#928374;font-style:italic">//定义无参数的构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	year<span style="color:#af3a03">=</span><span style="color:#8f3f71">1970</span>;
</span></span><span style="display:flex;"><span>	month<span style="color:#af3a03">=</span>l;
</span></span><span style="display:flex;"><span>	day<span style="color:#af3a03">=</span>l;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>myDate<span style="color:#af3a03">::</span>myDate(inty,<span style="color:#b57614">int</span> m,intd){ <span style="color:#928374;font-style:italic">//定义3个参数的构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	year<span style="color:#af3a03">=</span>y;month<span style="color:#af3a03">=</span>m;day<span style="color:#af3a03">=</span>d;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#b57614">void</span> myDate<span style="color:#af3a03">::</span>printDate() <span style="color:#af3a03">const</span>{ <span style="color:#928374;font-style:italic">//定义成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	cout<span style="color:#af3a03">&lt;&lt;</span>year<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;/&#34;</span><span style="color:#af3a03">&lt;&lt;</span>month<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;/&#34;</span><span style="color:#af3a03">&lt;&lt;</span><span style="color:#9d0006">day</span>:<span style="color:#af3a03">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>	<span style="color:#b57614">int</span> n<span style="color:#af3a03">=</span>l, m<span style="color:#af3a03">=</span><span style="color:#8f3f71">2</span>;
</span></span><span style="display:flex;"><span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;交换前: n=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>n<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;m=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>m<span style="color:#af3a03">&lt;&lt;</span>endl; <span style="color:#928374;font-style:italic">//编译器自动生成void Swap(int &amp;,int &amp;)函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	Swap(n, m);cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;交换后:n=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>n<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;m=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>m<span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>	<span style="color:#928374;font-style:italic">//交换前:n=1 m=2 交换后:n=2 m=1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	<span style="color:#b57614">double</span> f<span style="color:#af3a03">=</span><span style="color:#8f3f71">1.2</span>,g<span style="color:#af3a03">=</span><span style="color:#8f3f71">2.3</span>;
</span></span><span style="display:flex;"><span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;交换前:f&#34;</span><span style="color:#af3a03">&lt;&lt;</span>f<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;g=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>g<span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>	Swap(f,g); <span style="color:#928374;font-style:italic">//编译器自动生成void Swap(double &amp;,double &amp;)函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;交换后:f&#34;</span><span style="color:#af3a03">&lt;&lt;</span>f<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;g=&#34;</span><span style="color:#af3a03">&lt;&lt;</span>g<span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>	<span style="color:#928374;font-style:italic">//交换前:f=1.2 g=2.3 交换后:f=2.3 g=1.2
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>	
</span></span></code></pre></div><p>生成模板函数的过程
编译器<strong>由函数模板自动生成模板函数时</strong>，会用具体的类型名对模板中所有的类型参数进行替换，其他部分则原封不动地保留。<strong>同一个类型参数只能替换为同一种类型</strong>。编译器在编译到调用函数模板的语句时，会根据实参类型判断该如何替换模板中的类型参数。</p>
<h5 id="函数或函数模板调用语句的匹配顺序">函数或函数模板调用语句的匹配顺序<a hidden class="anchor" aria-hidden="true" href="#函数或函数模板调用语句的匹配顺序">#</a></h5>
<ol>
<li>
<p>函数可以重载，函数模板可以重载，只要形参不同</p>
</li>
<li>
<p>函数与函数模板名相同，一条函数调用语句该匹配哪个函数或模板？</p>
<ol>
<li>先找参数完全匹配的普通函数（不是由模板实例化得到的模板函数）</li>
<li>再找参数完全匹配的模板函数</li>
<li>再找实参经过自动类型转换后能够匹配的普通函数</li>
<li>如上面都找不到，则报错</li>
</ol>
</li>
</ol>
<h4 id="92-类模板">9.2 类模板<a hidden class="anchor" aria-hidden="true" href="#92-类模板">#</a></h4>
<h5 id="类模板概念">类模板概念<a hidden class="anchor" aria-hidden="true" href="#类模板概念">#</a></h5>
<ol>
<li>类是对一组对象的公共性质的抽象，而类模板则<strong>是对不同类的公共性质的抽象</strong>。</li>
<li>使用泛型数据类型替代实际的数据类型来说明成员变量，从而定义一个<strong>泛型类</strong>。</li>
<li>类模板<strong>需要一种或多种类型参数</strong>，所以也称为<strong>参数化类</strong></li>
<li><strong>类</strong>是相同类型事物的抽象，有继承关系的类可以具有不同的操作。<strong>类模板</strong>是不同类型的事物具有相同的操作，实例化后的类之间没有联系，相互独立。</li>
</ol>
<ul>
<li>声明类模板</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">template</span> <span style="color:#af3a03">&lt;</span>模板参数表<span style="color:#af3a03">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">class</span> 类模板名{
</span></span><span style="display:flex;"><span>	类体定义
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f3f71">1.</span> <span style="color:#af3a03">template</span> 为关键字
</span></span><span style="display:flex;"><span><span style="color:#8f3f71">2.</span> <span style="color:#af3a03">&lt;</span>模板参数表<span style="color:#af3a03">&gt;</span>通常格式为 <span style="color:#af3a03">&lt;</span><span style="color:#af3a03">class</span> T<span style="color:#af3a03">&gt;</span>或<span style="color:#af3a03">&lt;</span><span style="color:#af3a03">typename</span> T<span style="color:#af3a03">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8f3f71">3.</span> 类模板和函数模板的声明方法及参数格式是相同的，不同的是在类模板参数表之后还有类声明。
</span></span></code></pre></div><ul>
<li>类模板的成员函数如在类体内进行说明，自动成为内联函数。</li>
<li>在类模板以外定义其成员函数，则要采用以下格式：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#af3a03">template</span> <span style="color:#af3a03">&lt;</span>模板参数表<span style="color:#af3a03">&gt;</span>
</span></span><span style="display:flex;"><span>返回类型名 类模板名 <span style="color:#af3a03">&lt;</span>模板参数标识符列表<span style="color:#af3a03">&gt;::</span>成员函数名(参数表){
</span></span><span style="display:flex;"><span>	函数体
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>使用类模板创建对象, 给出 类型形参/普通形参/实参
<ul>
<li><code>类模板名 &lt;模板参数表&gt; 对象名1, ... ,对象名n;</code></li>
<li><code>类模板名 &lt;模板参数表&gt; 对象名1(构造函数实参), ... ,对象名n(构造函数实参)；</code></li>
<li>由类模板实例化的类叫模板类</li>
</ul>
</li>
</ul>
<h5 id="类模板示例">类模板示例<a hidden class="anchor" aria-hidden="true" href="#类模板示例">#</a></h5>
<ul>
<li>
<p>二元数组类模板(9-6)</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#427b58">#include</span> <span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>  <span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">template</span> <span style="color:#af3a03">&lt;</span><span style="color:#af3a03">class</span> T1, <span style="color:#af3a03">class</span> T2<span style="color:#af3a03">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">class</span> Pair{  <span style="color:#928374;font-style:italic">// 类模板Pair
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">public</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        T1 first;
</span></span><span style="display:flex;"><span>        T2 second;
</span></span><span style="display:flex;"><span>        Pair(T1 k, T2 v)<span style="color:#af3a03">:</span>first(k),second(v) {}
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">bool</span> <span style="color:#af3a03">operator</span><span style="color:#af3a03">&lt;</span>(<span style="color:#af3a03">const</span> Pair<span style="color:#af3a03">&lt;</span>T1, T2<span style="color:#af3a03">&gt;</span> <span style="color:#af3a03">&amp;</span>p) <span style="color:#af3a03">const</span>; <span style="color:#928374;font-style:italic">// operator重载函数
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">template</span> <span style="color:#af3a03">&lt;</span><span style="color:#af3a03">class</span> T1, <span style="color:#af3a03">class</span> T2<span style="color:#af3a03">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">bool</span> Pair<span style="color:#af3a03">&lt;</span>T1, T2<span style="color:#af3a03">&gt;::</span><span style="color:#af3a03">operator</span><span style="color:#af3a03">&lt;</span>(<span style="color:#af3a03">const</span> Pair<span style="color:#af3a03">&lt;</span>T1, T2<span style="color:#af3a03">&gt;</span> <span style="color:#af3a03">&amp;</span>p) <span style="color:#af3a03">const</span>{  <span style="color:#928374;font-style:italic">// Pair的成员函数 operator
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> first <span style="color:#af3a03">&lt;</span> p.first;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    Pair<span style="color:#af3a03">&lt;</span>string, <span style="color:#b57614">int</span><span style="color:#af3a03">&gt;</span> student1(<span style="color:#79740e">&#34;Tom&#34;</span>, <span style="color:#8f3f71">19</span>); <span style="color:#928374;font-style:italic">// 实例化一个类Pair&lt;sting,int&gt;,同时声明一个对象student1
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#928374;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    Pair<span style="color:#af3a03">&lt;</span>string, <span style="color:#b57614">int</span><span style="color:#af3a03">&gt;</span> student2(<span style="color:#79740e">&#34;Jim&#34;</span>, <span style="color:#8f3f71">21</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    Pair<span style="color:#af3a03">&lt;</span>string, string<span style="color:#af3a03">&gt;</span> dic(<span style="color:#79740e">&#34;word&#34;</span>, <span style="color:#79740e">&#34;danci&#34;</span>); <span style="color:#928374;font-style:italic">// 实例化一个字典项（“word&#34;,&#34;单词&#34;）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    Pair<span style="color:#af3a03">&lt;</span><span style="color:#b57614">int</span>, <span style="color:#b57614">int</span><span style="color:#af3a03">&gt;</span> coordinate(<span style="color:#8f3f71">10</span>, <span style="color:#8f3f71">20</span>); <span style="color:#928374;font-style:italic">// 实例化一个点的坐标（10,20）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;学生：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> student1.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> student1.second <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;学生：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> student2.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> student2.second <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;坐标：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> coordinate.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> coordinate.second <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;学生：&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> dic.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34; &#34;</span> <span style="color:#af3a03">&lt;&lt;</span> dic.second <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">bool</span> a <span style="color:#af3a03">=</span> student1 <span style="color:#af3a03">&lt;</span> student2;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">if</span> (a <span style="color:#af3a03">==</span> <span style="color:#8f3f71">0</span>)
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> student1.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;位于&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> student2.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;之后&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">else</span>
</span></span><span style="display:flex;"><span>      cout <span style="color:#af3a03">&lt;&lt;</span> student1.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;位于&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> student2.first <span style="color:#af3a03">&lt;&lt;</span> <span style="color:#79740e">&#34;之前&#34;</span> <span style="color:#af3a03">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
</ul>
<ol start="3">
<li>类模板与继承</li>
</ol>
<p>类模板和类模板之间、类模板和类之间可以相互继承，派生关系的四种情况</p>
<ol>
<li>普通类继承模板类</li>
<li>类模板继承普通类</li>
<li>类模板继承类模板</li>
<li>类模板继承模板类
根据类模板实例化的类即是模板类。</li>
</ol>
<h1 id="附录-vscode-配置文件">附录 VScode 配置文件<a hidden class="anchor" aria-hidden="true" href="#附录-vscode-配置文件">#</a></h1>
<h2 id="编译环境-tdm-gcc">编译环境 TDM-GCC<a hidden class="anchor" aria-hidden="true" href="#编译环境-tdm-gcc">#</a></h2>
<ol>
<li>
<p><code>c_cpp_properties.json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;configurations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#9d0006">&#34;name&#34;</span>: <span style="color:#79740e">&#34;Win32&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#9d0006">&#34;includePath&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#79740e">&#34;${workspaceFolder}/**&#34;</span>
</span></span><span style="display:flex;"><span>            ],
</span></span><span style="display:flex;"><span>            <span style="color:#9d0006">&#34;defines&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#79740e">&#34;_DEBUG&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#79740e">&#34;UNICODE&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#79740e">&#34;_UNICODE&#34;</span>
</span></span><span style="display:flex;"><span>            ],
</span></span><span style="display:flex;"><span>            <span style="color:#9d0006">&#34;intelliSenseMode&#34;</span>: <span style="color:#79740e">&#34;msvc-x64&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;version&#34;</span>: <span style="color:#8f3f71">4</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p><code>launch.json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#79740e">&#34;version&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;0.2.0&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#79740e">&#34;configurations&#34;</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;name&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;(gdb) Launch&#34;</span>, <span style="color:#928374;font-style:italic">// 配置名称，将会在启动配置的下拉菜单中显示
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;type&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;cppdbg&#34;</span>, <span style="color:#928374;font-style:italic">// 配置类型，这里只能为cppdbg
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;request&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;launch&#34;</span>, <span style="color:#928374;font-style:italic">// 请求配置类型，可以为launch（启动）或attach（附加）
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;program&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;${workspaceRoot}/${fileBasenameNoExtension}.exe&#34;</span>, <span style="color:#928374;font-style:italic">// 将要进行调试的程序的路径
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;args&#34;</span><span style="color:#af3a03">:</span> [], <span style="color:#928374;font-style:italic">// 程序调试时传递给程序的命令行参数，一般设为空即可
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;stopAtEntry&#34;</span><span style="color:#af3a03">:</span> <span style="color:#b57614">false</span>, <span style="color:#928374;font-style:italic">// 设为true时程序将暂停在程序入口处，一般设置为false
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;cwd&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;${workspaceRoot}&#34;</span>, <span style="color:#928374;font-style:italic">// 调试程序时的工作目录，一般为${workspaceRoot}即代码所在目录
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;environment&#34;</span><span style="color:#af3a03">:</span> [],
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;externalConsole&#34;</span><span style="color:#af3a03">:</span> <span style="color:#b57614">false</span>, <span style="color:#928374;font-style:italic">// 调试时是否显示控制台窗口，一般设置为true显示控制台
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;MIMode&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;gdb&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;miDebuggerPath&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;C:</span><span style="color:#79740e">\\</span><span style="color:#79740e">TDM-GCC-64</span><span style="color:#79740e">\\</span><span style="color:#79740e">bin</span><span style="color:#79740e">\\</span><span style="color:#79740e">gdb64.exe&#34;</span>, <span style="color:#928374;font-style:italic">// miDebugger的路径，注意这里要与MinGw的路径对应
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;preLaunchTask&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;g++&#34;</span>, <span style="color:#928374;font-style:italic">// 调试会话开始前执行的任务，一般为编译程序，c++为g++, c为gcc
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#79740e">&#34;setupCommands&#34;</span><span style="color:#af3a03">:</span> [{
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;description&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;Enable pretty-printing for gdb&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;text&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;-enable-pretty-printing&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;ignoreFailures&#34;</span><span style="color:#af3a03">:</span> <span style="color:#b57614">true</span>
</span></span><span style="display:flex;"><span>      }]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p><code>tasks.json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#79740e">&#34;version&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;2.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#79740e">&#34;tasks&#34;</span><span style="color:#af3a03">:</span> [{
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#34;label&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;g++&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#34;command&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;g++&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#34;args&#34;</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;-g&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;${file}&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;-o&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;${fileDirname}/${fileBasenameNoExtension}.exe&#34;</span>
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#34;problemMatcher&#34;</span><span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;owner&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;cpp&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;fileLocation&#34;</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;relative&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;${workspaceRoot}&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;pattern&#34;</span><span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;regexp&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;^(.*):(</span><span style="color:#79740e">\\</span><span style="color:#79740e">d+):(</span><span style="color:#79740e">\\</span><span style="color:#79740e">d+):</span><span style="color:#79740e">\\</span><span style="color:#79740e">s+(warning|error):</span><span style="color:#79740e">\\</span><span style="color:#79740e">s+(.*)$&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;file&#34;</span><span style="color:#af3a03">:</span> <span style="color:#8f3f71">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;line&#34;</span><span style="color:#af3a03">:</span> <span style="color:#8f3f71">2</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;column&#34;</span><span style="color:#af3a03">:</span> <span style="color:#8f3f71">3</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;severity&#34;</span><span style="color:#af3a03">:</span> <span style="color:#8f3f71">4</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#34;message&#34;</span><span style="color:#af3a03">:</span> <span style="color:#8f3f71">5</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#34;group&#34;</span><span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;kind&#34;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#34;build&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#34;isDefault&#34;</span><span style="color:#af3a03">:</span> <span style="color:#b57614">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ol>
<h1 id="附录-基本数据类型">附录 基本数据类型<a hidden class="anchor" aria-hidden="true" href="#附录-基本数据类型">#</a></h1>
<h2 id="基本的内置类型">基本的内置类型<a hidden class="anchor" aria-hidden="true" href="#基本的内置类型">#</a></h2>
<p>C++ 为程序员提供了种类丰富的内置数据类型和用户自定义的数据类型。下表列出了七种基本的 C++ 数据类型：</p>
<table>
<thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">关键字</th>
<th style="text-align:left">长度</th>
<th style="text-align:left">取值范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">布尔型</td>
<td style="text-align:left">bool</td>
<td style="text-align:left">1</td>
<td style="text-align:left">true / false</td>
</tr>
<tr>
<td style="text-align:left">字符型</td>
<td style="text-align:left">char</td>
<td style="text-align:left">1</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">整型</td>
<td style="text-align:left">int</td>
<td style="text-align:left">4</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">浮点型</td>
<td style="text-align:left">float</td>
<td style="text-align:left">4</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">双浮点型</td>
<td style="text-align:left">double</td>
<td style="text-align:left">8</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">无类型</td>
<td style="text-align:left">void</td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left">宽字符型</td>
<td style="text-align:left">wchar_t</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>关键字 signed、unsigned、short、long 被称为修饰符</p>
<table>
<thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">位</th>
<th style="text-align:left">范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">char</td>
<td style="text-align:left">1 个字节</td>
<td style="text-align:left">-128 到 127 或者 0 到 255</td>
</tr>
<tr>
<td style="text-align:left">unsigned char</td>
<td style="text-align:left">1 个字节</td>
<td style="text-align:left">0 到 255</td>
</tr>
<tr>
<td style="text-align:left">signed char</td>
<td style="text-align:left">1 个字节</td>
<td style="text-align:left">-128 到 127</td>
</tr>
<tr>
<td style="text-align:left">int</td>
<td style="text-align:left">4 个字节</td>
<td style="text-align:left">-2147483648 到 2147483647</td>
</tr>
<tr>
<td style="text-align:left">unsigned int</td>
<td style="text-align:left">4 个字节</td>
<td style="text-align:left">0 到 4294967295</td>
</tr>
<tr>
<td style="text-align:left">signed int</td>
<td style="text-align:left">4 个字节</td>
<td style="text-align:left">-2147483648 到 2147483647</td>
</tr>
<tr>
<td style="text-align:left">short int</td>
<td style="text-align:left">2 个字节</td>
<td style="text-align:left">-32768 到 32767</td>
</tr>
<tr>
<td style="text-align:left">unsigned short int</td>
<td style="text-align:left">2 个字节</td>
<td style="text-align:left">0 到 65,535</td>
</tr>
<tr>
<td style="text-align:left">signed short int</td>
<td style="text-align:left">2 个字节</td>
<td style="text-align:left">-32768 到 32767</td>
</tr>
<tr>
<td style="text-align:left">long int</td>
<td style="text-align:left">8 个字节</td>
<td style="text-align:left">-9,223,372,036,854,775,808 到 9,223,372,036,854,775,807</td>
</tr>
<tr>
<td style="text-align:left">signed long int</td>
<td style="text-align:left">8 个字节</td>
<td style="text-align:left">-9,223,372,036,854,775,808 到 9,223,372,036,854,775,807</td>
</tr>
<tr>
<td style="text-align:left">unsigned long int</td>
<td style="text-align:left">8 个字节</td>
<td style="text-align:left">0 到 18,446,744,073,709,551,615</td>
</tr>
<tr>
<td style="text-align:left">float</td>
<td style="text-align:left">4 个字节</td>
<td style="text-align:left">精度型占4个字节（32位）内存空间，+/- 3.4e +/- 38 (~7 个数字)</td>
</tr>
<tr>
<td style="text-align:left">double</td>
<td style="text-align:left">8 个字节</td>
<td style="text-align:left">双精度型占8 个字节（64位）内存空间，+/- 1.7e +/- 308 (~15 个数字)</td>
</tr>
<tr>
<td style="text-align:left">long double</td>
<td style="text-align:left">16 个字节</td>
<td style="text-align:left">长双精度型 16 个字节（128位）内存空间，可提供18-19位有效数字。</td>
</tr>
<tr>
<td style="text-align:left">wchar_t</td>
<td style="text-align:left">2 或 4 个字节</td>
<td style="text-align:left">1 个宽字符</td>
</tr>
</tbody>
</table>
<p>特别的，当用 short 或 long 修饰 int 时，int 可省略不写，表示短整型数据或长整型数据。</p>
<blockquote>
<p>type:           <strong><strong><strong><strong><strong><strong>size</strong></strong></strong></strong></strong></strong>**
bool:           所占字节数：1   最大值：1               最小值：0
char:           所占字节数：1   最大值：               最小值：
signed char:    所占字节数：1   最大值：               最小值：
unsigned char:  所占字节数：1   最大值：                最小值：
wchar_t:        所占字节数：2   最大值：65535           最小值：0
short:          所占字节数：2   最大值：32767           最小值：-32768
int:            所占字节数：4   最大值：2147483647      最小值：-2147483648
unsigned:       所占字节数：4   最大值：4294967295      最小值：0
long:           所占字节数：4   最大值：2147483647      最小值：-2147483648
unsigned long:  所占字节数：4   最大值：4294967295      最小值：0
double:         所占字节数：8   最大值：1.79769e+308    最小值：2.22507e-308
long double:    所占字节数：16  最大值：1.18973e+4932   最小值：3.3621e-4932
float:          所占字节数：4   最大值：3.40282e+38     最小值：1.17549e-38
size_t:         所占字节数：8   最大值：18446744073709551615    最小值：0
string:         所占字节数：32
type:           <strong><strong><strong><strong><strong><strong>size</strong></strong></strong></strong></strong></strong>**</p>
</blockquote>
<h2 id="typedef-声明">typedef 声明<a hidden class="anchor" aria-hidden="true" href="#typedef-声明">#</a></h2>
<p>您可以使用 <strong>typedef</strong> 为一个已有的类型取一个新的名字。下面是使用 typedef 定义一个新类型的语法：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>typedef type newname; 
</span></span></code></pre></div><p>例如，下面的语句会告诉编译器，feet 是 int 的另一个名称：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>typedef int feet;
</span></span></code></pre></div><p>现在，下面的声明是完全合法的，它创建了一个整型变量 distance：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>feet distance;
</span></span></code></pre></div><h2 id="枚举类型">枚举类型<a hidden class="anchor" aria-hidden="true" href="#枚举类型">#</a></h2>
<p>枚举类型(enumeration)是C++中的一种派生数据类型，它是由用户定义的若干枚举常量的集合。</p>
<p>如果一个变量只有几种可能的值，可以定义为枚举(enumeration)类型。所谓&quot;枚举&quot;是指将变量的值一一列举出来，变量的值只能在列举出来的值的范围内。</p>
<p>创建枚举，需要使用关键字 <strong>enum</strong>。枚举类型的一般形式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>enum 枚举名{ 
</span></span><span style="display:flex;"><span>     标识符[=整型常数], 
</span></span><span style="display:flex;"><span>     标识符[=整型常数], 
</span></span><span style="display:flex;"><span>... 
</span></span><span style="display:flex;"><span>    标识符[=整型常数]
</span></span><span style="display:flex;"><span>} 枚举变量;
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></div><p>如果枚举没有初始化, 即省掉&rdquo;=整型常数&quot;时, 则从第一个标识符开始。</p>
<p>例如，下面的代码定义了一个颜色枚举，变量 c 的类型为 color。最后，c 被赋值为 &ldquo;blue&rdquo;。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>enum color { red, green, blue } c;
</span></span><span style="display:flex;"><span>c = blue;
</span></span></code></pre></div><p>默认情况下，第一个名称的值为 0，第二个名称的值为 1，第三个名称的值为 2，以此类推。但是，您也可以给名称赋予一个特殊的值，只需要添加一个初始值即可。例如，在下面的枚举中，<strong>green</strong> 的值为 5。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>enum color { red, green=5, blue };
</span></span></code></pre></div><p>在这里，<strong>blue</strong> 的值为 6，因为默认情况下，每个名称都会比它前面一个名称大 1，但 red 的值依然为 0。</p>
<h1 id="附录-cmath-常用函数">附录 cmath 常用函数：<a hidden class="anchor" aria-hidden="true" href="#附录-cmath-常用函数">#</a></h1>
<h2 id="取绝对值">取绝对值<a hidden class="anchor" aria-hidden="true" href="#取绝对值">#</a></h2>
<p><code>fabs(double)</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#include&lt;iostream&gt;
</span></span><span style="display:flex;"><span>#include&lt;math.h&gt;
</span></span><span style="display:flex;"><span>using namespace std;
</span></span><span style="display:flex;"><span>int main()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	double a=-12.1;
</span></span><span style="display:flex;"><span>	a=fabs(a);
</span></span><span style="display:flex;"><span>	cout&lt;&lt;a;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span> } 
</span></span><span style="display:flex;"><span>12345678910
</span></span></code></pre></div><p>结果返回double类型：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>12.1
</span></span><span style="display:flex;"><span>1
</span></span></code></pre></div><h2 id="向上取整和向下取整">向上取整和向下取整<a hidden class="anchor" aria-hidden="true" href="#向上取整和向下取整">#</a></h2>
<p><code>floor（double）和ceil（double）</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#include&lt;iostream&gt;
</span></span><span style="display:flex;"><span>#include&lt;math.h&gt;
</span></span><span style="display:flex;"><span>using namespace std;
</span></span><span style="display:flex;"><span>int main()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	double a=-12.1,b,c;
</span></span><span style="display:flex;"><span>	b=floor(a);//向下取整
</span></span><span style="display:flex;"><span>	c=ceil(a);//向上取整
</span></span><span style="display:flex;"><span>	cout&lt;&lt;b&lt;&lt;endl&lt;&lt;c&lt;&lt;endl;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span> } 
</span></span><span style="display:flex;"><span>1234567891011
</span></span></code></pre></div><p>结果返回double类型：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>-13
</span></span><span style="display:flex;"><span>-12
</span></span><span style="display:flex;"><span>12
</span></span></code></pre></div><h2 id="次方函数">次方函数<a hidden class="anchor" aria-hidden="true" href="#次方函数">#</a></h2>
<p><code>pow（double a，double b）</code></p>
<p>返回a的b次方，double类型。</p>
<h2 id="开平方根函数">开平方根函数<a hidden class="anchor" aria-hidden="true" href="#开平方根函数">#</a></h2>
<p><code>sqrt（double x）</code></p>
<p>返回根号a，double类型。</p>
<h2 id="log函数">log函数<a hidden class="anchor" aria-hidden="true" href="#log函数">#</a></h2>
<p><code>log（double x）</code></p>
<p>返回以自然对数为底的对数。</p>
<h2 id="三角函数">三角函数<a hidden class="anchor" aria-hidden="true" href="#三角函数">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#include&lt;iostream&gt;
</span></span><span style="display:flex;"><span>#include&lt;math.h&gt;
</span></span><span style="display:flex;"><span>using namespace std;
</span></span><span style="display:flex;"><span>int main()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	double pi=acos(-1);
</span></span><span style="display:flex;"><span>	double a=sin(pi*45/180);
</span></span><span style="display:flex;"><span>	double b=cos(pi*45/180);
</span></span><span style="display:flex;"><span>	double c=tan(pi*45/180);
</span></span><span style="display:flex;"><span>	cout&lt;&lt;a&lt;&lt;endl&lt;&lt;b&lt;&lt;endl&lt;&lt;c;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span> } 
</span></span><span style="display:flex;"><span>123456789101112
</span></span></code></pre></div><p>pi是圆周率的精确定义，注意这里用的是弧度制，而不是角度制，返回：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>-0.707107
</span></span><span style="display:flex;"><span>-0.707107
</span></span><span style="display:flex;"><span>1.000000
</span></span><span style="display:flex;"><span>123
</span></span></code></pre></div><h2 id="四舍五入函数">四舍五入函数<a hidden class="anchor" aria-hidden="true" href="#四舍五入函数">#</a></h2>
<p><code>round（double x）</code></p>
<p>返回x的四舍五入，double类型</p>
<h1 id="附录-转义字符">附录 转义字符<a hidden class="anchor" aria-hidden="true" href="#附录-转义字符">#</a></h1>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>意义</th>
<th>ASCII码值（十进制）</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\a</code></td>
<td>响铃(BEL)</td>
<td>007</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>退格(BS) ，将当前位置移到前一列</td>
<td>008</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>换页(FF)，将当前位置移到下页开头</td>
<td>012</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>换行(LF) ，将当前位置移到下一行开头</td>
<td>010</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>回车(CR) ，将当前位置移到本行开头</td>
<td>013</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>水平制表(HT)</td>
<td>009</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>垂直制表(VT)</td>
<td>011</td>
</tr>
<tr>
<td><code>\'</code></td>
<td>单引号</td>
<td>039</td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td>双引号</td>
<td>034</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>反斜杠</td>
<td>092</td>
</tr>
</tbody>
</table>
<p><code>\n</code>和<code>\t</code>是最常用的两个转义字符：</p>
<ul>
<li><code>\n</code>用来换行，让文本从下一行的开头输出，前面的章节中已经多次使用；</li>
<li><code>\t</code>用来占位，一般相当于四个空格，或者 tab 键的功能。</li>
</ul>
<p>单引号、双引号、反斜杠是特殊的字符，不能直接表示：</p>
<ul>
<li>单引号是字符类型的开头和结尾，要使用<code>\'</code>表示，也即<code>'\''</code>；</li>
<li>双引号是字符串的开头和结尾，要使用<code>\&quot;</code>表示，也即<code>&quot;abc\&quot;123&quot;</code>；</li>
<li>反斜杠是转义字符的开头，要使用<code>\\</code>表示，也即<code>'\\'</code>，或者<code>&quot;abc\\123&quot;</code>。</li>
</ul>
<h1 id="附录-运算符结合性">附录 运算符结合性<a hidden class="anchor" aria-hidden="true" href="#附录-运算符结合性">#</a></h1>
<p><img loading="lazy" src="C&#43;&#43;%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1.assets/image-20200917113601275.png" alt="image-20200917113601275"  />
</p>
<p><img loading="lazy" src="C&#43;&#43;%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1.assets/image-20200917113625624.png" alt="image-20200917113625624"  />
</p>
<p><img loading="lazy" src="C&#43;&#43;%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1.assets/image-20200917113648238.png" alt="image-20200917113648238"  />
</p>
<h2 id="一些容易出错的优先级问题">一些容易出错的优先级问题<a hidden class="anchor" aria-hidden="true" href="#一些容易出错的优先级问题">#</a></h2>
<p>上表中，优先级同为1 的几种运算符如果同时出现，那怎么确定表达式的优先级呢？这是很多初学者迷糊的地方。下表就整理了这些容易出错的情况：</p>
<p><img loading="lazy" src="http://c.biancheng.net/cpp/uploads/allimg/120205/1-120205192420113.jpg" alt="img"  />
</p>
<p>这些容易出错的情况，希望读者好好在编译器上调试调试，这样印象会深一些。一定要多调试，光靠看代码，水平是很难提上来的。调试代码才是最长水平的。</p>
<p>continue：结束本次循环，所在循环体并未结束。
brake：结束整个循环体，所在循环体已结束。
goto：goto 语句允许把控制无条件转移到同一函数内的标记语句。</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#af3a03">goto</span> label;
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#9d0006">label</span>: statement;
</span></span></code></pre></div><p>当执行 <code>goto label;</code> 语句时，直接跳转并执行 <code>label</code> 标记的语句。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#427b58">#include</span><span style="color:#427b58;font-style:italic">&lt;iostream&gt;</span><span style="color:#427b58">
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span><span style="color:#af3a03">using</span> <span style="color:#af3a03">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b57614">int</span> <span style="color:#b57614">main</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">int</span> i<span style="color:#af3a03">=</span><span style="color:#8f3f71">3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">if</span> (i<span style="color:#af3a03">==</span><span style="color:#8f3f71">3</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">goto</span> acc;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">else</span>{
</span></span><span style="display:flex;"><span>        cout<span style="color:#af3a03">&lt;&lt;</span>i<span style="color:#af3a03">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">acc</span>:cout<span style="color:#af3a03">&lt;&lt;</span><span style="color:#79740e">&#34;acc&#34;</span><span style="color:#af3a03">&lt;&lt;</span>endl; <span style="color:#928374;font-style:italic">//执行 goto acc 时跳转至本条语句。
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">return</span> <span style="color:#8f3f71">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h6 id="构造函数">构造函数<a hidden class="anchor" aria-hidden="true" href="#构造函数">#</a></h6>
<p>使用 new 创建对象指针</p>
<ol>
<li>加括号, 系统为成员变量分配内存的同时，将其初始化为 0</li>
<li>不加括号时, 系统只为成员变量分配内存空间，但不进行内存的初始化，成员变量的值是随机值。</li>
</ol>
<h6 id="析构函数">析构函数<a hidden class="anchor" aria-hidden="true" href="#析构函数">#</a></h6>
<p><strong>析构函数的作用：在对象在消亡时自动调用析构函数，释放由析构函数分配的内存</strong></p>
<ol>
<li>一个类仅有一个析构函数，且不能声明参数<strong>无参数, 无返回值，不能重载</strong>。</li>
<li>如果没有定义析构函数，则自动生成默认的析构函数，默认的析构函数的函数体为空。</li>
<li><strong>后创建先析构</strong></li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://bablvsj.github.io/tags/exams/">exams</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://bablvsj.github.io/posts/exams/english-%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-%E4%B8%87%E8%83%BD%E5%8F%A5%E5%AD%90%E5%92%8C%E5%86%99%E4%BD%9C%E6%A8%A1%E6%9D%BF/">
    <span class="title">« Prev</span>
    <br>
    <span>English 第四部分 万能句子和写作模板</span>
  </a>
  <a class="next" href="https://bablvsj.github.io/posts/tech/wait/01-html/03-%E5%88%9D%E8%AF%86html/">
    <span class="title">Next »</span>
    <br>
    <span>初识HTML</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://bablvsj.github.io">Bablvsj&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <div class="flex-c-d">
        <a class="flex-d-c" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"
            target="_blank"> <span>本站由</span><img width="60" src="/images/upyun.png">提供CDN加速/云存储服务</a>
    </div>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
